var dV=Object.defineProperty;var fV=(t,e,n)=>e in t?dV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Wb=(t,e,n)=>fV(t,typeof e!="symbol"?e+"":e,n);function hV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var Gye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yb={exports:{}},Rf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC;function mV(){if(AC)return Rf;AC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,s){var c=null;if(s!==void 0&&(c=""+s),a.key!==void 0&&(c=""+a.key),"key"in a){s={};for(var d in a)d!=="key"&&(s[d]=a[d])}else s=a;return a=s.ref,{$$typeof:t,type:r,key:c,ref:a!==void 0?a:null,props:s}}return Rf.Fragment=e,Rf.jsx=n,Rf.jsxs=n,Rf}var NC;function pV(){return NC||(NC=1,Yb.exports=mV()),Yb.exports}var l=pV(),Qb={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC;function gV(){if(TC)return Be;TC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,S={};function k(q,ae,ge){this.props=q,this.context=ae,this.refs=S,this.updater=ge||E}k.prototype.isReactComponent={},k.prototype.setState=function(q,ae){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ae,"setState")},k.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function z(){}z.prototype=k.prototype;function M(q,ae,ge){this.props=q,this.context=ae,this.refs=S,this.updater=ge||E}var T=M.prototype=new z;T.constructor=M,j(T,k.prototype),T.isPureReactComponent=!0;var R=Array.isArray;function V(){}var N={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function C(q,ae,ge){var ye=ge.ref;return{$$typeof:t,type:q,key:ae,ref:ye!==void 0?ye:null,props:ge}}function D(q,ae){return C(q.type,ae,q.props)}function O(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function U(q){var ae={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ge){return ae[ge]})}var $=/\/+/g;function Z(q,ae){return typeof q=="object"&&q!==null&&q.key!=null?U(""+q.key):ae.toString(36)}function he(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(V,V):(q.status="pending",q.then(function(ae){q.status==="pending"&&(q.status="fulfilled",q.value=ae)},function(ae){q.status==="pending"&&(q.status="rejected",q.reason=ae)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Y(q,ae,ge,ye,Te){var Oe=typeof q;(Oe==="undefined"||Oe==="boolean")&&(q=null);var Pe=!1;if(q===null)Pe=!0;else switch(Oe){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(q.$$typeof){case t:case e:Pe=!0;break;case p:return Pe=q._init,Y(Pe(q._payload),ae,ge,ye,Te)}}if(Pe)return Te=Te(q),Pe=ye===""?"."+Z(q,0):ye,R(Te)?(ge="",Pe!=null&&(ge=Pe.replace($,"$&/")+"/"),Y(Te,ae,ge,"",function(Ve){return Ve})):Te!=null&&(O(Te)&&(Te=D(Te,ge+(Te.key==null||q&&q.key===Te.key?"":(""+Te.key).replace($,"$&/")+"/")+Pe)),ae.push(Te)),1;Pe=0;var vt=ye===""?".":ye+":";if(R(q))for(var ue=0;ue<q.length;ue++)ye=q[ue],Oe=vt+Z(ye,ue),Pe+=Y(ye,ae,ge,Oe,Te);else if(ue=w(q),typeof ue=="function")for(q=ue.call(q),ue=0;!(ye=q.next()).done;)ye=ye.value,Oe=vt+Z(ye,ue++),Pe+=Y(ye,ae,ge,Oe,Te);else if(Oe==="object"){if(typeof q.then=="function")return Y(he(q),ae,ge,ye,Te);throw ae=String(q),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ie(q,ae,ge){if(q==null)return q;var ye=[],Te=0;return Y(q,ye,"","",function(Oe){return ae.call(ge,Oe,Te++)}),ye}function H(q){if(q._status===-1){var ae=q._result;ae=ae(),ae.then(function(ge){(q._status===0||q._status===-1)&&(q._status=1,q._result=ge)},function(ge){(q._status===0||q._status===-1)&&(q._status=2,q._result=ge)}),q._status===-1&&(q._status=0,q._result=ae)}if(q._status===1)return q._result.default;throw q._result}var K=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},le={map:ie,forEach:function(q,ae,ge){ie(q,function(){ae.apply(this,arguments)},ge)},count:function(q){var ae=0;return ie(q,function(){ae++}),ae},toArray:function(q){return ie(q,function(ae){return ae})||[]},only:function(q){if(!O(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Be.Activity=g,Be.Children=le,Be.Component=k,Be.Fragment=n,Be.Profiler=a,Be.PureComponent=M,Be.StrictMode=r,Be.Suspense=f,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Be.__COMPILER_RUNTIME={__proto__:null,c:function(q){return N.H.useMemoCache(q)}},Be.cache=function(q){return function(){return q.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(q,ae,ge){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ye=j({},q.props),Te=q.key;if(ae!=null)for(Oe in ae.key!==void 0&&(Te=""+ae.key),ae)!I.call(ae,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&ae.ref===void 0||(ye[Oe]=ae[Oe]);var Oe=arguments.length-2;if(Oe===1)ye.children=ge;else if(1<Oe){for(var Pe=Array(Oe),vt=0;vt<Oe;vt++)Pe[vt]=arguments[vt+2];ye.children=Pe}return C(q.type,Te,ye)},Be.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},Be.createElement=function(q,ae,ge){var ye,Te={},Oe=null;if(ae!=null)for(ye in ae.key!==void 0&&(Oe=""+ae.key),ae)I.call(ae,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Te[ye]=ae[ye]);var Pe=arguments.length-2;if(Pe===1)Te.children=ge;else if(1<Pe){for(var vt=Array(Pe),ue=0;ue<Pe;ue++)vt[ue]=arguments[ue+2];Te.children=vt}if(q&&q.defaultProps)for(ye in Pe=q.defaultProps,Pe)Te[ye]===void 0&&(Te[ye]=Pe[ye]);return C(q,Oe,Te)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(q){return{$$typeof:d,render:q}},Be.isValidElement=O,Be.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:H}},Be.memo=function(q,ae){return{$$typeof:h,type:q,compare:ae===void 0?null:ae}},Be.startTransition=function(q){var ae=N.T,ge={};N.T=ge;try{var ye=q(),Te=N.S;Te!==null&&Te(ge,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(V,K)}catch(Oe){K(Oe)}finally{ae!==null&&ge.types!==null&&(ae.types=ge.types),N.T=ae}},Be.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Be.use=function(q){return N.H.use(q)},Be.useActionState=function(q,ae,ge){return N.H.useActionState(q,ae,ge)},Be.useCallback=function(q,ae){return N.H.useCallback(q,ae)},Be.useContext=function(q){return N.H.useContext(q)},Be.useDebugValue=function(){},Be.useDeferredValue=function(q,ae){return N.H.useDeferredValue(q,ae)},Be.useEffect=function(q,ae){return N.H.useEffect(q,ae)},Be.useEffectEvent=function(q){return N.H.useEffectEvent(q)},Be.useId=function(){return N.H.useId()},Be.useImperativeHandle=function(q,ae,ge){return N.H.useImperativeHandle(q,ae,ge)},Be.useInsertionEffect=function(q,ae){return N.H.useInsertionEffect(q,ae)},Be.useLayoutEffect=function(q,ae){return N.H.useLayoutEffect(q,ae)},Be.useMemo=function(q,ae){return N.H.useMemo(q,ae)},Be.useOptimistic=function(q,ae){return N.H.useOptimistic(q,ae)},Be.useReducer=function(q,ae,ge){return N.H.useReducer(q,ae,ge)},Be.useRef=function(q){return N.H.useRef(q)},Be.useState=function(q){return N.H.useState(q)},Be.useSyncExternalStore=function(q,ae,ge){return N.H.useSyncExternalStore(q,ae,ge)},Be.useTransition=function(){return N.H.useTransition()},Be.version="19.2.0",Be}var CC;function sd(){return CC||(CC=1,Qb.exports=gV()),Qb.exports}var b=sd();const Bh=Xi(b),yV=hV({__proto__:null,default:Bh},[b]);var Xb={exports:{}},Df={},Zb={exports:{}},Jb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kC;function vV(){return kC||(kC=1,(function(t){function e(Y,ie){var H=Y.length;Y.push(ie);e:for(;0<H;){var K=H-1>>>1,le=Y[K];if(0<a(le,ie))Y[K]=ie,Y[H]=le,H=K;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ie=Y[0],H=Y.pop();if(H!==ie){Y[0]=H;e:for(var K=0,le=Y.length,q=le>>>1;K<q;){var ae=2*(K+1)-1,ge=Y[ae],ye=ae+1,Te=Y[ye];if(0>a(ge,H))ye<le&&0>a(Te,ge)?(Y[K]=Te,Y[ye]=H,K=ye):(Y[K]=ge,Y[ae]=H,K=ae);else if(ye<le&&0>a(Te,H))Y[K]=Te,Y[ye]=H,K=ye;else break e}}return ie}function a(Y,ie){var H=Y.sortIndex-ie.sortIndex;return H!==0?H:Y.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],h=[],p=1,g=null,v=3,w=!1,E=!1,j=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function T(Y){for(var ie=n(h);ie!==null;){if(ie.callback===null)r(h);else if(ie.startTime<=Y)r(h),ie.sortIndex=ie.expirationTime,e(f,ie);else break;ie=n(h)}}function R(Y){if(j=!1,T(Y),!E)if(n(f)!==null)E=!0,V||(V=!0,U());else{var ie=n(h);ie!==null&&he(R,ie.startTime-Y)}}var V=!1,N=-1,I=5,C=-1;function D(){return S?!0:!(t.unstable_now()-C<I)}function O(){if(S=!1,V){var Y=t.unstable_now();C=Y;var ie=!0;try{e:{E=!1,j&&(j=!1,z(N),N=-1),w=!0;var H=v;try{t:{for(T(Y),g=n(f);g!==null&&!(g.expirationTime>Y&&D());){var K=g.callback;if(typeof K=="function"){g.callback=null,v=g.priorityLevel;var le=K(g.expirationTime<=Y);if(Y=t.unstable_now(),typeof le=="function"){g.callback=le,T(Y),ie=!0;break t}g===n(f)&&r(f),T(Y)}else r(f);g=n(f)}if(g!==null)ie=!0;else{var q=n(h);q!==null&&he(R,q.startTime-Y),ie=!1}}break e}finally{g=null,v=H,w=!1}ie=void 0}}finally{ie?U():V=!1}}}var U;if(typeof M=="function")U=function(){M(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Z=$.port2;$.port1.onmessage=O,U=function(){Z.postMessage(null)}}else U=function(){k(O,0)};function he(Y,ie){N=k(function(){Y(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(Y){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var H=v;v=ie;try{return Y()}finally{v=H}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var H=v;v=Y;try{return ie()}finally{v=H}},t.unstable_scheduleCallback=function(Y,ie,H){var K=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,Y){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=H+le,Y={id:p++,callback:ie,priorityLevel:Y,startTime:H,expirationTime:le,sortIndex:-1},H>K?(Y.sortIndex=H,e(h,Y),n(f)===null&&Y===n(h)&&(j?(z(N),N=-1):j=!0,he(R,H-K))):(Y.sortIndex=le,e(f,Y),E||w||(E=!0,V||(V=!0,U()))),Y},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(Y){var ie=v;return function(){var H=v;v=ie;try{return Y.apply(this,arguments)}finally{v=H}}}})(Jb)),Jb}var IC;function xV(){return IC||(IC=1,Zb.exports=vV()),Zb.exports}var ew={exports:{}},lr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC;function bV(){if(OC)return lr;OC=1;var t=sd();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,lr.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(f,h,null,p)},lr.flushSync=function(f){var h=c.T,p=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=h,r.p=p,r.d.f()}},lr.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},lr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},lr.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:w}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:v,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},lr.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},lr.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=d(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},lr.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=d(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},lr.requestFormReset=function(f){r.d.r(f)},lr.unstable_batchedUpdates=function(f,h){return f(h)},lr.useFormState=function(f,h,p){return c.H.useFormState(f,h,p)},lr.useFormStatus=function(){return c.H.useHostTransitionStatus()},lr.version="19.2.0",lr}var PC;function KD(){if(PC)return ew.exports;PC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ew.exports=bV(),ew.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RC;function wV(){if(RC)return Df;RC=1;var t=xV(),e=sd(),n=KD();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(s(i)!==i)throw Error(r(188))}function h(i){var o=i.alternate;if(!o){if(o=s(i),o===null)throw Error(r(188));return o!==i?null:i}for(var u=i,m=o;;){var x=u.return;if(x===null)break;var _=x.alternate;if(_===null){if(m=x.return,m!==null){u=m;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===u)return f(x),i;if(_===m)return f(x),o;_=_.sibling}throw Error(r(188))}if(u.return!==m.return)u=x,m=_;else{for(var P=!1,B=x.child;B;){if(B===u){P=!0,u=x,m=_;break}if(B===m){P=!0,m=x,u=_;break}B=B.sibling}if(!P){for(B=_.child;B;){if(B===u){P=!0,u=_,m=x;break}if(B===m){P=!0,m=_,u=x;break}B=B.sibling}if(!P)throw Error(r(189))}}if(u.alternate!==m)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:o}function p(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=p(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),M=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var $=Symbol.for("react.client.reference");function Z(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===$?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case k:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case V:return"SuspenseList";case C:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case M:return i.displayName||"Context";case z:return(i._context.displayName||"Context")+".Consumer";case T:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return o=i.displayName||null,o!==null?o:Z(i.type)||"Memo";case I:o=i._payload,i=i._init;try{return Z(i(o))}catch{}}return null}var he=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},K=[],le=-1;function q(i){return{current:i}}function ae(i){0>le||(i.current=K[le],K[le]=null,le--)}function ge(i,o){le++,K[le]=i.current,i.current=o}var ye=q(null),Te=q(null),Oe=q(null),Pe=q(null);function vt(i,o){switch(ge(Oe,o),ge(Te,i),ge(ye,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?YT(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=YT(o),i=QT(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ae(ye),ge(ye,i)}function ue(){ae(ye),ae(Te),ae(Oe)}function Ve(i){i.memoizedState!==null&&ge(Pe,i);var o=ye.current,u=QT(o,i.type);o!==u&&(ge(Te,i),ge(ye,u))}function He(i){Te.current===i&&(ae(ye),ae(Te)),Pe.current===i&&(ae(Pe),kf._currentValue=H)}var W,Ce;function Ie(i){if(W===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);W=o&&o[1]||"",Ce=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+W+i+Ce}var Ye=!1;function et(i,o){if(!i||Ye)return"";Ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(oe){var re=oe}Reflect.construct(i,[],me)}else{try{me.call()}catch(oe){re=oe}i.call(me.prototype)}}else{try{throw Error()}catch(oe){re=oe}(me=i())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),P=_[0],B=_[1];if(P&&B){var G=P.split(`
`),ne=B.split(`
`);for(x=m=0;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;for(;x<ne.length&&!ne[x].includes("DetermineComponentFrameRoot");)x++;if(m===G.length||x===ne.length)for(m=G.length-1,x=ne.length-1;1<=m&&0<=x&&G[m]!==ne[x];)x--;for(;1<=m&&0<=x;m--,x--)if(G[m]!==ne[x]){if(m!==1||x!==1)do if(m--,x--,0>x||G[m]!==ne[x]){var ce=`
`+G[m].replace(" at new "," at ");return i.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",i.displayName)),ce}while(1<=m&&0<=x);break}}}finally{Ye=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Ie(u):""}function en(i,o){switch(i.tag){case 26:case 27:case 5:return Ie(i.type);case 16:return Ie("Lazy");case 13:return i.child!==o&&o!==null?Ie("Suspense Fallback"):Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return et(i.type,!1);case 11:return et(i.type.render,!1);case 1:return et(i.type,!0);case 31:return Ie("Activity");default:return""}}function St(i){try{var o="",u=null;do o+=en(i,u),u=i,i=i.return;while(i);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var ht=Object.prototype.hasOwnProperty,xt=t.unstable_scheduleCallback,Qt=t.unstable_cancelCallback,Id=t.unstable_shouldYield,Rm=t.unstable_requestPaint,vr=t.unstable_now,yl=t.unstable_getCurrentPriorityLevel,Od=t.unstable_ImmediatePriority,Pd=t.unstable_UserBlockingPriority,eo=t.unstable_NormalPriority,Xv=t.unstable_LowPriority,Dm=t.unstable_IdlePriority,Mm=t.log,Lm=t.unstable_setDisableYieldValue,Va=null,Zn=null;function da(i){if(typeof Mm=="function"&&Lm(i),Zn&&typeof Zn.setStrictMode=="function")try{Zn.setStrictMode(Va,i)}catch{}}var ln=Math.clz32?Math.clz32:Um,zm=Math.log,Oc=Math.LN2;function Um(i){return i>>>=0,i===0?32:31-(zm(i)/Oc|0)|0}var ui=256,vl=262144,yn=4194304;function di(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function fi(i,o,u){var m=i.pendingLanes;if(m===0)return 0;var x=0,_=i.suspendedLanes,P=i.pingedLanes;i=i.warmLanes;var B=m&134217727;return B!==0?(m=B&~_,m!==0?x=di(m):(P&=B,P!==0?x=di(P):u||(u=B&~i,u!==0&&(x=di(u))))):(B=m&~_,B!==0?x=di(B):P!==0?x=di(P):u||(u=m&~i,u!==0&&(x=di(u)))),x===0?0:o!==0&&o!==x&&(o&_)===0&&(_=x&-x,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:x}function $a(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Zv(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vm(){var i=yn;return yn<<=1,(yn&62914560)===0&&(yn=4194304),i}function hi(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function xl(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Jv(i,o,u,m,x,_){var P=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var B=i.entanglements,G=i.expirationTimes,ne=i.hiddenUpdates;for(u=P&~u;0<u;){var ce=31-ln(u),me=1<<ce;B[ce]=0,G[ce]=-1;var re=ne[ce];if(re!==null)for(ne[ce]=null,ce=0;ce<re.length;ce++){var oe=re[ce];oe!==null&&(oe.lane&=-536870913)}u&=~me}m!==0&&bl(i,m,0),_!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=_&~(P&~o))}function bl(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var m=31-ln(o);i.entangledLanes|=o,i.entanglements[m]=i.entanglements[m]|1073741824|u&261930}function Rd(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var m=31-ln(u),x=1<<m;x&o|i[m]&o&&(i[m]|=o),u&=~x}}function Dd(i,o){var u=o&-o;return u=(u&42)!==0?1:wl(u),(u&(i.suspendedLanes|o))!==0?0:u}function wl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ns(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function $m(){var i=ie.p;return i!==0?i:(i=window.event,i===void 0?32:xC(i.type))}function Ba(i,o){var u=ie.p;try{return ie.p=i,o()}finally{ie.p=u}}var Fa=Math.random().toString(36).slice(2),vn="__reactFiber$"+Fa,$n="__reactProps$"+Fa,mi="__reactContainer$"+Fa,Pc="__reactEvents$"+Fa,ex="__reactListeners$"+Fa,Bm="__reactHandles$"+Fa,Fm="__reactResources$"+Fa,pi="__reactMarker$"+Fa;function Rc(i){delete i[vn],delete i[$n],delete i[Pc],delete i[ex],delete i[Bm]}function gi(i){var o=i[vn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[mi]||u[vn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=rC(i);i!==null;){if(u=i[vn])return u;i=rC(i)}return o}i=u,u=i.parentNode}return null}function fa(i){if(i=i[vn]||i[mi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function Hr(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function yi(i){var o=i[Fm];return o||(o=i[Fm]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function xn(i){i[pi]=!0}var Md=new Set,Ld={};function vi(i,o){xi(i,o),xi(i+"Capture",o)}function xi(i,o){for(Ld[i]=o,i=0;i<o.length;i++)Md.add(o[i])}var zd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ud={},Vd={};function qm(i){return ht.call(Vd,i)?!0:ht.call(Ud,i)?!1:zd.test(i)?Vd[i]=!0:(Ud[i]=!0,!1)}function Dc(i,o,u){if(qm(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function Gr(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function bn(i,o,u,m){if(m===null)i.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+m)}}function Bn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function to(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function $d(i,o,u){var m=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var x=m.get,_=m.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return x.call(this)},set:function(P){u=""+P,_.call(this,P)}}),Object.defineProperty(i,o,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(P){u=""+P},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function bt(i){if(!i._valueTracker){var o=to(i)?"checked":"value";i._valueTracker=$d(i,o,""+i[o])}}function _l(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return i&&(m=to(i)?i.checked?"true":"false":i.value),i=m,i!==u?(o.setValue(i),!0):!1}function bi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var El=/[\n"\\]/g;function kr(i){return i.replace(El,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Mc(i,o,u,m,x,_,P,B){i.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.type=P:i.removeAttribute("type"),o!=null?P==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Bn(o)):i.value!==""+Bn(o)&&(i.value=""+Bn(o)):P!=="submit"&&P!=="reset"||i.removeAttribute("value"),o!=null?Bd(i,P,Bn(o)):u!=null?Bd(i,P,Bn(u)):m!=null&&i.removeAttribute("value"),x==null&&_!=null&&(i.defaultChecked=!!_),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?i.name=""+Bn(B):i.removeAttribute("name")}function Hm(i,o,u,m,x,_,P,B){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){bt(i);return}u=u!=null?""+Bn(u):"",o=o!=null?""+Bn(o):u,B||o===i.value||(i.value=o),i.defaultValue=o}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=B?i.checked:!!m,i.defaultChecked=!!m,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(i.name=P),bt(i)}function Bd(i,o,u){o==="number"&&bi(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function no(i,o,u,m){if(i=i.options,o){o={};for(var x=0;x<u.length;x++)o["$"+u[x]]=!0;for(u=0;u<i.length;u++)x=o.hasOwnProperty("$"+i[u].value),i[u].selected!==x&&(i[u].selected=x),x&&m&&(i[u].defaultSelected=!0)}else{for(u=""+Bn(u),o=null,x=0;x<i.length;x++){if(i[x].value===u){i[x].selected=!0,m&&(i[x].defaultSelected=!0);return}o!==null||i[x].disabled||(o=i[x])}o!==null&&(o.selected=!0)}}function Gm(i,o,u){if(o!=null&&(o=""+Bn(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+Bn(u):""}function ro(i,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(r(92));if(he(m)){if(1<m.length)throw Error(r(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=Bn(o),i.defaultValue=u,m=i.textContent,m===u&&m!==""&&m!==null&&(i.value=m),bt(i)}function Ir(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Km=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fd(i,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":m?i.setProperty(o,u):typeof u!="number"||u===0||Km.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function qd(i,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var x in o)m=o[x],o.hasOwnProperty(x)&&u[x]!==m&&Fd(i,x,m)}else for(var _ in o)o.hasOwnProperty(_)&&Fd(i,_,o[_])}function Lc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ao=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zc(i){return ao.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function qa(){}var Hd=null;function ha(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var io=null,wi=null;function jl(i){var o=fa(i);if(o&&(i=o.stateNode)){var u=i[$n]||null;e:switch(i=o.stateNode,o.type){case"input":if(Mc(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+kr(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==i&&m.form===i.form){var x=m[$n]||null;if(!x)throw Error(r(90));Mc(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===i.form&&_l(m)}break e;case"textarea":Gm(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&no(i,!!u.multiple,o,!1)}}}var Uc=!1;function so(i,o,u){if(Uc)return i(o,u);Uc=!0;try{var m=i(o);return m}finally{if(Uc=!1,(io!==null||wi!==null)&&($p(),io&&(o=io,i=wi,wi=io=null,jl(o),i)))for(o=0;o<i.length;o++)jl(i[o])}}function Ha(i,o){var u=i.stateNode;if(u===null)return null;var m=u[$n]||null;if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sl=!1;if(ma)try{var At={};Object.defineProperty(At,"passive",{get:function(){Sl=!0}}),window.addEventListener("test",At,At),window.removeEventListener("test",At,At)}catch{Sl=!1}var _i=null,Gd=null,Al=null;function Kd(){if(Al)return Al;var i,o=Gd,u=o.length,m,x="value"in _i?_i.value:_i.textContent,_=x.length;for(i=0;i<u&&o[i]===x[i];i++);var P=u-i;for(m=1;m<=P&&o[u-m]===x[_-m];m++);return Al=x.slice(i,1<m?1-m:void 0)}function Nl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function rs(){return!0}function Ga(){return!1}function Jn(i){function o(u,m,x,_,P){this._reactName=u,this._targetInst=x,this.type=m,this.nativeEvent=_,this.target=P,this.currentTarget=null;for(var B in i)i.hasOwnProperty(B)&&(u=i[B],this[B]=u?u(_):_[B]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?rs:Ga,this.isPropagationStopped=Ga,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),o}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=Jn(as),oo=g({},as,{view:0,detail:0}),Wd=Jn(oo),lo,Vc,ji,$c=g({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:co,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ji&&(ji&&i.type==="mousemove"?(lo=i.screenX-ji.screenX,Vc=i.screenY-ji.screenY):Vc=lo=0,ji=i),lo)},movementY:function(i){return"movementY"in i?i.movementY:Vc}}),Yd=Jn($c),Tl=g({},$c,{dataTransfer:0}),Ym=Jn(Tl),Qm=g({},oo,{relatedTarget:0}),Cl=Jn(Qm),Qd=g({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),Xm=Jn(Qd),Bc=g({},as,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Zm=Jn(Bc),Jm=g({},as,{data:0}),Si=Jn(Jm),ep={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},np={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rp(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=np[i])?!!o[i]:!1}function co(){return rp}var xr=g({},oo,{key:function(i){if(i.key){var o=ep[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Nl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tp[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:co,charCode:function(i){return i.type==="keypress"?Nl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Nl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ap=Jn(xr),ip=g({},$c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),is=Jn(ip),y=g({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:co}),A=Jn(y),L=g({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=Jn(L),J=g({},$c,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),se=Jn(J),be=g({},as,{newState:0,oldState:0}),Ge=Jn(be),cn=[9,13,27,32],mt=ma&&"CompositionEvent"in window,Ft=null;ma&&"documentMode"in document&&(Ft=document.documentMode);var pa=ma&&"TextEvent"in window&&!Ft,Ai=ma&&(!mt||Ft&&8<Ft&&11>=Ft),Ka=" ",Wa=!1;function kl(i,o){switch(i){case"keyup":return cn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fc(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qc=!1;function D8(i,o){switch(i){case"compositionend":return Fc(o);case"keypress":return o.which!==32?null:(Wa=!0,Ka);case"textInput":return i=o.data,i===Ka&&Wa?null:i;default:return null}}function M8(i,o){if(qc)return i==="compositionend"||!mt&&kl(i,o)?(i=Kd(),Al=Gd=_i=null,qc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ai&&o.locale!=="ko"?null:o.data;default:return null}}var L8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sN(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!L8[i.type]:o==="textarea"}function oN(i,o,u,m){io?wi?wi.push(m):wi=[m]:io=m,o=Wp(o,"onChange"),0<o.length&&(u=new Ei("onChange","change",null,u,m),i.push({event:u,listeners:o}))}var Xd=null,Zd=null;function z8(i){FT(i,0)}function sp(i){var o=Hr(i);if(_l(o))return i}function lN(i,o){if(i==="change")return o}var cN=!1;if(ma){var tx;if(ma){var nx="oninput"in document;if(!nx){var uN=document.createElement("div");uN.setAttribute("oninput","return;"),nx=typeof uN.oninput=="function"}tx=nx}else tx=!1;cN=tx&&(!document.documentMode||9<document.documentMode)}function dN(){Xd&&(Xd.detachEvent("onpropertychange",fN),Zd=Xd=null)}function fN(i){if(i.propertyName==="value"&&sp(Zd)){var o=[];oN(o,Zd,i,ha(i)),so(z8,o)}}function U8(i,o,u){i==="focusin"?(dN(),Xd=o,Zd=u,Xd.attachEvent("onpropertychange",fN)):i==="focusout"&&dN()}function V8(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return sp(Zd)}function $8(i,o){if(i==="click")return sp(o)}function B8(i,o){if(i==="input"||i==="change")return sp(o)}function F8(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Kr=typeof Object.is=="function"?Object.is:F8;function Jd(i,o){if(Kr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var x=u[m];if(!ht.call(o,x)||!Kr(i[x],o[x]))return!1}return!0}function hN(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function mN(i,o){var u=hN(i);i=0;for(var m;u;){if(u.nodeType===3){if(m=i+u.textContent.length,i<=o&&m>=o)return{node:u,offset:o-i};i=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=hN(u)}}function pN(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?pN(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function gN(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=bi(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=bi(i.document)}return o}function rx(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var q8=ma&&"documentMode"in document&&11>=document.documentMode,Hc=null,ax=null,ef=null,ix=!1;function yN(i,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ix||Hc==null||Hc!==bi(m)||(m=Hc,"selectionStart"in m&&rx(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ef&&Jd(ef,m)||(ef=m,m=Wp(ax,"onSelect"),0<m.length&&(o=new Ei("onSelect","select",null,o,u),i.push({event:o,listeners:m}),o.target=Hc)))}function Il(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Gc={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionrun:Il("Transition","TransitionRun"),transitionstart:Il("Transition","TransitionStart"),transitioncancel:Il("Transition","TransitionCancel"),transitionend:Il("Transition","TransitionEnd")},sx={},vN={};ma&&(vN=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function Ol(i){if(sx[i])return sx[i];if(!Gc[i])return i;var o=Gc[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in vN)return sx[i]=o[u];return i}var xN=Ol("animationend"),bN=Ol("animationiteration"),wN=Ol("animationstart"),H8=Ol("transitionrun"),G8=Ol("transitionstart"),K8=Ol("transitioncancel"),_N=Ol("transitionend"),EN=new Map,ox="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ox.push("scrollEnd");function Ya(i,o){EN.set(i,o),vi(o,[i])}var op=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ga=[],Kc=0,lx=0;function lp(){for(var i=Kc,o=lx=Kc=0;o<i;){var u=ga[o];ga[o++]=null;var m=ga[o];ga[o++]=null;var x=ga[o];ga[o++]=null;var _=ga[o];if(ga[o++]=null,m!==null&&x!==null){var P=m.pending;P===null?x.next=x:(x.next=P.next,P.next=x),m.pending=x}_!==0&&jN(u,x,_)}}function cp(i,o,u,m){ga[Kc++]=i,ga[Kc++]=o,ga[Kc++]=u,ga[Kc++]=m,lx|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function cx(i,o,u,m){return cp(i,o,u,m),up(i)}function Pl(i,o){return cp(i,null,null,o),up(i)}function jN(i,o,u){i.lanes|=u;var m=i.alternate;m!==null&&(m.lanes|=u);for(var x=!1,_=i.return;_!==null;)_.childLanes|=u,m=_.alternate,m!==null&&(m.childLanes|=u),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(x=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,x&&o!==null&&(x=31-ln(u),i=_.hiddenUpdates,m=i[x],m===null?i[x]=[o]:m.push(o),o.lane=u|536870912),_):null}function up(i){if(50<Ef)throw Ef=0,vb=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Wc={};function W8(i,o,u,m){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(i,o,u,m){return new W8(i,o,u,m)}function ux(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ss(i,o){var u=i.alternate;return u===null?(u=Wr(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function SN(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function dp(i,o,u,m,x,_){var P=0;if(m=i,typeof i=="function")ux(i)&&(P=1);else if(typeof i=="string")P=J9(i,u,ye.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case C:return i=Wr(31,u,o,x),i.elementType=C,i.lanes=_,i;case j:return Rl(u.children,x,_,o);case S:P=8,x|=24;break;case k:return i=Wr(12,u,o,x|2),i.elementType=k,i.lanes=_,i;case R:return i=Wr(13,u,o,x),i.elementType=R,i.lanes=_,i;case V:return i=Wr(19,u,o,x),i.elementType=V,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:P=10;break e;case z:P=9;break e;case T:P=11;break e;case N:P=14;break e;case I:P=16,m=null;break e}P=29,u=Error(r(130,i===null?"null":typeof i,"")),m=null}return o=Wr(P,u,o,x),o.elementType=i,o.type=m,o.lanes=_,o}function Rl(i,o,u,m){return i=Wr(7,i,m,o),i.lanes=u,i}function dx(i,o,u){return i=Wr(6,i,null,o),i.lanes=u,i}function AN(i){var o=Wr(18,null,null,0);return o.stateNode=i,o}function fx(i,o,u){return o=Wr(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var NN=new WeakMap;function ya(i,o){if(typeof i=="object"&&i!==null){var u=NN.get(i);return u!==void 0?u:(o={value:i,source:o,stack:St(o)},NN.set(i,o),o)}return{value:i,source:o,stack:St(o)}}var Yc=[],Qc=0,fp=null,tf=0,va=[],xa=0,uo=null,Ni=1,Ti="";function os(i,o){Yc[Qc++]=tf,Yc[Qc++]=fp,fp=i,tf=o}function TN(i,o,u){va[xa++]=Ni,va[xa++]=Ti,va[xa++]=uo,uo=i;var m=Ni;i=Ti;var x=32-ln(m)-1;m&=~(1<<x),u+=1;var _=32-ln(o)+x;if(30<_){var P=x-x%5;_=(m&(1<<P)-1).toString(32),m>>=P,x-=P,Ni=1<<32-ln(o)+x|u<<x|m,Ti=_+i}else Ni=1<<_|u<<x|m,Ti=i}function hx(i){i.return!==null&&(os(i,1),TN(i,1,0))}function mx(i){for(;i===fp;)fp=Yc[--Qc],Yc[Qc]=null,tf=Yc[--Qc],Yc[Qc]=null;for(;i===uo;)uo=va[--xa],va[xa]=null,Ti=va[--xa],va[xa]=null,Ni=va[--xa],va[xa]=null}function CN(i,o){va[xa++]=Ni,va[xa++]=Ti,va[xa++]=uo,Ni=o.id,Ti=o.overflow,uo=i}var er=null,Lt=null,st=!1,fo=null,ba=!1,px=Error(r(519));function ho(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nf(ya(o,i)),px}function kN(i){var o=i.stateNode,u=i.type,m=i.memoizedProps;switch(o[vn]=i,o[$n]=m,u){case"dialog":Ze("cancel",o),Ze("close",o);break;case"iframe":case"object":case"embed":Ze("load",o);break;case"video":case"audio":for(u=0;u<Sf.length;u++)Ze(Sf[u],o);break;case"source":Ze("error",o);break;case"img":case"image":case"link":Ze("error",o),Ze("load",o);break;case"details":Ze("toggle",o);break;case"input":Ze("invalid",o),Hm(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Ze("invalid",o);break;case"textarea":Ze("invalid",o),ro(o,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||KT(o.textContent,u)?(m.popover!=null&&(Ze("beforetoggle",o),Ze("toggle",o)),m.onScroll!=null&&Ze("scroll",o),m.onScrollEnd!=null&&Ze("scrollend",o),m.onClick!=null&&(o.onclick=qa),o=!0):o=!1,o||ho(i,!0)}function IN(i){for(er=i.return;er;)switch(er.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:er=er.return}}function Xc(i){if(i!==er)return!1;if(!st)return IN(i),st=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Pb(i.type,i.memoizedProps)),u=!u),u&&Lt&&ho(i),IN(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Lt=nC(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Lt=nC(i)}else o===27?(o=Lt,No(i.type)?(i=zb,zb=null,Lt=i):Lt=o):Lt=er?_a(i.stateNode.nextSibling):null;return!0}function Dl(){Lt=er=null,st=!1}function gx(){var i=fo;return i!==null&&(Dr===null?Dr=i:Dr.push.apply(Dr,i),fo=null),i}function nf(i){fo===null?fo=[i]:fo.push(i)}var yx=q(null),Ml=null,ls=null;function mo(i,o,u){ge(yx,o._currentValue),o._currentValue=u}function cs(i){i._currentValue=yx.current,ae(yx)}function vx(i,o,u){for(;i!==null;){var m=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),i===u)break;i=i.return}}function xx(i,o,u,m){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var _=x.dependencies;if(_!==null){var P=x.child;_=_.firstContext;e:for(;_!==null;){var B=_;_=x;for(var G=0;G<o.length;G++)if(B.context===o[G]){_.lanes|=u,B=_.alternate,B!==null&&(B.lanes|=u),vx(_.return,u,i),m||(P=null);break e}_=B.next}}else if(x.tag===18){if(P=x.return,P===null)throw Error(r(341));P.lanes|=u,_=P.alternate,_!==null&&(_.lanes|=u),vx(P,u,i),P=null}else P=x.child;if(P!==null)P.return=x;else for(P=x;P!==null;){if(P===i){P=null;break}if(x=P.sibling,x!==null){x.return=P.return,P=x;break}P=P.return}x=P}}function Zc(i,o,u,m){i=null;for(var x=o,_=!1;x!==null;){if(!_){if((x.flags&524288)!==0)_=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var P=x.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var B=x.type;Kr(x.pendingProps.value,P.value)||(i!==null?i.push(B):i=[B])}}else if(x===Pe.current){if(P=x.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(kf):i=[kf])}x=x.return}i!==null&&xx(o,i,u,m),o.flags|=262144}function hp(i){for(i=i.firstContext;i!==null;){if(!Kr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ll(i){Ml=i,ls=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function tr(i){return ON(Ml,i)}function mp(i,o){return Ml===null&&Ll(i),ON(i,o)}function ON(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},ls===null){if(i===null)throw Error(r(308));ls=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ls=ls.next=o;return u}var Y8=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,m){i.push(m)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},Q8=t.unstable_scheduleCallback,X8=t.unstable_NormalPriority,wn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bx(){return{controller:new Y8,data:new Map,refCount:0}}function rf(i){i.refCount--,i.refCount===0&&Q8(X8,function(){i.controller.abort()})}var af=null,wx=0,Jc=0,eu=null;function Z8(i,o){if(af===null){var u=af=[];wx=0,Jc=jb(),eu={status:"pending",value:void 0,then:function(m){u.push(m)}}}return wx++,o.then(PN,PN),o}function PN(){if(--wx===0&&af!==null){eu!==null&&(eu.status="fulfilled");var i=af;af=null,Jc=0,eu=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function J8(i,o){var u=[],m={status:"pending",value:null,reason:null,then:function(x){u.push(x)}};return i.then(function(){m.status="fulfilled",m.value=o;for(var x=0;x<u.length;x++)(0,u[x])(o)},function(x){for(m.status="rejected",m.reason=x,x=0;x<u.length;x++)(0,u[x])(void 0)}),m}var RN=Y.S;Y.S=function(i,o){yT=vr(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Z8(i,o),RN!==null&&RN(i,o)};var zl=q(null);function _x(){var i=zl.current;return i!==null?i:Ot.pooledCache}function pp(i,o){o===null?ge(zl,zl.current):ge(zl,o.pool)}function DN(){var i=_x();return i===null?null:{parent:wn._currentValue,pool:i}}var tu=Error(r(460)),Ex=Error(r(474)),gp=Error(r(542)),yp={then:function(){}};function MN(i){return i=i.status,i==="fulfilled"||i==="rejected"}function LN(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(qa,qa),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,UN(i),i;default:if(typeof o.status=="string")o.then(qa,qa);else{if(i=Ot,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(m){if(o.status==="pending"){var x=o;x.status="fulfilled",x.value=m}},function(m){if(o.status==="pending"){var x=o;x.status="rejected",x.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,UN(i),i}throw Vl=o,tu}}function Ul(i){try{var o=i._init;return o(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Vl=u,tu):u}}var Vl=null;function zN(){if(Vl===null)throw Error(r(459));var i=Vl;return Vl=null,i}function UN(i){if(i===tu||i===gp)throw Error(r(483))}var nu=null,sf=0;function vp(i){var o=sf;return sf+=1,nu===null&&(nu=[]),LN(nu,i,o)}function of(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function xp(i,o){throw o.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function VN(i){function o(X,Q){if(i){var ee=X.deletions;ee===null?(X.deletions=[Q],X.flags|=16):ee.push(Q)}}function u(X,Q){if(!i)return null;for(;Q!==null;)o(X,Q),Q=Q.sibling;return null}function m(X){for(var Q=new Map;X!==null;)X.key!==null?Q.set(X.key,X):Q.set(X.index,X),X=X.sibling;return Q}function x(X,Q){return X=ss(X,Q),X.index=0,X.sibling=null,X}function _(X,Q,ee){return X.index=ee,i?(ee=X.alternate,ee!==null?(ee=ee.index,ee<Q?(X.flags|=67108866,Q):ee):(X.flags|=67108866,Q)):(X.flags|=1048576,Q)}function P(X){return i&&X.alternate===null&&(X.flags|=67108866),X}function B(X,Q,ee,de){return Q===null||Q.tag!==6?(Q=dx(ee,X.mode,de),Q.return=X,Q):(Q=x(Q,ee),Q.return=X,Q)}function G(X,Q,ee,de){var Re=ee.type;return Re===j?ce(X,Q,ee.props.children,de,ee.key):Q!==null&&(Q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===I&&Ul(Re)===Q.type)?(Q=x(Q,ee.props),of(Q,ee),Q.return=X,Q):(Q=dp(ee.type,ee.key,ee.props,null,X.mode,de),of(Q,ee),Q.return=X,Q)}function ne(X,Q,ee,de){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ee.containerInfo||Q.stateNode.implementation!==ee.implementation?(Q=fx(ee,X.mode,de),Q.return=X,Q):(Q=x(Q,ee.children||[]),Q.return=X,Q)}function ce(X,Q,ee,de,Re){return Q===null||Q.tag!==7?(Q=Rl(ee,X.mode,de,Re),Q.return=X,Q):(Q=x(Q,ee),Q.return=X,Q)}function me(X,Q,ee){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=dx(""+Q,X.mode,ee),Q.return=X,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return ee=dp(Q.type,Q.key,Q.props,null,X.mode,ee),of(ee,Q),ee.return=X,ee;case E:return Q=fx(Q,X.mode,ee),Q.return=X,Q;case I:return Q=Ul(Q),me(X,Q,ee)}if(he(Q)||U(Q))return Q=Rl(Q,X.mode,ee,null),Q.return=X,Q;if(typeof Q.then=="function")return me(X,vp(Q),ee);if(Q.$$typeof===M)return me(X,mp(X,Q),ee);xp(X,Q)}return null}function re(X,Q,ee,de){var Re=Q!==null?Q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Re!==null?null:B(X,Q,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return ee.key===Re?G(X,Q,ee,de):null;case E:return ee.key===Re?ne(X,Q,ee,de):null;case I:return ee=Ul(ee),re(X,Q,ee,de)}if(he(ee)||U(ee))return Re!==null?null:ce(X,Q,ee,de,null);if(typeof ee.then=="function")return re(X,Q,vp(ee),de);if(ee.$$typeof===M)return re(X,Q,mp(X,ee),de);xp(X,ee)}return null}function oe(X,Q,ee,de,Re){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return X=X.get(ee)||null,B(Q,X,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case w:return X=X.get(de.key===null?ee:de.key)||null,G(Q,X,de,Re);case E:return X=X.get(de.key===null?ee:de.key)||null,ne(Q,X,de,Re);case I:return de=Ul(de),oe(X,Q,ee,de,Re)}if(he(de)||U(de))return X=X.get(ee)||null,ce(Q,X,de,Re,null);if(typeof de.then=="function")return oe(X,Q,ee,vp(de),Re);if(de.$$typeof===M)return oe(X,Q,ee,mp(Q,de),Re);xp(Q,de)}return null}function Ae(X,Q,ee,de){for(var Re=null,ct=null,ke=Q,We=Q=0,nt=null;ke!==null&&We<ee.length;We++){ke.index>We?(nt=ke,ke=null):nt=ke.sibling;var ut=re(X,ke,ee[We],de);if(ut===null){ke===null&&(ke=nt);break}i&&ke&&ut.alternate===null&&o(X,ke),Q=_(ut,Q,We),ct===null?Re=ut:ct.sibling=ut,ct=ut,ke=nt}if(We===ee.length)return u(X,ke),st&&os(X,We),Re;if(ke===null){for(;We<ee.length;We++)ke=me(X,ee[We],de),ke!==null&&(Q=_(ke,Q,We),ct===null?Re=ke:ct.sibling=ke,ct=ke);return st&&os(X,We),Re}for(ke=m(ke);We<ee.length;We++)nt=oe(ke,X,We,ee[We],de),nt!==null&&(i&&nt.alternate!==null&&ke.delete(nt.key===null?We:nt.key),Q=_(nt,Q,We),ct===null?Re=nt:ct.sibling=nt,ct=nt);return i&&ke.forEach(function(Oo){return o(X,Oo)}),st&&os(X,We),Re}function Le(X,Q,ee,de){if(ee==null)throw Error(r(151));for(var Re=null,ct=null,ke=Q,We=Q=0,nt=null,ut=ee.next();ke!==null&&!ut.done;We++,ut=ee.next()){ke.index>We?(nt=ke,ke=null):nt=ke.sibling;var Oo=re(X,ke,ut.value,de);if(Oo===null){ke===null&&(ke=nt);break}i&&ke&&Oo.alternate===null&&o(X,ke),Q=_(Oo,Q,We),ct===null?Re=Oo:ct.sibling=Oo,ct=Oo,ke=nt}if(ut.done)return u(X,ke),st&&os(X,We),Re;if(ke===null){for(;!ut.done;We++,ut=ee.next())ut=me(X,ut.value,de),ut!==null&&(Q=_(ut,Q,We),ct===null?Re=ut:ct.sibling=ut,ct=ut);return st&&os(X,We),Re}for(ke=m(ke);!ut.done;We++,ut=ee.next())ut=oe(ke,X,We,ut.value,de),ut!==null&&(i&&ut.alternate!==null&&ke.delete(ut.key===null?We:ut.key),Q=_(ut,Q,We),ct===null?Re=ut:ct.sibling=ut,ct=ut);return i&&ke.forEach(function(uV){return o(X,uV)}),st&&os(X,We),Re}function Ct(X,Q,ee,de){if(typeof ee=="object"&&ee!==null&&ee.type===j&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:e:{for(var Re=ee.key;Q!==null;){if(Q.key===Re){if(Re=ee.type,Re===j){if(Q.tag===7){u(X,Q.sibling),de=x(Q,ee.props.children),de.return=X,X=de;break e}}else if(Q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===I&&Ul(Re)===Q.type){u(X,Q.sibling),de=x(Q,ee.props),of(de,ee),de.return=X,X=de;break e}u(X,Q);break}else o(X,Q);Q=Q.sibling}ee.type===j?(de=Rl(ee.props.children,X.mode,de,ee.key),de.return=X,X=de):(de=dp(ee.type,ee.key,ee.props,null,X.mode,de),of(de,ee),de.return=X,X=de)}return P(X);case E:e:{for(Re=ee.key;Q!==null;){if(Q.key===Re)if(Q.tag===4&&Q.stateNode.containerInfo===ee.containerInfo&&Q.stateNode.implementation===ee.implementation){u(X,Q.sibling),de=x(Q,ee.children||[]),de.return=X,X=de;break e}else{u(X,Q);break}else o(X,Q);Q=Q.sibling}de=fx(ee,X.mode,de),de.return=X,X=de}return P(X);case I:return ee=Ul(ee),Ct(X,Q,ee,de)}if(he(ee))return Ae(X,Q,ee,de);if(U(ee)){if(Re=U(ee),typeof Re!="function")throw Error(r(150));return ee=Re.call(ee),Le(X,Q,ee,de)}if(typeof ee.then=="function")return Ct(X,Q,vp(ee),de);if(ee.$$typeof===M)return Ct(X,Q,mp(X,ee),de);xp(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Q!==null&&Q.tag===6?(u(X,Q.sibling),de=x(Q,ee),de.return=X,X=de):(u(X,Q),de=dx(ee,X.mode,de),de.return=X,X=de),P(X)):u(X,Q)}return function(X,Q,ee,de){try{sf=0;var Re=Ct(X,Q,ee,de);return nu=null,Re}catch(ke){if(ke===tu||ke===gp)throw ke;var ct=Wr(29,ke,null,X.mode);return ct.lanes=de,ct.return=X,ct}finally{}}}var $l=VN(!0),$N=VN(!1),po=!1;function jx(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sx(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function go(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function yo(i,o,u){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(pt&2)!==0){var x=m.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),m.pending=o,o=up(i),jN(i,null,u),o}return cp(i,m,o,u),up(i)}function lf(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=i.pendingLanes,u|=m,o.lanes=u,Rd(i,u)}}function Ax(i,o){var u=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var x=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var P={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?x=_=P:_=_.next=P,u=u.next}while(u!==null);_===null?x=_=o:_=_.next=o}else x=_=o;u={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var Nx=!1;function cf(){if(Nx){var i=eu;if(i!==null)throw i}}function uf(i,o,u,m){Nx=!1;var x=i.updateQueue;po=!1;var _=x.firstBaseUpdate,P=x.lastBaseUpdate,B=x.shared.pending;if(B!==null){x.shared.pending=null;var G=B,ne=G.next;G.next=null,P===null?_=ne:P.next=ne,P=G;var ce=i.alternate;ce!==null&&(ce=ce.updateQueue,B=ce.lastBaseUpdate,B!==P&&(B===null?ce.firstBaseUpdate=ne:B.next=ne,ce.lastBaseUpdate=G))}if(_!==null){var me=x.baseState;P=0,ce=ne=G=null,B=_;do{var re=B.lane&-536870913,oe=re!==B.lane;if(oe?(tt&re)===re:(m&re)===re){re!==0&&re===Jc&&(Nx=!0),ce!==null&&(ce=ce.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Ae=i,Le=B;re=o;var Ct=u;switch(Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){me=Ae.call(Ct,me,re);break e}me=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,re=typeof Ae=="function"?Ae.call(Ct,me,re):Ae,re==null)break e;me=g({},me,re);break e;case 2:po=!0}}re=B.callback,re!==null&&(i.flags|=64,oe&&(i.flags|=8192),oe=x.callbacks,oe===null?x.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ce===null?(ne=ce=oe,G=me):ce=ce.next=oe,P|=re;if(B=B.next,B===null){if(B=x.shared.pending,B===null)break;oe=B,B=oe.next,oe.next=null,x.lastBaseUpdate=oe,x.shared.pending=null}}while(!0);ce===null&&(G=me),x.baseState=G,x.firstBaseUpdate=ne,x.lastBaseUpdate=ce,_===null&&(x.shared.lanes=0),_o|=P,i.lanes=P,i.memoizedState=me}}function BN(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function FN(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)BN(u[i],o)}var ru=q(null),bp=q(0);function qN(i,o){i=vs,ge(bp,i),ge(ru,o),vs=i|o.baseLanes}function Tx(){ge(bp,vs),ge(ru,ru.current)}function Cx(){vs=bp.current,ae(ru),ae(bp)}var Yr=q(null),wa=null;function vo(i){var o=i.alternate;ge(un,un.current&1),ge(Yr,i),wa===null&&(o===null||ru.current!==null||o.memoizedState!==null)&&(wa=i)}function kx(i){ge(un,un.current),ge(Yr,i),wa===null&&(wa=i)}function HN(i){i.tag===22?(ge(un,un.current),ge(Yr,i),wa===null&&(wa=i)):xo()}function xo(){ge(un,un.current),ge(Yr,Yr.current)}function Qr(i){ae(Yr),wa===i&&(wa=null),ae(un)}var un=q(0);function wp(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Mb(u)||Lb(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var us=0,Ke=null,Nt=null,_n=null,_p=!1,au=!1,Bl=!1,Ep=0,df=0,iu=null,e9=0;function tn(){throw Error(r(321))}function Ix(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Kr(i[u],o[u]))return!1;return!0}function Ox(i,o,u,m,x,_){return us=_,Ke=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Y.H=i===null||i.memoizedState===null?T2:Kx,Bl=!1,_=u(m,x),Bl=!1,au&&(_=KN(o,u,m,x)),GN(i),_}function GN(i){Y.H=mf;var o=Nt!==null&&Nt.next!==null;if(us=0,_n=Nt=Ke=null,_p=!1,df=0,iu=null,o)throw Error(r(300));i===null||En||(i=i.dependencies,i!==null&&hp(i)&&(En=!0))}function KN(i,o,u,m){Ke=i;var x=0;do{if(au&&(iu=null),df=0,au=!1,25<=x)throw Error(r(301));if(x+=1,_n=Nt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Y.H=C2,_=o(u,m)}while(au);return _}function t9(){var i=Y.H,o=i.useState()[0];return o=typeof o.then=="function"?ff(o):o,i=i.useState()[0],(Nt!==null?Nt.memoizedState:null)!==i&&(Ke.flags|=1024),o}function Px(){var i=Ep!==0;return Ep=0,i}function Rx(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function Dx(i){if(_p){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}_p=!1}us=0,_n=Nt=Ke=null,au=!1,df=Ep=0,iu=null}function br(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Ke.memoizedState=_n=i:_n=_n.next=i,_n}function dn(){if(Nt===null){var i=Ke.alternate;i=i!==null?i.memoizedState:null}else i=Nt.next;var o=_n===null?Ke.memoizedState:_n.next;if(o!==null)_n=o,Nt=i;else{if(i===null)throw Ke.alternate===null?Error(r(467)):Error(r(310));Nt=i,i={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},_n===null?Ke.memoizedState=_n=i:_n=_n.next=i}return _n}function jp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ff(i){var o=df;return df+=1,iu===null&&(iu=[]),i=LN(iu,i,o),o=Ke,(_n===null?o.memoizedState:_n.next)===null&&(o=o.alternate,Y.H=o===null||o.memoizedState===null?T2:Kx),i}function Sp(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ff(i);if(i.$$typeof===M)return tr(i)}throw Error(r(438,String(i)))}function Mx(i){var o=null,u=Ke.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=Ke.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(x){return x.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=jp(),Ke.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),m=0;m<i;m++)u[m]=D;return o.index++,u}function ds(i,o){return typeof o=="function"?o(i):o}function Ap(i){var o=dn();return Lx(o,Nt,i)}function Lx(i,o,u){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var x=i.baseQueue,_=m.pending;if(_!==null){if(x!==null){var P=x.next;x.next=_.next,_.next=P}o.baseQueue=x=_,m.pending=null}if(_=i.baseState,x===null)i.memoizedState=_;else{o=x.next;var B=P=null,G=null,ne=o,ce=!1;do{var me=ne.lane&-536870913;if(me!==ne.lane?(tt&me)===me:(us&me)===me){var re=ne.revertLane;if(re===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),me===Jc&&(ce=!0);else if((us&re)===re){ne=ne.next,re===Jc&&(ce=!0);continue}else me={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},G===null?(B=G=me,P=_):G=G.next=me,Ke.lanes|=re,_o|=re;me=ne.action,Bl&&u(_,me),_=ne.hasEagerState?ne.eagerState:u(_,me)}else re={lane:me,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},G===null?(B=G=re,P=_):G=G.next=re,Ke.lanes|=me,_o|=me;ne=ne.next}while(ne!==null&&ne!==o);if(G===null?P=_:G.next=B,!Kr(_,i.memoizedState)&&(En=!0,ce&&(u=eu,u!==null)))throw u;i.memoizedState=_,i.baseState=P,i.baseQueue=G,m.lastRenderedState=_}return x===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function zx(i){var o=dn(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var m=u.dispatch,x=u.pending,_=o.memoizedState;if(x!==null){u.pending=null;var P=x=x.next;do _=i(_,P.action),P=P.next;while(P!==x);Kr(_,o.memoizedState)||(En=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,m]}function WN(i,o,u){var m=Ke,x=dn(),_=st;if(_){if(u===void 0)throw Error(r(407));u=u()}else u=o();var P=!Kr((Nt||x).memoizedState,u);if(P&&(x.memoizedState=u,En=!0),x=x.queue,$x(XN.bind(null,m,x,i),[i]),x.getSnapshot!==o||P||_n!==null&&_n.memoizedState.tag&1){if(m.flags|=2048,su(9,{destroy:void 0},QN.bind(null,m,x,u,o),null),Ot===null)throw Error(r(349));_||(us&127)!==0||YN(m,o,u)}return u}function YN(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ke.updateQueue,o===null?(o=jp(),Ke.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function QN(i,o,u,m){o.value=u,o.getSnapshot=m,ZN(o)&&JN(i)}function XN(i,o,u){return u(function(){ZN(o)&&JN(i)})}function ZN(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Kr(i,u)}catch{return!0}}function JN(i){var o=Pl(i,2);o!==null&&Mr(o,i,2)}function Ux(i){var o=br();if(typeof i=="function"){var u=i;if(i=u(),Bl){da(!0);try{u()}finally{da(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:i},o}function e2(i,o,u,m){return i.baseState=u,Lx(i,Nt,typeof m=="function"?m:ds)}function n9(i,o,u,m,x){if(Cp(i))throw Error(r(485));if(i=o.action,i!==null){var _={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){_.listeners.push(P)}};Y.T!==null?u(!0):_.isTransition=!1,m(_),u=o.pending,u===null?(_.next=o.pending=_,t2(o,_)):(_.next=u.next,o.pending=u.next=_)}}function t2(i,o){var u=o.action,m=o.payload,x=i.state;if(o.isTransition){var _=Y.T,P={};Y.T=P;try{var B=u(x,m),G=Y.S;G!==null&&G(P,B),n2(i,o,B)}catch(ne){Vx(i,o,ne)}finally{_!==null&&P.types!==null&&(_.types=P.types),Y.T=_}}else try{_=u(x,m),n2(i,o,_)}catch(ne){Vx(i,o,ne)}}function n2(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){r2(i,o,m)},function(m){return Vx(i,o,m)}):r2(i,o,u)}function r2(i,o,u){o.status="fulfilled",o.value=u,a2(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,t2(i,u)))}function Vx(i,o,u){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,a2(o),o=o.next;while(o!==m)}i.action=null}function a2(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function i2(i,o){return o}function s2(i,o){if(st){var u=Ot.formState;if(u!==null){e:{var m=Ke;if(st){if(Lt){t:{for(var x=Lt,_=ba;x.nodeType!==8;){if(!_){x=null;break t}if(x=_a(x.nextSibling),x===null){x=null;break t}}_=x.data,x=_==="F!"||_==="F"?x:null}if(x){Lt=_a(x.nextSibling),m=x.data==="F!";break e}}ho(m)}m=!1}m&&(o=u[0])}}return u=br(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i2,lastRenderedState:o},u.queue=m,u=S2.bind(null,Ke,m),m.dispatch=u,m=Ux(!1),_=Gx.bind(null,Ke,!1,m.queue),m=br(),x={state:o,dispatch:null,action:i,pending:null},m.queue=x,u=n9.bind(null,Ke,x,_,u),x.dispatch=u,m.memoizedState=i,[o,u,!1]}function o2(i){var o=dn();return l2(o,Nt,i)}function l2(i,o,u){if(o=Lx(i,o,i2)[0],i=Ap(ds)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=ff(o)}catch(P){throw P===tu?gp:P}else m=o;o=dn();var x=o.queue,_=x.dispatch;return u!==o.memoizedState&&(Ke.flags|=2048,su(9,{destroy:void 0},r9.bind(null,x,u),null)),[m,_,i]}function r9(i,o){i.action=o}function c2(i){var o=dn(),u=Nt;if(u!==null)return l2(o,u,i);dn(),o=o.memoizedState,u=dn();var m=u.queue.dispatch;return u.memoizedState=i,[o,m,!1]}function su(i,o,u,m){return i={tag:i,create:u,deps:m,inst:o,next:null},o=Ke.updateQueue,o===null&&(o=jp(),Ke.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(m=u.next,u.next=i,i.next=m,o.lastEffect=i),i}function u2(){return dn().memoizedState}function Np(i,o,u,m){var x=br();Ke.flags|=i,x.memoizedState=su(1|o,{destroy:void 0},u,m===void 0?null:m)}function Tp(i,o,u,m){var x=dn();m=m===void 0?null:m;var _=x.memoizedState.inst;Nt!==null&&m!==null&&Ix(m,Nt.memoizedState.deps)?x.memoizedState=su(o,_,u,m):(Ke.flags|=i,x.memoizedState=su(1|o,_,u,m))}function d2(i,o){Np(8390656,8,i,o)}function $x(i,o){Tp(2048,8,i,o)}function a9(i){Ke.flags|=4;var o=Ke.updateQueue;if(o===null)o=jp(),Ke.updateQueue=o,o.events=[i];else{var u=o.events;u===null?o.events=[i]:u.push(i)}}function f2(i){var o=dn().memoizedState;return a9({ref:o,nextImpl:i}),function(){if((pt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function h2(i,o){return Tp(4,2,i,o)}function m2(i,o){return Tp(4,4,i,o)}function p2(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function g2(i,o,u){u=u!=null?u.concat([i]):null,Tp(4,4,p2.bind(null,o,i),u)}function Bx(){}function y2(i,o){var u=dn();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&Ix(o,m[1])?m[0]:(u.memoizedState=[i,o],i)}function v2(i,o){var u=dn();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&Ix(o,m[1]))return m[0];if(m=i(),Bl){da(!0);try{i()}finally{da(!1)}}return u.memoizedState=[m,o],m}function Fx(i,o,u){return u===void 0||(us&1073741824)!==0&&(tt&261930)===0?i.memoizedState=o:(i.memoizedState=u,i=xT(),Ke.lanes|=i,_o|=i,u)}function x2(i,o,u,m){return Kr(u,o)?u:ru.current!==null?(i=Fx(i,u,m),Kr(i,o)||(En=!0),i):(us&42)===0||(us&1073741824)!==0&&(tt&261930)===0?(En=!0,i.memoizedState=u):(i=xT(),Ke.lanes|=i,_o|=i,o)}function b2(i,o,u,m,x){var _=ie.p;ie.p=_!==0&&8>_?_:8;var P=Y.T,B={};Y.T=B,Gx(i,!1,o,u);try{var G=x(),ne=Y.S;if(ne!==null&&ne(B,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ce=J8(G,m);hf(i,o,ce,Jr(i))}else hf(i,o,m,Jr(i))}catch(me){hf(i,o,{then:function(){},status:"rejected",reason:me},Jr())}finally{ie.p=_,P!==null&&B.types!==null&&(P.types=B.types),Y.T=P}}function i9(){}function qx(i,o,u,m){if(i.tag!==5)throw Error(r(476));var x=w2(i).queue;b2(i,x,o,H,u===null?i9:function(){return _2(i),u(m)})}function w2(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:H},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function _2(i){var o=w2(i);o.next===null&&(o=i.alternate.memoizedState),hf(i,o.next.queue,{},Jr())}function Hx(){return tr(kf)}function E2(){return dn().memoizedState}function j2(){return dn().memoizedState}function s9(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=Jr();i=go(u);var m=yo(o,i,u);m!==null&&(Mr(m,o,u),lf(m,o,u)),o={cache:bx()},i.payload=o;return}o=o.return}}function o9(i,o,u){var m=Jr();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Cp(i)?A2(o,u):(u=cx(i,o,u,m),u!==null&&(Mr(u,i,m),N2(u,o,m)))}function S2(i,o,u){var m=Jr();hf(i,o,u,m)}function hf(i,o,u,m){var x={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Cp(i))A2(o,x);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var P=o.lastRenderedState,B=_(P,u);if(x.hasEagerState=!0,x.eagerState=B,Kr(B,P))return cp(i,o,x,0),Ot===null&&lp(),!1}catch{}finally{}if(u=cx(i,o,x,m),u!==null)return Mr(u,i,m),N2(u,o,m),!0}return!1}function Gx(i,o,u,m){if(m={lane:2,revertLane:jb(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Cp(i)){if(o)throw Error(r(479))}else o=cx(i,u,m,2),o!==null&&Mr(o,i,2)}function Cp(i){var o=i.alternate;return i===Ke||o!==null&&o===Ke}function A2(i,o){au=_p=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function N2(i,o,u){if((u&4194048)!==0){var m=o.lanes;m&=i.pendingLanes,u|=m,o.lanes=u,Rd(i,u)}}var mf={readContext:tr,use:Sp,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};mf.useEffectEvent=tn;var T2={readContext:tr,use:Sp,useCallback:function(i,o){return br().memoizedState=[i,o===void 0?null:o],i},useContext:tr,useEffect:d2,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,Np(4194308,4,p2.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Np(4194308,4,i,o)},useInsertionEffect:function(i,o){Np(4,2,i,o)},useMemo:function(i,o){var u=br();o=o===void 0?null:o;var m=i();if(Bl){da(!0);try{i()}finally{da(!1)}}return u.memoizedState=[m,o],m},useReducer:function(i,o,u){var m=br();if(u!==void 0){var x=u(o);if(Bl){da(!0);try{u(o)}finally{da(!1)}}}else x=o;return m.memoizedState=m.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},m.queue=i,i=i.dispatch=o9.bind(null,Ke,i),[m.memoizedState,i]},useRef:function(i){var o=br();return i={current:i},o.memoizedState=i},useState:function(i){i=Ux(i);var o=i.queue,u=S2.bind(null,Ke,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:Bx,useDeferredValue:function(i,o){var u=br();return Fx(u,i,o)},useTransition:function(){var i=Ux(!1);return i=b2.bind(null,Ke,i.queue,!0,!1),br().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var m=Ke,x=br();if(st){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),Ot===null)throw Error(r(349));(tt&127)!==0||YN(m,o,u)}x.memoizedState=u;var _={value:u,getSnapshot:o};return x.queue=_,d2(XN.bind(null,m,_,i),[i]),m.flags|=2048,su(9,{destroy:void 0},QN.bind(null,m,_,u,o),null),u},useId:function(){var i=br(),o=Ot.identifierPrefix;if(st){var u=Ti,m=Ni;u=(m&~(1<<32-ln(m)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Ep++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=e9++,o="_"+o+"r_"+u.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Hx,useFormState:s2,useActionState:s2,useOptimistic:function(i){var o=br();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Gx.bind(null,Ke,!0,u),u.dispatch=o,[i,o]},useMemoCache:Mx,useCacheRefresh:function(){return br().memoizedState=s9.bind(null,Ke)},useEffectEvent:function(i){var o=br(),u={impl:i};return o.memoizedState=u,function(){if((pt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Kx={readContext:tr,use:Sp,useCallback:y2,useContext:tr,useEffect:$x,useImperativeHandle:g2,useInsertionEffect:h2,useLayoutEffect:m2,useMemo:v2,useReducer:Ap,useRef:u2,useState:function(){return Ap(ds)},useDebugValue:Bx,useDeferredValue:function(i,o){var u=dn();return x2(u,Nt.memoizedState,i,o)},useTransition:function(){var i=Ap(ds)[0],o=dn().memoizedState;return[typeof i=="boolean"?i:ff(i),o]},useSyncExternalStore:WN,useId:E2,useHostTransitionStatus:Hx,useFormState:o2,useActionState:o2,useOptimistic:function(i,o){var u=dn();return e2(u,Nt,i,o)},useMemoCache:Mx,useCacheRefresh:j2};Kx.useEffectEvent=f2;var C2={readContext:tr,use:Sp,useCallback:y2,useContext:tr,useEffect:$x,useImperativeHandle:g2,useInsertionEffect:h2,useLayoutEffect:m2,useMemo:v2,useReducer:zx,useRef:u2,useState:function(){return zx(ds)},useDebugValue:Bx,useDeferredValue:function(i,o){var u=dn();return Nt===null?Fx(u,i,o):x2(u,Nt.memoizedState,i,o)},useTransition:function(){var i=zx(ds)[0],o=dn().memoizedState;return[typeof i=="boolean"?i:ff(i),o]},useSyncExternalStore:WN,useId:E2,useHostTransitionStatus:Hx,useFormState:c2,useActionState:c2,useOptimistic:function(i,o){var u=dn();return Nt!==null?e2(u,Nt,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Mx,useCacheRefresh:j2};C2.useEffectEvent=f2;function Wx(i,o,u,m){o=i.memoizedState,u=u(m,o),u=u==null?o:g({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Yx={enqueueSetState:function(i,o,u){i=i._reactInternals;var m=Jr(),x=go(m);x.payload=o,u!=null&&(x.callback=u),o=yo(i,x,m),o!==null&&(Mr(o,i,m),lf(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var m=Jr(),x=go(m);x.tag=1,x.payload=o,u!=null&&(x.callback=u),o=yo(i,x,m),o!==null&&(Mr(o,i,m),lf(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Jr(),m=go(u);m.tag=2,o!=null&&(m.callback=o),o=yo(i,m,u),o!==null&&(Mr(o,i,u),lf(o,i,u))}};function k2(i,o,u,m,x,_,P){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,_,P):o.prototype&&o.prototype.isPureReactComponent?!Jd(u,m)||!Jd(x,_):!0}function I2(i,o,u,m){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==i&&Yx.enqueueReplaceState(o,o.state,null)}function Fl(i,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(i=i.defaultProps){u===o&&(u=g({},u));for(var x in i)u[x]===void 0&&(u[x]=i[x])}return u}function O2(i){op(i)}function P2(i){console.error(i)}function R2(i){op(i)}function kp(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function D2(i,o,u){try{var m=i.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Qx(i,o,u){return u=go(u),u.tag=3,u.payload={element:null},u.callback=function(){kp(i,o)},u}function M2(i){return i=go(i),i.tag=3,i}function L2(i,o,u,m){var x=u.type.getDerivedStateFromError;if(typeof x=="function"){var _=m.value;i.payload=function(){return x(_)},i.callback=function(){D2(o,u,m)}}var P=u.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(i.callback=function(){D2(o,u,m),typeof x!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var B=m.stack;this.componentDidCatch(m.value,{componentStack:B!==null?B:""})})}function l9(i,o,u,m,x){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&Zc(o,u,x,!0),u=Yr.current,u!==null){switch(u.tag){case 31:case 13:return wa===null?Bp():u.alternate===null&&nn===0&&(nn=3),u.flags&=-257,u.flags|=65536,u.lanes=x,m===yp?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),wb(i,m,x)),!1;case 22:return u.flags|=65536,m===yp?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),wb(i,m,x)),!1}throw Error(r(435,u.tag))}return wb(i,m,x),Bp(),!1}if(st)return o=Yr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=x,m!==px&&(i=Error(r(422),{cause:m}),nf(ya(i,u)))):(m!==px&&(o=Error(r(423),{cause:m}),nf(ya(o,u))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,m=ya(m,u),x=Qx(i.stateNode,m,x),Ax(i,x),nn!==4&&(nn=2)),!1;var _=Error(r(520),{cause:m});if(_=ya(_,u),_f===null?_f=[_]:_f.push(_),nn!==4&&(nn=2),o===null)return!0;m=ya(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=x&-x,u.lanes|=i,i=Qx(u.stateNode,m,i),Ax(u,i),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Eo===null||!Eo.has(_))))return u.flags|=65536,x&=-x,u.lanes|=x,x=M2(x),L2(x,i,u,m),Ax(u,x),!1}u=u.return}while(u!==null);return!1}var Xx=Error(r(461)),En=!1;function nr(i,o,u,m){o.child=i===null?$N(o,null,u,m):$l(o,i.child,u,m)}function z2(i,o,u,m,x){u=u.render;var _=o.ref;if("ref"in m){var P={};for(var B in m)B!=="ref"&&(P[B]=m[B])}else P=m;return Ll(o),m=Ox(i,o,u,P,_,x),B=Px(),i!==null&&!En?(Rx(i,o,x),fs(i,o,x)):(st&&B&&hx(o),o.flags|=1,nr(i,o,m,x),o.child)}function U2(i,o,u,m,x){if(i===null){var _=u.type;return typeof _=="function"&&!ux(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,V2(i,o,_,m,x)):(i=dp(u.type,null,m,o,o.mode,x),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!ib(i,x)){var P=_.memoizedProps;if(u=u.compare,u=u!==null?u:Jd,u(P,m)&&i.ref===o.ref)return fs(i,o,x)}return o.flags|=1,i=ss(_,m),i.ref=o.ref,i.return=o,o.child=i}function V2(i,o,u,m,x){if(i!==null){var _=i.memoizedProps;if(Jd(_,m)&&i.ref===o.ref)if(En=!1,o.pendingProps=m=_,ib(i,x))(i.flags&131072)!==0&&(En=!0);else return o.lanes=i.lanes,fs(i,o,x)}return Zx(i,o,u,m,x)}function $2(i,o,u,m){var x=m.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,i!==null){for(m=o.child=i.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;m=x&~_}else m=0,o.child=null;return B2(i,o,_,u,m)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&pp(o,_!==null?_.cachePool:null),_!==null?qN(o,_):Tx(),HN(o);else return m=o.lanes=536870912,B2(i,o,_!==null?_.baseLanes|u:u,u,m)}else _!==null?(pp(o,_.cachePool),qN(o,_),xo(),o.memoizedState=null):(i!==null&&pp(o,null),Tx(),xo());return nr(i,o,x,u),o.child}function pf(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function B2(i,o,u,m,x){var _=_x();return _=_===null?null:{parent:wn._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},i!==null&&pp(o,null),Tx(),HN(o),i!==null&&Zc(i,o,m,!0),o.childLanes=x,null}function Ip(i,o){return o=Pp({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function F2(i,o,u){return $l(o,i.child,null,u),i=Ip(o,o.pendingProps),i.flags|=2,Qr(o),o.memoizedState=null,i}function c9(i,o,u){var m=o.pendingProps,x=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(st){if(m.mode==="hidden")return i=Ip(o,m),o.lanes=536870912,pf(null,i);if(kx(o),(i=Lt)?(i=tC(i,ba),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:uo!==null?{id:Ni,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},u=AN(i),u.return=o,o.child=u,er=o,Lt=null)):i=null,i===null)throw ho(o);return o.lanes=536870912,null}return Ip(o,m)}var _=i.memoizedState;if(_!==null){var P=_.dehydrated;if(kx(o),x)if(o.flags&256)o.flags&=-257,o=F2(i,o,u);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(En||Zc(i,o,u,!1),x=(u&i.childLanes)!==0,En||x){if(m=Ot,m!==null&&(P=Dd(m,u),P!==0&&P!==_.retryLane))throw _.retryLane=P,Pl(i,P),Mr(m,i,P),Xx;Bp(),o=F2(i,o,u)}else i=_.treeContext,Lt=_a(P.nextSibling),er=o,st=!0,fo=null,ba=!1,i!==null&&CN(o,i),o=Ip(o,m),o.flags|=4096;return o}return i=ss(i.child,{mode:m.mode,children:m.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Op(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function Zx(i,o,u,m,x){return Ll(o),u=Ox(i,o,u,m,void 0,x),m=Px(),i!==null&&!En?(Rx(i,o,x),fs(i,o,x)):(st&&m&&hx(o),o.flags|=1,nr(i,o,u,x),o.child)}function q2(i,o,u,m,x,_){return Ll(o),o.updateQueue=null,u=KN(o,m,u,x),GN(i),m=Px(),i!==null&&!En?(Rx(i,o,_),fs(i,o,_)):(st&&m&&hx(o),o.flags|=1,nr(i,o,u,_),o.child)}function H2(i,o,u,m,x){if(Ll(o),o.stateNode===null){var _=Wc,P=u.contextType;typeof P=="object"&&P!==null&&(_=tr(P)),_=new u(m,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Yx,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=m,_.state=o.memoizedState,_.refs={},jx(o),P=u.contextType,_.context=typeof P=="object"&&P!==null?tr(P):Wc,_.state=o.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(Wx(o,u,P,m),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(P=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),P!==_.state&&Yx.enqueueReplaceState(_,_.state,null),uf(o,m,_,x),cf(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(i===null){_=o.stateNode;var B=o.memoizedProps,G=Fl(u,B);_.props=G;var ne=_.context,ce=u.contextType;P=Wc,typeof ce=="object"&&ce!==null&&(P=tr(ce));var me=u.getDerivedStateFromProps;ce=typeof me=="function"||typeof _.getSnapshotBeforeUpdate=="function",B=o.pendingProps!==B,ce||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(B||ne!==P)&&I2(o,_,m,P),po=!1;var re=o.memoizedState;_.state=re,uf(o,m,_,x),cf(),ne=o.memoizedState,B||re!==ne||po?(typeof me=="function"&&(Wx(o,u,me,m),ne=o.memoizedState),(G=po||k2(o,u,G,m,re,ne,P))?(ce||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=ne),_.props=m,_.state=ne,_.context=P,m=G):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{_=o.stateNode,Sx(i,o),P=o.memoizedProps,ce=Fl(u,P),_.props=ce,me=o.pendingProps,re=_.context,ne=u.contextType,G=Wc,typeof ne=="object"&&ne!==null&&(G=tr(ne)),B=u.getDerivedStateFromProps,(ne=typeof B=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==me||re!==G)&&I2(o,_,m,G),po=!1,re=o.memoizedState,_.state=re,uf(o,m,_,x),cf();var oe=o.memoizedState;P!==me||re!==oe||po||i!==null&&i.dependencies!==null&&hp(i.dependencies)?(typeof B=="function"&&(Wx(o,u,B,m),oe=o.memoizedState),(ce=po||k2(o,u,ce,m,re,oe,G)||i!==null&&i.dependencies!==null&&hp(i.dependencies))?(ne||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,oe,G),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,oe,G)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=oe),_.props=m,_.state=oe,_.context=G,m=ce):(typeof _.componentDidUpdate!="function"||P===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),m=!1)}return _=m,Op(i,o),m=(o.flags&128)!==0,_||m?(_=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&m?(o.child=$l(o,i.child,null,x),o.child=$l(o,null,u,x)):nr(i,o,u,x),o.memoizedState=_.state,i=o.child):i=fs(i,o,x),i}function G2(i,o,u,m){return Dl(),o.flags|=256,nr(i,o,u,m),o.child}var Jx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eb(i){return{baseLanes:i,cachePool:DN()}}function tb(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=Zr),i}function K2(i,o,u){var m=o.pendingProps,x=!1,_=(o.flags&128)!==0,P;if((P=_)||(P=i!==null&&i.memoizedState===null?!1:(un.current&2)!==0),P&&(x=!0,o.flags&=-129),P=(o.flags&32)!==0,o.flags&=-33,i===null){if(st){if(x?vo(o):xo(),(i=Lt)?(i=tC(i,ba),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:uo!==null?{id:Ni,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},u=AN(i),u.return=o,o.child=u,er=o,Lt=null)):i=null,i===null)throw ho(o);return Lb(i)?o.lanes=32:o.lanes=536870912,null}var B=m.children;return m=m.fallback,x?(xo(),x=o.mode,B=Pp({mode:"hidden",children:B},x),m=Rl(m,x,u,null),B.return=o,m.return=o,B.sibling=m,o.child=B,m=o.child,m.memoizedState=eb(u),m.childLanes=tb(i,P,u),o.memoizedState=Jx,pf(null,m)):(vo(o),nb(o,B))}var G=i.memoizedState;if(G!==null&&(B=G.dehydrated,B!==null)){if(_)o.flags&256?(vo(o),o.flags&=-257,o=rb(i,o,u)):o.memoizedState!==null?(xo(),o.child=i.child,o.flags|=128,o=null):(xo(),B=m.fallback,x=o.mode,m=Pp({mode:"visible",children:m.children},x),B=Rl(B,x,u,null),B.flags|=2,m.return=o,B.return=o,m.sibling=B,o.child=m,$l(o,i.child,null,u),m=o.child,m.memoizedState=eb(u),m.childLanes=tb(i,P,u),o.memoizedState=Jx,o=pf(null,m));else if(vo(o),Lb(B)){if(P=B.nextSibling&&B.nextSibling.dataset,P)var ne=P.dgst;P=ne,m=Error(r(419)),m.stack="",m.digest=P,nf({value:m,source:null,stack:null}),o=rb(i,o,u)}else if(En||Zc(i,o,u,!1),P=(u&i.childLanes)!==0,En||P){if(P=Ot,P!==null&&(m=Dd(P,u),m!==0&&m!==G.retryLane))throw G.retryLane=m,Pl(i,m),Mr(P,i,m),Xx;Mb(B)||Bp(),o=rb(i,o,u)}else Mb(B)?(o.flags|=192,o.child=i.child,o=null):(i=G.treeContext,Lt=_a(B.nextSibling),er=o,st=!0,fo=null,ba=!1,i!==null&&CN(o,i),o=nb(o,m.children),o.flags|=4096);return o}return x?(xo(),B=m.fallback,x=o.mode,G=i.child,ne=G.sibling,m=ss(G,{mode:"hidden",children:m.children}),m.subtreeFlags=G.subtreeFlags&65011712,ne!==null?B=ss(ne,B):(B=Rl(B,x,u,null),B.flags|=2),B.return=o,m.return=o,m.sibling=B,o.child=m,pf(null,m),m=o.child,B=i.child.memoizedState,B===null?B=eb(u):(x=B.cachePool,x!==null?(G=wn._currentValue,x=x.parent!==G?{parent:G,pool:G}:x):x=DN(),B={baseLanes:B.baseLanes|u,cachePool:x}),m.memoizedState=B,m.childLanes=tb(i,P,u),o.memoizedState=Jx,pf(i.child,m)):(vo(o),u=i.child,i=u.sibling,u=ss(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,i!==null&&(P=o.deletions,P===null?(o.deletions=[i],o.flags|=16):P.push(i)),o.child=u,o.memoizedState=null,u)}function nb(i,o){return o=Pp({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Pp(i,o){return i=Wr(22,i,null,o),i.lanes=0,i}function rb(i,o,u){return $l(o,i.child,null,u),i=nb(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function W2(i,o,u){i.lanes|=o;var m=i.alternate;m!==null&&(m.lanes|=o),vx(i.return,o,u)}function ab(i,o,u,m,x,_){var P=i.memoizedState;P===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:x,treeForkCount:_}:(P.isBackwards=o,P.rendering=null,P.renderingStartTime=0,P.last=m,P.tail=u,P.tailMode=x,P.treeForkCount=_)}function Y2(i,o,u){var m=o.pendingProps,x=m.revealOrder,_=m.tail;m=m.children;var P=un.current,B=(P&2)!==0;if(B?(P=P&1|2,o.flags|=128):P&=1,ge(un,P),nr(i,o,m,u),m=st?tf:0,!B&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&W2(i,u,o);else if(i.tag===19)W2(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(x){case"forwards":for(u=o.child,x=null;u!==null;)i=u.alternate,i!==null&&wp(i)===null&&(x=u),u=u.sibling;u=x,u===null?(x=o.child,o.child=null):(x=u.sibling,u.sibling=null),ab(o,!1,x,u,_,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,x=o.child,o.child=null;x!==null;){if(i=x.alternate,i!==null&&wp(i)===null){o.child=x;break}i=x.sibling,x.sibling=u,u=x,x=i}ab(o,!0,u,null,_,m);break;case"together":ab(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function fs(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),_o|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(Zc(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,u=ss(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=ss(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function ib(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&hp(i)))}function u9(i,o,u){switch(o.tag){case 3:vt(o,o.stateNode.containerInfo),mo(o,wn,i.memoizedState.cache),Dl();break;case 27:case 5:Ve(o);break;case 4:vt(o,o.stateNode.containerInfo);break;case 10:mo(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,kx(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(vo(o),o.flags|=128,null):(u&o.child.childLanes)!==0?K2(i,o,u):(vo(o),i=fs(i,o,u),i!==null?i.sibling:null);vo(o);break;case 19:var x=(i.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(Zc(i,o,u,!1),m=(u&o.childLanes)!==0),x){if(m)return Y2(i,o,u);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ge(un,un.current),m)break;return null;case 22:return o.lanes=0,$2(i,o,u,o.pendingProps);case 24:mo(o,wn,i.memoizedState.cache)}return fs(i,o,u)}function Q2(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)En=!0;else{if(!ib(i,u)&&(o.flags&128)===0)return En=!1,u9(i,o,u);En=(i.flags&131072)!==0}else En=!1,st&&(o.flags&1048576)!==0&&TN(o,tf,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(i=Ul(o.elementType),o.type=i,typeof i=="function")ux(i)?(m=Fl(i,m),o.tag=1,o=H2(null,o,i,m,u)):(o.tag=0,o=Zx(null,o,i,m,u));else{if(i!=null){var x=i.$$typeof;if(x===T){o.tag=11,o=z2(null,o,i,m,u);break e}else if(x===N){o.tag=14,o=U2(null,o,i,m,u);break e}}throw o=Z(i)||i,Error(r(306,o,""))}}return o;case 0:return Zx(i,o,o.type,o.pendingProps,u);case 1:return m=o.type,x=Fl(m,o.pendingProps),H2(i,o,m,x,u);case 3:e:{if(vt(o,o.stateNode.containerInfo),i===null)throw Error(r(387));m=o.pendingProps;var _=o.memoizedState;x=_.element,Sx(i,o),uf(o,m,null,u);var P=o.memoizedState;if(m=P.cache,mo(o,wn,m),m!==_.cache&&xx(o,[wn],u,!0),cf(),m=P.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:P.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=G2(i,o,m,u);break e}else if(m!==x){x=ya(Error(r(424)),o),nf(x),o=G2(i,o,m,u);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Lt=_a(i.firstChild),er=o,st=!0,fo=null,ba=!0,u=$N(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Dl(),m===x){o=fs(i,o,u);break e}nr(i,o,m,u)}o=o.child}return o;case 26:return Op(i,o),i===null?(u=oC(o.type,null,o.pendingProps,null))?o.memoizedState=u:st||(u=o.type,i=o.pendingProps,m=Yp(Oe.current).createElement(u),m[vn]=o,m[$n]=i,rr(m,u,i),xn(m),o.stateNode=m):o.memoizedState=oC(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ve(o),i===null&&st&&(m=o.stateNode=aC(o.type,o.pendingProps,Oe.current),er=o,ba=!0,x=Lt,No(o.type)?(zb=x,Lt=_a(m.firstChild)):Lt=x),nr(i,o,o.pendingProps.children,u),Op(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&st&&((x=m=Lt)&&(m=V9(m,o.type,o.pendingProps,ba),m!==null?(o.stateNode=m,er=o,Lt=_a(m.firstChild),ba=!1,x=!0):x=!1),x||ho(o)),Ve(o),x=o.type,_=o.pendingProps,P=i!==null?i.memoizedProps:null,m=_.children,Pb(x,_)?m=null:P!==null&&Pb(x,P)&&(o.flags|=32),o.memoizedState!==null&&(x=Ox(i,o,t9,null,null,u),kf._currentValue=x),Op(i,o),nr(i,o,m,u),o.child;case 6:return i===null&&st&&((i=u=Lt)&&(u=$9(u,o.pendingProps,ba),u!==null?(o.stateNode=u,er=o,Lt=null,i=!0):i=!1),i||ho(o)),null;case 13:return K2(i,o,u);case 4:return vt(o,o.stateNode.containerInfo),m=o.pendingProps,i===null?o.child=$l(o,null,m,u):nr(i,o,m,u),o.child;case 11:return z2(i,o,o.type,o.pendingProps,u);case 7:return nr(i,o,o.pendingProps,u),o.child;case 8:return nr(i,o,o.pendingProps.children,u),o.child;case 12:return nr(i,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,mo(o,o.type,m.value),nr(i,o,m.children,u),o.child;case 9:return x=o.type._context,m=o.pendingProps.children,Ll(o),x=tr(x),m=m(x),o.flags|=1,nr(i,o,m,u),o.child;case 14:return U2(i,o,o.type,o.pendingProps,u);case 15:return V2(i,o,o.type,o.pendingProps,u);case 19:return Y2(i,o,u);case 31:return c9(i,o,u);case 22:return $2(i,o,u,o.pendingProps);case 24:return Ll(o),m=tr(wn),i===null?(x=_x(),x===null&&(x=Ot,_=bx(),x.pooledCache=_,_.refCount++,_!==null&&(x.pooledCacheLanes|=u),x=_),o.memoizedState={parent:m,cache:x},jx(o),mo(o,wn,x)):((i.lanes&u)!==0&&(Sx(i,o),uf(o,null,null,u),cf()),x=i.memoizedState,_=o.memoizedState,x.parent!==m?(x={parent:m,cache:m},o.memoizedState=x,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=x),mo(o,wn,m)):(m=_.cache,mo(o,wn,m),m!==x.cache&&xx(o,[wn],u,!0))),nr(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function hs(i){i.flags|=4}function sb(i,o,u,m,x){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(x&335544128)===x)if(i.stateNode.complete)i.flags|=8192;else if(ET())i.flags|=8192;else throw Vl=yp,Ex}else i.flags&=-16777217}function X2(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!fC(o))if(ET())i.flags|=8192;else throw Vl=yp,Ex}function Rp(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Vm():536870912,i.lanes|=o,uu|=o)}function gf(i,o){if(!st)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function zt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,m=0;if(o)for(var x=i.child;x!==null;)u|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)u|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=m,i.childLanes=u,o}function d9(i,o,u){var m=o.pendingProps;switch(mx(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(o),null;case 1:return zt(o),null;case 3:return u=o.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),cs(wn),ue(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Xc(o)?hs(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gx())),zt(o),null;case 26:var x=o.type,_=o.memoizedState;return i===null?(hs(o),_!==null?(zt(o),X2(o,_)):(zt(o),sb(o,x,null,m,u))):_?_!==i.memoizedState?(hs(o),zt(o),X2(o,_)):(zt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==m&&hs(o),zt(o),sb(o,x,i,m,u)),null;case 27:if(He(o),u=Oe.current,x=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&hs(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return zt(o),null}i=ye.current,Xc(o)?kN(o):(i=aC(x,m,u),o.stateNode=i,hs(o))}return zt(o),null;case 5:if(He(o),x=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&hs(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return zt(o),null}if(_=ye.current,Xc(o))kN(o);else{var P=Yp(Oe.current);switch(_){case 1:_=P.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:_=P.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":_=P.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":_=P.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":_=P.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?P.createElement("select",{is:m.is}):P.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?P.createElement(x,{is:m.is}):P.createElement(x)}}_[vn]=o,_[$n]=m;e:for(P=o.child;P!==null;){if(P.tag===5||P.tag===6)_.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===o)break e;for(;P.sibling===null;){if(P.return===null||P.return===o)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}o.stateNode=_;e:switch(rr(_,x,m),x){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&hs(o)}}return zt(o),sb(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,u),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==m&&hs(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(r(166));if(i=Oe.current,Xc(o)){if(i=o.stateNode,u=o.memoizedProps,m=null,x=er,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}i[vn]=o,i=!!(i.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||KT(i.nodeValue,u)),i||ho(o,!0)}else i=Yp(i).createTextNode(m),i[vn]=o,o.stateNode=i}return zt(o),null;case 31:if(u=o.memoizedState,i===null||i.memoizedState!==null){if(m=Xc(o),u!==null){if(i===null){if(!m)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[vn]=o}else Dl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;zt(o),i=!1}else u=gx(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return o.flags&256?(Qr(o),o):(Qr(o),null);if((o.flags&128)!==0)throw Error(r(558))}return zt(o),null;case 13:if(m=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=Xc(o),m!==null&&m.dehydrated!==null){if(i===null){if(!x)throw Error(r(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[vn]=o}else Dl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;zt(o),x=!1}else x=gx(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return o.flags&256?(Qr(o),o):(Qr(o),null)}return Qr(o),(o.flags&128)!==0?(o.lanes=u,o):(u=m!==null,i=i!==null&&i.memoizedState!==null,u&&(m=o.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==x&&(m.flags|=2048)),u!==i&&u&&(o.child.flags|=8192),Rp(o,o.updateQueue),zt(o),null);case 4:return ue(),i===null&&Tb(o.stateNode.containerInfo),zt(o),null;case 10:return cs(o.type),zt(o),null;case 19:if(ae(un),m=o.memoizedState,m===null)return zt(o),null;if(x=(o.flags&128)!==0,_=m.rendering,_===null)if(x)gf(m,!1);else{if(nn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=wp(i),_!==null){for(o.flags|=128,gf(m,!1),i=_.updateQueue,o.updateQueue=i,Rp(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)SN(u,i),u=u.sibling;return ge(un,un.current&1|2),st&&os(o,m.treeForkCount),o.child}i=i.sibling}m.tail!==null&&vr()>Up&&(o.flags|=128,x=!0,gf(m,!1),o.lanes=4194304)}else{if(!x)if(i=wp(_),i!==null){if(o.flags|=128,x=!0,i=i.updateQueue,o.updateQueue=i,Rp(o,i),gf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!st)return zt(o),null}else 2*vr()-m.renderingStartTime>Up&&u!==536870912&&(o.flags|=128,x=!0,gf(m,!1),o.lanes=4194304);m.isBackwards?(_.sibling=o.child,o.child=_):(i=m.last,i!==null?i.sibling=_:o.child=_,m.last=_)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=vr(),i.sibling=null,u=un.current,ge(un,x?u&1|2:u&1),st&&os(o,m.treeForkCount),i):(zt(o),null);case 22:case 23:return Qr(o),Cx(),m=o.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(zt(o),o.subtreeFlags&6&&(o.flags|=8192)):zt(o),u=o.updateQueue,u!==null&&Rp(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),i!==null&&ae(zl),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),cs(wn),zt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function f9(i,o){switch(mx(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return cs(wn),ue(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return He(o),null;case 31:if(o.memoizedState!==null){if(Qr(o),o.alternate===null)throw Error(r(340));Dl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Qr(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Dl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ae(un),null;case 4:return ue(),null;case 10:return cs(o.type),null;case 22:case 23:return Qr(o),Cx(),i!==null&&ae(zl),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return cs(wn),null;case 25:return null;default:return null}}function Z2(i,o){switch(mx(o),o.tag){case 3:cs(wn),ue();break;case 26:case 27:case 5:He(o);break;case 4:ue();break;case 31:o.memoizedState!==null&&Qr(o);break;case 13:Qr(o);break;case 19:ae(un);break;case 10:cs(o.type);break;case 22:case 23:Qr(o),Cx(),i!==null&&ae(zl);break;case 24:cs(wn)}}function yf(i,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var x=m.next;u=x;do{if((u.tag&i)===i){m=void 0;var _=u.create,P=u.inst;m=_(),P.destroy=m}u=u.next}while(u!==x)}}catch(B){_t(o,o.return,B)}}function bo(i,o,u){try{var m=o.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var _=x.next;m=_;do{if((m.tag&i)===i){var P=m.inst,B=P.destroy;if(B!==void 0){P.destroy=void 0,x=o;var G=u,ne=B;try{ne()}catch(ce){_t(x,G,ce)}}}m=m.next}while(m!==_)}}catch(ce){_t(o,o.return,ce)}}function J2(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{FN(o,u)}catch(m){_t(i,i.return,m)}}}function eT(i,o,u){u.props=Fl(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(m){_t(i,o,m)}}function vf(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof u=="function"?i.refCleanup=u(m):u.current=m}}catch(x){_t(i,o,x)}}function Ci(i,o){var u=i.ref,m=i.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(x){_t(i,o,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(x){_t(i,o,x)}else u.current=null}function tT(i){var o=i.type,u=i.memoizedProps,m=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(x){_t(i,i.return,x)}}function ob(i,o,u){try{var m=i.stateNode;R9(m,i.type,u,o),m[$n]=o}catch(x){_t(i,i.return,x)}}function nT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&No(i.type)||i.tag===4}function lb(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||nT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&No(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function cb(i,o,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=qa));else if(m!==4&&(m===27&&No(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(cb(i,o,u),i=i.sibling;i!==null;)cb(i,o,u),i=i.sibling}function Dp(i,o,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(m!==4&&(m===27&&No(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Dp(i,o,u),i=i.sibling;i!==null;)Dp(i,o,u),i=i.sibling}function rT(i){var o=i.stateNode,u=i.memoizedProps;try{for(var m=i.type,x=o.attributes;x.length;)o.removeAttributeNode(x[0]);rr(o,m,u),o[vn]=i,o[$n]=u}catch(_){_t(i,i.return,_)}}var ms=!1,jn=!1,ub=!1,aT=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function h9(i,o){if(i=i.containerInfo,Ib=ng,i=gN(i),rx(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var x=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var P=0,B=-1,G=-1,ne=0,ce=0,me=i,re=null;t:for(;;){for(var oe;me!==u||x!==0&&me.nodeType!==3||(B=P+x),me!==_||m!==0&&me.nodeType!==3||(G=P+m),me.nodeType===3&&(P+=me.nodeValue.length),(oe=me.firstChild)!==null;)re=me,me=oe;for(;;){if(me===i)break t;if(re===u&&++ne===x&&(B=P),re===_&&++ce===m&&(G=P),(oe=me.nextSibling)!==null)break;me=re,re=me.parentNode}me=oe}u=B===-1||G===-1?null:{start:B,end:G}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ob={focusedElem:i,selectionRange:u},ng=!1,Fn=o;Fn!==null;)if(o=Fn,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Fn=i;else for(;Fn!==null;){switch(o=Fn,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)x=i[u],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,u=o,x=_.memoizedProps,_=_.memoizedState,m=u.stateNode;try{var Ae=Fl(u.type,x);i=m.getSnapshotBeforeUpdate(Ae,_),m.__reactInternalSnapshotBeforeUpdate=i}catch(Le){_t(u,u.return,Le)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)Db(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Db(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Fn=i;break}Fn=o.return}}function iT(i,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:gs(i,u),m&4&&yf(5,u);break;case 1:if(gs(i,u),m&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(P){_t(u,u.return,P)}else{var x=Fl(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(x,o,i.__reactInternalSnapshotBeforeUpdate)}catch(P){_t(u,u.return,P)}}m&64&&J2(u),m&512&&vf(u,u.return);break;case 3:if(gs(i,u),m&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{FN(i,o)}catch(P){_t(u,u.return,P)}}break;case 27:o===null&&m&4&&rT(u);case 26:case 5:gs(i,u),o===null&&m&4&&tT(u),m&512&&vf(u,u.return);break;case 12:gs(i,u);break;case 31:gs(i,u),m&4&&lT(i,u);break;case 13:gs(i,u),m&4&&cT(i,u),m&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=_9.bind(null,u),B9(i,u))));break;case 22:if(m=u.memoizedState!==null||ms,!m){o=o!==null&&o.memoizedState!==null||jn,x=ms;var _=jn;ms=m,(jn=o)&&!_?ys(i,u,(u.subtreeFlags&8772)!==0):gs(i,u),ms=x,jn=_}break;case 30:break;default:gs(i,u)}}function sT(i){var o=i.alternate;o!==null&&(i.alternate=null,sT(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Rc(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var qt=null,Or=!1;function ps(i,o,u){for(u=u.child;u!==null;)oT(i,o,u),u=u.sibling}function oT(i,o,u){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Va,u)}catch{}switch(u.tag){case 26:jn||Ci(u,o),ps(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:jn||Ci(u,o);var m=qt,x=Or;No(u.type)&&(qt=u.stateNode,Or=!1),ps(i,o,u),Nf(u.stateNode),qt=m,Or=x;break;case 5:jn||Ci(u,o);case 6:if(m=qt,x=Or,qt=null,ps(i,o,u),qt=m,Or=x,qt!==null)if(Or)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(u.stateNode)}catch(_){_t(u,o,_)}else try{qt.removeChild(u.stateNode)}catch(_){_t(u,o,_)}break;case 18:qt!==null&&(Or?(i=qt,JT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),vu(i)):JT(qt,u.stateNode));break;case 4:m=qt,x=Or,qt=u.stateNode.containerInfo,Or=!0,ps(i,o,u),qt=m,Or=x;break;case 0:case 11:case 14:case 15:bo(2,u,o),jn||bo(4,u,o),ps(i,o,u);break;case 1:jn||(Ci(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&eT(u,o,m)),ps(i,o,u);break;case 21:ps(i,o,u);break;case 22:jn=(m=jn)||u.memoizedState!==null,ps(i,o,u),jn=m;break;default:ps(i,o,u)}}function lT(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{vu(i)}catch(u){_t(o,o.return,u)}}}function cT(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{vu(i)}catch(u){_t(o,o.return,u)}}function m9(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new aT),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new aT),o;default:throw Error(r(435,i.tag))}}function Mp(i,o){var u=m9(i);o.forEach(function(m){if(!u.has(m)){u.add(m);var x=E9.bind(null,i,m);m.then(x,x)}})}function Pr(i,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var x=u[m],_=i,P=o,B=P;e:for(;B!==null;){switch(B.tag){case 27:if(No(B.type)){qt=B.stateNode,Or=!1;break e}break;case 5:qt=B.stateNode,Or=!1;break e;case 3:case 4:qt=B.stateNode.containerInfo,Or=!0;break e}B=B.return}if(qt===null)throw Error(r(160));oT(_,P,x),qt=null,Or=!1,_=x.alternate,_!==null&&(_.return=null),x.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)uT(o,i),o=o.sibling}var Qa=null;function uT(i,o){var u=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Pr(o,i),Rr(i),m&4&&(bo(3,i,i.return),yf(3,i),bo(5,i,i.return));break;case 1:Pr(o,i),Rr(i),m&512&&(jn||u===null||Ci(u,u.return)),m&64&&ms&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var x=Qa;if(Pr(o,i),Rr(i),m&512&&(jn||u===null||Ci(u,u.return)),m&4){var _=u!==null?u.memoizedState:null;if(m=i.memoizedState,u===null)if(m===null)if(i.stateNode===null){e:{m=i.type,u=i.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":_=x.getElementsByTagName("title")[0],(!_||_[pi]||_[vn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=x.createElement(m),x.head.insertBefore(_,x.querySelector("head > title"))),rr(_,m,u),_[vn]=i,xn(_),m=_;break e;case"link":var P=uC("link","href",x).get(m+(u.href||""));if(P){for(var B=0;B<P.length;B++)if(_=P[B],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){P.splice(B,1);break t}}_=x.createElement(m),rr(_,m,u),x.head.appendChild(_);break;case"meta":if(P=uC("meta","content",x).get(m+(u.content||""))){for(B=0;B<P.length;B++)if(_=P[B],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){P.splice(B,1);break t}}_=x.createElement(m),rr(_,m,u),x.head.appendChild(_);break;default:throw Error(r(468,m))}_[vn]=i,xn(_),m=_}i.stateNode=m}else dC(x,i.type,i.stateNode);else i.stateNode=cC(x,m,i.memoizedProps);else _!==m?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,m===null?dC(x,i.type,i.stateNode):cC(x,m,i.memoizedProps)):m===null&&i.stateNode!==null&&ob(i,i.memoizedProps,u.memoizedProps)}break;case 27:Pr(o,i),Rr(i),m&512&&(jn||u===null||Ci(u,u.return)),u!==null&&m&4&&ob(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Pr(o,i),Rr(i),m&512&&(jn||u===null||Ci(u,u.return)),i.flags&32){x=i.stateNode;try{Ir(x,"")}catch(Ae){_t(i,i.return,Ae)}}m&4&&i.stateNode!=null&&(x=i.memoizedProps,ob(i,x,u!==null?u.memoizedProps:x)),m&1024&&(ub=!0);break;case 6:if(Pr(o,i),Rr(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,u=i.stateNode;try{u.nodeValue=m}catch(Ae){_t(i,i.return,Ae)}}break;case 3:if(Zp=null,x=Qa,Qa=Qp(o.containerInfo),Pr(o,i),Qa=x,Rr(i),m&4&&u!==null&&u.memoizedState.isDehydrated)try{vu(o.containerInfo)}catch(Ae){_t(i,i.return,Ae)}ub&&(ub=!1,dT(i));break;case 4:m=Qa,Qa=Qp(i.stateNode.containerInfo),Pr(o,i),Rr(i),Qa=m;break;case 12:Pr(o,i),Rr(i);break;case 31:Pr(o,i),Rr(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Mp(i,m)));break;case 13:Pr(o,i),Rr(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(zp=vr()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Mp(i,m)));break;case 22:x=i.memoizedState!==null;var G=u!==null&&u.memoizedState!==null,ne=ms,ce=jn;if(ms=ne||x,jn=ce||G,Pr(o,i),jn=ce,ms=ne,Rr(i),m&8192)e:for(o=i.stateNode,o._visibility=x?o._visibility&-2:o._visibility|1,x&&(u===null||G||ms||jn||ql(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){G=u=o;try{if(_=G.stateNode,x)P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{B=G.stateNode;var me=G.memoizedProps.style,re=me!=null&&me.hasOwnProperty("display")?me.display:null;B.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Ae){_t(G,G.return,Ae)}}}else if(o.tag===6){if(u===null){G=o;try{G.stateNode.nodeValue=x?"":G.memoizedProps}catch(Ae){_t(G,G.return,Ae)}}}else if(o.tag===18){if(u===null){G=o;try{var oe=G.stateNode;x?eC(oe,!0):eC(G.stateNode,!1)}catch(Ae){_t(G,G.return,Ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=i.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,Mp(i,u))));break;case 19:Pr(o,i),Rr(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Mp(i,m)));break;case 30:break;case 21:break;default:Pr(o,i),Rr(i)}}function Rr(i){var o=i.flags;if(o&2){try{for(var u,m=i.return;m!==null;){if(nT(m)){u=m;break}m=m.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var x=u.stateNode,_=lb(i);Dp(i,_,x);break;case 5:var P=u.stateNode;u.flags&32&&(Ir(P,""),u.flags&=-33);var B=lb(i);Dp(i,B,P);break;case 3:case 4:var G=u.stateNode.containerInfo,ne=lb(i);cb(i,ne,G);break;default:throw Error(r(161))}}catch(ce){_t(i,i.return,ce)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function dT(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;dT(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function gs(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)iT(i,o.alternate,o),o=o.sibling}function ql(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:bo(4,o,o.return),ql(o);break;case 1:Ci(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&eT(o,o.return,u),ql(o);break;case 27:Nf(o.stateNode);case 26:case 5:Ci(o,o.return),ql(o);break;case 22:o.memoizedState===null&&ql(o);break;case 30:ql(o);break;default:ql(o)}i=i.sibling}}function ys(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,x=i,_=o,P=_.flags;switch(_.tag){case 0:case 11:case 15:ys(x,_,u),yf(4,_);break;case 1:if(ys(x,_,u),m=_,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ne){_t(m,m.return,ne)}if(m=_,x=m.updateQueue,x!==null){var B=m.stateNode;try{var G=x.shared.hiddenCallbacks;if(G!==null)for(x.shared.hiddenCallbacks=null,x=0;x<G.length;x++)BN(G[x],B)}catch(ne){_t(m,m.return,ne)}}u&&P&64&&J2(_),vf(_,_.return);break;case 27:rT(_);case 26:case 5:ys(x,_,u),u&&m===null&&P&4&&tT(_),vf(_,_.return);break;case 12:ys(x,_,u);break;case 31:ys(x,_,u),u&&P&4&&lT(x,_);break;case 13:ys(x,_,u),u&&P&4&&cT(x,_);break;case 22:_.memoizedState===null&&ys(x,_,u),vf(_,_.return);break;case 30:break;default:ys(x,_,u)}o=o.sibling}}function db(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&rf(u))}function fb(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&rf(i))}function Xa(i,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)fT(i,o,u,m),o=o.sibling}function fT(i,o,u,m){var x=o.flags;switch(o.tag){case 0:case 11:case 15:Xa(i,o,u,m),x&2048&&yf(9,o);break;case 1:Xa(i,o,u,m);break;case 3:Xa(i,o,u,m),x&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&rf(i)));break;case 12:if(x&2048){Xa(i,o,u,m),i=o.stateNode;try{var _=o.memoizedProps,P=_.id,B=_.onPostCommit;typeof B=="function"&&B(P,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(G){_t(o,o.return,G)}}else Xa(i,o,u,m);break;case 31:Xa(i,o,u,m);break;case 13:Xa(i,o,u,m);break;case 23:break;case 22:_=o.stateNode,P=o.alternate,o.memoizedState!==null?_._visibility&2?Xa(i,o,u,m):xf(i,o):_._visibility&2?Xa(i,o,u,m):(_._visibility|=2,ou(i,o,u,m,(o.subtreeFlags&10256)!==0||!1)),x&2048&&db(P,o);break;case 24:Xa(i,o,u,m),x&2048&&fb(o.alternate,o);break;default:Xa(i,o,u,m)}}function ou(i,o,u,m,x){for(x=x&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,P=o,B=u,G=m,ne=P.flags;switch(P.tag){case 0:case 11:case 15:ou(_,P,B,G,x),yf(8,P);break;case 23:break;case 22:var ce=P.stateNode;P.memoizedState!==null?ce._visibility&2?ou(_,P,B,G,x):xf(_,P):(ce._visibility|=2,ou(_,P,B,G,x)),x&&ne&2048&&db(P.alternate,P);break;case 24:ou(_,P,B,G,x),x&&ne&2048&&fb(P.alternate,P);break;default:ou(_,P,B,G,x)}o=o.sibling}}function xf(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,m=o,x=m.flags;switch(m.tag){case 22:xf(u,m),x&2048&&db(m.alternate,m);break;case 24:xf(u,m),x&2048&&fb(m.alternate,m);break;default:xf(u,m)}o=o.sibling}}var bf=8192;function lu(i,o,u){if(i.subtreeFlags&bf)for(i=i.child;i!==null;)hT(i,o,u),i=i.sibling}function hT(i,o,u){switch(i.tag){case 26:lu(i,o,u),i.flags&bf&&i.memoizedState!==null&&eV(u,Qa,i.memoizedState,i.memoizedProps);break;case 5:lu(i,o,u);break;case 3:case 4:var m=Qa;Qa=Qp(i.stateNode.containerInfo),lu(i,o,u),Qa=m;break;case 22:i.memoizedState===null&&(m=i.alternate,m!==null&&m.memoizedState!==null?(m=bf,bf=16777216,lu(i,o,u),bf=m):lu(i,o,u));break;default:lu(i,o,u)}}function mT(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function wf(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Fn=m,gT(m,i)}mT(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)pT(i),i=i.sibling}function pT(i){switch(i.tag){case 0:case 11:case 15:wf(i),i.flags&2048&&bo(9,i,i.return);break;case 3:wf(i);break;case 12:wf(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Lp(i)):wf(i);break;default:wf(i)}}function Lp(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Fn=m,gT(m,i)}mT(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:bo(8,o,o.return),Lp(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Lp(o));break;default:Lp(o)}i=i.sibling}}function gT(i,o){for(;Fn!==null;){var u=Fn;switch(u.tag){case 0:case 11:case 15:bo(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:rf(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,Fn=m;else e:for(u=i;Fn!==null;){m=Fn;var x=m.sibling,_=m.return;if(sT(m),m===u){Fn=null;break e}if(x!==null){x.return=_,Fn=x;break e}Fn=_}}}var p9={getCacheForType:function(i){var o=tr(wn),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u},cacheSignal:function(){return tr(wn).controller.signal}},g9=typeof WeakMap=="function"?WeakMap:Map,pt=0,Ot=null,Xe=null,tt=0,wt=0,Xr=null,wo=!1,cu=!1,hb=!1,vs=0,nn=0,_o=0,Hl=0,mb=0,Zr=0,uu=0,_f=null,Dr=null,pb=!1,zp=0,yT=0,Up=1/0,Vp=null,Eo=null,Pn=0,jo=null,du=null,xs=0,gb=0,yb=null,vT=null,Ef=0,vb=null;function Jr(){return(pt&2)!==0&&tt!==0?tt&-tt:Y.T!==null?jb():$m()}function xT(){if(Zr===0)if((tt&536870912)===0||st){var i=vl;vl<<=1,(vl&3932160)===0&&(vl=262144),Zr=i}else Zr=536870912;return i=Yr.current,i!==null&&(i.flags|=32),Zr}function Mr(i,o,u){(i===Ot&&(wt===2||wt===9)||i.cancelPendingCommit!==null)&&(fu(i,0),So(i,tt,Zr,!1)),xl(i,u),((pt&2)===0||i!==Ot)&&(i===Ot&&((pt&2)===0&&(Hl|=u),nn===4&&So(i,tt,Zr,!1)),ki(i))}function bT(i,o,u){if((pt&6)!==0)throw Error(r(327));var m=!u&&(o&127)===0&&(o&i.expiredLanes)===0||$a(i,o),x=m?x9(i,o):bb(i,o,!0),_=m;do{if(x===0){cu&&!m&&So(i,o,0,!1);break}else{if(u=i.current.alternate,_&&!y9(u)){x=bb(i,o,!1),_=!1;continue}if(x===2){if(_=o,i.errorRecoveryDisabledLanes&_)var P=0;else P=i.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){o=P;e:{var B=i;x=_f;var G=B.current.memoizedState.isDehydrated;if(G&&(fu(B,P).flags|=256),P=bb(B,P,!1),P!==2){if(hb&&!G){B.errorRecoveryDisabledLanes|=_,Hl|=_,x=4;break e}_=Dr,Dr=x,_!==null&&(Dr===null?Dr=_:Dr.push.apply(Dr,_))}x=P}if(_=!1,x!==2)continue}}if(x===1){fu(i,0),So(i,o,0,!0);break}e:{switch(m=i,_=x,_){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:So(m,o,Zr,!wo);break e;case 2:Dr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(x=zp+300-vr(),10<x)){if(So(m,o,Zr,!wo),fi(m,0,!0)!==0)break e;xs=o,m.timeoutHandle=XT(wT.bind(null,m,u,Dr,Vp,pb,o,Zr,Hl,uu,wo,_,"Throttled",-0,0),x);break e}wT(m,u,Dr,Vp,pb,o,Zr,Hl,uu,wo,_,null,-0,0)}}break}while(!0);ki(i)}function wT(i,o,u,m,x,_,P,B,G,ne,ce,me,re,oe){if(i.timeoutHandle=-1,me=o.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qa},hT(o,_,me);var Ae=(_&62914560)===_?zp-vr():(_&4194048)===_?yT-vr():0;if(Ae=tV(me,Ae),Ae!==null){xs=_,i.cancelPendingCommit=Ae(CT.bind(null,i,o,_,u,m,x,P,B,G,ce,me,null,re,oe)),So(i,_,P,!ne);return}}CT(i,o,_,u,m,x,P,B,G)}function y9(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var x=u[m],_=x.getSnapshot;x=x.value;try{if(!Kr(_(),x))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function So(i,o,u,m){o&=~mb,o&=~Hl,i.suspendedLanes|=o,i.pingedLanes&=~o,m&&(i.warmLanes|=o),m=i.expirationTimes;for(var x=o;0<x;){var _=31-ln(x),P=1<<_;m[_]=-1,x&=~P}u!==0&&bl(i,u,o)}function $p(){return(pt&6)===0?(jf(0),!1):!0}function xb(){if(Xe!==null){if(wt===0)var i=Xe.return;else i=Xe,ls=Ml=null,Dx(i),nu=null,sf=0,i=Xe;for(;i!==null;)Z2(i.alternate,i),i=i.return;Xe=null}}function fu(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,L9(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),xs=0,xb(),Ot=i,Xe=u=ss(i.current,null),tt=o,wt=0,Xr=null,wo=!1,cu=$a(i,o),hb=!1,uu=Zr=mb=Hl=_o=nn=0,Dr=_f=null,pb=!1,(o&8)!==0&&(o|=o&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=o;0<m;){var x=31-ln(m),_=1<<x;o|=i[x],m&=~_}return vs=o,lp(),u}function _T(i,o){Ke=null,Y.H=mf,o===tu||o===gp?(o=zN(),wt=3):o===Ex?(o=zN(),wt=4):wt=o===Xx?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Xr=o,Xe===null&&(nn=1,kp(i,ya(o,i.current)))}function ET(){var i=Yr.current;return i===null?!0:(tt&4194048)===tt?wa===null:(tt&62914560)===tt||(tt&536870912)!==0?i===wa:!1}function jT(){var i=Y.H;return Y.H=mf,i===null?mf:i}function ST(){var i=Y.A;return Y.A=p9,i}function Bp(){nn=4,wo||(tt&4194048)!==tt&&Yr.current!==null||(cu=!0),(_o&134217727)===0&&(Hl&134217727)===0||Ot===null||So(Ot,tt,Zr,!1)}function bb(i,o,u){var m=pt;pt|=2;var x=jT(),_=ST();(Ot!==i||tt!==o)&&(Vp=null,fu(i,o)),o=!1;var P=nn;e:do try{if(wt!==0&&Xe!==null){var B=Xe,G=Xr;switch(wt){case 8:xb(),P=6;break e;case 3:case 2:case 9:case 6:Yr.current===null&&(o=!0);var ne=wt;if(wt=0,Xr=null,hu(i,B,G,ne),u&&cu){P=0;break e}break;default:ne=wt,wt=0,Xr=null,hu(i,B,G,ne)}}v9(),P=nn;break}catch(ce){_T(i,ce)}while(!0);return o&&i.shellSuspendCounter++,ls=Ml=null,pt=m,Y.H=x,Y.A=_,Xe===null&&(Ot=null,tt=0,lp()),P}function v9(){for(;Xe!==null;)AT(Xe)}function x9(i,o){var u=pt;pt|=2;var m=jT(),x=ST();Ot!==i||tt!==o?(Vp=null,Up=vr()+500,fu(i,o)):cu=$a(i,o);e:do try{if(wt!==0&&Xe!==null){o=Xe;var _=Xr;t:switch(wt){case 1:wt=0,Xr=null,hu(i,o,_,1);break;case 2:case 9:if(MN(_)){wt=0,Xr=null,NT(o);break}o=function(){wt!==2&&wt!==9||Ot!==i||(wt=7),ki(i)},_.then(o,o);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:MN(_)?(wt=0,Xr=null,NT(o)):(wt=0,Xr=null,hu(i,o,_,7));break;case 5:var P=null;switch(Xe.tag){case 26:P=Xe.memoizedState;case 5:case 27:var B=Xe;if(P?fC(P):B.stateNode.complete){wt=0,Xr=null;var G=B.sibling;if(G!==null)Xe=G;else{var ne=B.return;ne!==null?(Xe=ne,Fp(ne)):Xe=null}break t}}wt=0,Xr=null,hu(i,o,_,5);break;case 6:wt=0,Xr=null,hu(i,o,_,6);break;case 8:xb(),nn=6;break e;default:throw Error(r(462))}}b9();break}catch(ce){_T(i,ce)}while(!0);return ls=Ml=null,Y.H=m,Y.A=x,pt=u,Xe!==null?0:(Ot=null,tt=0,lp(),nn)}function b9(){for(;Xe!==null&&!Id();)AT(Xe)}function AT(i){var o=Q2(i.alternate,i,vs);i.memoizedProps=i.pendingProps,o===null?Fp(i):Xe=o}function NT(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=q2(u,o,o.pendingProps,o.type,void 0,tt);break;case 11:o=q2(u,o,o.pendingProps,o.type.render,o.ref,tt);break;case 5:Dx(o);default:Z2(u,o),o=Xe=SN(o,vs),o=Q2(u,o,vs)}i.memoizedProps=i.pendingProps,o===null?Fp(i):Xe=o}function hu(i,o,u,m){ls=Ml=null,Dx(o),nu=null,sf=0;var x=o.return;try{if(l9(i,x,o,u,tt)){nn=1,kp(i,ya(u,i.current)),Xe=null;return}}catch(_){if(x!==null)throw Xe=x,_;nn=1,kp(i,ya(u,i.current)),Xe=null;return}o.flags&32768?(st||m===1?i=!0:cu||(tt&536870912)!==0?i=!1:(wo=i=!0,(m===2||m===9||m===3||m===6)&&(m=Yr.current,m!==null&&m.tag===13&&(m.flags|=16384))),TT(o,i)):Fp(o)}function Fp(i){var o=i;do{if((o.flags&32768)!==0){TT(o,wo);return}i=o.return;var u=d9(o.alternate,o,vs);if(u!==null){Xe=u;return}if(o=o.sibling,o!==null){Xe=o;return}Xe=o=i}while(o!==null);nn===0&&(nn=5)}function TT(i,o){do{var u=f9(i.alternate,i);if(u!==null){u.flags&=32767,Xe=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=u}while(i!==null);nn=6,Xe=null}function CT(i,o,u,m,x,_,P,B,G){i.cancelPendingCommit=null;do qp();while(Pn!==0);if((pt&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(_=o.lanes|o.childLanes,_|=lx,Jv(i,u,_,P,B,G),i===Ot&&(Xe=Ot=null,tt=0),du=o,jo=i,xs=u,gb=_,yb=x,vT=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,j9(eo,function(){return RT(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=Y.T,Y.T=null,x=ie.p,ie.p=2,P=pt,pt|=4;try{h9(i,o,u)}finally{pt=P,ie.p=x,Y.T=m}}Pn=1,kT(),IT(),OT()}}function kT(){if(Pn===1){Pn=0;var i=jo,o=du,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null;var m=ie.p;ie.p=2;var x=pt;pt|=4;try{uT(o,i);var _=Ob,P=gN(i.containerInfo),B=_.focusedElem,G=_.selectionRange;if(P!==B&&B&&B.ownerDocument&&pN(B.ownerDocument.documentElement,B)){if(G!==null&&rx(B)){var ne=G.start,ce=G.end;if(ce===void 0&&(ce=ne),"selectionStart"in B)B.selectionStart=ne,B.selectionEnd=Math.min(ce,B.value.length);else{var me=B.ownerDocument||document,re=me&&me.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Ae=B.textContent.length,Le=Math.min(G.start,Ae),Ct=G.end===void 0?Le:Math.min(G.end,Ae);!oe.extend&&Le>Ct&&(P=Ct,Ct=Le,Le=P);var X=mN(B,Le),Q=mN(B,Ct);if(X&&Q&&(oe.rangeCount!==1||oe.anchorNode!==X.node||oe.anchorOffset!==X.offset||oe.focusNode!==Q.node||oe.focusOffset!==Q.offset)){var ee=me.createRange();ee.setStart(X.node,X.offset),oe.removeAllRanges(),Le>Ct?(oe.addRange(ee),oe.extend(Q.node,Q.offset)):(ee.setEnd(Q.node,Q.offset),oe.addRange(ee))}}}}for(me=[],oe=B;oe=oe.parentNode;)oe.nodeType===1&&me.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<me.length;B++){var de=me[B];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}ng=!!Ib,Ob=Ib=null}finally{pt=x,ie.p=m,Y.T=u}}i.current=o,Pn=2}}function IT(){if(Pn===2){Pn=0;var i=jo,o=du,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=Y.T,Y.T=null;var m=ie.p;ie.p=2;var x=pt;pt|=4;try{iT(i,o.alternate,o)}finally{pt=x,ie.p=m,Y.T=u}}Pn=3}}function OT(){if(Pn===4||Pn===3){Pn=0,Rm();var i=jo,o=du,u=xs,m=vT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Pn=5:(Pn=0,du=jo=null,PT(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(Eo=null),ns(u),o=o.stateNode,Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Va,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=Y.T,x=ie.p,ie.p=2,Y.T=null;try{for(var _=i.onRecoverableError,P=0;P<m.length;P++){var B=m[P];_(B.value,{componentStack:B.stack})}}finally{Y.T=o,ie.p=x}}(xs&3)!==0&&qp(),ki(i),x=i.pendingLanes,(u&261930)!==0&&(x&42)!==0?i===vb?Ef++:(Ef=0,vb=i):Ef=0,jf(0)}}function PT(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,rf(o)))}function qp(){return kT(),IT(),OT(),RT()}function RT(){if(Pn!==5)return!1;var i=jo,o=gb;gb=0;var u=ns(xs),m=Y.T,x=ie.p;try{ie.p=32>u?32:u,Y.T=null,u=yb,yb=null;var _=jo,P=xs;if(Pn=0,du=jo=null,xs=0,(pt&6)!==0)throw Error(r(331));var B=pt;if(pt|=4,pT(_.current),fT(_,_.current,P,u),pt=B,jf(0,!1),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Va,_)}catch{}return!0}finally{ie.p=x,Y.T=m,PT(i,o)}}function DT(i,o,u){o=ya(u,o),o=Qx(i.stateNode,o,2),i=yo(i,o,2),i!==null&&(xl(i,2),ki(i))}function _t(i,o,u){if(i.tag===3)DT(i,i,u);else for(;o!==null;){if(o.tag===3){DT(o,i,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Eo===null||!Eo.has(m))){i=ya(u,i),u=M2(2),m=yo(o,u,2),m!==null&&(L2(u,m,o,i),xl(m,2),ki(m));break}}o=o.return}}function wb(i,o,u){var m=i.pingCache;if(m===null){m=i.pingCache=new g9;var x=new Set;m.set(o,x)}else x=m.get(o),x===void 0&&(x=new Set,m.set(o,x));x.has(u)||(hb=!0,x.add(u),i=w9.bind(null,i,o,u),o.then(i,i))}function w9(i,o,u){var m=i.pingCache;m!==null&&m.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Ot===i&&(tt&u)===u&&(nn===4||nn===3&&(tt&62914560)===tt&&300>vr()-zp?(pt&2)===0&&fu(i,0):mb|=u,uu===tt&&(uu=0)),ki(i)}function MT(i,o){o===0&&(o=Vm()),i=Pl(i,o),i!==null&&(xl(i,o),ki(i))}function _9(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),MT(i,u)}function E9(i,o){var u=0;switch(i.tag){case 31:case 13:var m=i.stateNode,x=i.memoizedState;x!==null&&(u=x.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(o),MT(i,u)}function j9(i,o){return xt(i,o)}var Hp=null,mu=null,_b=!1,Gp=!1,Eb=!1,Ao=0;function ki(i){i!==mu&&i.next===null&&(mu===null?Hp=mu=i:mu=mu.next=i),Gp=!0,_b||(_b=!0,A9())}function jf(i,o){if(!Eb&&Gp){Eb=!0;do for(var u=!1,m=Hp;m!==null;){if(i!==0){var x=m.pendingLanes;if(x===0)var _=0;else{var P=m.suspendedLanes,B=m.pingedLanes;_=(1<<31-ln(42|i)+1)-1,_&=x&~(P&~B),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,VT(m,_))}else _=tt,_=fi(m,m===Ot?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||$a(m,_)||(u=!0,VT(m,_));m=m.next}while(u);Eb=!1}}function S9(){LT()}function LT(){Gp=_b=!1;var i=0;Ao!==0&&M9()&&(i=Ao);for(var o=vr(),u=null,m=Hp;m!==null;){var x=m.next,_=zT(m,o);_===0?(m.next=null,u===null?Hp=x:u.next=x,x===null&&(mu=u)):(u=m,(i!==0||(_&3)!==0)&&(Gp=!0)),m=x}Pn!==0&&Pn!==5||jf(i),Ao!==0&&(Ao=0)}function zT(i,o){for(var u=i.suspendedLanes,m=i.pingedLanes,x=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var P=31-ln(_),B=1<<P,G=x[P];G===-1?((B&u)===0||(B&m)!==0)&&(x[P]=Zv(B,o)):G<=o&&(i.expiredLanes|=B),_&=~B}if(o=Ot,u=tt,u=fi(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,u===0||i===o&&(wt===2||wt===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Qt(m),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||$a(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(m!==null&&Qt(m),ns(u)){case 2:case 8:u=Pd;break;case 32:u=eo;break;case 268435456:u=Dm;break;default:u=eo}return m=UT.bind(null,i),u=xt(u,m),i.callbackPriority=o,i.callbackNode=u,o}return m!==null&&m!==null&&Qt(m),i.callbackPriority=2,i.callbackNode=null,2}function UT(i,o){if(Pn!==0&&Pn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(qp()&&i.callbackNode!==u)return null;var m=tt;return m=fi(i,i===Ot?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(bT(i,m,o),zT(i,vr()),i.callbackNode!=null&&i.callbackNode===u?UT.bind(null,i):null)}function VT(i,o){if(qp())return null;bT(i,o,!0)}function A9(){z9(function(){(pt&6)!==0?xt(Od,S9):LT()})}function jb(){if(Ao===0){var i=Jc;i===0&&(i=ui,ui<<=1,(ui&261888)===0&&(ui=256)),Ao=i}return Ao}function $T(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:zc(""+i)}function BT(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function N9(i,o,u,m,x){if(o==="submit"&&u&&u.stateNode===x){var _=$T((x[$n]||null).action),P=m.submitter;P&&(o=(o=P[$n]||null)?$T(o.formAction):P.getAttribute("formAction"),o!==null&&(_=o,P=null));var B=new Ei("action","action",null,m,x);i.push({event:B,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Ao!==0){var G=P?BT(x,P):new FormData(x);qx(u,{pending:!0,data:G,method:x.method,action:_},null,G)}}else typeof _=="function"&&(B.preventDefault(),G=P?BT(x,P):new FormData(x),qx(u,{pending:!0,data:G,method:x.method,action:_},_,G))},currentTarget:x}]})}}for(var Sb=0;Sb<ox.length;Sb++){var Ab=ox[Sb],T9=Ab.toLowerCase(),C9=Ab[0].toUpperCase()+Ab.slice(1);Ya(T9,"on"+C9)}Ya(xN,"onAnimationEnd"),Ya(bN,"onAnimationIteration"),Ya(wN,"onAnimationStart"),Ya("dblclick","onDoubleClick"),Ya("focusin","onFocus"),Ya("focusout","onBlur"),Ya(H8,"onTransitionRun"),Ya(G8,"onTransitionStart"),Ya(K8,"onTransitionCancel"),Ya(_N,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sf));function FT(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var m=i[u],x=m.event;m=m.listeners;e:{var _=void 0;if(o)for(var P=m.length-1;0<=P;P--){var B=m[P],G=B.instance,ne=B.currentTarget;if(B=B.listener,G!==_&&x.isPropagationStopped())break e;_=B,x.currentTarget=ne;try{_(x)}catch(ce){op(ce)}x.currentTarget=null,_=G}else for(P=0;P<m.length;P++){if(B=m[P],G=B.instance,ne=B.currentTarget,B=B.listener,G!==_&&x.isPropagationStopped())break e;_=B,x.currentTarget=ne;try{_(x)}catch(ce){op(ce)}x.currentTarget=null,_=G}}}}function Ze(i,o){var u=o[Pc];u===void 0&&(u=o[Pc]=new Set);var m=i+"__bubble";u.has(m)||(qT(o,i,2,!1),u.add(m))}function Nb(i,o,u){var m=0;o&&(m|=4),qT(u,i,m,o)}var Kp="_reactListening"+Math.random().toString(36).slice(2);function Tb(i){if(!i[Kp]){i[Kp]=!0,Md.forEach(function(u){u!=="selectionchange"&&(k9.has(u)||Nb(u,!1,i),Nb(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Kp]||(o[Kp]=!0,Nb("selectionchange",!1,o))}}function qT(i,o,u,m){switch(xC(o)){case 2:var x=aV;break;case 8:x=iV;break;default:x=Fb}u=x.bind(null,o,u,i),x=void 0,!Sl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),m?x!==void 0?i.addEventListener(o,u,{capture:!0,passive:x}):i.addEventListener(o,u,!0):x!==void 0?i.addEventListener(o,u,{passive:x}):i.addEventListener(o,u,!1)}function Cb(i,o,u,m,x){var _=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var B=m.stateNode.containerInfo;if(B===x)break;if(P===4)for(P=m.return;P!==null;){var G=P.tag;if((G===3||G===4)&&P.stateNode.containerInfo===x)return;P=P.return}for(;B!==null;){if(P=gi(B),P===null)return;if(G=P.tag,G===5||G===6||G===26||G===27){m=_=P;continue e}B=B.parentNode}}m=m.return}so(function(){var ne=_,ce=ha(u),me=[];e:{var re=EN.get(i);if(re!==void 0){var oe=Ei,Ae=i;switch(i){case"keypress":if(Nl(u)===0)break e;case"keydown":case"keyup":oe=ap;break;case"focusin":Ae="focus",oe=Cl;break;case"focusout":Ae="blur",oe=Cl;break;case"beforeblur":case"afterblur":oe=Cl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=A;break;case xN:case bN:case wN:oe=Xm;break;case _N:oe=F;break;case"scroll":case"scrollend":oe=Wd;break;case"wheel":oe=se;break;case"copy":case"cut":case"paste":oe=Zm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=is;break;case"toggle":case"beforetoggle":oe=Ge}var Le=(o&4)!==0,Ct=!Le&&(i==="scroll"||i==="scrollend"),X=Le?re!==null?re+"Capture":null:re;Le=[];for(var Q=ne,ee;Q!==null;){var de=Q;if(ee=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ee===null||X===null||(de=Ha(Q,X),de!=null&&Le.push(Af(Q,de,ee))),Ct)break;Q=Q.return}0<Le.length&&(re=new oe(re,Ae,null,u,ce),me.push({event:re,listeners:Le}))}}if((o&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",oe=i==="mouseout"||i==="pointerout",re&&u!==Hd&&(Ae=u.relatedTarget||u.fromElement)&&(gi(Ae)||Ae[mi]))break e;if((oe||re)&&(re=ce.window===ce?ce:(re=ce.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Ae=u.relatedTarget||u.toElement,oe=ne,Ae=Ae?gi(Ae):null,Ae!==null&&(Ct=s(Ae),Le=Ae.tag,Ae!==Ct||Le!==5&&Le!==27&&Le!==6)&&(Ae=null)):(oe=null,Ae=ne),oe!==Ae)){if(Le=Yd,de="onMouseLeave",X="onMouseEnter",Q="mouse",(i==="pointerout"||i==="pointerover")&&(Le=is,de="onPointerLeave",X="onPointerEnter",Q="pointer"),Ct=oe==null?re:Hr(oe),ee=Ae==null?re:Hr(Ae),re=new Le(de,Q+"leave",oe,u,ce),re.target=Ct,re.relatedTarget=ee,de=null,gi(ce)===ne&&(Le=new Le(X,Q+"enter",Ae,u,ce),Le.target=ee,Le.relatedTarget=Ct,de=Le),Ct=de,oe&&Ae)t:{for(Le=I9,X=oe,Q=Ae,ee=0,de=X;de;de=Le(de))ee++;de=0;for(var Re=Q;Re;Re=Le(Re))de++;for(;0<ee-de;)X=Le(X),ee--;for(;0<de-ee;)Q=Le(Q),de--;for(;ee--;){if(X===Q||Q!==null&&X===Q.alternate){Le=X;break t}X=Le(X),Q=Le(Q)}Le=null}else Le=null;oe!==null&&HT(me,re,oe,Le,!1),Ae!==null&&Ct!==null&&HT(me,Ct,Ae,Le,!0)}}e:{if(re=ne?Hr(ne):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var ct=lN;else if(sN(re))if(cN)ct=B8;else{ct=V8;var ke=U8}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&Lc(ne.elementType)&&(ct=lN):ct=$8;if(ct&&(ct=ct(i,ne))){oN(me,ct,u,ce);break e}ke&&ke(i,re,ne),i==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&Bd(re,"number",re.value)}switch(ke=ne?Hr(ne):window,i){case"focusin":(sN(ke)||ke.contentEditable==="true")&&(Hc=ke,ax=ne,ef=null);break;case"focusout":ef=ax=Hc=null;break;case"mousedown":ix=!0;break;case"contextmenu":case"mouseup":case"dragend":ix=!1,yN(me,u,ce);break;case"selectionchange":if(q8)break;case"keydown":case"keyup":yN(me,u,ce)}var We;if(mt)e:{switch(i){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else qc?kl(i,u)&&(nt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(nt="onCompositionStart");nt&&(Ai&&u.locale!=="ko"&&(qc||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&qc&&(We=Kd()):(_i=ce,Gd="value"in _i?_i.value:_i.textContent,qc=!0)),ke=Wp(ne,nt),0<ke.length&&(nt=new Si(nt,i,null,u,ce),me.push({event:nt,listeners:ke}),We?nt.data=We:(We=Fc(u),We!==null&&(nt.data=We)))),(We=pa?D8(i,u):M8(i,u))&&(nt=Wp(ne,"onBeforeInput"),0<nt.length&&(ke=new Si("onBeforeInput","beforeinput",null,u,ce),me.push({event:ke,listeners:nt}),ke.data=We)),N9(me,i,ne,u,ce)}FT(me,o)})}function Af(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Wp(i,o){for(var u=o+"Capture",m=[];i!==null;){var x=i,_=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||_===null||(x=Ha(i,u),x!=null&&m.unshift(Af(i,x,_)),x=Ha(i,o),x!=null&&m.push(Af(i,x,_))),i.tag===3)return m;i=i.return}return[]}function I9(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function HT(i,o,u,m,x){for(var _=o._reactName,P=[];u!==null&&u!==m;){var B=u,G=B.alternate,ne=B.stateNode;if(B=B.tag,G!==null&&G===m)break;B!==5&&B!==26&&B!==27||ne===null||(G=ne,x?(ne=Ha(u,_),ne!=null&&P.unshift(Af(u,ne,G))):x||(ne=Ha(u,_),ne!=null&&P.push(Af(u,ne,G)))),u=u.return}P.length!==0&&i.push({event:o,listeners:P})}var O9=/\r\n?/g,P9=/\u0000|\uFFFD/g;function GT(i){return(typeof i=="string"?i:""+i).replace(O9,`
`).replace(P9,"")}function KT(i,o){return o=GT(o),GT(i)===o}function Tt(i,o,u,m,x,_){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Ir(i,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Ir(i,""+m);break;case"className":Gr(i,"class",m);break;case"tabIndex":Gr(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Gr(i,u,m);break;case"style":qd(i,m,_);break;case"data":if(o!=="object"){Gr(i,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=zc(""+m),i.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&Tt(i,o,"name",x.name,x,null),Tt(i,o,"formEncType",x.formEncType,x,null),Tt(i,o,"formMethod",x.formMethod,x,null),Tt(i,o,"formTarget",x.formTarget,x,null)):(Tt(i,o,"encType",x.encType,x,null),Tt(i,o,"method",x.method,x,null),Tt(i,o,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=zc(""+m),i.setAttribute(u,m);break;case"onClick":m!=null&&(i.onclick=qa);break;case"onScroll":m!=null&&Ze("scroll",i);break;case"onScrollEnd":m!=null&&Ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(x.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}u=zc(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""+m):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":m===!0?i.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,m):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(u,m):i.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(u):i.setAttribute(u,m);break;case"popover":Ze("beforetoggle",i),Ze("toggle",i),Dc(i,"popover",m);break;case"xlinkActuate":bn(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":bn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":bn(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":bn(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":bn(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":bn(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":bn(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":bn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":bn(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Dc(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Wm.get(u)||u,Dc(i,u,m))}}function kb(i,o,u,m,x,_){switch(u){case"style":qd(i,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(x.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof m=="string"?Ir(i,m):(typeof m=="number"||typeof m=="bigint")&&Ir(i,""+m);break;case"onScroll":m!=null&&Ze("scroll",i);break;case"onScrollEnd":m!=null&&Ze("scrollend",i);break;case"onClick":m!=null&&(i.onclick=qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ld.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(x=u.endsWith("Capture"),o=u.slice(2,x?u.length-7:void 0),_=i[$n]||null,_=_!=null?_[u]:null,typeof _=="function"&&i.removeEventListener(o,_,x),typeof m=="function")){typeof _!="function"&&_!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,m,x);break e}u in i?i[u]=m:m===!0?i.setAttribute(u,""):Dc(i,u,m)}}}function rr(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",i),Ze("load",i);var m=!1,x=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var P=u[_];if(P!=null)switch(_){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Tt(i,o,_,P,u,null)}}x&&Tt(i,o,"srcSet",u.srcSet,u,null),m&&Tt(i,o,"src",u.src,u,null);return;case"input":Ze("invalid",i);var B=_=P=x=null,G=null,ne=null;for(m in u)if(u.hasOwnProperty(m)){var ce=u[m];if(ce!=null)switch(m){case"name":x=ce;break;case"type":P=ce;break;case"checked":G=ce;break;case"defaultChecked":ne=ce;break;case"value":_=ce;break;case"defaultValue":B=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,o));break;default:Tt(i,o,m,ce,u,null)}}Hm(i,_,B,G,ne,P,x,!1);return;case"select":Ze("invalid",i),m=P=_=null;for(x in u)if(u.hasOwnProperty(x)&&(B=u[x],B!=null))switch(x){case"value":_=B;break;case"defaultValue":P=B;break;case"multiple":m=B;default:Tt(i,o,x,B,u,null)}o=_,u=P,i.multiple=!!m,o!=null?no(i,!!m,o,!1):u!=null&&no(i,!!m,u,!0);return;case"textarea":Ze("invalid",i),_=x=m=null;for(P in u)if(u.hasOwnProperty(P)&&(B=u[P],B!=null))switch(P){case"value":m=B;break;case"defaultValue":x=B;break;case"children":_=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Tt(i,o,P,B,u,null)}ro(i,m,x,_);return;case"option":for(G in u)if(u.hasOwnProperty(G)&&(m=u[G],m!=null))switch(G){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Tt(i,o,G,m,u,null)}return;case"dialog":Ze("beforetoggle",i),Ze("toggle",i),Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":Ze("load",i);break;case"video":case"audio":for(m=0;m<Sf.length;m++)Ze(Sf[m],i);break;case"image":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"embed":case"source":case"link":Ze("error",i),Ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in u)if(u.hasOwnProperty(ne)&&(m=u[ne],m!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Tt(i,o,ne,m,u,null)}return;default:if(Lc(o)){for(ce in u)u.hasOwnProperty(ce)&&(m=u[ce],m!==void 0&&kb(i,o,ce,m,u,void 0));return}}for(B in u)u.hasOwnProperty(B)&&(m=u[B],m!=null&&Tt(i,o,B,m,u,null))}function R9(i,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,_=null,P=null,B=null,G=null,ne=null,ce=null;for(oe in u){var me=u[oe];if(u.hasOwnProperty(oe)&&me!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":G=me;default:m.hasOwnProperty(oe)||Tt(i,o,oe,null,m,me)}}for(var re in m){var oe=m[re];if(me=u[re],m.hasOwnProperty(re)&&(oe!=null||me!=null))switch(re){case"type":_=oe;break;case"name":x=oe;break;case"checked":ne=oe;break;case"defaultChecked":ce=oe;break;case"value":P=oe;break;case"defaultValue":B=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:oe!==me&&Tt(i,o,re,oe,m,me)}}Mc(i,P,B,G,ne,ce,_,x);return;case"select":oe=P=B=re=null;for(_ in u)if(G=u[_],u.hasOwnProperty(_)&&G!=null)switch(_){case"value":break;case"multiple":oe=G;default:m.hasOwnProperty(_)||Tt(i,o,_,null,m,G)}for(x in m)if(_=m[x],G=u[x],m.hasOwnProperty(x)&&(_!=null||G!=null))switch(x){case"value":re=_;break;case"defaultValue":B=_;break;case"multiple":P=_;default:_!==G&&Tt(i,o,x,_,m,G)}o=B,u=P,m=oe,re!=null?no(i,!!u,re,!1):!!m!=!!u&&(o!=null?no(i,!!u,o,!0):no(i,!!u,u?[]:"",!1));return;case"textarea":oe=re=null;for(B in u)if(x=u[B],u.hasOwnProperty(B)&&x!=null&&!m.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Tt(i,o,B,null,m,x)}for(P in m)if(x=m[P],_=u[P],m.hasOwnProperty(P)&&(x!=null||_!=null))switch(P){case"value":re=x;break;case"defaultValue":oe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==_&&Tt(i,o,P,x,m,_)}Gm(i,re,oe);return;case"option":for(var Ae in u)if(re=u[Ae],u.hasOwnProperty(Ae)&&re!=null&&!m.hasOwnProperty(Ae))switch(Ae){case"selected":i.selected=!1;break;default:Tt(i,o,Ae,null,m,re)}for(G in m)if(re=m[G],oe=u[G],m.hasOwnProperty(G)&&re!==oe&&(re!=null||oe!=null))switch(G){case"selected":i.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Tt(i,o,G,re,m,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)re=u[Le],u.hasOwnProperty(Le)&&re!=null&&!m.hasOwnProperty(Le)&&Tt(i,o,Le,null,m,re);for(ne in m)if(re=m[ne],oe=u[ne],m.hasOwnProperty(ne)&&re!==oe&&(re!=null||oe!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:Tt(i,o,ne,re,m,oe)}return;default:if(Lc(o)){for(var Ct in u)re=u[Ct],u.hasOwnProperty(Ct)&&re!==void 0&&!m.hasOwnProperty(Ct)&&kb(i,o,Ct,void 0,m,re);for(ce in m)re=m[ce],oe=u[ce],!m.hasOwnProperty(ce)||re===oe||re===void 0&&oe===void 0||kb(i,o,ce,re,m,oe);return}}for(var X in u)re=u[X],u.hasOwnProperty(X)&&re!=null&&!m.hasOwnProperty(X)&&Tt(i,o,X,null,m,re);for(me in m)re=m[me],oe=u[me],!m.hasOwnProperty(me)||re===oe||re==null&&oe==null||Tt(i,o,me,re,m,oe)}function WT(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D9(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var x=u[m],_=x.transferSize,P=x.initiatorType,B=x.duration;if(_&&B&&WT(P)){for(P=0,B=x.responseEnd,m+=1;m<u.length;m++){var G=u[m],ne=G.startTime;if(ne>B)break;var ce=G.transferSize,me=G.initiatorType;ce&&WT(me)&&(G=G.responseEnd,P+=ce*(G<B?1:(B-ne)/(G-ne)))}if(--m,o+=8*(_+P)/(x.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Ib=null,Ob=null;function Yp(i){return i.nodeType===9?i:i.ownerDocument}function YT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function QT(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Pb(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Rb=null;function M9(){var i=window.event;return i&&i.type==="popstate"?i===Rb?!1:(Rb=i,!0):(Rb=null,!1)}var XT=typeof setTimeout=="function"?setTimeout:void 0,L9=typeof clearTimeout=="function"?clearTimeout:void 0,ZT=typeof Promise=="function"?Promise:void 0,z9=typeof queueMicrotask=="function"?queueMicrotask:typeof ZT<"u"?function(i){return ZT.resolve(null).then(i).catch(U9)}:XT;function U9(i){setTimeout(function(){throw i})}function No(i){return i==="head"}function JT(i,o){var u=o,m=0;do{var x=u.nextSibling;if(i.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"||u==="/&"){if(m===0){i.removeChild(x),vu(o);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")Nf(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,Nf(u);for(var _=u.firstChild;_;){var P=_.nextSibling,B=_.nodeName;_[pi]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=P}}else u==="body"&&Nf(i.ownerDocument.body);u=x}while(u);vu(o)}function eC(i,o){var u=i;i=0;do{var m=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=m}while(u)}function Db(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Db(u),Rc(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function V9(i,o,u,m){for(;i.nodeType===1;){var x=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[pi])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=_a(i.nextSibling),i===null)break}return null}function $9(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=_a(i.nextSibling),i===null))return null;return i}function tC(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=_a(i.nextSibling),i===null))return null;return i}function Mb(i){return i.data==="$?"||i.data==="$~"}function Lb(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function B9(i,o){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||u.readyState!=="loading")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function _a(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var zb=null;function nC(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(o===0)return _a(i.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}i=i.nextSibling}return null}function rC(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return i;o--}else u!=="/$"&&u!=="/&"||o++}i=i.previousSibling}return null}function aC(i,o,u){switch(o=Yp(u),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Nf(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Rc(i)}var Ea=new Map,iC=new Set;function Qp(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var bs=ie.d;ie.d={f:F9,r:q9,D:H9,C:G9,L:K9,m:W9,X:Q9,S:Y9,M:X9};function F9(){var i=bs.f(),o=$p();return i||o}function q9(i){var o=fa(i);o!==null&&o.tag===5&&o.type==="form"?_2(o):bs.r(i)}var pu=typeof document>"u"?null:document;function sC(i,o,u){var m=pu;if(m&&typeof o=="string"&&o){var x=kr(o);x='link[rel="'+i+'"][href="'+x+'"]',typeof u=="string"&&(x+='[crossorigin="'+u+'"]'),iC.has(x)||(iC.add(x),i={rel:i,crossOrigin:u,href:o},m.querySelector(x)===null&&(o=m.createElement("link"),rr(o,"link",i),xn(o),m.head.appendChild(o)))}}function H9(i){bs.D(i),sC("dns-prefetch",i,null)}function G9(i,o){bs.C(i,o),sC("preconnect",i,o)}function K9(i,o,u){bs.L(i,o,u);var m=pu;if(m&&i&&o){var x='link[rel="preload"][as="'+kr(o)+'"]';o==="image"&&u&&u.imageSrcSet?(x+='[imagesrcset="'+kr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(x+='[imagesizes="'+kr(u.imageSizes)+'"]')):x+='[href="'+kr(i)+'"]';var _=x;switch(o){case"style":_=gu(i);break;case"script":_=yu(i)}Ea.has(_)||(i=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),Ea.set(_,i),m.querySelector(x)!==null||o==="style"&&m.querySelector(Tf(_))||o==="script"&&m.querySelector(Cf(_))||(o=m.createElement("link"),rr(o,"link",i),xn(o),m.head.appendChild(o)))}}function W9(i,o){bs.m(i,o);var u=pu;if(u&&i){var m=o&&typeof o.as=="string"?o.as:"script",x='link[rel="modulepreload"][as="'+kr(m)+'"][href="'+kr(i)+'"]',_=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=yu(i)}if(!Ea.has(_)&&(i=g({rel:"modulepreload",href:i},o),Ea.set(_,i),u.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Cf(_)))return}m=u.createElement("link"),rr(m,"link",i),xn(m),u.head.appendChild(m)}}}function Y9(i,o,u){bs.S(i,o,u);var m=pu;if(m&&i){var x=yi(m).hoistableStyles,_=gu(i);o=o||"default";var P=x.get(_);if(!P){var B={loading:0,preload:null};if(P=m.querySelector(Tf(_)))B.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},u),(u=Ea.get(_))&&Ub(i,u);var G=P=m.createElement("link");xn(G),rr(G,"link",i),G._p=new Promise(function(ne,ce){G.onload=ne,G.onerror=ce}),G.addEventListener("load",function(){B.loading|=1}),G.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Xp(P,o,m)}P={type:"stylesheet",instance:P,count:1,state:B},x.set(_,P)}}}function Q9(i,o){bs.X(i,o);var u=pu;if(u&&i){var m=yi(u).hoistableScripts,x=yu(i),_=m.get(x);_||(_=u.querySelector(Cf(x)),_||(i=g({src:i,async:!0},o),(o=Ea.get(x))&&Vb(i,o),_=u.createElement("script"),xn(_),rr(_,"link",i),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(x,_))}}function X9(i,o){bs.M(i,o);var u=pu;if(u&&i){var m=yi(u).hoistableScripts,x=yu(i),_=m.get(x);_||(_=u.querySelector(Cf(x)),_||(i=g({src:i,async:!0,type:"module"},o),(o=Ea.get(x))&&Vb(i,o),_=u.createElement("script"),xn(_),rr(_,"link",i),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(x,_))}}function oC(i,o,u,m){var x=(x=Oe.current)?Qp(x):null;if(!x)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=gu(u.href),u=yi(x).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=gu(u.href);var _=yi(x).hoistableStyles,P=_.get(i);if(P||(x=x.ownerDocument||x,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,P),(_=x.querySelector(Tf(i)))&&!_._p&&(P.instance=_,P.state.loading=5),Ea.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ea.set(i,u),_||Z9(x,i,u,P.state))),o&&m===null)throw Error(r(528,""));return P}if(o&&m!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=yu(u),u=yi(x).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function gu(i){return'href="'+kr(i)+'"'}function Tf(i){return'link[rel="stylesheet"]['+i+"]"}function lC(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function Z9(i,o,u,m){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=i.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),rr(o,"link",u),xn(o),i.head.appendChild(o))}function yu(i){return'[src="'+kr(i)+'"]'}function Cf(i){return"script[async]"+i}function cC(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=i.querySelector('style[data-href~="'+kr(u.href)+'"]');if(m)return o.instance=m,xn(m),m;var x=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),xn(m),rr(m,"style",x),Xp(m,u.precedence,i),o.instance=m;case"stylesheet":x=gu(u.href);var _=i.querySelector(Tf(x));if(_)return o.state.loading|=4,o.instance=_,xn(_),_;m=lC(u),(x=Ea.get(x))&&Ub(m,x),_=(i.ownerDocument||i).createElement("link"),xn(_);var P=_;return P._p=new Promise(function(B,G){P.onload=B,P.onerror=G}),rr(_,"link",m),o.state.loading|=4,Xp(_,u.precedence,i),o.instance=_;case"script":return _=yu(u.src),(x=i.querySelector(Cf(_)))?(o.instance=x,xn(x),x):(m=u,(x=Ea.get(_))&&(m=g({},u),Vb(m,x)),i=i.ownerDocument||i,x=i.createElement("script"),xn(x),rr(x,"link",m),i.head.appendChild(x),o.instance=x);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Xp(m,u.precedence,i));return o.instance}function Xp(i,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,_=x,P=0;P<m.length;P++){var B=m[P];if(B.dataset.precedence===o)_=B;else if(_!==x)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function Ub(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Vb(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Zp=null;function uC(i,o,u){if(Zp===null){var m=new Map,x=Zp=new Map;x.set(u,m)}else x=Zp,m=x.get(u),m||(m=new Map,x.set(u,m));if(m.has(i))return m;for(m.set(i,null),u=u.getElementsByTagName(i),x=0;x<u.length;x++){var _=u[x];if(!(_[pi]||_[vn]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var P=_.getAttribute(o)||"";P=i+P;var B=m.get(P);B?B.push(_):m.set(P,[_])}}return m}function dC(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function J9(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function fC(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function eV(i,o,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var x=gu(m.href),_=o.querySelector(Tf(x));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Jp.bind(i),o.then(i,i)),u.state.loading|=4,u.instance=_,xn(_);return}_=o.ownerDocument||o,m=lC(m),(x=Ea.get(x))&&Ub(m,x),_=_.createElement("link"),xn(_);var P=_;P._p=new Promise(function(B,G){P.onload=B,P.onerror=G}),rr(_,"link",m),u.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Jp.bind(i),o.addEventListener("load",u),o.addEventListener("error",u))}}var $b=0;function tV(i,o){return i.stylesheets&&i.count===0&&tg(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var m=setTimeout(function(){if(i.stylesheets&&tg(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&$b===0&&($b=62500*D9());var x=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&tg(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>$b?50:800)+o);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(m),clearTimeout(x)}}:null}function Jp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var eg=null;function tg(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,eg=new Map,o.forEach(nV,i),eg=null,Jp.call(i))}function nV(i,o){if(!(o.state.loading&4)){var u=eg.get(i);if(u)var m=u.get(null);else{u=new Map,eg.set(i,u);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<x.length;_++){var P=x[_];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(u.set(P.dataset.precedence,P),m=P)}m&&u.set(null,m)}x=o.instance,P=x.getAttribute("data-precedence"),_=u.get(P)||m,_===m&&u.set(null,x),u.set(P,x),this.count++,m=Jp.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),_?_.parentNode.insertBefore(x,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),o.state.loading|=4}}var kf={$$typeof:M,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function rV(i,o,u,m,x,_,P,B,G){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=_,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function hC(i,o,u,m,x,_,P,B,G,ne,ce,me){return i=new rV(i,o,u,P,G,ne,ce,me,B),o=1,_===!0&&(o|=24),_=Wr(3,null,null,o),i.current=_,_.stateNode=i,o=bx(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:m,isDehydrated:u,cache:o},jx(_),i}function mC(i){return i?(i=Wc,i):Wc}function pC(i,o,u,m,x,_){x=mC(x),m.context===null?m.context=x:m.pendingContext=x,m=go(o),m.payload={element:u},_=_===void 0?null:_,_!==null&&(m.callback=_),u=yo(i,m,o),u!==null&&(Mr(u,i,o),lf(u,i,o))}function gC(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Bb(i,o){gC(i,o),(i=i.alternate)&&gC(i,o)}function yC(i){if(i.tag===13||i.tag===31){var o=Pl(i,67108864);o!==null&&Mr(o,i,67108864),Bb(i,67108864)}}function vC(i){if(i.tag===13||i.tag===31){var o=Jr();o=wl(o);var u=Pl(i,o);u!==null&&Mr(u,i,o),Bb(i,o)}}var ng=!0;function aV(i,o,u,m){var x=Y.T;Y.T=null;var _=ie.p;try{ie.p=2,Fb(i,o,u,m)}finally{ie.p=_,Y.T=x}}function iV(i,o,u,m){var x=Y.T;Y.T=null;var _=ie.p;try{ie.p=8,Fb(i,o,u,m)}finally{ie.p=_,Y.T=x}}function Fb(i,o,u,m){if(ng){var x=qb(m);if(x===null)Cb(i,o,m,rg,u),bC(i,m);else if(oV(x,i,o,u,m))m.stopPropagation();else if(bC(i,m),o&4&&-1<sV.indexOf(i)){for(;x!==null;){var _=fa(x);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var P=di(_.pendingLanes);if(P!==0){var B=_;for(B.pendingLanes|=2,B.entangledLanes|=2;P;){var G=1<<31-ln(P);B.entanglements[1]|=G,P&=~G}ki(_),(pt&6)===0&&(Up=vr()+500,jf(0))}}break;case 31:case 13:B=Pl(_,2),B!==null&&Mr(B,_,2),$p(),Bb(_,2)}if(_=qb(m),_===null&&Cb(i,o,m,rg,u),_===x)break;x=_}x!==null&&m.stopPropagation()}else Cb(i,o,m,null,u)}}function qb(i){return i=ha(i),Hb(i)}var rg=null;function Hb(i){if(rg=null,i=gi(i),i!==null){var o=s(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=c(o),i!==null)return i;i=null}else if(u===31){if(i=d(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return rg=i,null}function xC(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yl()){case Od:return 2;case Pd:return 8;case eo:case Xv:return 32;case Dm:return 268435456;default:return 32}default:return 32}}var Gb=!1,To=null,Co=null,ko=null,If=new Map,Of=new Map,Io=[],sV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bC(i,o){switch(i){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":If.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Of.delete(o.pointerId)}}function Pf(i,o,u,m,x,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:_,targetContainers:[x]},o!==null&&(o=fa(o),o!==null&&yC(o)),i):(i.eventSystemFlags|=m,o=i.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),i)}function oV(i,o,u,m,x){switch(o){case"focusin":return To=Pf(To,i,o,u,m,x),!0;case"dragenter":return Co=Pf(Co,i,o,u,m,x),!0;case"mouseover":return ko=Pf(ko,i,o,u,m,x),!0;case"pointerover":var _=x.pointerId;return If.set(_,Pf(If.get(_)||null,i,o,u,m,x)),!0;case"gotpointercapture":return _=x.pointerId,Of.set(_,Pf(Of.get(_)||null,i,o,u,m,x)),!0}return!1}function wC(i){var o=gi(i.target);if(o!==null){var u=s(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){i.blockedOn=o,Ba(i.priority,function(){vC(u)});return}}else if(o===31){if(o=d(u),o!==null){i.blockedOn=o,Ba(i.priority,function(){vC(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ag(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=qb(i.nativeEvent);if(u===null){u=i.nativeEvent;var m=new u.constructor(u.type,u);Hd=m,u.target.dispatchEvent(m),Hd=null}else return o=fa(u),o!==null&&yC(o),i.blockedOn=u,!1;o.shift()}return!0}function _C(i,o,u){ag(i)&&u.delete(o)}function lV(){Gb=!1,To!==null&&ag(To)&&(To=null),Co!==null&&ag(Co)&&(Co=null),ko!==null&&ag(ko)&&(ko=null),If.forEach(_C),Of.forEach(_C)}function ig(i,o){i.blockedOn===o&&(i.blockedOn=null,Gb||(Gb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,lV)))}var sg=null;function EC(i){sg!==i&&(sg=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sg===i&&(sg=null);for(var o=0;o<i.length;o+=3){var u=i[o],m=i[o+1],x=i[o+2];if(typeof m!="function"){if(Hb(m||u)===null)continue;break}var _=fa(u);_!==null&&(i.splice(o,3),o-=3,qx(_,{pending:!0,data:x,method:u.method,action:m},m,x))}}))}function vu(i){function o(G){return ig(G,i)}To!==null&&ig(To,i),Co!==null&&ig(Co,i),ko!==null&&ig(ko,i),If.forEach(o),Of.forEach(o);for(var u=0;u<Io.length;u++){var m=Io[u];m.blockedOn===i&&(m.blockedOn=null)}for(;0<Io.length&&(u=Io[0],u.blockedOn===null);)wC(u),u.blockedOn===null&&Io.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var x=u[m],_=u[m+1],P=x[$n]||null;if(typeof _=="function")P||EC(u);else if(P){var B=null;if(_&&_.hasAttribute("formAction")){if(x=_,P=_[$n]||null)B=P.formAction;else if(Hb(x)!==null)continue}else B=P.action;typeof B=="function"?u[m+1]=B:(u.splice(m,3),m-=3),EC(u)}}}function jC(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(P){return x=P})},focusReset:"manual",scroll:"manual"})}function o(){x!==null&&(x(),x=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,x=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),x!==null&&(x(),x=null)}}}function Kb(i){this._internalRoot=i}og.prototype.render=Kb.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,m=Jr();pC(u,m,i,o,null,null)},og.prototype.unmount=Kb.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;pC(i.current,2,null,i,null,null),$p(),o[mi]=null}};function og(i){this._internalRoot=i}og.prototype.unstable_scheduleHydration=function(i){if(i){var o=$m();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Io.length&&o!==0&&o<Io[u].priority;u++);Io.splice(u,0,i),u===0&&wC(i)}};var SC=e.version;if(SC!=="19.2.0")throw Error(r(527,SC,"19.2.0"));ie.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(o),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var cV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lg.isDisabled&&lg.supportsFiber)try{Va=lg.inject(cV),Zn=lg}catch{}}return Df.createRoot=function(i,o){if(!a(i))throw Error(r(299));var u=!1,m="",x=O2,_=P2,P=R2;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError)),o=hC(i,1,!1,null,null,u,m,null,x,_,P,jC),i[mi]=o.current,Tb(i),new Kb(o)},Df.hydrateRoot=function(i,o,u){if(!a(i))throw Error(r(299));var m=!1,x="",_=O2,P=P2,B=R2,G=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(P=u.onCaughtError),u.onRecoverableError!==void 0&&(B=u.onRecoverableError),u.formState!==void 0&&(G=u.formState)),o=hC(i,1,!0,o,u??null,m,x,G,_,P,B,jC),o.context=mC(null),u=o.current,m=Jr(),m=wl(m),x=go(m),x.callback=null,yo(u,x,m),u=m,o.current.lanes=u,xl(o,u),ki(o),i[mi]=o.current,Tb(i),new og(o)},Df.version="19.2.0",Df}var DC;function _V(){if(DC)return Xb.exports;DC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xb.exports=wV(),Xb.exports}var EV=_V();const jV=Xi(EV);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var MC="popstate";function SV(t={}){function e(r,a){let{pathname:s,search:c,hash:d}=r.location;return r_("",{pathname:s,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:hh(a)}return NV(e,n,null,t)}function Kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Oa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AV(){return Math.random().toString(36).substring(2,10)}function LC(t,e){return{usr:t.state,key:t.key,idx:e}}function r_(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?od(e):e,state:n,key:e&&e.key||r||AV()}}function hh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function od(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function NV(t,e,n,r={}){let{window:a=document.defaultView,v5Compat:s=!1}=r,c=a.history,d="POP",f=null,h=p();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function p(){return(c.state||{idx:null}).idx}function g(){d="POP";let S=p(),k=S==null?null:S-h;h=S,f&&f({action:d,location:j.location,delta:k})}function v(S,k){d="PUSH";let z=r_(j.location,S,k);h=p()+1;let M=LC(z,h),T=j.createHref(z);try{c.pushState(M,"",T)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(T)}s&&f&&f({action:d,location:j.location,delta:1})}function w(S,k){d="REPLACE";let z=r_(j.location,S,k);h=p();let M=LC(z,h),T=j.createHref(z);c.replaceState(M,"",T),s&&f&&f({action:d,location:j.location,delta:0})}function E(S){return TV(S)}let j={get action(){return d},get location(){return t(a,c)},listen(S){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(MC,g),f=S,()=>{a.removeEventListener(MC,g),f=null}},createHref(S){return e(a,S)},createURL:E,encodeLocation(S){let k=E(S);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:v,replace:w,go(S){return c.go(S)}};return j}function TV(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:hh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function WD(t,e,n="/"){return CV(t,e,n,!1)}function CV(t,e,n,r){let a=typeof e=="string"?od(e):e,s=Ds(a.pathname||"/",n);if(s==null)return null;let c=YD(t);kV(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let h=$V(s);d=UV(c[f],h,r)}return d}function YD(t,e=[],n=[],r="",a=!1){let s=(c,d,f=a,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&f)return;Kt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=Cs([r,p.relativePath]),v=n.concat(p);c.children&&c.children.length>0&&(Kt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),YD(c.children,e,v,g,f)),!(c.path==null&&!c.index)&&e.push({path:g,score:LV(g,c.index),routesMeta:v})};return t.forEach((c,d)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))s(c,d);else for(let h of QD(c.path))s(c,d,!0,h)}),e}function QD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let c=QD(r.join("/")),d=[];return d.push(...c.map(f=>f===""?s:[s,f].join("/"))),a&&d.push(...c),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function kV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var IV=/^:[\w-]+$/,OV=3,PV=2,RV=1,DV=10,MV=-2,zC=t=>t==="*";function LV(t,e){let n=t.split("/"),r=n.length;return n.some(zC)&&(r+=MV),e&&(r+=PV),n.filter(a=>!zC(a)).reduce((a,s)=>a+(IV.test(s)?OV:s===""?RV:DV),r)}function zV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function UV(t,e,n=!1){let{routesMeta:r}=t,a={},s="/",c=[];for(let d=0;d<r.length;++d){let f=r[d],h=d===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=ey({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),v=f.route;if(!g&&h&&n&&!r[r.length-1].route.index&&(g=ey({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(a,g.params),c.push({params:a,pathname:Cs([s,g.pathname]),pathnameBase:HV(Cs([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=Cs([s,g.pathnameBase]))}return c}function ey(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VV(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let s=a[0],c=s.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},v)=>{if(p==="*"){let E=d[v]||"";c=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const w=d[v];return g&&!w?h[p]=void 0:h[p]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:c,pattern:t}}function VV(t,e=!1,n=!0){Oa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function $V(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Oa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ds(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var XD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BV=t=>XD.test(t);function FV(t,e="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?od(t):t,s;if(n)if(BV(n))s=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Oa(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?s=UC(n.substring(1),"/"):s=UC(n,e)}else s=e;return{pathname:s,search:GV(r),hash:KV(a)}}function UC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function tw(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function DE(t){let e=qV(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function ME(t,e,n,r=!1){let a;typeof t=="string"?a=od(t):(a={...t},Kt(!a.pathname||!a.pathname.includes("?"),tw("?","pathname","search",a)),Kt(!a.pathname||!a.pathname.includes("#"),tw("#","pathname","hash",a)),Kt(!a.search||!a.search.includes("#"),tw("#","search","hash",a)));let s=t===""||a.pathname==="",c=s?"/":a.pathname,d;if(c==null)d=n;else{let g=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),g-=1;a.pathname=v.join("/")}d=g>=0?e[g]:"/"}let f=FV(a,d),h=c&&c!=="/"&&c.endsWith("/"),p=(s||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var Cs=t=>t.join("/").replace(/\/\/+/g,"/"),HV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,WV=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function YV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function QV(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ZD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function JD(t,e){let n=t;if(typeof n!="string"||!XD.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,a=!1;if(ZD)try{let s=new URL(window.location.href),c=n.startsWith("//")?new URL(s.protocol+n):new URL(n),d=Ds(c.pathname,e);c.origin===s.origin&&d!=null?n=d+c.search+c.hash:a=!0}catch{Oa(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var e4=["POST","PUT","PATCH","DELETE"];new Set(e4);var XV=["GET",...e4];new Set(XV);var ld=b.createContext(null);ld.displayName="DataRouter";var _0=b.createContext(null);_0.displayName="DataRouterState";var ZV=b.createContext(!1),t4=b.createContext({isTransitioning:!1});t4.displayName="ViewTransition";var JV=b.createContext(new Map);JV.displayName="Fetchers";var e$=b.createContext(null);e$.displayName="Await";var ca=b.createContext(null);ca.displayName="Navigation";var Fh=b.createContext(null);Fh.displayName="Location";var La=b.createContext({outlet:null,matches:[],isDataRoute:!1});La.displayName="Route";var LE=b.createContext(null);LE.displayName="RouteError";var n4="REACT_ROUTER_ERROR",t$="REDIRECT",n$="ROUTE_ERROR_RESPONSE";function r$(t){if(t.startsWith(`${n4}:${t$}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function a$(t){if(t.startsWith(`${n4}:${n$}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new WV(e.status,e.statusText,e.data)}catch{}}function i$(t,{relative:e}={}){Kt(cd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(ca),{hash:a,pathname:s,search:c}=Gh(t,{relative:e}),d=s;return n!=="/"&&(d=s==="/"?n:Cs([n,s])),r.createHref({pathname:d,search:c,hash:a})}function cd(){return b.useContext(Fh)!=null}function ua(){return Kt(cd(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Fh).location}var r4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a4(t){b.useContext(ca).static||b.useLayoutEffect(t)}function Bt(){let{isDataRoute:t}=b.useContext(La);return t?x$():s$()}function s$(){Kt(cd(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(ld),{basename:e,navigator:n}=b.useContext(ca),{matches:r}=b.useContext(La),{pathname:a}=ua(),s=JSON.stringify(DE(r)),c=b.useRef(!1);return a4(()=>{c.current=!0}),b.useCallback((f,h={})=>{if(Oa(c.current,r4),!c.current)return;if(typeof f=="number"){n.go(f);return}let p=ME(f,JSON.parse(s),a,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Cs([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,s,a,t])}var i4=b.createContext(null);function qh(){return b.useContext(i4)}function o$(t){let e=b.useContext(La).outlet;return b.useMemo(()=>e&&b.createElement(i4.Provider,{value:t},e),[e,t])}function Hh(){let{matches:t}=b.useContext(La),e=t[t.length-1];return e?e.params:{}}function Gh(t,{relative:e}={}){let{matches:n}=b.useContext(La),{pathname:r}=ua(),a=JSON.stringify(DE(n));return b.useMemo(()=>ME(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function l$(t,e){return s4(t,e)}function s4(t,e,n,r,a){var z;Kt(cd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=b.useContext(ca),{matches:c}=b.useContext(La),d=c[c.length-1],f=d?d.params:{},h=d?d.pathname:"/",p=d?d.pathnameBase:"/",g=d&&d.route;{let M=g&&g.path||"";l4(h,!g||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let v=ua(),w;if(e){let M=typeof e=="string"?od(e):e;Kt(p==="/"||((z=M.pathname)==null?void 0:z.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${M.pathname}" was given in the \`location\` prop.`),w=M}else w=v;let E=w.pathname||"/",j=E;if(p!=="/"){let M=p.replace(/^\//,"").split("/");j="/"+E.replace(/^\//,"").split("/").slice(M.length).join("/")}let S=WD(t,{pathname:j});Oa(g||S!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Oa(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=h$(S&&S.map(M=>Object.assign({},M,{params:Object.assign({},f,M.params),pathname:Cs([p,s.encodeLocation?s.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?p:Cs([p,s.encodeLocation?s.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),c,n,r,a);return e&&k?b.createElement(Fh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},k):k}function c$(){let t=v$(),e=YV(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:s},"ErrorBoundary")," or"," ",b.createElement("code",{style:s},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:a},n):null,c)}var u$=b.createElement(c$,null),o4=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=a$(t.digest);n&&(t=n)}let e=t!==void 0?b.createElement(La.Provider,{value:this.props.routeContext},b.createElement(LE.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?b.createElement(d$,{error:t},e):e}};o4.contextType=ZV;var nw=new WeakMap;function d$({children:t,error:e}){let{basename:n}=b.useContext(ca);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=r$(e.digest);if(r){let a=nw.get(e);if(a)throw a;let s=JD(r.location,n);if(ZD&&!nw.get(e))if(s.isExternal||r.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:r.replace}));throw nw.set(e,c),c}return b.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function f$({routeContext:t,match:e,children:n}){let r=b.useContext(ld);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(La.Provider,{value:t},n)}function h$(t,e=[],n=null,r=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,c=n==null?void 0:n.errors;if(c!=null){let p=s.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);Kt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let d=!1,f=-1;if(n)for(let p=0;p<s.length;p++){let g=s[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:v,errors:w}=n,E=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||E){d=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}let h=n&&r?(p,g)=>{var v,w;r(p,{location:n.location,params:((w=(v=n.matches)==null?void 0:v[0])==null?void 0:w.params)??{},unstable_pattern:QV(n.matches),errorInfo:g})}:void 0;return s.reduceRight((p,g,v)=>{let w,E=!1,j=null,S=null;n&&(w=c&&g.route.id?c[g.route.id]:void 0,j=g.route.errorElement||u$,d&&(f<0&&v===0?(l4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):f===v&&(E=!0,S=g.route.hydrateFallbackElement||null)));let k=e.concat(s.slice(0,v+1)),z=()=>{let M;return w?M=j:E?M=S:g.route.Component?M=b.createElement(g.route.Component,null):g.route.element?M=g.route.element:M=p,b.createElement(f$,{match:g,routeContext:{outlet:p,matches:k,isDataRoute:n!=null},children:M})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?b.createElement(o4,{location:n.location,revalidation:n.revalidation,component:j,error:w,children:z(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:h}):z()},null)}function zE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m$(t){let e=b.useContext(ld);return Kt(e,zE(t)),e}function p$(t){let e=b.useContext(_0);return Kt(e,zE(t)),e}function g$(t){let e=b.useContext(La);return Kt(e,zE(t)),e}function UE(t){let e=g$(t),n=e.matches[e.matches.length-1];return Kt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function y$(){return UE("useRouteId")}function v$(){var r;let t=b.useContext(LE),e=p$("useRouteError"),n=UE("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function x$(){let{router:t}=m$("useNavigate"),e=UE("useNavigate"),n=b.useRef(!1);return a4(()=>{n.current=!0}),b.useCallback(async(a,s={})=>{Oa(n.current,r4),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var VC={};function l4(t,e,n){!e&&!VC[t]&&(VC[t]=!0,Oa(!1,n))}b.memo(b$);function b$({routes:t,future:e,state:n,onError:r}){return s4(t,void 0,n,r,e)}function Ko({to:t,replace:e,state:n,relative:r}){Kt(cd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=b.useContext(ca);Oa(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=b.useContext(La),{pathname:c}=ua(),d=Bt(),f=ME(t,DE(s),c,r==="path"),h=JSON.stringify(f);return b.useEffect(()=>{d(JSON.parse(h),{replace:e,state:n,relative:r})},[d,h,r,e,n]),null}function c4(t){return o$(t.context)}function Qe(t){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function w$({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:a,static:s=!1,unstable_useTransitions:c}){Kt(!cd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),f=b.useMemo(()=>({basename:d,navigator:a,static:s,unstable_useTransitions:c,future:{}}),[d,a,s,c]);typeof n=="string"&&(n=od(n));let{pathname:h="/",search:p="",hash:g="",state:v=null,key:w="default"}=n,E=b.useMemo(()=>{let j=Ds(h,d);return j==null?null:{location:{pathname:j,search:p,hash:g,state:v,key:w},navigationType:r}},[d,h,p,g,v,w,r]);return Oa(E!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:b.createElement(ca.Provider,{value:f},b.createElement(Fh.Provider,{children:e,value:E}))}function _$({children:t,location:e}){return l$(a_(t),e)}function a_(t,e=[]){let n=[];return b.Children.forEach(t,(r,a)=>{if(!b.isValidElement(r))return;let s=[...e,a];if(r.type===b.Fragment){n.push.apply(n,a_(r.props.children,s));return}Kt(r.type===Qe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=a_(r.props.children,s)),n.push(c)}),n}var Mg="get",Lg="application/x-www-form-urlencoded";function E0(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function E$(t){return E0(t)&&t.tagName.toLowerCase()==="button"}function j$(t){return E0(t)&&t.tagName.toLowerCase()==="form"}function S$(t){return E0(t)&&t.tagName.toLowerCase()==="input"}function A$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function N$(t,e){return t.button===0&&(!e||e==="_self")&&!A$(t)}var cg=null;function T$(){if(cg===null)try{new FormData(document.createElement("form"),0),cg=!1}catch{cg=!0}return cg}var C$=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rw(t){return t!=null&&!C$.has(t)?(Oa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lg}"`),null):t}function k$(t,e){let n,r,a,s,c;if(j$(t)){let d=t.getAttribute("action");r=d?Ds(d,e):null,n=t.getAttribute("method")||Mg,a=rw(t.getAttribute("enctype"))||Lg,s=new FormData(t)}else if(E$(t)||S$(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(r=f?Ds(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Mg,a=rw(t.getAttribute("formenctype"))||rw(d.getAttribute("enctype"))||Lg,s=new FormData(d,t),!T$()){let{name:h,type:p,value:g}=t;if(p==="image"){let v=h?`${h}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else h&&s.append(h,g)}}else{if(E0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Mg,r=null,a=Lg,c=t}return s&&a==="text/plain"&&(c=s,s=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function VE(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function I$(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ds(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function O$(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P$(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function R$(t,e,n){let r=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let c=await O$(s,n);return c.links?c.links():[]}return[]}));return z$(r.flat(1).filter(P$).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function $C(t,e,n,r,a,s){let c=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,d=(f,h)=>{var p;return n[h].pathname!==f.pathname||((p=n[h].route.path)==null?void 0:p.endsWith("*"))&&n[h].params["*"]!==f.params["*"]};return s==="assets"?e.filter((f,h)=>c(f,h)||d(f,h)):s==="data"?e.filter((f,h)=>{var g;let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(c(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function D$(t,e,{includeHydrateFallback:n}={}){return M$(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function M$(t){return[...new Set(t)]}function L$(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function z$(t,e){let n=new Set;return new Set(e),t.reduce((r,a)=>{let s=JSON.stringify(L$(a));return n.has(s)||(n.add(s),r.push({key:s,link:a})),r},[])}function u4(){let t=b.useContext(ld);return VE(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function U$(){let t=b.useContext(_0);return VE(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $E=b.createContext(void 0);$E.displayName="FrameworkContext";function d4(){let t=b.useContext($E);return VE(t,"You must render this element inside a <HydratedRouter> element"),t}function V$(t,e){let n=b.useContext($E),[r,a]=b.useState(!1),[s,c]=b.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,v=b.useRef(null);b.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let j=k=>{k.forEach(z=>{c(z.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[t]),b.useEffect(()=>{if(r){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[r]);let w=()=>{a(!0)},E=()=>{a(!1),c(!1)};return n?t!=="intent"?[s,v,{}]:[s,v,{onFocus:Mf(d,w),onBlur:Mf(f,E),onMouseEnter:Mf(h,w),onMouseLeave:Mf(p,E),onTouchStart:Mf(g,w)}]:[!1,v,{}]}function Mf(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $$({page:t,...e}){let{router:n}=u4(),r=b.useMemo(()=>WD(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?b.createElement(F$,{page:t,matches:r,...e}):null}function B$(t){let{manifest:e,routeModules:n}=d4(),[r,a]=b.useState([]);return b.useEffect(()=>{let s=!1;return R$(t,e,n).then(c=>{s||a(c)}),()=>{s=!0}},[t,e,n]),r}function F$({page:t,matches:e,...n}){let r=ua(),{manifest:a,routeModules:s}=d4(),{basename:c}=u4(),{loaderData:d,matches:f}=U$(),h=b.useMemo(()=>$C(t,e,f,a,r,"data"),[t,e,f,a,r]),p=b.useMemo(()=>$C(t,e,f,a,r,"assets"),[t,e,f,a,r]),g=b.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let E=new Set,j=!1;if(e.forEach(k=>{var M;let z=a.routes[k.route.id];!z||!z.hasLoader||(!h.some(T=>T.route.id===k.route.id)&&k.route.id in d&&((M=s[k.route.id])!=null&&M.shouldRevalidate)||z.hasClientLoader?j=!0:E.add(k.route.id))}),E.size===0)return[];let S=I$(t,c,"data");return j&&E.size>0&&S.searchParams.set("_routes",e.filter(k=>E.has(k.route.id)).map(k=>k.route.id).join(",")),[S.pathname+S.search]},[c,d,r,a,h,e,t,s]),v=b.useMemo(()=>D$(p,a),[p,a]),w=B$(p);return b.createElement(b.Fragment,null,g.map(E=>b.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),v.map(E=>b.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),w.map(({key:E,link:j})=>b.createElement("link",{key:E,nonce:n.nonce,...j})))}function q$(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var H$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{H$&&(window.__reactRouterVersion="7.11.0")}catch{}function G$({basename:t,children:e,unstable_useTransitions:n,window:r}){let a=b.useRef();a.current==null&&(a.current=SV({window:r,v5Compat:!0}));let s=a.current,[c,d]=b.useState({action:s.action,location:s.location}),f=b.useCallback(h=>{n===!1?d(h):b.startTransition(()=>d(h))},[n]);return b.useLayoutEffect(()=>s.listen(f),[s,f]),b.createElement(w$,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:s,unstable_useTransitions:n})}var f4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ta=b.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:a,reloadDocument:s,replace:c,state:d,target:f,to:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...w},E){let{basename:j,unstable_useTransitions:S}=b.useContext(ca),k=typeof h=="string"&&f4.test(h),z=JD(h,j);h=z.to;let M=i$(h,{relative:a}),[T,R,V]=V$(r,w),N=Y$(h,{replace:c,state:d,target:f,preventScrollReset:p,relative:a,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:S});function I(D){e&&e(D),D.defaultPrevented||N(D)}let C=b.createElement("a",{...w,...V,href:z.absoluteURL||M,onClick:z.isExternal||s?e:I,ref:q$(E,R),target:f,"data-discover":!k&&n==="render"?"true":void 0});return T&&!k?b.createElement(b.Fragment,null,C,b.createElement($$,{page:M})):C});ta.displayName="Link";var ty=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:a=!1,style:s,to:c,viewTransition:d,children:f,...h},p){let g=Gh(c,{relative:h.relative}),v=ua(),w=b.useContext(_0),{navigator:E,basename:j}=b.useContext(ca),S=w!=null&&e7(g)&&d===!0,k=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,z=v.pathname,M=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(z=z.toLowerCase(),M=M?M.toLowerCase():null,k=k.toLowerCase()),M&&j&&(M=Ds(M,j)||M);const T=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let R=z===k||!a&&z.startsWith(k)&&z.charAt(T)==="/",V=M!=null&&(M===k||!a&&M.startsWith(k)&&M.charAt(k.length)==="/"),N={isActive:R,isPending:V,isTransitioning:S},I=R?e:void 0,C;typeof r=="function"?C=r(N):C=[r,R?"active":null,V?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let D=typeof s=="function"?s(N):s;return b.createElement(ta,{...h,"aria-current":I,className:C,ref:p,style:D,to:c,viewTransition:d},typeof f=="function"?f(N):f)});ty.displayName="NavLink";var K$=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:a,state:s,method:c=Mg,action:d,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...w},E)=>{let{unstable_useTransitions:j}=b.useContext(ca),S=Z$(),k=J$(d,{relative:h}),z=c.toLowerCase()==="get"?"get":"post",M=typeof d=="string"&&f4.test(d),T=R=>{if(f&&f(R),R.defaultPrevented)return;R.preventDefault();let V=R.nativeEvent.submitter,N=(V==null?void 0:V.getAttribute("formmethod"))||c,I=()=>S(V||R.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:a,state:s,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v});j&&n!==!1?b.startTransition(()=>I()):I()};return b.createElement("form",{ref:E,method:z,action:k,onSubmit:r?f:T,...w,"data-discover":!M&&t==="render"?"true":void 0})});K$.displayName="Form";function W$(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h4(t){let e=b.useContext(ld);return Kt(e,W$(t)),e}function Y$(t,{target:e,replace:n,state:r,preventScrollReset:a,relative:s,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let h=Bt(),p=ua(),g=Gh(t,{relative:s});return b.useCallback(v=>{if(N$(v,e)){v.preventDefault();let w=n!==void 0?n:hh(p)===hh(g),E=()=>h(t,{replace:w,state:r,preventScrollReset:a,relative:s,viewTransition:c,unstable_defaultShouldRevalidate:d});f?b.startTransition(()=>E()):E()}},[p,h,g,n,r,e,t,a,s,c,d,f])}var Q$=0,X$=()=>`__${String(++Q$)}__`;function Z$(){let{router:t}=h4("useSubmit"),{basename:e}=b.useContext(ca),n=y$(),r=t.fetch,a=t.navigate;return b.useCallback(async(s,c={})=>{let{action:d,method:f,encType:h,formData:p,body:g}=k$(s,e);if(c.navigate===!1){let v=c.fetcherKey||X$();await r(v,n,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||f,formEncType:c.encType||h,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||f,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,n])}function J$(t,{relative:e}={}){let{basename:n}=b.useContext(ca),r=b.useContext(La);Kt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),s={...Gh(t||".",{relative:e})},c=ua();if(t==null){s.search=c.search;let d=new URLSearchParams(s.search),f=d.getAll("index");if(f.some(p=>p==="")){d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();s.search=p?`?${p}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Cs([n,s.pathname])),hh(s)}function e7(t,{relative:e}={}){let n=b.useContext(t4);Kt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=h4("useViewTransitionState"),a=Gh(t,{relative:e});if(!n.isTransitioning)return!1;let s=Ds(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Ds(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ey(a.pathname,c)!=null||ey(a.pathname,s)!=null}var m4=KD();const t7=()=>{};var BC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},n7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[n++];e[r++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[n++],c=t[n++],d=t[n++],f=((a&7)<<18|(s&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const s=t[n++],c=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(s&63)<<6|c&63)}}return e.join("")},g4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const s=t[a],c=a+1<t.length,d=c?t[a+1]:0,f=a+2<t.length,h=f?t[a+2]:0,p=s>>2,g=(s&3)<<4|d>>4;let v=(d&15)<<2|h>>6,w=h&63;f||(w=64,c||(v=64)),r.push(n[p],n[g],n[v],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(p4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const s=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const h=a<t.length?n[t.charAt(a)]:64;++a;const g=a<t.length?n[t.charAt(a)]:64;if(++a,s==null||d==null||h==null||g==null)throw new r7;const v=s<<2|d>>4;if(r.push(v),h!==64){const w=d<<4&240|h>>2;if(r.push(w),g!==64){const E=h<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a7=function(t){const e=p4(t);return g4.encodeByteArray(e,!0)},ny=function(t){return a7(t).replace(/\./g,"")},y4=function(t){try{return g4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=()=>i7().__FIREBASE_DEFAULTS__,o7=()=>{if(typeof process>"u"||typeof BC>"u")return;const t=BC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&y4(t[1]);return e&&JSON.parse(e)},j0=()=>{try{return t7()||s7()||o7()||l7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v4=t=>{var e,n;return(n=(e=j0())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},x4=t=>{const e=v4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},b4=()=>{var t;return(t=j0())==null?void 0:t.config},w4=t=>{var e;return(e=j0())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ny(JSON.stringify(n)),ny(JSON.stringify(c)),""].join(".")}const nh={};function u7(){const t={prod:[],emulator:[]};for(const e of Object.keys(nh))nh[e]?t.emulator.push(e):t.prod.push(e);return t}function d7(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let FC=!1;function FE(t,e){if(typeof window>"u"||typeof document>"u"||!ol(window.location.host)||nh[t]===e||nh[t]||FC)return;nh[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=u7().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function d(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{FC=!0,c()},v}function p(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=d7(r),w=n("text"),E=document.getElementById(w)||document.createElement("span"),j=n("learnmore"),S=document.getElementById(j)||document.createElement("a"),k=n("preprendIcon"),z=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const M=v.element;d(M),p(S,j);const T=h();f(z,k),M.append(z,E,S,T),document.body.appendChild(M)}s?(E.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr())}function h7(){var e;const t=(e=j0())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function p7(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function g7(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function y7(){const t=gr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v7(){return!h7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x7(){try{return typeof indexedDB=="object"}catch{return!1}}function b7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var s;e(((s=a.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7="FirebaseError";class Zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=w7,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kh.prototype.create)}}class Kh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,s=this.errors[e],c=s?_7(s,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Zi(a,d,r)}}function _7(t,e){return t.replace(E7,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const E7=/\{\$([^}]+)}/g;function j7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const s=t[a],c=e[a];if(qC(s)&&qC(c)){if(!lc(s,c))return!1}else if(s!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function qC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,s]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function Kf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function S7(t,e){const n=new A7(t,e);return n.subscribe.bind(n)}class A7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");N7(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=aw),a.error===void 0&&(a.error=aw),a.complete===void 0&&(a.complete=aw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function aw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){return t&&t._delegate?t._delegate:t}class Wo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T7=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new c7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k7(e))try{this.getOrInitializeService({instanceIdentifier:Gl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:a});r.resolve(s)}catch{}}}}clearInstance(e=Gl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gl){return this.instances.has(e)}getOptions(e=Gl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(s);r===d&&c.resolve(a)}return a}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const s=this.instances.get(r);return s&&e(s,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:C7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gl){return this.component?this.component.multipleInstances?e:Gl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function C7(t){return t===Gl?void 0:t}function k7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new T7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rt||(rt={}));const O7={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},P7=rt.INFO,R7={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},D7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=R7[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qE{constructor(e){this.name=e,this._logLevel=P7,this._logHandler=D7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const M7=(t,e)=>e.some(n=>t instanceof n);let HC,GC;function L7(){return HC||(HC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z7(){return GC||(GC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E4=new WeakMap,i_=new WeakMap,j4=new WeakMap,iw=new WeakMap,HE=new WeakMap;function U7(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",c)},s=()=>{n(Bo(t.result)),a()},c=()=>{r(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&E4.set(n,t)}).catch(()=>{}),HE.set(e,t),e}function V7(t){if(i_.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",c),t.removeEventListener("abort",c)},s=()=>{n(),a()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",c),t.addEventListener("abort",c)});i_.set(t,e)}let s_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return i_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $7(t){s_=t(s_)}function B7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sw(this),e,...n);return j4.set(r,e.sort?e.sort():[e]),Bo(r)}:z7().includes(t)?function(...e){return t.apply(sw(this),e),Bo(E4.get(this))}:function(...e){return Bo(t.apply(sw(this),e))}}function F7(t){return typeof t=="function"?B7(t):(t instanceof IDBTransaction&&V7(t),M7(t,L7())?new Proxy(t,s_):t)}function Bo(t){if(t instanceof IDBRequest)return U7(t);if(iw.has(t))return iw.get(t);const e=F7(t);return e!==t&&(iw.set(t,e),HE.set(e,t)),e}const sw=t=>HE.get(t);function q7(t,e,{blocked:n,upgrade:r,blocking:a,terminated:s}={}){const c=indexedDB.open(t,e),d=Bo(c);return r&&c.addEventListener("upgradeneeded",f=>{r(Bo(c.result),f.oldVersion,f.newVersion,Bo(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{s&&f.addEventListener("close",()=>s()),a&&f.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const H7=["get","getKey","getAll","getAllKeys","count"],G7=["put","add","delete","clear"],ow=new Map;function KC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ow.get(e))return ow.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=G7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||H7.includes(n)))return;const s=async function(c,...d){const f=this.transaction(c,a?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),a&&f.done]))[0]};return ow.set(e,s),s}$7(t=>({...t,get:(e,n,r)=>KC(e,n)||t.get(e,n,r),has:(e,n)=>!!KC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W7(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function W7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const o_="@firebase/app",WC="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new qE("@firebase/app"),Y7="@firebase/app-compat",Q7="@firebase/analytics-compat",X7="@firebase/analytics",Z7="@firebase/app-check-compat",J7="@firebase/app-check",eB="@firebase/auth",tB="@firebase/auth-compat",nB="@firebase/database",rB="@firebase/data-connect",aB="@firebase/database-compat",iB="@firebase/functions",sB="@firebase/functions-compat",oB="@firebase/installations",lB="@firebase/installations-compat",cB="@firebase/messaging",uB="@firebase/messaging-compat",dB="@firebase/performance",fB="@firebase/performance-compat",hB="@firebase/remote-config",mB="@firebase/remote-config-compat",pB="@firebase/storage",gB="@firebase/storage-compat",yB="@firebase/firestore",vB="@firebase/ai",xB="@firebase/firestore-compat",bB="firebase",wB="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="[DEFAULT]",_B={[o_]:"fire-core",[Y7]:"fire-core-compat",[X7]:"fire-analytics",[Q7]:"fire-analytics-compat",[J7]:"fire-app-check",[Z7]:"fire-app-check-compat",[eB]:"fire-auth",[tB]:"fire-auth-compat",[nB]:"fire-rtdb",[rB]:"fire-data-connect",[aB]:"fire-rtdb-compat",[iB]:"fire-fn",[sB]:"fire-fn-compat",[oB]:"fire-iid",[lB]:"fire-iid-compat",[cB]:"fire-fcm",[uB]:"fire-fcm-compat",[dB]:"fire-perf",[fB]:"fire-perf-compat",[hB]:"fire-rc",[mB]:"fire-rc-compat",[pB]:"fire-gcs",[gB]:"fire-gcs-compat",[yB]:"fire-fst",[xB]:"fire-fst-compat",[vB]:"fire-vertex","fire-js":"fire-js",[bB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map,EB=new Map,c_=new Map;function YC(t,e){try{t.container.addComponent(e)}catch(n){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cc(t){const e=t.name;if(c_.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;c_.set(e,t);for(const n of ry.values())YC(n,t);for(const n of EB.values())YC(n,t);return!0}function S0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ur(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fo=new Kh("app","Firebase",jB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=wB;function S4(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:l_,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Fo.create("bad-app-name",{appName:String(a)});if(n||(n=b4()),!n)throw Fo.create("no-options");const s=ry.get(a);if(s){if(lc(n,s.options)&&lc(r,s.config))return s;throw Fo.create("duplicate-app",{appName:a})}const c=new I7(a);for(const f of c_.values())c.addComponent(f);const d=new SB(n,r,c);return ry.set(a,d),d}function GE(t=l_){const e=ry.get(t);if(!e&&t===l_&&b4())return S4();if(!e)throw Fo.create("no-app",{appName:t});return e}function Mi(t,e,n){let r=_B[t]??t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(c.join(" "));return}cc(new Wo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="firebase-heartbeat-database",NB=1,mh="firebase-heartbeat-store";let lw=null;function A4(){return lw||(lw=q7(AB,NB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fo.create("idb-open",{originalErrorMessage:t.message})})),lw}async function TB(t){try{const n=(await A4()).transaction(mh),r=await n.objectStore(mh).get(N4(t));return await n.done,r}catch(e){if(e instanceof Zi)Ms.warn(e.message);else{const n=Fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(n.message)}}}async function QC(t,e){try{const r=(await A4()).transaction(mh,"readwrite");await r.objectStore(mh).put(e,N4(t)),await r.done}catch(n){if(n instanceof Zi)Ms.warn(n.message);else{const r=Fo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ms.warn(r.message)}}}function N4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=1024,kB=30;class IB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=XC();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(c=>c.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>kB){const c=RB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ms.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=XC(),{heartbeatsToSend:r,unsentEntries:a}=OB(this._heartbeatsCache.heartbeats),s=ny(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ms.warn(n),""}}}function XC(){return new Date().toISOString().substring(0,10)}function OB(t,e=CB){const n=[];let r=t.slice();for(const a of t){const s=n.find(c=>c.agent===a.agent);if(s){if(s.dates.push(a.date),ZC(n)>e){s.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),ZC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x7()?b7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return QC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return QC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ZC(t){return ny(JSON.stringify({version:2,heartbeats:t})).length}function RB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(t){cc(new Wo("platform-logger",e=>new K7(e),"PRIVATE")),cc(new Wo("heartbeat",e=>new IB(e),"PRIVATE")),Mi(o_,WC,t),Mi(o_,WC,"esm2020"),Mi("fire-js","")}DB("");function T4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MB=T4,C4=new Kh("auth","Firebase",T4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new qE("@firebase/auth");function LB(t,...e){ay.logLevel<=rt.WARN&&ay.warn(`Auth (${jc}): ${t}`,...e)}function zg(t,...e){ay.logLevel<=rt.ERROR&&ay.error(`Auth (${jc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t,...e){throw WE(t,...e)}function ni(t,...e){return WE(t,...e)}function KE(t,e,n){const r={...MB(),[e]:n};return new Kh("auth","Firebase",r).create(e,{appName:t.name})}function ks(t){return KE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zB(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pa(t,"argument-error"),KE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function WE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return C4.create(t,...e)}function ze(t,e,...n){if(!t)throw WE(e,...n)}function Ss(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zg(e),new Error(e)}function Ls(t,e){t||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function UB(){return JC()==="http:"||JC()==="https:"}function JC(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UB()||p7()||"connection"in navigator)?navigator.onLine:!0}function $B(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ls(n>e,"Short delay should be less than long delay!"),this.isMobile=f7()||g7()}get(){return VB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t,e){Ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qB=new Yh(3e4,6e4);function Ks(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ji(t,e,n,r,a={}){return I4(t,a,async()=>{let s={},c={};r&&(e==="GET"?c=r:s={body:JSON.stringify(r)});const d=Wh({key:t.config.apiKey,...c}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:f,...s};return m7()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&ol(t.emulatorConfig.host)&&(h.credentials="include"),k4.fetch()(await O4(t,t.config.apiHost,n,d),h)})}async function I4(t,e,n){t._canInitEmulator=!1;const r={...BB,...e};try{const a=new GB(t),s=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await s.json();if("needConfirmation"in c)throw ug(t,"account-exists-with-different-credential",c);if(s.ok&&!("errorMessage"in c))return c;{const d=s.ok?c.errorMessage:c.error.message,[f,h]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ug(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw ug(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw ug(t,"user-disabled",c);const p=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw KE(t,p,h);Pa(t,p)}}catch(a){if(a instanceof Zi)throw a;Pa(t,"network-request-failed",{message:String(a)})}}async function Qh(t,e,n,r,a={}){const s=await Ji(t,e,n,r,a);return"mfaPendingCredential"in s&&Pa(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function O4(t,e,n,r){const a=`${e}${n}?${r}`,s=t,c=s.config.emulator?YE(t.config,a):`${t.config.apiScheme}://${a}`;return FB.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(c).toString():c}function HB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),qB.get())})}}function ug(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=ni(t,e,r);return a.customData._tokenResponse=n,a}function ek(t){return t!==void 0&&t.enterprise!==void 0}class KB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WB(t,e){return Ji(t,"GET","/v2/recaptchaConfig",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YB(t,e){return Ji(t,"POST","/v1/accounts:delete",e)}async function iy(t,e){return Ji(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QB(t,e=!1){const n=Rt(t),r=await n.getIdToken(e),a=QE(r);ze(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,c=s==null?void 0:s.sign_in_provider;return{claims:a,token:r,authTime:rh(cw(a.auth_time)),issuedAtTime:rh(cw(a.iat)),expirationTime:rh(cw(a.exp)),signInProvider:c||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cw(t){return Number(t)*1e3}function QE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zg("JWT malformed, contained fewer than 3 sections"),null;try{const a=y4(n);return a?JSON.parse(a):(zg("Failed to decode base64 JWT payload"),null)}catch(a){return zg("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function tk(t){const e=QE(t);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zi&&XB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rh(this.lastLoginAt),this.creationTime=rh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sy(t){var g;const e=t.auth,n=await t.getIdToken(),r=await qu(t,iy(e,{idToken:n}));ze(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const s=(g=a.providerUserInfo)!=null&&g.length?P4(a.providerUserInfo):[],c=eF(t.providerData,s),d=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),h=d?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new d_(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function JB(t){const e=Rt(t);await sy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eF(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function P4(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(t,e){const n=await I4(t,{},async()=>{const r=Wh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,c=await O4(t,a,"/v1/token",`key=${s}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return t.emulatorConfig&&ol(t.emulatorConfig.host)&&(f.credentials="include"),k4.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nF(t,e){return Ji(t,"POST","/v2/accounts:revokeToken",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const n=tk(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:s}=await tF(e,n);this.updateTokensAndExpiration(r,a,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:s}=n,c=new Mu;return r&&(ze(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(ze(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),s&&(ze(typeof s=="number","internal-error",{appName:e}),c.expirationTime=s),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mu,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t,e){ze(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:n,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new ZB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new d_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await qu(this,this.stsTokenManager.getToken(this.auth,e));return ze(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QB(this,e)}reload(){return JB(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ur(this.auth.app))return Promise.reject(ks(this.auth));const e=await this.getIdToken();return await qu(this,YB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,a=n.email??void 0,s=n.phoneNumber??void 0,c=n.photoURL??void 0,d=n.tenantId??void 0,f=n._redirectEventId??void 0,h=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:w,providerData:E,stsTokenManager:j}=n;ze(g&&j,e,"internal-error");const S=Mu.fromJSON(this.name,j);ze(typeof g=="string",e,"internal-error"),Po(r,e.name),Po(a,e.name),ze(typeof v=="boolean",e,"internal-error"),ze(typeof w=="boolean",e,"internal-error"),Po(s,e.name),Po(c,e.name),Po(d,e.name),Po(f,e.name),Po(h,e.name),Po(p,e.name);const k=new ti({uid:g,auth:e,email:a,emailVerified:v,displayName:r,isAnonymous:w,photoURL:c,phoneNumber:s,tenantId:d,stsTokenManager:S,createdAt:h,lastLoginAt:p});return E&&Array.isArray(E)&&(k.providerData=E.map(z=>({...z}))),f&&(k._redirectEventId=f),k}static async _fromIdTokenResponse(e,n,r=!1){const a=new Mu;a.updateFromServerResponse(n);const s=new ti({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await sy(s),s}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];ze(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?P4(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),d=new Mu;d.updateFromIdToken(r);const f=new ti({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new d_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new Map;function As(t){Ls(t instanceof Function,"Expected a class definition");let e=nk.get(t);return e?(Ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}R4.type="NONE";const rk=R4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e,n){return`firebase:${t}:${e}:${n}`}class Lu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:s}=this.auth;this.fullUserKey=Ug(this.userKey,a.apiKey,s),this.fullPersistenceKey=Ug("persistence",a.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await iy(this.auth,{idToken:e}).catch(()=>{});return n?ti._fromGetAccountInfoResponse(this.auth,n,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Lu(As(rk),e,r);const a=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=a[0]||As(rk);const c=Ug(r,e.config.apiKey,e.name);let d=null;for(const h of n)try{const p=await h._get(c);if(p){let g;if(typeof p=="string"){const v=await iy(e,{idToken:p}).catch(()=>{});if(!v)break;g=await ti._fromGetAccountInfoResponse(e,v,p)}else g=ti._fromJSON(e,p);h!==s&&(d=g),s=h;break}}catch{}const f=a.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!f.length?new Lu(s,e,r):(s=f[0],d&&await s._set(c,d.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(c)}catch{}})),new Lu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V4(e))return"Blackberry";if($4(e))return"Webos";if(M4(e))return"Safari";if((e.includes("chrome/")||L4(e))&&!e.includes("edge/"))return"Chrome";if(U4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function D4(t=gr()){return/firefox\//i.test(t)}function M4(t=gr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L4(t=gr()){return/crios\//i.test(t)}function z4(t=gr()){return/iemobile/i.test(t)}function U4(t=gr()){return/android/i.test(t)}function V4(t=gr()){return/blackberry/i.test(t)}function $4(t=gr()){return/webos/i.test(t)}function XE(t=gr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rF(t=gr()){var e;return XE(t)&&!!((e=window.navigator)!=null&&e.standalone)}function aF(){return y7()&&document.documentMode===10}function B4(t=gr()){return XE(t)||U4(t)||$4(t)||V4(t)||/windows phone/i.test(t)||z4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t,e=[]){let n;switch(t){case"Browser":n=ak(gr());break;case"Worker":n=`${ak(gr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((c,d)=>{try{const f=e(s);c(f)}catch(f){d(f)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sF(t,e={}){return Ji(t,"GET","/v2/passwordPolicy",Ks(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=6;class lF{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??oF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ik(this),this.idTokenSubscription=new ik(this),this.beforeStateQueue=new iF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=As(n)),this._initializationPromise=this.queue(async()=>{var r,a,s;if(!this._deleted&&(this.persistenceManager=await Lu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await iy(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ur(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(s=this.redirectUser)==null?void 0:s._redirectEventId,d=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&(f!=null&&f.user)&&(r=f.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sy(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$B()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ur(this.app))return Promise.reject(ks(this));const n=e?Rt(e):null;return n&&ze(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ur(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ur(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sF(this),n=new lF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await nF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&As(e)||this._popupRedirectResolver;ze(n,this,"argument-error"),this.redirectPersistenceManager=await Lu.create(this,[As(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(d,this,"internal-error"),d.then(()=>{c||s(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,a);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&LB(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ll(t){return Rt(t)}class ik{constructor(e){this.auth=e,this.observer=null,this.addObserver=S7(n=>this.observer=n)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uF(t){A0=t}function q4(t){return A0.loadJS(t)}function dF(){return A0.recaptchaEnterpriseScript}function fF(){return A0.gapiScript}function hF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class mF{constructor(){this.enterprise=new pF}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class pF{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const gF="recaptcha-enterprise",H4="NO_RECAPTCHA";class yF{constructor(e){this.type=gF,this.auth=ll(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(c,d)=>{WB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new KB(f);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,c(h.siteKey)}}).catch(f=>{d(f)})})}function a(s,c,d){const f=window.grecaptcha;ek(f)?f.enterprise.ready(()=>{f.enterprise.execute(s,{action:e}).then(h=>{c(h)}).catch(()=>{c(H4)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mF().execute("siteKey",{action:"verify"}):new Promise((s,c)=>{r(this.auth).then(d=>{if(!n&&ek(window.grecaptcha))a(d,s,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=dF();f.length!==0&&(f+=d),q4(f).then(()=>{a(d,s,c)}).catch(h=>{c(h)})}}).catch(d=>{c(d)})})}}async function sk(t,e,n,r=!1,a=!1){const s=new yF(t);let c;if(a)c=H4;else try{c=await s.verify(n)}catch{c=await s.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function f_(t,e,n,r,a){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await sk(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await sk(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t,e){const n=S0(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),s=n.getOptions();if(lc(s,e??{}))return a;Pa(a,"already-initialized")}return n.initialize({options:e})}function xF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(As);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bF(t,e,n){const r=ll(t);ze(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,s=G4(e),{host:c,port:d}=wF(e),f=d===null?"":`:${d}`,h={url:`${s}//${c}${f}/`},p=Object.freeze({host:c,port:d,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ze(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ze(lc(h,r.config.emulator)&&lc(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,ol(c)?(BE(`${s}//${c}${f}`),FE("Auth",!0)):_F()}function G4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wF(t){const e=G4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const s=a[1];return{host:s,port:ok(r.substr(s.length+1))}}else{const[s,c]=r.split(":");return{host:s,port:ok(c)}}}function ok(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _F(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,n){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function EF(t,e){return Ji(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jF(t,e){return Qh(t,"POST","/v1/accounts:signInWithPassword",Ks(t,e))}async function SF(t,e){return Ji(t,"POST","/v1/accounts:sendOobCode",Ks(t,e))}async function AF(t,e){return SF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NF(t,e){return Qh(t,"POST","/v1/accounts:signInWithEmailLink",Ks(t,e))}async function TF(t,e){return Qh(t,"POST","/v1/accounts:signInWithEmailLink",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends ZE{constructor(e,n,r,a=null){super("password",r),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new ph(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ph(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f_(e,n,"signInWithPassword",jF);case"emailLink":return NF(e,{email:this._email,oobCode:this._password});default:Pa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f_(e,r,"signUpPassword",EF);case"emailLink":return TF(e,{idToken:n,email:this._email,oobCode:this._password});default:Pa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t,e){return Qh(t,"POST","/v1/accounts:signInWithIdp",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="http://localhost";class uc extends ZE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new uc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...s}=n;if(!r||!a)return null;const c=new uc(r,a);return c.idToken=s.idToken||void 0,c.accessToken=s.accessToken||void 0,c.secret=s.secret,c.nonce=s.nonce,c.pendingToken=s.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return zu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zu(e,n)}buildRequest(){const e={requestUri:CF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IF(t){const e=Gf(Kf(t)).link,n=e?Gf(Kf(e)).deep_link_id:null,r=Gf(Kf(t)).deep_link_id;return(r?Gf(Kf(r)).link:null)||r||n||e||t}class JE{constructor(e){const n=Gf(Kf(e)),r=n.apiKey??null,a=n.oobCode??null,s=kF(n.mode??null);ze(r&&a&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=IF(e);try{return new JE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this.providerId=ud.PROVIDER_ID}static credential(e,n){return ph._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=JE.parseLink(n);return ze(r,"argument-error"),ph._fromEmailAndCode(e,r.code,r.tenantId)}}ud.PROVIDER_ID="password";ud.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ud.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends ej{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Xh{constructor(){super("facebook.com")}static credential(e){return uc._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Xh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return uc._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _s.credential(n,r)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Xh{constructor(){super("github.com")}static credential(e){return uc._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lo.credential(e.oauthAccessToken)}catch{return null}}}Lo.GITHUB_SIGN_IN_METHOD="github.com";Lo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends Xh{constructor(){super("twitter.com")}static credential(e,n){return uc._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zo.credential(n,r)}catch{return null}}}zo.TWITTER_SIGN_IN_METHOD="twitter.com";zo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OF(t,e){return Qh(t,"POST","/v1/accounts:signUp",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const s=await ti._fromIdTokenResponse(e,r,a),c=lk(r);return new dc({user:s,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=lk(r);return new dc({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function lk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy extends Zi{constructor(e,n,r,a){super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,oy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new oy(e,n,r,a)}}function K4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?oy._fromErrorAndOperation(t,s,e,r):s})}async function PF(t,e,n=!1){const r=await qu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return dc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e,n=!1){const{auth:r}=t;if(Ur(r.app))return Promise.reject(ks(r));const a="reauthenticate";try{const s=await qu(t,K4(r,a,e,t),n);ze(s.idToken,r,"internal-error");const c=QE(s.idToken);ze(c,r,"internal-error");const{sub:d}=c;return ze(t.uid===d,r,"user-mismatch"),dc._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pa(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e,n=!1){if(Ur(t.app))return Promise.reject(ks(t));const r="signIn",a=await K4(t,r,e),s=await dc._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(s.user),s}async function DF(t,e){return W4(ll(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(t){const e=ll(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MF(t,e,n){if(Ur(t.app))return Promise.reject(ks(t));const r=ll(t),c=await f_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OF).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Y4(t),f}),d=await dc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function LF(t,e,n){return Ur(t.app)?Promise.reject(ks(t)):DF(Rt(t),ud.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Y4(t),r})}async function zF(t,e){const n=Rt(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await AF(n.auth,a);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(t,e){return Ji(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Rt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await qu(r,UF(r.auth,s));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:f})=>f==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function VF(t,e,n,r){return Rt(t).onIdTokenChanged(e,n,r)}function $F(t,e,n){return Rt(t).beforeAuthStateChanged(e,n)}function Zh(t,e,n,r){return Rt(t).onAuthStateChanged(e,n,r)}function BF(t){return Rt(t).signOut()}const ly="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ly,"1"),this.storage.removeItem(ly),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=1e3,qF=10;class Z4 extends X4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},s=this.storage.getItem(r);aF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,qF):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z4.type="LOCAL";const HF=Z4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4 extends X4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}J4.type="SESSION";const eM=J4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new N0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:s}=n.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async h=>h(n.origin,s)),f=await GF(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}N0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,c;return new Promise((d,f)=>{const h=tj("",20);a.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),d(v.data.response);break;default:clearTimeout(p),clearTimeout(s),f(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function WF(t){Li().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function YF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function XF(){return tM()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="firebaseLocalStorageDb",ZF=1,cy="firebaseLocalStorage",rM="fbase_key";class Jh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function T0(t,e){return t.transaction([cy],e?"readwrite":"readonly").objectStore(cy)}function JF(){const t=indexedDB.deleteDatabase(nM);return new Jh(t).toPromise()}function h_(){const t=indexedDB.open(nM,ZF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cy,{keyPath:rM})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cy)?e(r):(r.close(),await JF(),e(await h_()))})})}async function ck(t,e,n){const r=T0(t,!0).put({[rM]:e,value:n});return new Jh(r).toPromise()}async function eq(t,e){const n=T0(t,!1).get(e),r=await new Jh(n).toPromise();return r===void 0?null:r.value}function uk(t,e){const n=T0(t,!0).delete(e);return new Jh(n).toPromise()}const tq=800,nq=3;class aM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await h_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=N0._getInstance(XF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await YF(),!this.activeServiceWorker)return;this.sender=new KF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await h_();return await ck(e,ly,"1"),await uk(e,ly),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ck(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eq(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=T0(a,!1).getAll();return new Jh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aM.type="LOCAL";const rq=aM;new Yh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t,e){return e?As(e):(ze(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj extends ZE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aq(t){return W4(t.auth,new nj(t),t.bypassAuthState)}function iq(t){const{auth:e,user:n}=t;return ze(n,e,"internal-error"),RF(n,new nj(t),t.bypassAuthState)}async function sq(t){const{auth:e,user:n}=t;return ze(n,e,"internal-error"),PF(n,new nj(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n,r,a,s=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:s,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aq;case"linkViaPopup":case"linkViaRedirect":return sq;case"reauthViaPopup":case"reauthViaRedirect":return iq;default:Pa(this.auth,"internal-error")}}resolve(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oq=new Yh(2e3,1e4);async function lq(t,e,n){if(Ur(t.app))return Promise.reject(ni(t,"operation-not-supported-in-this-environment"));const r=ll(t);zB(t,e,ej);const a=iM(r,n);return new Ql(r,"signInViaPopup",e,a).executeNotNull()}class Ql extends sM{constructor(e,n,r,a,s){super(e,n,a,s),this.provider=r,this.authWindow=null,this.pollId=null,Ql.currentPopupAction&&Ql.currentPopupAction.cancel(),Ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Ls(this.filter.length===1,"Popup operations only handle one event");const e=tj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oq.get())};e()}}Ql.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq="pendingRedirect",Vg=new Map;class uq extends sM{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vg.get(this.auth._key());if(!e){try{const r=await dq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vg.set(this.auth._key(),e)}return this.bypassAuthState||Vg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dq(t,e){const n=mq(e),r=hq(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function fq(t,e){Vg.set(t._key(),e)}function hq(t){return As(t._redirectPersistence)}function mq(t){return Ug(cq,t.config.apiKey,t.name)}async function pq(t,e,n=!1){if(Ur(t.app))return Promise.reject(ks(t));const r=ll(t),a=iM(r,e),c=await new uq(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq=600*1e3;class yq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!oM(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gq&&this.cachedEventUids.clear(),this.cachedEventUids.has(dk(e))}saveEventToCache(e){this.cachedEventUids.add(dk(e)),this.lastProcessedEventTime=Date.now()}}function dk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oM({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xq(t,e={}){return Ji(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wq=/^https?/;async function _q(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xq(t);for(const n of e)try{if(Eq(n))return}catch{}Pa(t,"unauthorized-domain")}function Eq(t){const e=u_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!wq.test(n))return!1;if(bq.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq=new Yh(3e4,6e4);function fk(){const t=Li().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Sq(t){return new Promise((e,n)=>{var a,s,c;function r(){fk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fk(),n(ni(t,"network-request-failed"))},timeout:jq.get()})}if((s=(a=Li().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((c=Li().gapi)!=null&&c.load)r();else{const d=hF("iframefcb");return Li()[d]=()=>{gapi.load?r():n(ni(t,"network-request-failed"))},q4(`${fF()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw $g=null,e})}let $g=null;function Aq(t){return $g=$g||Sq(t),$g}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=new Yh(5e3,15e3),Tq="__/auth/iframe",Cq="emulator/auth/iframe",kq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Iq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oq(t){const e=t.config;ze(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?YE(e,Cq):`https://${t.config.authDomain}/${Tq}`,r={apiKey:e.apiKey,appName:t.name,v:jc},a=Iq.get(t.config.apiHost);a&&(r.eid=a);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Wh(r).slice(1)}`}async function Pq(t){const e=await Aq(t),n=Li().gapi;return ze(n,t,"internal-error"),e.open({where:document.body,url:Oq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kq,dontclear:!0},r=>new Promise(async(a,s)=>{await r.restyle({setHideOnLeave:!1});const c=ni(t,"network-request-failed"),d=Li().setTimeout(()=>{s(c)},Nq.get());function f(){Li().clearTimeout(d),a(r)}r.ping(f).then(f,()=>{s(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dq=500,Mq=600,Lq="_blank",zq="http://localhost";class hk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Uq(t,e,n,r=Dq,a=Mq){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f={...Rq,width:r.toString(),height:a.toString(),top:s,left:c},h=gr().toLowerCase();n&&(d=L4(h)?Lq:n),D4(h)&&(e=e||zq,f.scrollbars="yes");const p=Object.entries(f).reduce((v,[w,E])=>`${v}${w}=${E},`,"");if(rF(h)&&d!=="_self")return Vq(e||"",d),new hk(null);const g=window.open(e||"",d,p);ze(g,t,"popup-blocked");try{g.focus()}catch{}return new hk(g)}function Vq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $q="__/auth/handler",Bq="emulator/auth/handler",Fq=encodeURIComponent("fac");async function mk(t,e,n,r,a,s){ze(t.config.authDomain,t,"auth-domain-config-required"),ze(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jc,eventId:a};if(e instanceof ej){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",j7(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))c[p]=g}if(e instanceof Xh){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const p of Object.keys(d))d[p]===void 0&&delete d[p];const f=await t._getAppCheckToken(),h=f?`#${Fq}=${encodeURIComponent(f)}`:"";return`${qq(t)}?${Wh(d).slice(1)}${h}`}function qq({config:t}){return t.emulator?YE(t,Bq):`https://${t.authDomain}/${$q}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="webStorageSupport";class Hq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eM,this._completeRedirectFn=pq,this._overrideRedirectResult=fq}async _openPopup(e,n,r,a){var c;Ls((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const s=await mk(e,n,r,u_(),a);return Uq(e,s,tj())}async _openRedirect(e,n,r,a){await this._originValidation(e);const s=await mk(e,n,r,u_(),a);return WF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:s}=this.eventManagers[n];return a?Promise.resolve(a):(Ls(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Pq(e),r=new yq(e);return n.register("authEvent",a=>(ze(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(uw,{type:uw},a=>{var c;const s=(c=a==null?void 0:a[0])==null?void 0:c[uw];s!==void 0&&n(!!s),Pa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_q(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return B4()||M4()||XE()}}const Gq=Hq;var pk="@firebase/auth",gk="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yq(t){cc(new Wo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ze(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F4(t)},h=new cF(r,a,s,f);return xF(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cc(new Wo("auth-internal",e=>{const n=ll(e.getProvider("auth").getImmediate());return(r=>new Kq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(pk,gk,Wq(t)),Mi(pk,gk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=300,Xq=w4("authIdTokenMaxAge")||Qq;let yk=null;const Zq=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Xq)return;const a=n==null?void 0:n.token;yk!==a&&(yk=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function rj(t=GE()){const e=S0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vF(t,{popupRedirectResolver:Gq,persistence:[rq,HF,eM]}),r=w4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const c=Zq(s.toString());$F(n,c,()=>c(n.currentUser)),VF(n,d=>c(d))}}const a=v4("auth");return a&&bF(n,`http://${a}`),n}function Jq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}uF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const s=ni("internal-error");s.customData=a,n(s)},r.type="text/javascript",r.charset="UTF-8",Jq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yq("Browser");var eH="firebase",tH="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(eH,tH,"app");var vk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qo,lM;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function C(){}C.prototype=I.prototype,N.F=I.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(D,O,U){for(var $=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)$[Z-2]=arguments[Z];return I.prototype[O].apply(D,$)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,I,C){C||(C=0);const D=Array(16);if(typeof I=="string")for(var O=0;O<16;++O)D[O]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(O=0;O<16;++O)D[O]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=N.g[0],C=N.g[1],O=N.g[2];let U=N.g[3],$;$=I+(U^C&(O^U))+D[0]+3614090360&4294967295,I=C+($<<7&4294967295|$>>>25),$=U+(O^I&(C^O))+D[1]+3905402710&4294967295,U=I+($<<12&4294967295|$>>>20),$=O+(C^U&(I^C))+D[2]+606105819&4294967295,O=U+($<<17&4294967295|$>>>15),$=C+(I^O&(U^I))+D[3]+3250441966&4294967295,C=O+($<<22&4294967295|$>>>10),$=I+(U^C&(O^U))+D[4]+4118548399&4294967295,I=C+($<<7&4294967295|$>>>25),$=U+(O^I&(C^O))+D[5]+1200080426&4294967295,U=I+($<<12&4294967295|$>>>20),$=O+(C^U&(I^C))+D[6]+2821735955&4294967295,O=U+($<<17&4294967295|$>>>15),$=C+(I^O&(U^I))+D[7]+4249261313&4294967295,C=O+($<<22&4294967295|$>>>10),$=I+(U^C&(O^U))+D[8]+1770035416&4294967295,I=C+($<<7&4294967295|$>>>25),$=U+(O^I&(C^O))+D[9]+2336552879&4294967295,U=I+($<<12&4294967295|$>>>20),$=O+(C^U&(I^C))+D[10]+4294925233&4294967295,O=U+($<<17&4294967295|$>>>15),$=C+(I^O&(U^I))+D[11]+2304563134&4294967295,C=O+($<<22&4294967295|$>>>10),$=I+(U^C&(O^U))+D[12]+1804603682&4294967295,I=C+($<<7&4294967295|$>>>25),$=U+(O^I&(C^O))+D[13]+4254626195&4294967295,U=I+($<<12&4294967295|$>>>20),$=O+(C^U&(I^C))+D[14]+2792965006&4294967295,O=U+($<<17&4294967295|$>>>15),$=C+(I^O&(U^I))+D[15]+1236535329&4294967295,C=O+($<<22&4294967295|$>>>10),$=I+(O^U&(C^O))+D[1]+4129170786&4294967295,I=C+($<<5&4294967295|$>>>27),$=U+(C^O&(I^C))+D[6]+3225465664&4294967295,U=I+($<<9&4294967295|$>>>23),$=O+(I^C&(U^I))+D[11]+643717713&4294967295,O=U+($<<14&4294967295|$>>>18),$=C+(U^I&(O^U))+D[0]+3921069994&4294967295,C=O+($<<20&4294967295|$>>>12),$=I+(O^U&(C^O))+D[5]+3593408605&4294967295,I=C+($<<5&4294967295|$>>>27),$=U+(C^O&(I^C))+D[10]+38016083&4294967295,U=I+($<<9&4294967295|$>>>23),$=O+(I^C&(U^I))+D[15]+3634488961&4294967295,O=U+($<<14&4294967295|$>>>18),$=C+(U^I&(O^U))+D[4]+3889429448&4294967295,C=O+($<<20&4294967295|$>>>12),$=I+(O^U&(C^O))+D[9]+568446438&4294967295,I=C+($<<5&4294967295|$>>>27),$=U+(C^O&(I^C))+D[14]+3275163606&4294967295,U=I+($<<9&4294967295|$>>>23),$=O+(I^C&(U^I))+D[3]+4107603335&4294967295,O=U+($<<14&4294967295|$>>>18),$=C+(U^I&(O^U))+D[8]+1163531501&4294967295,C=O+($<<20&4294967295|$>>>12),$=I+(O^U&(C^O))+D[13]+2850285829&4294967295,I=C+($<<5&4294967295|$>>>27),$=U+(C^O&(I^C))+D[2]+4243563512&4294967295,U=I+($<<9&4294967295|$>>>23),$=O+(I^C&(U^I))+D[7]+1735328473&4294967295,O=U+($<<14&4294967295|$>>>18),$=C+(U^I&(O^U))+D[12]+2368359562&4294967295,C=O+($<<20&4294967295|$>>>12),$=I+(C^O^U)+D[5]+4294588738&4294967295,I=C+($<<4&4294967295|$>>>28),$=U+(I^C^O)+D[8]+2272392833&4294967295,U=I+($<<11&4294967295|$>>>21),$=O+(U^I^C)+D[11]+1839030562&4294967295,O=U+($<<16&4294967295|$>>>16),$=C+(O^U^I)+D[14]+4259657740&4294967295,C=O+($<<23&4294967295|$>>>9),$=I+(C^O^U)+D[1]+2763975236&4294967295,I=C+($<<4&4294967295|$>>>28),$=U+(I^C^O)+D[4]+1272893353&4294967295,U=I+($<<11&4294967295|$>>>21),$=O+(U^I^C)+D[7]+4139469664&4294967295,O=U+($<<16&4294967295|$>>>16),$=C+(O^U^I)+D[10]+3200236656&4294967295,C=O+($<<23&4294967295|$>>>9),$=I+(C^O^U)+D[13]+681279174&4294967295,I=C+($<<4&4294967295|$>>>28),$=U+(I^C^O)+D[0]+3936430074&4294967295,U=I+($<<11&4294967295|$>>>21),$=O+(U^I^C)+D[3]+3572445317&4294967295,O=U+($<<16&4294967295|$>>>16),$=C+(O^U^I)+D[6]+76029189&4294967295,C=O+($<<23&4294967295|$>>>9),$=I+(C^O^U)+D[9]+3654602809&4294967295,I=C+($<<4&4294967295|$>>>28),$=U+(I^C^O)+D[12]+3873151461&4294967295,U=I+($<<11&4294967295|$>>>21),$=O+(U^I^C)+D[15]+530742520&4294967295,O=U+($<<16&4294967295|$>>>16),$=C+(O^U^I)+D[2]+3299628645&4294967295,C=O+($<<23&4294967295|$>>>9),$=I+(O^(C|~U))+D[0]+4096336452&4294967295,I=C+($<<6&4294967295|$>>>26),$=U+(C^(I|~O))+D[7]+1126891415&4294967295,U=I+($<<10&4294967295|$>>>22),$=O+(I^(U|~C))+D[14]+2878612391&4294967295,O=U+($<<15&4294967295|$>>>17),$=C+(U^(O|~I))+D[5]+4237533241&4294967295,C=O+($<<21&4294967295|$>>>11),$=I+(O^(C|~U))+D[12]+1700485571&4294967295,I=C+($<<6&4294967295|$>>>26),$=U+(C^(I|~O))+D[3]+2399980690&4294967295,U=I+($<<10&4294967295|$>>>22),$=O+(I^(U|~C))+D[10]+4293915773&4294967295,O=U+($<<15&4294967295|$>>>17),$=C+(U^(O|~I))+D[1]+2240044497&4294967295,C=O+($<<21&4294967295|$>>>11),$=I+(O^(C|~U))+D[8]+1873313359&4294967295,I=C+($<<6&4294967295|$>>>26),$=U+(C^(I|~O))+D[15]+4264355552&4294967295,U=I+($<<10&4294967295|$>>>22),$=O+(I^(U|~C))+D[6]+2734768916&4294967295,O=U+($<<15&4294967295|$>>>17),$=C+(U^(O|~I))+D[13]+1309151649&4294967295,C=O+($<<21&4294967295|$>>>11),$=I+(O^(C|~U))+D[4]+4149444226&4294967295,I=C+($<<6&4294967295|$>>>26),$=U+(C^(I|~O))+D[11]+3174756917&4294967295,U=I+($<<10&4294967295|$>>>22),$=O+(I^(U|~C))+D[2]+718787259&4294967295,O=U+($<<15&4294967295|$>>>17),$=C+(U^(O|~I))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(O+($<<21&4294967295|$>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+U&4294967295}r.prototype.v=function(N,I){I===void 0&&(I=N.length);const C=I-this.blockSize,D=this.C;let O=this.h,U=0;for(;U<I;){if(O==0)for(;U<=C;)a(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<I;)if(D[O++]=N.charCodeAt(U++),O==this.blockSize){a(this,D),O=0;break}}else for(;U<I;)if(D[O++]=N[U++],O==this.blockSize){a(this,D),O=0;break}}this.h=O,this.o+=I},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;I=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=I&255,I/=256;for(this.v(N),N=Array(16),I=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)N[I++]=this.g[C]>>>D&255;return N};function s(N,I){var C=d;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=I(N)}function c(N,I){this.h=I;const C=[];let D=!0;for(let O=N.length-1;O>=0;O--){const U=N[O]|0;D&&U==I||(C[O]=U,D=!1)}this.g=C}var d={};function f(N){return-128<=N&&N<128?s(N,function(I){return new c([I|0],I<0?-1:0)}):new c([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return g;if(N<0)return S(h(-N));const I=[];let C=1;for(let D=0;N>=C;D++)I[D]=N/C|0,C*=4294967296;return new c(I,0)}function p(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return S(p(N.substring(1),I));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=h(Math.pow(I,8));let D=g;for(let U=0;U<N.length;U+=8){var O=Math.min(8,N.length-U);const $=parseInt(N.substring(U,U+O),I);O<8?(O=h(Math.pow(I,O)),D=D.j(O).add(h($))):(D=D.j(C),D=D.add(h($)))}return D}var g=f(0),v=f(1),w=f(16777216);t=c.prototype,t.m=function(){if(j(this))return-S(this).m();let N=0,I=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);N+=(D>=0?D:4294967296+D)*I,I*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(E(this))return"0";if(j(this))return"-"+S(this).toString(N);const I=h(Math.pow(N,6));var C=this;let D="";for(;;){const O=T(C,I).g;C=k(C,O.j(I));let U=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=O,E(C))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function E(N){if(N.h!=0)return!1;for(let I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function j(N){return N.h==-1}t.l=function(N){return N=k(this,N),j(N)?-1:E(N)?0:1};function S(N){const I=N.g.length,C=[];for(let D=0;D<I;D++)C[D]=~N.g[D];return new c(C,~N.h).add(v)}t.abs=function(){return j(this)?S(this):this},t.add=function(N){const I=Math.max(this.g.length,N.g.length),C=[];let D=0;for(let O=0;O<=I;O++){let U=D+(this.i(O)&65535)+(N.i(O)&65535),$=(U>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);D=$>>>16,U&=65535,$&=65535,C[O]=$<<16|U}return new c(C,C[C.length-1]&-2147483648?-1:0)};function k(N,I){return N.add(S(I))}t.j=function(N){if(E(this)||E(N))return g;if(j(this))return j(N)?S(this).j(S(N)):S(S(this).j(N));if(j(N))return S(this.j(S(N)));if(this.l(w)<0&&N.l(w)<0)return h(this.m()*N.m());const I=this.g.length+N.g.length,C=[];for(var D=0;D<2*I;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let O=0;O<N.g.length;O++){const U=this.i(D)>>>16,$=this.i(D)&65535,Z=N.i(O)>>>16,he=N.i(O)&65535;C[2*D+2*O]+=$*he,z(C,2*D+2*O),C[2*D+2*O+1]+=U*he,z(C,2*D+2*O+1),C[2*D+2*O+1]+=$*Z,z(C,2*D+2*O+1),C[2*D+2*O+2]+=U*Z,z(C,2*D+2*O+2)}for(N=0;N<I;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=I;N<2*I;N++)C[N]=0;return new c(C,0)};function z(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function M(N,I){this.g=N,this.h=I}function T(N,I){if(E(I))throw Error("division by zero");if(E(N))return new M(g,g);if(j(N))return I=T(S(N),I),new M(S(I.g),S(I.h));if(j(I))return I=T(N,S(I)),new M(S(I.g),I.h);if(N.g.length>30){if(j(N)||j(I))throw Error("slowDivide_ only works with positive integers.");for(var C=v,D=I;D.l(N)<=0;)C=R(C),D=R(D);var O=V(C,1),U=V(D,1);for(D=V(D,2),C=V(C,2);!E(D);){var $=U.add(D);$.l(N)<=0&&(O=O.add(C),U=$),D=V(D,1),C=V(C,1)}return I=k(N,O.j(I)),new M(O,I)}for(O=g;N.l(I)>=0;){for(C=Math.max(1,Math.floor(N.m()/I.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=h(C),$=U.j(I);j($)||$.l(N)>0;)C-=D,U=h(C),$=U.j(I);E(U)&&(U=v),O=O.add(U),N=k(N,$)}return new M(O,N)}t.B=function(N){return T(this,N).h},t.and=function(N){const I=Math.max(this.g.length,N.g.length),C=[];for(let D=0;D<I;D++)C[D]=this.i(D)&N.i(D);return new c(C,this.h&N.h)},t.or=function(N){const I=Math.max(this.g.length,N.g.length),C=[];for(let D=0;D<I;D++)C[D]=this.i(D)|N.i(D);return new c(C,this.h|N.h)},t.xor=function(N){const I=Math.max(this.g.length,N.g.length),C=[];for(let D=0;D<I;D++)C[D]=this.i(D)^N.i(D);return new c(C,this.h^N.h)};function R(N){const I=N.g.length+1,C=[];for(let D=0;D<I;D++)C[D]=N.i(D)<<1|N.i(D-1)>>>31;return new c(C,N.h)}function V(N,I){const C=I>>5;I%=32;const D=N.g.length-C,O=[];for(let U=0;U<D;U++)O[U]=I>0?N.i(U+C)>>>I|N.i(U+C+1)<<32-I:N.i(U+C);return new c(O,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,lM=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=p,qo=c}).apply(typeof vk<"u"?vk:typeof self<"u"?self:typeof window<"u"?window:{});var dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cM,Wf,uM,Bg,m_,dM,fM,hM;(function(){var t,e=Object.defineProperty;function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof dg=="object"&&dg];for(var A=0;A<y.length;++A){var L=y[A];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=n(this);function a(y,A){if(A)e:{var L=r;y=y.split(".");for(var F=0;F<y.length-1;F++){var J=y[F];if(!(J in L))break e;L=L[J]}y=y[y.length-1],F=L[y],A=A(F),A!=F&&A!=null&&e(L,y,{configurable:!0,writable:!0,value:A})}}a("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(y){return y||function(A){var L=[],F;for(F in A)Object.prototype.hasOwnProperty.call(A,F)&&L.push([F,A[F]]);return L}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},c=this||self;function d(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function f(y,A,L){return y.call.apply(y.bind,arguments)}function h(y,A,L){return h=f,h.apply(null,arguments)}function p(y,A){var L=Array.prototype.slice.call(arguments,1);return function(){var F=L.slice();return F.push.apply(F,arguments),y.apply(this,F)}}function g(y,A){function L(){}L.prototype=A.prototype,y.Z=A.prototype,y.prototype=new L,y.prototype.constructor=y,y.Ob=function(F,J,se){for(var be=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)be[Ge-2]=arguments[Ge];return A.prototype[J].apply(F,be)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function w(y){const A=y.length;if(A>0){const L=Array(A);for(let F=0;F<A;F++)L[F]=y[F];return L}return[]}function E(y,A){for(let F=1;F<arguments.length;F++){const J=arguments[F];var L=typeof J;if(L=L!="object"?L:J?Array.isArray(J)?"array":L:"null",L=="array"||L=="object"&&typeof J.length=="number"){L=y.length||0;const se=J.length||0;y.length=L+se;for(let be=0;be<se;be++)y[L+be]=J[be]}else y.push(J)}}class j{constructor(A,L){this.i=A,this.j=L,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function S(y){c.setTimeout(()=>{throw y},0)}function k(){var y=N;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class z{constructor(){this.h=this.g=null}add(A,L){const F=M.get();F.set(A,L),this.h?this.h.next=F:this.g=F,this.h=F}}var M=new j(()=>new T,y=>y.reset());class T{constructor(){this.next=this.g=this.h=null}set(A,L){this.h=A,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let R,V=!1,N=new z,I=()=>{const y=Promise.resolve(void 0);R=()=>{y.then(C)}};function C(){for(var y;y=k();){try{y.h.call(y.g)}catch(L){S(L)}var A=M;A.j(y),A.h<100&&(A.h++,y.next=A.g,A.g=y)}V=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const L=()=>{};c.addEventListener("test",L,A),c.removeEventListener("test",L,A)}catch{}return y})();function $(y){return/^[\s\xa0]*$/.test(y)}function Z(y,A){O.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,A)}g(Z,O),Z.prototype.init=function(y,A){const L=this.type=y.type,F=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget,A||(L=="mouseover"?A=y.fromElement:L=="mouseout"&&(A=y.toElement)),this.relatedTarget=A,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ie(y,A,L,F,J){this.listener=y,this.proxy=null,this.src=A,this.type=L,this.capture=!!F,this.ha=J,this.key=++Y,this.da=this.fa=!1}function H(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function K(y,A,L){for(const F in y)A.call(L,y[F],F,y)}function le(y,A){for(const L in y)A.call(void 0,y[L],L,y)}function q(y){const A={};for(const L in y)A[L]=y[L];return A}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(y,A){let L,F;for(let J=1;J<arguments.length;J++){F=arguments[J];for(L in F)y[L]=F[L];for(let se=0;se<ae.length;se++)L=ae[se],Object.prototype.hasOwnProperty.call(F,L)&&(y[L]=F[L])}}function ye(y){this.src=y,this.g={},this.h=0}ye.prototype.add=function(y,A,L,F,J){const se=y.toString();y=this.g[se],y||(y=this.g[se]=[],this.h++);const be=Oe(y,A,F,J);return be>-1?(A=y[be],L||(A.fa=!1)):(A=new ie(A,this.src,se,!!F,J),A.fa=L,y.push(A)),A};function Te(y,A){const L=A.type;if(L in y.g){var F=y.g[L],J=Array.prototype.indexOf.call(F,A,void 0),se;(se=J>=0)&&Array.prototype.splice.call(F,J,1),se&&(H(A),y.g[L].length==0&&(delete y.g[L],y.h--))}}function Oe(y,A,L,F){for(let J=0;J<y.length;++J){const se=y[J];if(!se.da&&se.listener==A&&se.capture==!!L&&se.ha==F)return J}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),vt={};function ue(y,A,L,F,J){if(Array.isArray(A)){for(let se=0;se<A.length;se++)ue(y,A[se],L,F,J);return null}return L=St(L),y&&y[he]?y.J(A,L,d(F)?!!F.capture:!1,J):Ve(y,A,L,!1,F,J)}function Ve(y,A,L,F,J,se){if(!A)throw Error("Invalid event type");const be=d(J)?!!J.capture:!!J;let Ge=et(y);if(Ge||(y[Pe]=Ge=new ye(y)),L=Ge.add(A,L,F,be,se),L.proxy)return L;if(F=He(),L.proxy=F,F.src=y,F.listener=L,y.addEventListener)U||(J=be),J===void 0&&(J=!1),y.addEventListener(A.toString(),F,J);else if(y.attachEvent)y.attachEvent(Ie(A.toString()),F);else if(y.addListener&&y.removeListener)y.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return L}function He(){function y(L){return A.call(y.src,y.listener,L)}const A=Ye;return y}function W(y,A,L,F,J){if(Array.isArray(A))for(var se=0;se<A.length;se++)W(y,A[se],L,F,J);else F=d(F)?!!F.capture:!!F,L=St(L),y&&y[he]?(y=y.i,se=String(A).toString(),se in y.g&&(A=y.g[se],L=Oe(A,L,F,J),L>-1&&(H(A[L]),Array.prototype.splice.call(A,L,1),A.length==0&&(delete y.g[se],y.h--)))):y&&(y=et(y))&&(A=y.g[A.toString()],y=-1,A&&(y=Oe(A,L,F,J)),(L=y>-1?A[y]:null)&&Ce(L))}function Ce(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[he])Te(A.i,y);else{var L=y.type,F=y.proxy;A.removeEventListener?A.removeEventListener(L,F,y.capture):A.detachEvent?A.detachEvent(Ie(L),F):A.addListener&&A.removeListener&&A.removeListener(F),(L=et(A))?(Te(L,y),L.h==0&&(L.src=null,A[Pe]=null)):H(y)}}}function Ie(y){return y in vt?vt[y]:vt[y]="on"+y}function Ye(y,A){if(y.da)y=!0;else{A=new Z(A,this);const L=y.listener,F=y.ha||y.src;y.fa&&Ce(y),y=L.call(F,A)}return y}function et(y){return y=y[Pe],y instanceof ye?y:null}var en="__closure_events_fn_"+(Math.random()*1e9>>>0);function St(y){return typeof y=="function"?y:(y[en]||(y[en]=function(A){return y.handleEvent(A)}),y[en])}function ht(){D.call(this),this.i=new ye(this),this.M=this,this.G=null}g(ht,D),ht.prototype[he]=!0,ht.prototype.removeEventListener=function(y,A,L,F){W(this,y,A,L,F)};function xt(y,A){var L,F=y.G;if(F)for(L=[];F;F=F.G)L.push(F);if(y=y.M,F=A.type||A,typeof A=="string")A=new O(A,y);else if(A instanceof O)A.target=A.target||y;else{var J=A;A=new O(F,y),ge(A,J)}J=!0;let se,be;if(L)for(be=L.length-1;be>=0;be--)se=A.g=L[be],J=Qt(se,F,!0,A)&&J;if(se=A.g=y,J=Qt(se,F,!0,A)&&J,J=Qt(se,F,!1,A)&&J,L)for(be=0;be<L.length;be++)se=A.g=L[be],J=Qt(se,F,!1,A)&&J}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var y=this.i;for(const A in y.g){const L=y.g[A];for(let F=0;F<L.length;F++)H(L[F]);delete y.g[A],y.h--}}this.G=null},ht.prototype.J=function(y,A,L,F){return this.i.add(String(y),A,!1,L,F)},ht.prototype.K=function(y,A,L,F){return this.i.add(String(y),A,!0,L,F)};function Qt(y,A,L,F){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();let J=!0;for(let se=0;se<A.length;++se){const be=A[se];if(be&&!be.da&&be.capture==L){const Ge=be.listener,cn=be.ha||be.src;be.fa&&Te(y.i,be),J=Ge.call(cn,F)!==!1&&J}}return J&&!F.defaultPrevented}function Id(y,A){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=h(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:c.setTimeout(y,A||0)}function Rm(y){y.g=Id(()=>{y.g=null,y.i&&(y.i=!1,Rm(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class vr extends D{constructor(A,L){super(),this.m=A,this.l=L,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Rm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yl(y){D.call(this),this.h=y,this.g={}}g(yl,D);var Od=[];function Pd(y){K(y.g,function(A,L){this.g.hasOwnProperty(L)&&Ce(A)},y),y.g={}}yl.prototype.N=function(){yl.Z.N.call(this),Pd(this)},yl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var eo=c.JSON.stringify,Xv=c.JSON.parse,Dm=class{stringify(y){return c.JSON.stringify(y,void 0)}parse(y){return c.JSON.parse(y,void 0)}};function Mm(){}function Lm(){}var Va={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zn(){O.call(this,"d")}g(Zn,O);function da(){O.call(this,"c")}g(da,O);var ln={},zm=null;function Oc(){return zm=zm||new ht}ln.Ia="serverreachability";function Um(y){O.call(this,ln.Ia,y)}g(Um,O);function ui(y){const A=Oc();xt(A,new Um(A))}ln.STAT_EVENT="statevent";function vl(y,A){O.call(this,ln.STAT_EVENT,y),this.stat=A}g(vl,O);function yn(y){const A=Oc();xt(A,new vl(A,y))}ln.Ja="timingevent";function di(y,A){O.call(this,ln.Ja,y),this.size=A}g(di,O);function fi(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){y()},A)}function $a(){this.g=!0}$a.prototype.ua=function(){this.g=!1};function Zv(y,A,L,F,J,se){y.info(function(){if(y.g)if(se){var be="",Ge=se.split("&");for(let mt=0;mt<Ge.length;mt++){var cn=Ge[mt].split("=");if(cn.length>1){const Ft=cn[0];cn=cn[1];const pa=Ft.split("_");be=pa.length>=2&&pa[1]=="type"?be+(Ft+"="+cn+"&"):be+(Ft+"=redacted&")}}}else be=null;else be=se;return"XMLHTTP REQ ("+F+") [attempt "+J+"]: "+A+`
`+L+`
`+be})}function Vm(y,A,L,F,J,se,be){y.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+J+"]: "+A+`
`+L+`
`+se+" "+be})}function hi(y,A,L,F){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+Jv(y,L)+(F?" "+F:"")})}function xl(y,A){y.info(function(){return"TIMEOUT: "+A})}$a.prototype.info=function(){};function Jv(y,A){if(!y.g)return A;if(!A)return null;try{const se=JSON.parse(A);if(se){for(y=0;y<se.length;y++)if(Array.isArray(se[y])){var L=se[y];if(!(L.length<2)){var F=L[1];if(Array.isArray(F)&&!(F.length<1)){var J=F[0];if(J!="noop"&&J!="stop"&&J!="close")for(let be=1;be<F.length;be++)F[be]=""}}}}return eo(se)}catch{return A}}var bl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Dd;function wl(){}g(wl,Mm),wl.prototype.g=function(){return new XMLHttpRequest},Dd=new wl;function ns(y){return encodeURIComponent(String(y))}function $m(y){var A=1;y=y.split(":");const L=[];for(;A>0&&y.length;)L.push(y.shift()),A--;return y.length&&L.push(y.join(":")),L}function Ba(y,A,L,F){this.j=y,this.i=A,this.l=L,this.S=F||1,this.V=new yl(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fa}function Fa(){this.i=null,this.g="",this.h=!1}var vn={},$n={};function mi(y,A,L){y.M=1,y.A=_l(bn(A)),y.u=L,y.R=!0,Pc(y,null)}function Pc(y,A){y.F=Date.now(),pi(y),y.B=bn(y.A);var L=y.B,F=y.S;Array.isArray(F)||(F=[String(F)]),Lc(L.i,"t",F),y.C=0,L=y.j.L,y.h=new Fa,y.g=np(y.j,L?A:null,!y.u),y.P>0&&(y.O=new vr(h(y.Y,y,y.g),y.P)),A=y.V,L=y.g,F=y.ba;var J="readystatechange";Array.isArray(J)||(J&&(Od[0]=J.toString()),J=Od);for(let se=0;se<J.length;se++){const be=ue(L,J[se],F||A.handleEvent,!1,A.h||A);if(!be)break;A.g[be.key]=be}A=y.J?q(y.J):{},y.u?(y.v||(y.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,A)):(y.v="GET",y.g.ea(y.B,y.v,null,A)),ui(),Zv(y.i,y.v,y.B,y.l,y.S,y.u)}Ba.prototype.ba=function(y){y=y.target;const A=this.O;A&&Ga(y)==3?A.j():this.Y(y)},Ba.prototype.Y=function(y){try{if(y==this.g)e:{const Ge=Ga(this.g),cn=this.g.ya(),mt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||Jn(this.g)))){this.K||Ge!=4||cn==7||(cn==8||mt<=0?ui(3):ui(2)),gi(this);var A=this.g.ca();this.X=A;var L=ex(this);if(this.o=A==200,Vm(this.i,this.v,this.B,this.l,this.S,Ge,A),this.o){if(this.U&&!this.L){t:{if(this.g){var F,J=this.g;if((F=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(F)){var se=F;break t}}se=null}if(y=se)hi(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,y);else{this.o=!1,this.m=3,yn(12),Hr(this),fa(this);break e}}if(this.R){y=!0;let Ft;for(;!this.K&&this.C<L.length;)if(Ft=Fm(this,L),Ft==$n){Ge==4&&(this.m=4,yn(14),y=!1),hi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==vn){this.m=4,yn(15),hi(this.i,this.l,L,"[Invalid Chunk]"),y=!1;break}else hi(this.i,this.l,Ft,null),yi(this,Ft);if(Bm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||L.length!=0||this.h.h||(this.m=1,yn(16),y=!1),this.o=this.o&&y,!y)hi(this.i,this.l,L,"[Invalid Chunked Response]"),Hr(this),fa(this);else if(L.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Qd(be),be.P=!0,yn(11))}}else hi(this.i,this.l,L,null),yi(this,L);Ge==4&&Hr(this),this.o&&!this.K&&(Ge==4?Zm(this.j,this):(this.o=!1,pi(this)))}else as(this.g),A==400&&L.indexOf("Unknown SID")>0?(this.m=3,yn(12)):(this.m=0,yn(13)),Hr(this),fa(this)}}}catch{}finally{}};function ex(y){if(!Bm(y))return y.g.la();const A=Jn(y.g);if(A==="")return"";let L="";const F=A.length,J=Ga(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return Hr(y),fa(y),"";y.h.i=new c.TextDecoder}for(let se=0;se<F;se++)y.h.h=!0,L+=y.h.i.decode(A[se],{stream:!(J&&se==F-1)});return A.length=0,y.h.g+=L,y.C=0,y.h.g}function Bm(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function Fm(y,A){var L=y.C,F=A.indexOf(`
`,L);return F==-1?$n:(L=Number(A.substring(L,F)),isNaN(L)?vn:(F+=1,F+L>A.length?$n:(A=A.slice(F,F+L),y.C=F+L,A)))}Ba.prototype.cancel=function(){this.K=!0,Hr(this)};function pi(y){y.T=Date.now()+y.H,Rc(y,y.H)}function Rc(y,A){if(y.D!=null)throw Error("WatchDog timer not null");y.D=fi(h(y.aa,y),A)}function gi(y){y.D&&(c.clearTimeout(y.D),y.D=null)}Ba.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(xl(this.i,this.B),this.M!=2&&(ui(),yn(17)),Hr(this),this.m=2,fa(this)):Rc(this,this.T-y)};function fa(y){y.j.I==0||y.K||Zm(y.j,y)}function Hr(y){gi(y);var A=y.O;A&&typeof A.dispose=="function"&&A.dispose(),y.O=null,Pd(y.V),y.g&&(A=y.g,y.g=null,A.abort(),A.dispose())}function yi(y,A){try{var L=y.j;if(L.I!=0&&(L.g==y||xi(L.h,y))){if(!y.L&&xi(L.h,y)&&L.I==3){try{var F=L.Ba.g.parse(A)}catch{F=null}if(Array.isArray(F)&&F.length==3){var J=F;if(J[0]==0){e:if(!L.v){if(L.g)if(L.g.F+3e3<y.F)Bc(L),lo(L);else break e;Cl(L),yn(18)}}else L.xa=J[1],0<L.xa-L.K&&J[2]<37500&&L.F&&L.A==0&&!L.C&&(L.C=fi(h(L.Va,L),6e3));vi(L.h)<=1&&L.ta&&(L.ta=void 0)}else Si(L,11)}else if((y.L||L.g==y)&&Bc(L),!$(A))for(J=L.Ba.g.parse(A),A=0;A<J.length;A++){let mt=J[A];const Ft=mt[0];if(!(Ft<=L.K))if(L.K=Ft,mt=mt[1],L.I==2)if(mt[0]=="c"){L.M=mt[1],L.ba=mt[2];const pa=mt[3];pa!=null&&(L.ka=pa,L.j.info("VER="+L.ka));const Ai=mt[4];Ai!=null&&(L.za=Ai,L.j.info("SVER="+L.za));const Ka=mt[5];Ka!=null&&typeof Ka=="number"&&Ka>0&&(F=1.5*Ka,L.O=F,L.j.info("backChannelRequestTimeoutMs_="+F)),F=L;const Wa=y.g;if(Wa){const kl=Wa.g?Wa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kl){var se=F.h;se.g||kl.indexOf("spdy")==-1&&kl.indexOf("quic")==-1&&kl.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(zd(se,se.h),se.h=null))}if(F.G){const Fc=Wa.g?Wa.g.getResponseHeader("X-HTTP-Session-Id"):null;Fc&&(F.wa=Fc,bt(F.J,F.G,Fc))}}L.I=3,L.l&&L.l.ra(),L.aa&&(L.T=Date.now()-y.F,L.j.info("Handshake RTT: "+L.T+"ms")),F=L;var be=y;if(F.na=tp(F,F.L?F.ba:null,F.W),be.L){Ud(F.h,be);var Ge=be,cn=F.O;cn&&(Ge.H=cn),Ge.D&&(gi(Ge),pi(Ge)),F.g=be}else Qm(F);L.i.length>0&&ji(L)}else mt[0]!="stop"&&mt[0]!="close"||Si(L,7);else L.I==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Si(L,7):Wd(L):mt[0]!="noop"&&L.l&&L.l.qa(mt),L.A=0)}}ui(4)}catch{}}var xn=class{constructor(y,A){this.g=y,this.map=A}};function Md(y){this.l=y||10,c.PerformanceNavigationTiming?(y=c.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ld(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function vi(y){return y.h?1:y.g?y.g.size:0}function xi(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function zd(y,A){y.g?y.g.add(A):y.h=A}function Ud(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}Md.prototype.cancel=function(){if(this.i=Vd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Vd(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const L of y.g.values())A=A.concat(L.G);return A}return w(y.i)}var qm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dc(y,A){if(y){y=y.split("&");for(let L=0;L<y.length;L++){const F=y[L].indexOf("=");let J,se=null;F>=0?(J=y[L].substring(0,F),se=y[L].substring(F+1)):J=y[L],A(J,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function Gr(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;y instanceof Gr?(this.l=y.l,Bn(this,y.j),this.o=y.o,this.g=y.g,to(this,y.u),this.h=y.h,$d(this,Wm(y.i)),this.m=y.m):y&&(A=String(y).match(qm))?(this.l=!1,Bn(this,A[1]||"",!0),this.o=bi(A[2]||""),this.g=bi(A[3]||"",!0),to(this,A[4]),this.h=bi(A[5]||"",!0),$d(this,A[6]||"",!0),this.m=bi(A[7]||"")):(this.l=!1,this.i=new ro(null,this.l))}Gr.prototype.toString=function(){const y=[];var A=this.j;A&&y.push(El(A,Mc,!0),":");var L=this.g;return(L||A=="file")&&(y.push("//"),(A=this.o)&&y.push(El(A,Mc,!0),"@"),y.push(ns(L).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.u,L!=null&&y.push(":",String(L))),(L=this.h)&&(this.g&&L.charAt(0)!="/"&&y.push("/"),y.push(El(L,L.charAt(0)=="/"?Bd:Hm,!0))),(L=this.i.toString())&&y.push("?",L),(L=this.m)&&y.push("#",El(L,Gm)),y.join("")},Gr.prototype.resolve=function(y){const A=bn(this);let L=!!y.j;L?Bn(A,y.j):L=!!y.o,L?A.o=y.o:L=!!y.g,L?A.g=y.g:L=y.u!=null;var F=y.h;if(L)to(A,y.u);else if(L=!!y.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var J=A.h.lastIndexOf("/");J!=-1&&(F=A.h.slice(0,J+1)+F)}if(J=F,J==".."||J==".")F="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){F=J.lastIndexOf("/",0)==0,J=J.split("/");const se=[];for(let be=0;be<J.length;){const Ge=J[be++];Ge=="."?F&&be==J.length&&se.push(""):Ge==".."?((se.length>1||se.length==1&&se[0]!="")&&se.pop(),F&&be==J.length&&se.push("")):(se.push(Ge),F=!0)}F=se.join("/")}else F=J}return L?A.h=F:L=y.i.toString()!=="",L?$d(A,Wm(y.i)):L=!!y.m,L&&(A.m=y.m),A};function bn(y){return new Gr(y)}function Bn(y,A,L){y.j=L?bi(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function to(y,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);y.u=A}else y.u=null}function $d(y,A,L){A instanceof ro?(y.i=A,zc(y.i,y.l)):(L||(A=El(A,no)),y.i=new ro(A,y.l))}function bt(y,A,L){y.i.set(A,L)}function _l(y){return bt(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function bi(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function El(y,A,L){return typeof y=="string"?(y=encodeURI(y).replace(A,kr),L&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function kr(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var Mc=/[#\/\?@]/g,Hm=/[#\?:]/g,Bd=/[#\?]/g,no=/[#\?@]/g,Gm=/#/g;function ro(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function Ir(y){y.g||(y.g=new Map,y.h=0,y.i&&Dc(y.i,function(A,L){y.add(decodeURIComponent(A.replace(/\+/g," ")),L)}))}t=ro.prototype,t.add=function(y,A){Ir(this),this.i=null,y=ao(this,y);let L=this.g.get(y);return L||this.g.set(y,L=[]),L.push(A),this.h+=1,this};function Km(y,A){Ir(y),A=ao(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function Fd(y,A){return Ir(y),A=ao(y,A),y.g.has(A)}t.forEach=function(y,A){Ir(this),this.g.forEach(function(L,F){L.forEach(function(J){y.call(A,J,F,this)},this)},this)};function qd(y,A){Ir(y);let L=[];if(typeof A=="string")Fd(y,A)&&(L=L.concat(y.g.get(ao(y,A))));else for(y=Array.from(y.g.values()),A=0;A<y.length;A++)L=L.concat(y[A]);return L}t.set=function(y,A){return Ir(this),this.i=null,y=ao(this,y),Fd(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},t.get=function(y,A){return y?(y=qd(this,y),y.length>0?String(y[0]):A):A};function Lc(y,A,L){Km(y,A),L.length>0&&(y.i=null,y.g.set(ao(y,A),w(L)),y.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(let F=0;F<A.length;F++){var L=A[F];const J=ns(L);L=qd(this,L);for(let se=0;se<L.length;se++){let be=J;L[se]!==""&&(be+="="+ns(L[se])),y.push(be)}}return this.i=y.join("&")};function Wm(y){const A=new ro;return A.i=y.i,y.g&&(A.g=new Map(y.g),A.h=y.h),A}function ao(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function zc(y,A){A&&!y.j&&(Ir(y),y.i=null,y.g.forEach(function(L,F){const J=F.toLowerCase();F!=J&&(Km(this,F),Lc(this,J,L))},y)),y.j=A}function qa(y,A){const L=new $a;if(c.Image){const F=new Image;F.onload=p(ha,L,"TestLoadImage: loaded",!0,A,F),F.onerror=p(ha,L,"TestLoadImage: error",!1,A,F),F.onabort=p(ha,L,"TestLoadImage: abort",!1,A,F),F.ontimeout=p(ha,L,"TestLoadImage: timeout",!1,A,F),c.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=y}else A(!1)}function Hd(y,A){const L=new $a,F=new AbortController,J=setTimeout(()=>{F.abort(),ha(L,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:F.signal}).then(se=>{clearTimeout(J),se.ok?ha(L,"TestPingServer: ok",!0,A):ha(L,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(J),ha(L,"TestPingServer: error",!1,A)})}function ha(y,A,L,F,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),F(L)}catch{}}function io(){this.g=new Dm}function wi(y){this.i=y.Sb||null,this.h=y.ab||!1}g(wi,Mm),wi.prototype.g=function(){return new jl(this.i,this.h)};function jl(y,A){ht.call(this),this.H=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(jl,ht),t=jl.prototype,t.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=A,this.readyState=1,Ha(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(A.body=y),(this.H||c).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,so(this)),this.readyState=0},t.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uc(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uc(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}t.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?so(this):Ha(this),this.readyState==3&&Uc(this)}},t.Oa=function(y){this.g&&(this.response=this.responseText=y,so(this))},t.Na=function(y){this.g&&(this.response=y,so(this))},t.ga=function(){this.g&&so(this)};function so(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Ha(y)}t.setRequestHeader=function(y,A){this.A.append(y,A)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var L=A.next();!L.done;)L=L.value,y.push(L[0]+": "+L[1]),L=A.next();return y.join(`\r
`)};function Ha(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ma(y){let A="";return K(y,function(L,F){A+=F,A+=":",A+=L,A+=`\r
`}),A}function Sl(y,A,L){e:{for(F in L){var F=!1;break e}F=!0}F||(L=ma(L),typeof y=="string"?L!=null&&ns(L):bt(y,A,L))}function At(y){ht.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(At,ht);var _i=/^https?$/i,Gd=["POST","PUT"];t=At.prototype,t.Fa=function(y){this.H=y},t.ea=function(y,A,L,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Dd.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(se){Al(this,se);return}if(y=L||"",L=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var J in F)L.set(J,F[J]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const se of F.keys())L.set(se,F.get(se));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(L.keys()).find(se=>se.toLowerCase()=="content-type"),J=c.FormData&&y instanceof c.FormData,!(Array.prototype.indexOf.call(Gd,A,void 0)>=0)||F||J||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,be]of L)this.g.setRequestHeader(se,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(se){Al(this,se)}};function Al(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.o=5,Kd(y),rs(y)}function Kd(y){y.A||(y.A=!0,xt(y,"complete"),xt(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,xt(this,"complete"),xt(this,"abort"),rs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rs(this,!0)),At.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Nl(this):this.Xa())},t.Xa=function(){Nl(this)};function Nl(y){if(y.h&&typeof s<"u"){if(y.v&&Ga(y)==4)setTimeout(y.Ca.bind(y),0);else if(xt(y,"readystatechange"),Ga(y)==4){y.h=!1;try{const se=y.ca();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var L;if(!(L=A)){var F;if(F=se===0){let be=String(y.D).match(qm)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),F=!_i.test(be?be.toLowerCase():"")}L=F}if(L)xt(y,"complete"),xt(y,"success");else{y.o=6;try{var J=Ga(y)>2?y.g.statusText:""}catch{J=""}y.l=J+" ["+y.ca()+"]",Kd(y)}}finally{rs(y)}}}}function rs(y,A){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const L=y.g;y.g=null,A||xt(y,"ready");try{L.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ga(y){return y.g?y.g.readyState:0}t.ca=function(){try{return Ga(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),Xv(A)}};function Jn(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function as(y){const A={};y=(y.g&&Ga(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<y.length;F++){if($(y[F]))continue;var L=$m(y[F]);const J=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const se=A[J]||[];A[J]=se,se.push(L)}le(A,function(F){return F.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(y,A,L){return L&&L.internalChannelParams&&L.internalChannelParams[y]||A}function oo(y){this.za=0,this.i=[],this.j=new $a,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,y),this.Za=Ei("retryDelaySeedMs",1e4,y),this.Ta=Ei("forwardChannelMaxRetries",2,y),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Md(y&&y.concurrentRequestLimit),this.Ba=new io,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=oo.prototype,t.ka=8,t.I=1,t.connect=function(y,A,L,F){yn(0),this.W=y,this.H=A||{},L&&F!==void 0&&(this.H.OSID=L,this.H.OAID=F),this.F=this.X,this.J=tp(this,null,this.W),ji(this)};function Wd(y){if(Vc(y),y.I==3){var A=y.V++,L=bn(y.J);if(bt(L,"SID",y.M),bt(L,"RID",A),bt(L,"TYPE","terminate"),Tl(y,L),A=new Ba(y,y.j,A),A.M=2,A.A=_l(bn(L)),L=!1,c.navigator&&c.navigator.sendBeacon)try{L=c.navigator.sendBeacon(A.A.toString(),"")}catch{}!L&&c.Image&&(new Image().src=A.A,L=!0),L||(A.g=np(A.j,null),A.g.ea(A.A)),A.F=Date.now(),pi(A)}ep(y)}function lo(y){y.g&&(Qd(y),y.g.cancel(),y.g=null)}function Vc(y){lo(y),y.v&&(c.clearTimeout(y.v),y.v=null),Bc(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&c.clearTimeout(y.m),y.m=null)}function ji(y){if(!Ld(y.h)&&!y.m){y.m=!0;var A=y.Ea;R||I(),V||(R(),V=!0),N.add(A,y),y.D=0}}function $c(y,A){return vi(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=A.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=fi(h(y.Ea,y,A),Jm(y,y.D)),y.D++,!0)}t.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const J=new Ba(this,this.j,y);let se=this.o;if(this.U&&(se?(se=q(se),ge(se,this.U)):se=this.U),this.u!==null||this.R||(J.J=se,se=null),this.S)e:{for(var A=0,L=0;L<this.i.length;L++){t:{var F=this.i[L];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(A+=F,A>4096){A=L;break e}if(A===4096||L===this.i.length-1){A=L+1;break e}}A=1e3}else A=1e3;A=Ym(this,J,A),L=bn(this.J),bt(L,"RID",y),bt(L,"CVER",22),this.G&&bt(L,"X-HTTP-Session-Id",this.G),Tl(this,L),se&&(this.R?A="headers="+ns(ma(se))+"&"+A:this.u&&Sl(L,this.u,se)),zd(this.h,J),this.Ra&&bt(L,"TYPE","init"),this.S?(bt(L,"$req",A),bt(L,"SID","null"),J.U=!0,mi(J,L,null)):mi(J,L,A),this.I=2}}else this.I==3&&(y?Yd(this,y):this.i.length==0||Ld(this.h)||Yd(this))};function Yd(y,A){var L;A?L=A.l:L=y.V++;const F=bn(y.J);bt(F,"SID",y.M),bt(F,"RID",L),bt(F,"AID",y.K),Tl(y,F),y.u&&y.o&&Sl(F,y.u,y.o),L=new Ba(y,y.j,L,y.D+1),y.u===null&&(L.J=y.o),A&&(y.i=A.G.concat(y.i)),A=Ym(y,L,1e3),L.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),zd(y.h,L),mi(L,F,A)}function Tl(y,A){y.H&&K(y.H,function(L,F){bt(A,F,L)}),y.l&&K({},function(L,F){bt(A,F,L)})}function Ym(y,A,L){L=Math.min(y.i.length,L);const F=y.l?h(y.l.Ka,y.l,y):null;e:{var J=y.i;let Ge=-1;for(;;){const cn=["count="+L];Ge==-1?L>0?(Ge=J[0].g,cn.push("ofs="+Ge)):Ge=0:cn.push("ofs="+Ge);let mt=!0;for(let Ft=0;Ft<L;Ft++){var se=J[Ft].g;const pa=J[Ft].map;if(se-=Ge,se<0)Ge=Math.max(0,J[Ft].g-100),mt=!1;else try{se="req"+se+"_"||"";try{var be=pa instanceof Map?pa:Object.entries(pa);for(const[Ai,Ka]of be){let Wa=Ka;d(Ka)&&(Wa=eo(Ka)),cn.push(se+Ai+"="+encodeURIComponent(Wa))}}catch(Ai){throw cn.push(se+"type="+encodeURIComponent("_badmap")),Ai}}catch{F&&F(pa)}}if(mt){be=cn.join("&");break e}}be=void 0}return y=y.i.splice(0,L),A.G=y,be}function Qm(y){if(!y.g&&!y.v){y.Y=1;var A=y.Da;R||I(),V||(R(),V=!0),N.add(A,y),y.A=0}}function Cl(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=fi(h(y.Da,y),Jm(y,y.A)),y.A++,!0)}t.Da=function(){if(this.v=null,Xm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=fi(h(this.Wa,this),y)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yn(10),lo(this),Xm(this))};function Qd(y){y.B!=null&&(c.clearTimeout(y.B),y.B=null)}function Xm(y){y.g=new Ba(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var A=bn(y.na);bt(A,"RID","rpc"),bt(A,"SID",y.M),bt(A,"AID",y.K),bt(A,"CI",y.F?"0":"1"),!y.F&&y.ia&&bt(A,"TO",y.ia),bt(A,"TYPE","xmlhttp"),Tl(y,A),y.u&&y.o&&Sl(A,y.u,y.o),y.O&&(y.g.H=y.O);var L=y.g;y=y.ba,L.M=1,L.A=_l(bn(A)),L.u=null,L.R=!0,Pc(L,y)}t.Va=function(){this.C!=null&&(this.C=null,lo(this),Cl(this),yn(19))};function Bc(y){y.C!=null&&(c.clearTimeout(y.C),y.C=null)}function Zm(y,A){var L=null;if(y.g==A){Bc(y),Qd(y),y.g=null;var F=2}else if(xi(y.h,A))L=A.G,Ud(y.h,A),F=1;else return;if(y.I!=0){if(A.o)if(F==1){L=A.u?A.u.length:0,A=Date.now()-A.F;var J=y.D;F=Oc(),xt(F,new di(F,L)),ji(y)}else Qm(y);else if(J=A.m,J==3||J==0&&A.X>0||!(F==1&&$c(y,A)||F==2&&Cl(y)))switch(L&&L.length>0&&(A=y.h,A.i=A.i.concat(L)),J){case 1:Si(y,5);break;case 4:Si(y,10);break;case 3:Si(y,6);break;default:Si(y,2)}}}function Jm(y,A){let L=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(L*=2),L*A}function Si(y,A){if(y.j.info("Error code "+A),A==2){var L=h(y.bb,y),F=y.Ua;const J=!F;F=new Gr(F||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Bn(F,"https"),_l(F),J?qa(F.toString(),L):Hd(F.toString(),L)}else yn(2);y.I=0,y.l&&y.l.pa(A),ep(y),Vc(y)}t.bb=function(y){y?(this.j.info("Successfully pinged google.com"),yn(2)):(this.j.info("Failed to ping google.com"),yn(1))};function ep(y){if(y.I=0,y.ja=[],y.l){const A=Vd(y.h);(A.length!=0||y.i.length!=0)&&(E(y.ja,A),E(y.ja,y.i),y.h.i.length=0,w(y.i),y.i.length=0),y.l.oa()}}function tp(y,A,L){var F=L instanceof Gr?bn(L):new Gr(L);if(F.g!="")A&&(F.g=A+"."+F.g),to(F,F.u);else{var J=c.location;F=J.protocol,A=A?A+"."+J.hostname:J.hostname,J=+J.port;const se=new Gr(null);F&&Bn(se,F),A&&(se.g=A),J&&to(se,J),L&&(se.h=L),F=se}return L=y.G,A=y.wa,L&&A&&bt(F,L,A),bt(F,"VER",y.ka),Tl(y,F),F}function np(y,A,L){if(A&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Aa&&!y.ma?new At(new wi({ab:L})):new At(y.ma),A.Fa(y.L),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rp(){}t=rp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function co(){}co.prototype.g=function(y,A){return new xr(y,A)};function xr(y,A){ht.call(this),this.g=new oo(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(y?y["X-WebChannel-Client-Profile"]=A.sa:y={"X-WebChannel-Client-Profile":A.sa}),this.g.U=y,(y=A&&A.Qb)&&!$(y)&&(this.g.u=y),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!$(A)&&(this.g.G=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new is(this)}g(xr,ht),xr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xr.prototype.close=function(){Wd(this.g)},xr.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var L={};L.__data__=y,y=L}else this.v&&(L={},L.__data__=eo(y),y=L);A.i.push(new xn(A.Ya++,y)),A.I==3&&ji(A)},xr.prototype.N=function(){this.g.l=null,delete this.j,Wd(this.g),delete this.g,xr.Z.N.call(this)};function ap(y){Zn.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){e:{for(const L in A){y=L;break e}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}g(ap,Zn);function ip(){da.call(this),this.status=1}g(ip,da);function is(y){this.g=y}g(is,rp),is.prototype.ra=function(){xt(this.g,"a")},is.prototype.qa=function(y){xt(this.g,new ap(y))},is.prototype.pa=function(y){xt(this.g,new ip)},is.prototype.oa=function(){xt(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,xr.prototype.send=xr.prototype.o,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,hM=function(){return new co},fM=function(){return Oc()},dM=ln,m_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bl.NO_ERROR=0,bl.TIMEOUT=8,bl.HTTP_ERROR=6,Bg=bl,Rd.COMPLETE="complete",uM=Rd,Lm.EventType=Va,Va.OPEN="a",Va.CLOSE="b",Va.ERROR="c",Va.MESSAGE="d",ht.prototype.listen=ht.prototype.J,Wf=Lm,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,cM=At}).apply(typeof dg<"u"?dg:typeof self<"u"?self:typeof window<"u"?window:{});const xk="@firebase/firestore",bk="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dr.UNAUTHENTICATED=new dr(null),dr.GOOGLE_CREDENTIALS=new dr("google-credentials-uid"),dr.FIRST_PARTY=new dr("first-party-uid"),dr.MOCK_USER=new dr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new qE("@firebase/firestore");function ju(){return fc.logLevel}function Ee(t,...e){if(fc.logLevel<=rt.DEBUG){const n=e.map(aj);fc.debug(`Firestore (${dd}): ${t}`,...n)}}function zs(t,...e){if(fc.logLevel<=rt.ERROR){const n=e.map(aj);fc.error(`Firestore (${dd}): ${t}`,...n)}}function Hu(t,...e){if(fc.logLevel<=rt.WARN){const n=e.map(aj);fc.warn(`Firestore (${dd}): ${t}`,...n)}}function aj(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,mM(t,r,n)}function mM(t,e,n){let r=`FIRESTORE (${dd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zs(r),new Error(r)}function yt(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||mM(e,a,r)}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(dr.UNAUTHENTICATED)))}shutdown(){}}class rH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class aH{constructor(e){this.t=e,this.currentUser=dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){yt(this.o===void 0,42304);let r=this.i;const a=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let s=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Is,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const f=s;e.enqueueRetryable((async()=>{await f.promise,await a(this.currentUser)}))},d=f=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Is)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new pM(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new dr(e)}}class iH{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sH{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new iH(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(dr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oH{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){yt(this.o===void 0,3512);const r=s=>{s.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.m;return this.m=s.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const a=s=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>a(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wk(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=lH(40);for(let s=0;s<a.length;++s)r.length<20&&a[s]<n&&(r+=e.charAt(a[s]%62))}return r}}function at(t,e){return t<e?-1:t>e?1:0}function p_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const a=t.charAt(r),s=e.charAt(r);if(a!==s)return dw(a)===dw(s)?at(a,s):dw(a)?1:-1}return at(t.length,e.length)}const cH=55296,uH=57343;function dw(t){const e=t.charCodeAt(0);return e>=cH&&e<=uH}function Gu(t,e,n){return t.length===e.length&&t.every(((r,a)=>n(r,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="__name__";class Ii{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const s=Ii.compareSegments(e.get(a),n.get(a));if(s!==0)return s}return at(e.length,n.length)}static compareSegments(e,n){const r=Ii.isNumericId(e),a=Ii.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?Ii.extractNumericId(e).compare(Ii.extractNumericId(n)):p_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qo.fromString(e.substring(4,e.length-2))}}class Mt extends Ii{construct(e,n,r){return new Mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((a=>a.length>0)))}return new Mt(n)}static emptyPath(){return new Mt([])}}const dH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends Ii{construct(e,n,r){return new sr(e,n,r)}static isValidIdentifier(e){return dH.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_k}static keyField(){return new sr([_k])}static fromServerFormat(e){const n=[];let r="",a=0;const s=()=>{if(r.length===0)throw new _e(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new _e(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new _e(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(s(),a++)}if(s(),c)throw new _e(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(n)}static emptyPath(){return new sr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(Mt.fromString(e))}static fromName(e){return new De(Mt.fromString(e).popFirst(5))}static empty(){return new De(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t,e,n){if(!n)throw new _e(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fH(t,e,n,r){if(e===!0&&r===!0)throw new _e(fe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ek(t){if(!De.isDocumentKey(t))throw new _e(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jk(t){if(De.isDocumentKey(t))throw new _e(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function C0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue(12329,{type:typeof t})}function si(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=C0(t);throw new _e(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hH(t,e){if(e<=0)throw new _e(fe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,e){const n={typeString:t};return e&&(n.value=e),n}function em(t,e){if(!yM(t))throw new _e(fe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(a&&typeof c!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(s!==void 0&&c!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new _e(fe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=-62135596800,Ak=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ak);return new lt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Sk)throw new _e(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ak}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(em(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Cn("string",lt._jsonSchemaVersion),seconds:Cn("number"),nanoseconds:Cn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new lt(0,0))}static max(){return new $e(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=-1;function mH(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=$e.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new Yo(a,De.empty(),e)}function pH(t){return new Yo(t.readTime,t.key,gh)}class Yo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yo($e.min(),De.empty(),gh)}static max(){return new Yo($e.max(),De.empty(),gh)}}function gH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:at(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==yH)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe(((r,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,a)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.reject(n)}static resolve(e){return new pe(((n,r)=>{n(e)}))}static reject(e){return new pe(((n,r)=>{r(e)}))}static waitFor(e){return new pe(((n,r)=>{let a=0,s=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++s,c&&s===a&&n()}),(f=>r(f)))})),c=!0,s===a&&n()}))}static or(e){let n=pe.resolve(!1);for(const r of e)n=n.next((a=>a?pe.resolve(a):r()));return n}static forEach(e,n){const r=[];return e.forEach(((a,s)=>{r.push(n.call(this,a,s))})),this.waitFor(r)}static mapArray(e,n){return new pe(((r,a)=>{const s=e.length,c=new Array(s);let d=0;for(let f=0;f<s;f++){const h=f;n(e[h]).next((p=>{c[h]=p,++d,d===s&&r(c)}),(p=>a(p)))}}))}static doWhile(e,n){return new pe(((r,a)=>{const s=()=>{e()===!0?n().next((()=>{s()}),a):r()};s()}))}}function xH(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}k0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=-1;function I0(t){return t==null}function uy(t){return t===0&&1/t==-1/0}function bH(t){return typeof t=="number"&&Number.isInteger(t)&&!uy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="";function wH(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nk(e)),e=_H(t.get(n),e);return Nk(e)}function _H(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const s=t.charAt(a);switch(s){case"\0":n+="";break;case vM:n+="";break;default:n+=s}}return n}function Nk(t){return t+vM+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n){this.comparator=e,this.root=n||ir.EMPTY}insert(e,n){return new Zt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ir.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ir.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fg(this.root,e,this.comparator,!1)}getReverseIterator(){return new fg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fg(this.root,e,this.comparator,!0)}}class fg{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ir{constructor(e,n,r,a,s){this.key=e,this.value=n,this.color=r??ir.RED,this.left=a??ir.EMPTY,this.right=s??ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,s){return new ir(e??this.key,n??this.value,r??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const s=r(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,n,r),null):s===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return ir.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}ir.EMPTY=null,ir.RED=!0,ir.BLACK=!1;ir.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,n,r,a,s){return this}insert(e,n,r){return new ir(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ck(this.data.getIterator())}getIteratorFrom(e){return new Ck(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,s=r.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Mn(this.comparator);return n.data=e,n}}class Ck{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new ra([])}unionWith(e){let n=new Mn(sr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ra(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gu(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bM("Invalid base64 string: "+s):s}})(e);return new or(n)}static fromUint8Array(e){const n=(function(a){let s="";for(let c=0;c<a.length;++c)s+=String.fromCharCode(a[c]);return s})(e);return new or(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}or.EMPTY_BYTE_STRING=new or("");const EH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(t){if(yt(!!t,39018),typeof t=="string"){let e=0;const n=EH.exec(t);if(yt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hn(t.seconds),nanos:hn(t.nanos)}}function hn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xo(t){return typeof t=="string"?or.fromBase64String(t):or.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="server_timestamp",_M="__type__",EM="__previous_value__",jM="__local_write_time__";function oj(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_M])==null?void 0:r.stringValue)===wM}function O0(t){const e=t.mapValue.fields[EM];return oj(e)?O0(e):e}function yh(t){const e=Qo(t.mapValue.fields[jM].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(e,n,r,a,s,c,d,f,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=p}}const dy="(default)";class vh{constructor(e,n){this.projectId=e,this.database=n||dy}static empty(){return new vh("","")}get isDefaultDatabase(){return this.database===dy}isEqual(e){return e instanceof vh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="__type__",SH="__max__",hg={mapValue:{}},AM="__vector__",fy="value";function Zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oj(t)?4:NH(t)?9007199254740991:AH(t)?10:11:Ue(28295,{value:t})}function qi(t,e){if(t===e)return!0;const n=Zo(t);if(n!==Zo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yh(t).isEqual(yh(e));case 3:return(function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const c=Qo(a.timestampValue),d=Qo(s.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,s){return Xo(a.bytesValue).isEqual(Xo(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,s){return hn(a.geoPointValue.latitude)===hn(s.geoPointValue.latitude)&&hn(a.geoPointValue.longitude)===hn(s.geoPointValue.longitude)})(t,e);case 2:return(function(a,s){if("integerValue"in a&&"integerValue"in s)return hn(a.integerValue)===hn(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const c=hn(a.doubleValue),d=hn(s.doubleValue);return c===d?uy(c)===uy(d):isNaN(c)&&isNaN(d)}return!1})(t,e);case 9:return Gu(t.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(a,s){const c=a.mapValue.fields||{},d=s.mapValue.fields||{};if(Tk(c)!==Tk(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!qi(c[f],d[f])))return!1;return!0})(t,e);default:return Ue(52216,{left:t})}}function xh(t,e){return(t.values||[]).find((n=>qi(n,e)))!==void 0}function Ku(t,e){if(t===e)return 0;const n=Zo(t),r=Zo(e);if(n!==r)return at(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(t.booleanValue,e.booleanValue);case 2:return(function(s,c){const d=hn(s.integerValue||s.doubleValue),f=hn(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(t,e);case 3:return kk(t.timestampValue,e.timestampValue);case 4:return kk(yh(t),yh(e));case 5:return p_(t.stringValue,e.stringValue);case 6:return(function(s,c){const d=Xo(s),f=Xo(c);return d.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(s,c){const d=s.split("/"),f=c.split("/");for(let h=0;h<d.length&&h<f.length;h++){const p=at(d[h],f[h]);if(p!==0)return p}return at(d.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,c){const d=at(hn(s.latitude),hn(c.latitude));return d!==0?d:at(hn(s.longitude),hn(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ik(t.arrayValue,e.arrayValue);case 10:return(function(s,c){var v,w,E,j;const d=s.fields||{},f=c.fields||{},h=(v=d[fy])==null?void 0:v.arrayValue,p=(w=f[fy])==null?void 0:w.arrayValue,g=at(((E=h==null?void 0:h.values)==null?void 0:E.length)||0,((j=p==null?void 0:p.values)==null?void 0:j.length)||0);return g!==0?g:Ik(h,p)})(t.mapValue,e.mapValue);case 11:return(function(s,c){if(s===hg.mapValue&&c===hg.mapValue)return 0;if(s===hg.mapValue)return 1;if(c===hg.mapValue)return-1;const d=s.fields||{},f=Object.keys(d),h=c.fields||{},p=Object.keys(h);f.sort(),p.sort();for(let g=0;g<f.length&&g<p.length;++g){const v=p_(f[g],p[g]);if(v!==0)return v;const w=Ku(d[f[g]],h[p[g]]);if(w!==0)return w}return at(f.length,p.length)})(t.mapValue,e.mapValue);default:throw Ue(23264,{he:n})}}function kk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return at(t,e);const n=Qo(t),r=Qo(e),a=at(n.seconds,r.seconds);return a!==0?a:at(n.nanos,r.nanos)}function Ik(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const s=Ku(n[a],r[a]);if(s)return s}return at(n.length,r.length)}function Wu(t){return g_(t)}function g_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Qo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Xo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return De.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",a=!0;for(const s of n.values||[])a?a=!1:r+=",",r+=g_(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let a="{",s=!0;for(const c of r)s?s=!1:a+=",",a+=`${c}:${g_(n.fields[c])}`;return a+"}"})(t.mapValue):Ue(61005,{value:t})}function Fg(t){switch(Zo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=O0(t);return e?16+Fg(e):16;case 5:return 2*t.stringValue.length;case 6:return Xo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,s)=>a+Fg(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let a=0;return cl(r.fields,((s,c)=>{a+=s.length+Fg(c)})),a})(t.mapValue);default:throw Ue(13486,{value:t})}}function Ok(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function y_(t){return!!t&&"integerValue"in t}function lj(t){return!!t&&"arrayValue"in t}function Pk(t){return!!t&&"nullValue"in t}function Rk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qg(t){return!!t&&"mapValue"in t}function AH(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[SM])==null?void 0:r.stringValue)===AM}function ah(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return cl(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ah(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ah(t.arrayValue.values[n]);return e}return{...t}}function NH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ah(n)}setAll(e){let n=sr.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,r,a),r={},a=[],n=d.popLast()}c?r[d.lastSegment()]=ah(c):a.push(d.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,a)}delete(e){const n=this.field(e.popLast());qg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];qg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){cl(n,((a,s)=>e[a]=s));for(const a of r)delete e[a]}clone(){return new Vr(ah(this.value))}}function NM(t){const e=[];return cl(t.fields,((n,r)=>{const a=new sr([n]);if(qg(r)){const s=NM(r.mapValue).fields;if(s.length===0)e.push(a);else for(const c of s)e.push(a.child(c))}else e.push(a)})),new ra(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r,a,s,c,d){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=s,this.data=c,this.documentState=d}static newInvalidDocument(e){return new fr(e,0,$e.min(),$e.min(),$e.min(),Vr.empty(),0)}static newFoundDocument(e,n,r,a){return new fr(e,1,n,$e.min(),r,a,0)}static newNoDocument(e,n){return new fr(e,2,n,$e.min(),$e.min(),Vr.empty(),0)}static newUnknownDocument(e,n){return new fr(e,3,n,$e.min(),$e.min(),Vr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){this.position=e,this.inclusive=n}}function Dk(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const s=e[a],c=t.position[a];if(s.field.isKeyField()?r=De.comparator(De.fromName(c.referenceValue),n.key):r=Ku(c,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n="asc"){this.field=e,this.dir=n}}function TH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{}class Nn extends TM{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kH(e,n,r):n==="array-contains"?new PH(e,r):n==="in"?new RH(e,r):n==="not-in"?new DH(e,r):n==="array-contains-any"?new MH(e,r):new Nn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IH(e,r):new OH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ku(n,this.value)):n!==null&&Zo(this.value)===Zo(n)&&this.matchesComparison(Ku(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends TM{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new oi(e,n)}matches(e){return CM(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function CM(t){return t.op==="and"}function kM(t){return CH(t)&&CM(t)}function CH(t){for(const e of t.filters)if(e instanceof oi)return!1;return!0}function v_(t){if(t instanceof Nn)return t.field.canonicalString()+t.op.toString()+Wu(t.value);if(kM(t))return t.filters.map((e=>v_(e))).join(",");{const e=t.filters.map((n=>v_(n))).join(",");return`${t.op}(${e})`}}function IM(t,e){return t instanceof Nn?(function(r,a){return a instanceof Nn&&r.op===a.op&&r.field.isEqual(a.field)&&qi(r.value,a.value)})(t,e):t instanceof oi?(function(r,a){return a instanceof oi&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((s,c,d)=>s&&IM(c,a.filters[d])),!0):!1})(t,e):void Ue(19439)}function OM(t){return t instanceof Nn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wu(n.value)}`})(t):t instanceof oi?(function(n){return n.op.toString()+" {"+n.getFilters().map(OM).join(" ,")+"}"})(t):"Filter"}class kH extends Nn{constructor(e,n,r){super(e,n,r),this.key=De.fromName(r.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class IH extends Nn{constructor(e,n){super(e,"in",n),this.keys=PM("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class OH extends Nn{constructor(e,n){super(e,"not-in",n),this.keys=PM("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function PM(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>De.fromName(r.referenceValue)))}class PH extends Nn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lj(n)&&xh(n.arrayValue,this.value)}}class RH extends Nn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xh(this.value.arrayValue,n)}}class DH extends Nn{constructor(e,n){super(e,"not-in",n)}matches(e){if(xh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xh(this.value.arrayValue,n)}}class MH extends Nn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lj(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>xh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH{constructor(e,n=null,r=[],a=[],s=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=s,this.startAt=c,this.endAt=d,this.Te=null}}function Lk(t,e=null,n=[],r=[],a=null,s=null,c=null){return new LH(t,e,n,r,a,s,c)}function cj(t){const e=Fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>v_(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),I0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Wu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Wu(r))).join(",")),e.Te=n}return e.Te}function uj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mk(t.startAt,e.startAt)&&Mk(t.endAt,e.endAt)}function x_(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n=null,r=[],a=[],s=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zH(t,e,n,r,a,s,c,d){return new md(t,e,n,r,a,s,c,d)}function dj(t){return new md(t)}function zk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RM(t){return t.collectionGroup!==null}function ih(t){const e=Fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Mn(sr.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new bh(s,r))})),n.has(sr.keyField().canonicalString())||e.Ie.push(new bh(sr.keyField(),r))}return e.Ie}function zi(t){const e=Fe(t);return e.Ee||(e.Ee=UH(e,ih(t))),e.Ee}function UH(t,e){if(t.limitType==="F")return Lk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const s=a.dir==="desc"?"asc":"desc";return new bh(a.field,s)}));const n=t.endAt?new hy(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hy(t.startAt.position,t.startAt.inclusive):null;return Lk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function b_(t,e){const n=t.filters.concat([e]);return new md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function my(t,e,n){return new md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function P0(t,e){return uj(zi(t),zi(e))&&t.limitType===e.limitType}function DM(t){return`${cj(zi(t))}|lt:${t.limitType}`}function Su(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((a=>OM(a))).join(", ")}]`),I0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((a=>Wu(a))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((a=>Wu(a))).join(",")),`Target(${r})`})(zi(t))}; limitType=${t.limitType})`}function R0(t,e){return e.isFoundDocument()&&(function(r,a){const s=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):De.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,a){for(const s of ih(r))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,a){for(const s of r.filters)if(!s.matches(a))return!1;return!0})(t,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,f){const h=Dk(c,d,f);return c.inclusive?h<=0:h<0})(r.startAt,ih(r),a)||r.endAt&&!(function(c,d,f){const h=Dk(c,d,f);return c.inclusive?h>=0:h>0})(r.endAt,ih(r),a))})(t,e)}function VH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MM(t){return(e,n)=>{let r=!1;for(const a of ih(t)){const s=$H(a,e,n);if(s!==0)return s;r=r||a.field.isKeyField()}return 0}}function $H(t,e,n){const r=t.field.isKeyField()?De.comparator(e.key,n.key):(function(s,c,d){const f=c.data.field(s),h=d.data.field(s);return f!==null&&h!==null?Ku(f,h):Ue(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,s]of r)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){cl(this.inner,((n,r)=>{for(const[a,s]of r)e(a,s)}))}isEmpty(){return xM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH=new Zt(De.comparator);function Us(){return BH}const LM=new Zt(De.comparator);function Yf(...t){let e=LM;for(const n of t)e=e.insert(n.key,n);return e}function zM(t){let e=LM;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Xl(){return sh()}function UM(){return sh()}function sh(){return new Sc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const FH=new Zt(De.comparator),qH=new Mn(De.comparator);function it(...t){let e=qH;for(const n of t)e=e.add(n);return e}const HH=new Mn(at);function GH(){return HH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uy(e)?"-0":e}}function VM(t){return{integerValue:""+t}}function KH(t,e){return bH(e)?VM(e):fj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this._=void 0}}function WH(t,e,n){return t instanceof wh?(function(a,s){const c={fields:{[_M]:{stringValue:wM},[jM]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&oj(s)&&(s=O0(s)),s&&(c.fields[EM]=s),{mapValue:c}})(n,e):t instanceof _h?BM(t,e):t instanceof Eh?FM(t,e):(function(a,s){const c=$M(a,s),d=Uk(c)+Uk(a.Ae);return y_(c)&&y_(a.Ae)?VM(d):fj(a.serializer,d)})(t,e)}function YH(t,e,n){return t instanceof _h?BM(t,e):t instanceof Eh?FM(t,e):n}function $M(t,e){return t instanceof py?(function(r){return y_(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class wh extends D0{}class _h extends D0{constructor(e){super(),this.elements=e}}function BM(t,e){const n=qM(e);for(const r of t.elements)n.some((a=>qi(a,r)))||n.push(r);return{arrayValue:{values:n}}}class Eh extends D0{constructor(e){super(),this.elements=e}}function FM(t,e){let n=qM(e);for(const r of t.elements)n=n.filter((a=>!qi(a,r)));return{arrayValue:{values:n}}}class py extends D0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Uk(t){return hn(t.integerValue||t.doubleValue)}function qM(t){return lj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,n){this.field=e,this.transform=n}}function XH(t,e){return t.field.isEqual(e.field)&&(function(r,a){return r instanceof _h&&a instanceof _h||r instanceof Eh&&a instanceof Eh?Gu(r.elements,a.elements,qi):r instanceof py&&a instanceof py?qi(r.Ae,a.Ae):r instanceof wh&&a instanceof wh})(t.transform,e.transform)}class ZH{constructor(e,n){this.version=e,this.transformResults=n}}class Ca{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ca}static exists(e){return new Ca(void 0,e)}static updateTime(e){return new Ca(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class M0{}function HM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hj(t.key,Ca.none()):new tm(t.key,t.data,Ca.none());{const n=t.data,r=Vr.empty();let a=new Mn(sr.comparator);for(let s of e.fields)if(!a.has(s)){let c=n.field(s);c===null&&s.length>1&&(s=s.popLast(),c=n.field(s)),c===null?r.delete(s):r.set(s,c),a=a.add(s)}return new ul(t.key,r,new ra(a.toArray()),Ca.none())}}function JH(t,e,n){t instanceof tm?(function(a,s,c){const d=a.value.clone(),f=$k(a.fieldTransforms,s,c.transformResults);d.setAll(f),s.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):t instanceof ul?(function(a,s,c){if(!Hg(a.precondition,s))return void s.convertToUnknownDocument(c.version);const d=$k(a.fieldTransforms,s,c.transformResults),f=s.data;f.setAll(GM(a)),f.setAll(d),s.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(t,e,n):(function(a,s,c){s.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function oh(t,e,n,r){return t instanceof tm?(function(s,c,d,f){if(!Hg(s.precondition,c))return d;const h=s.value.clone(),p=Bk(s.fieldTransforms,f,c);return h.setAll(p),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof ul?(function(s,c,d,f){if(!Hg(s.precondition,c))return d;const h=Bk(s.fieldTransforms,f,c),p=c.data;return p.setAll(GM(s)),p.setAll(h),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),d===null?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(s,c,d){return Hg(s.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(t,e,n)}function eG(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),s=$M(r.transform,a||null);s!=null&&(n===null&&(n=Vr.empty()),n.set(r.field,s))}return n||null}function Vk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Gu(r,a,((s,c)=>XH(s,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tm extends M0{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ul extends M0{constructor(e,n,r,a,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GM(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function $k(t,e,n){const r=new Map;yt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const s=t[a],c=s.transform,d=e.data.field(s.field);r.set(s.field,YH(c,d,n[a]))}return r}function Bk(t,e,n){const r=new Map;for(const a of t){const s=a.transform,c=n.data.field(a.field);r.set(a.field,WH(s,c,e))}return r}class hj extends M0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tG extends M0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&JH(s,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=UM();return this.mutations.forEach((a=>{const s=e.get(a.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=n.has(a.key)?null:d;const f=HM(c,d);f!==null&&r.set(a.key,f),c.isValidDocument()||c.convertToNoDocument($e.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),it())}isEqual(e){return this.batchId===e.batchId&&Gu(this.mutations,e.mutations,((n,r)=>Vk(n,r)))&&Gu(this.baseMutations,e.baseMutations,((n,r)=>Vk(n,r)))}}class mj{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){yt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return FH})();const s=e.mutations;for(let c=0;c<s.length;c++)a=a.insert(s[c].key,r[c].version);return new mj(e,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn,ot;function iG(t){switch(t){case fe.OK:return Ue(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Ue(15467,{code:t})}}function KM(t){if(t===void 0)return zs("GRPC error has no .code"),fe.UNKNOWN;switch(t){case Sn.OK:return fe.OK;case Sn.CANCELLED:return fe.CANCELLED;case Sn.UNKNOWN:return fe.UNKNOWN;case Sn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Sn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Sn.INTERNAL:return fe.INTERNAL;case Sn.UNAVAILABLE:return fe.UNAVAILABLE;case Sn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Sn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Sn.NOT_FOUND:return fe.NOT_FOUND;case Sn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Sn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Sn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Sn.ABORTED:return fe.ABORTED;case Sn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Sn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Sn.DATA_LOSS:return fe.DATA_LOSS;default:return Ue(39323,{code:t})}}(ot=Sn||(Sn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sG(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG=new qo([4294967295,4294967295],0);function Fk(t){const e=sG().encode(t),n=new lM;return n.update(e),new Uint8Array(n.digest())}function qk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qo([n,r],0),new qo([a,s],0)]}class pj{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qf(`Invalid padding: ${n}`);if(r<0)throw new Qf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qo.fromNumber(this.ge)}ye(e,n,r){let a=e.add(n.multiply(qo.fromNumber(r)));return a.compare(oG)===1&&(a=new qo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Fk(e),[r,a]=qk(n);for(let s=0;s<this.hashCount;s++){const c=this.ye(r,a,s);if(!this.we(c))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),c=new pj(s,a,n);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const n=Fk(e),[r,a]=qk(n);for(let s=0;s<this.hashCount;s++){const c=this.ye(r,a,s);this.Se(c)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,r,a,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,nm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new L0($e.min(),a,new Zt(at),Us(),it())}}class nm{constructor(e,n,r,a,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nm(r,n,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n,r,a){this.be=e,this.removedTargetIds=n,this.key=r,this.De=a}}class WM{constructor(e,n){this.targetId=e,this.Ce=n}}class YM{constructor(e,n,r=or.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class Hk{constructor(){this.ve=0,this.Fe=Gk(),this.Me=or.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=it(),n=it(),r=it();return this.Fe.forEach(((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Ue(38017,{changeType:s})}})),new nm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Gk()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lG{constructor(e){this.Ge=e,this.ze=new Map,this.je=Us(),this.Je=mg(),this.He=mg(),this.Ye=new Zt(at)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,r=e.Ce.count,a=this.ot(n);if(a){const s=a.target;if(x_(s))if(r===0){const c=new De(s.path);this.et(n,c,fr.newNoDocument(c,$e.min()))}else yt(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const d=this.ut(e),f=d?this.ct(d,e,c):1;if(f!==0){this.it(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:s=0}=n;let c,d;try{c=Xo(r).toUint8Array()}catch(f){if(f instanceof bM)return Hu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new pj(c,a,s)}catch(f){return Hu(f instanceof Qf?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let a=0;return r.forEach((s=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${s.path.canonicalString()}`;e.mightContain(d)||(this.et(n,s,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((s,c)=>{const d=this.ot(c);if(d){if(s.current&&x_(d.target)){const f=new De(d.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,fr.newNoDocument(f,e))}s.Be&&(n.set(c,s.ke()),s.qe())}}));let r=it();this.He.forEach(((s,c)=>{let d=!0;c.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(s))})),this.je.forEach(((s,c)=>c.setReadTime(e)));const a=new L0(e,n,this.Ye,this.je,r);return this.je=Us(),this.Je=mg(),this.He=mg(),this.Ye=new Zt(at),a}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Hk,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Mn(at),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Mn(at),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hk),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function mg(){return new Zt(De.comparator)}function Gk(){return new Zt(De.comparator)}const cG={asc:"ASCENDING",desc:"DESCENDING"},uG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dG={and:"AND",or:"OR"};class fG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function w_(t,e){return t.useProto3Json||I0(e)?e:{value:e}}function gy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hG(t,e){return gy(t,e.toTimestamp())}function Ui(t){return yt(!!t,49232),$e.fromTimestamp((function(n){const r=Qo(n);return new lt(r.seconds,r.nanos)})(t))}function gj(t,e){return __(t,e).canonicalString()}function __(t,e){const n=(function(a){return new Mt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function XM(t){const e=Mt.fromString(t);return yt(n6(e),10190,{key:e.toString()}),e}function E_(t,e){return gj(t.databaseId,e.path)}function fw(t,e){const n=XM(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(JM(n))}function ZM(t,e){return gj(t.databaseId,e)}function mG(t){const e=XM(t);return e.length===4?Mt.emptyPath():JM(e)}function j_(t){return new Mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JM(t){return yt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Kk(t,e,n){return{name:E_(t,e),fields:n.value.mapValue.fields}}function pG(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ue(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=(function(h,p){return h.useProto3Json?(yt(p===void 0||typeof p=="string",58123),or.fromBase64String(p||"")):(yt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),or.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(h){const p=h.code===void 0?fe.UNKNOWN:KM(h.code);return new _e(p,h.message||"")})(c);n=new YM(r,a,s,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=fw(t,r.document.name),s=Ui(r.document.updateTime),c=r.document.createTime?Ui(r.document.createTime):$e.min(),d=new Vr({mapValue:{fields:r.document.fields}}),f=fr.newFoundDocument(a,s,c,d),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Gg(h,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=fw(t,r.document),s=r.readTime?Ui(r.readTime):$e.min(),c=fr.newNoDocument(a,s),d=r.removedTargetIds||[];n=new Gg([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=fw(t,r.document),s=r.removedTargetIds||[];n=new Gg([],s,a,null)}else{if(!("filter"in e))return Ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:s}=r,c=new aG(a,s),d=r.targetId;n=new WM(d,c)}}return n}function gG(t,e){let n;if(e instanceof tm)n={update:Kk(t,e.key,e.value)};else if(e instanceof hj)n={delete:E_(t,e.key)};else if(e instanceof ul)n={update:Kk(t,e.key,e.data),updateMask:SG(e.fieldMask)};else{if(!(e instanceof tG))return Ue(16599,{Vt:e.type});n={verify:E_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,c){const d=c.transform;if(d instanceof wh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _h)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Eh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof py)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ue(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(a,s){return s.updateTime!==void 0?{updateTime:hG(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ue(27497)})(t,e.precondition)),n}function yG(t,e){return t&&t.length>0?(yt(e!==void 0,14353),t.map((n=>(function(a,s){let c=a.updateTime?Ui(a.updateTime):Ui(s);return c.isEqual($e.min())&&(c=Ui(s)),new ZH(c,a.transformResults||[])})(n,e)))):[]}function vG(t,e){return{documents:[ZM(t,e.path)]}}function xG(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZM(t,a);const s=(function(h){if(h.length!==0)return t6(oi.create(h,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const c=(function(h){if(h.length!==0)return h.map((p=>(function(v){return{field:Au(v.field),direction:_G(v.dir)}})(p)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=w_(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:a}}function bG(t){let e=mG(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){yt(r===1,65062);const p=n.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=(function(g){const v=e6(g);return v instanceof oi&&kM(v)?v.getFilters():[v]})(n.where));let c=[];n.orderBy&&(c=(function(g){return g.map((v=>(function(E){return new bh(Nu(E.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(n.orderBy));let d=null;n.limit&&(d=(function(g){let v;return v=typeof g=="object"?g.value:g,I0(v)?null:v})(n.limit));let f=null;n.startAt&&(f=(function(g){const v=!!g.before,w=g.values||[];return new hy(w,v)})(n.startAt));let h=null;return n.endAt&&(h=(function(g){const v=!g.before,w=g.values||[];return new hy(w,v)})(n.endAt)),zH(e,a,c,s,d,"F",f,h)}function wG(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function e6(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nu(n.unaryFilter.field);return Nn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Nu(n.unaryFilter.field);return Nn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nu(n.unaryFilter.field);return Nn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Nu(n.unaryFilter.field);return Nn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Nn.create(Nu(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return oi.create(n.compositeFilter.filters.map((r=>e6(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(n.compositeFilter.op))})(t):Ue(30097,{filter:t})}function _G(t){return cG[t]}function EG(t){return uG[t]}function jG(t){return dG[t]}function Au(t){return{fieldPath:t.canonicalString()}}function Nu(t){return sr.fromServerFormat(t.fieldPath)}function t6(t){return t instanceof Nn?(function(n){if(n.op==="=="){if(Rk(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NAN"}};if(Pk(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rk(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NOT_NAN"}};if(Pk(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(n.field),op:EG(n.op),value:n.value}}})(t):t instanceof oi?(function(n){const r=n.getFilters().map((a=>t6(a)));return r.length===1?r[0]:{compositeFilter:{op:jG(n.op),filters:r}}})(t):Ue(54877,{filter:t})}function SG(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function n6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n,r,a,s=$e.min(),c=$e.min(),d=or.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new $o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(e){this.yt=e}}function NG(t){const e=bG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?my(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(){this.Cn=new CG}addToCollectionParentIndex(e,n){return this.Cn.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(Yo.min())}updateCollectionGroup(e,n,r){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class CG{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new Mn(Mt.comparator),s=!a.has(r);return this.index[n]=a.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Mn(Mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r6=41943040;class zr{static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(r6,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yu(0)}static cr(){return new Yu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="LruGarbageCollector",kG=1048576;function Qk([t,e],[n,r]){const a=at(t,n);return a===0?at(e,r):a}class IG{constructor(e){this.Ir=e,this.buffer=new Mn(Qk),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Qk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ee(Yk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hd(n)?Ee(Yk,"Ignoring IndexedDB error during garbage collection: ",n):await fd(n)}await this.Vr(3e5)}))}}class PG{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(k0.ce);const r=new IG(n);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Wk)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wk):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,a,s,c,d,f,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),a=this.params.maximumSequenceNumbersToCollect):a=g,c=Date.now(),this.nthSequenceNumber(e,a)))).next((g=>(r=g,d=Date.now(),this.removeTargets(e,r,n)))).next((g=>(s=g,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),ju()<=rt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${s} targets in `+(f-d)+`ms
	Removed ${g} documents in `+(h-f)+`ms
Total Duration: ${h-p}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:g}))))}}function RG(t,e){return new PG(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(){this.changes=new Sc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?pe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(r!==null&&oh(r.mutation,a,ra.empty(),lt.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,it()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=it()){const a=Xl();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,r).next((s=>{let c=Yf();return s.forEach(((d,f)=>{c=c.insert(d,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=Xl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,it())))}populateOverlays(e,n,r){const a=[];return r.forEach((s=>{n.has(s)||a.push(s)})),this.documentOverlayCache.getOverlays(e,a).next((s=>{s.forEach(((c,d)=>{n.set(c,d)}))}))}computeViews(e,n,r,a){let s=Us();const c=sh(),d=(function(){return sh()})();return n.forEach(((f,h)=>{const p=r.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof ul)?s=s.insert(h.key,h):p!==void 0?(c.set(h.key,p.mutation.getFieldMask()),oh(p.mutation,h,p.mutation.getFieldMask(),lt.now())):c.set(h.key,ra.empty())})),this.recalculateAndSaveOverlays(e,s).next((f=>(f.forEach(((h,p)=>c.set(h,p))),n.forEach(((h,p)=>d.set(h,new MG(p,c.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,n){const r=sh();let a=new Zt(((c,d)=>c-d)),s=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const d of c)d.keys().forEach((f=>{const h=n.get(f);if(h===null)return;let p=r.get(f)||ra.empty();p=d.applyToLocalView(h,p),r.set(f,p);const g=(a.get(d.batchId)||it()).add(f);a=a.insert(d.batchId,g)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),h=f.key,p=f.value,g=UM();p.forEach((v=>{if(!s.has(v)){const w=HM(n.get(v),r.get(v));w!==null&&g.set(v,w),s=s.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,g))}return pe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,a){return(function(c){return De.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next((s=>{const c=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-s.size):pe.resolve(Xl());let d=gh,f=s;return c.next((h=>pe.forEach(h,((p,g)=>(d<g.largestBatchId&&(d=g.largestBatchId),s.get(p)?pe.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{f=f.insert(p,v)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,f,h,it()))).next((p=>({batchId:d,changes:zM(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next((r=>{let a=Yf();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const s=n.collectionGroup;let c=Yf();return this.indexManager.getCollectionParents(e,s).next((d=>pe.forEach(d,(f=>{const h=(function(g,v){return new md(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,f.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,a).next((p=>{p.forEach(((g,v)=>{c=c.insert(g,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(s=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,a)))).next((c=>{s.forEach(((f,h)=>{const p=h.getKey();c.get(p)===null&&(c=c.insert(p,fr.newInvalidDocument(p)))}));let d=Yf();return c.forEach(((f,h)=>{const p=s.get(f);p!==void 0&&oh(p.mutation,h,ra.empty(),lt.now()),R0(n,h)&&(d=d.insert(f,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zG{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return pe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Ui(a.createTime)}})(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:NG(a.bundledQuery),readTime:Ui(a.readTime)}})(n)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(){this.overlays=new Zt(De.comparator),this.qr=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xl();return pe.forEach(n,(a=>this.getOverlay(e,a).next((s=>{s!==null&&r.set(a,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((a,s)=>{this.St(e,n,s)})),pe.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),pe.resolve()}getOverlaysForCollection(e,n,r){const a=Xl(),s=n.length+1,c=new De(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&f.largestBatchId>r&&a.set(f.getKey(),f)}return pe.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let s=new Zt(((h,p)=>h-p));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Xl(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const d=Xl(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,p)=>d.set(h,p))),!(d.size()>=a)););return pe.resolve(d)}St(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new rG(n,r));let s=this.qr.get(n);s===void 0&&(s=it(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(){this.sessionToken=or.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.Qr=new Mn(Gn.$r),this.Ur=new Mn(Gn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Gn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Gn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new De(new Mt([])),r=new Gn(n,e),a=new Gn(n,e+1),s=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),s.push(c.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new De(new Mt([])),r=new Gn(n,e),a=new Gn(n,e+1);let s=it();return this.Ur.forEachInRange([r,a],(c=>{s=s.add(c.key)})),s}containsKey(e){const n=new Gn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return De.comparator(e.key,n.key)||at(e.Yr,n.Yr)}static Kr(e,n){return at(e.Yr,n.Yr)||De.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $G{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Mn(Gn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new nG(s,n,r,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Gn(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,n){return pe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.ei(r),s=a<0?0:a;return pe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?sj:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gn(n,0),a=new Gn(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,a],(c=>{const d=this.Xr(c.Yr);s.push(d)})),pe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mn(at);return n.forEach((a=>{const s=new Gn(a,0),c=new Gn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,c],(d=>{r=r.add(d.Yr)}))})),pe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let s=r;De.isDocumentKey(s)||(s=s.child(""));const c=new Gn(new De(s),0);let d=new Mn(at);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===a&&(d=d.add(f.Yr)),!0)}),c),pe.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){yt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return pe.forEach(n.mutations,(a=>{const s=new Gn(a.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Gn(n,0),a=this.Zr.firstAfterOrEqual(r);return pe.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{constructor(e){this.ri=e,this.docs=(function(){return new Zt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),s=a?a.size:0,c=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return pe.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(n))}getEntries(e,n){let r=Us();return n.forEach((a=>{const s=this.docs.get(a);r=r.insert(a,s?s.document.mutableCopy():fr.newInvalidDocument(a))})),pe.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let s=Us();const c=n.path,d=new De(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:h,value:{document:p}}=f.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||gH(pH(p),r)<=0||(a.has(p.key)||R0(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return pe.resolve(s)}getAllFromCollectionGroup(e,n,r,a){Ue(9500)}ii(e,n){return pe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new FG(this)}getSize(e){return pe.resolve(this.size)}}class FG extends DG{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),pe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qG{constructor(e){this.persistence=e,this.si=new Sc((n=>cj(n)),uj),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.oi=0,this._i=new yj,this.targetCount=0,this.ai=Yu.ur()}forEachTarget(e,n){return this.si.forEach(((r,a)=>n(a))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),pe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Yu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Pr(n),pe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,r){let a=0;const s=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.si.delete(c),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),pe.waitFor(s).next((()=>a))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return pe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),pe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const a=this.persistence.referenceDelegate,s=[];return a&&n.forEach((c=>{s.push(a.markPotentiallyOrphaned(e,c))})),pe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return pe.resolve(r)}containsKey(e,n){return pe.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,n){this.ui={},this.overlays={},this.ci=new k0(0),this.li=!1,this.li=!0,this.hi=new VG,this.referenceDelegate=e(this),this.Pi=new qG(this),this.indexManager=new TG,this.remoteDocumentCache=(function(a){return new BG(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new AG(n),this.Ii=new zG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new $G(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const a=new HG(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((s=>this.referenceDelegate.di(a).next((()=>s)))).toPromise().then((s=>(a.raiseOnCommittedEvent(),s)))}Ai(e,n){return pe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class HG extends vH{constructor(e){super(),this.currentSequenceNumber=e}}class vj{constructor(e){this.persistence=e,this.Ri=new yj,this.Vi=null}static mi(e){return new vj(e)}get fi(){if(this.Vi)return this.Vi;throw Ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),pe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(r=>{const a=De.fromPath(r);return this.gi(e,a).next((s=>{s||n.removeEntry(a,$e.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return pe.or([()=>pe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yy{constructor(e,n){this.persistence=e,this.pi=new Sc((r=>wH(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=RG(this,n)}static mi(e,n){return new yy(e,n)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((a=>r+a))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return pe.forEach(this.pi,((r,a)=>this.br(e,r,a).next((s=>s?pe.resolve():n(a)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,n).next((d=>{d||(r++,s.removeEntry(c,$e.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fg(e.data.value)),n}br(e,n,r){return pe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return pe.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=a}static As(e,n){let r=it(),a=it();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new xj(e,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return v7()?8:xH(gr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,a){const s={result:null};return this.ys(e,n).next((c=>{s.result=c})).next((()=>{if(!s.result)return this.ws(e,n,a,r).next((c=>{s.result=c}))})).next((()=>{if(s.result)return;const c=new GG;return this.Ss(e,n,c).next((d=>{if(s.result=d,this.Vs)return this.bs(e,n,c,d.size)}))})).next((()=>s.result))}bs(e,n,r,a){return r.documentReadCount<this.fs?(ju()<=rt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Su(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(ju()<=rt.DEBUG&&Ee("QueryEngine","Query:",Su(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(ju()<=rt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Su(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(n))):pe.resolve())}ys(e,n){if(zk(n))return pe.resolve(null);let r=zi(n);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=my(n,null,"F"),r=zi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const c=it(...s);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const h=this.Ds(n,d);return this.Cs(n,h,c,f.readTime)?this.ys(e,my(n,null,"F")):this.vs(e,h,n,f)}))))})))))}ws(e,n,r,a){return zk(n)||a.isEqual($e.min())?pe.resolve(null):this.ps.getDocuments(e,r).next((s=>{const c=this.Ds(n,s);return this.Cs(n,c,r,a)?pe.resolve(null):(ju()<=rt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Su(n)),this.vs(e,c,n,mH(a,gh)).next((d=>d)))}))}Ds(e,n){let r=new Mn(MM(e));return n.forEach(((a,s)=>{R0(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(e,n,r){return ju()<=rt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Su(n)),this.ps.getDocumentsMatchingQuery(e,n,Yo.min(),r)}vs(e,n,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((s=>(n.forEach((c=>{s=s.insert(c.key,c)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="LocalStore",WG=3e8;class YG{constructor(e,n,r,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new Zt(at),this.xs=new Sc((s=>cj(s)),uj),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LG(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function QG(t,e,n,r){return new YG(t,e,n,r)}async function i6(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next((s=>(a=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const c=[],d=[];let f=it();for(const h of a){c.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}for(const h of s){d.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(r,f).next((h=>({Ls:h,removedBatchIds:c,addedBatchIds:d})))}))}))}function XG(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,f,h,p){const g=h.batch,v=g.keys();let w=pe.resolve();return v.forEach((E=>{w=w.next((()=>p.getEntry(f,E))).next((j=>{const S=h.docVersions.get(E);yt(S!==null,48541),j.version.compareTo(S)<0&&(g.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),p.addEntry(j)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(f,g)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=it();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(f=f.add(d.batch.mutations[h].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,a)))}))}function s6(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function ZG(t,e){const n=Fe(t),r=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const d=[];e.targetChanges.forEach(((p,g)=>{const v=a.get(g);if(!v)return;d.push(n.Pi.removeMatchingKeys(s,p.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(s,p.addedDocuments,g))));let w=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(or.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),a=a.insert(g,w),(function(j,S,k){return j.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=WG?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(v,w,p)&&d.push(n.Pi.updateTargetData(s,w))}));let f=Us(),h=it();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))})),d.push(JG(s,c,e.documentUpdates).next((p=>{f=p.ks,h=p.qs}))),!r.isEqual($e.min())){const p=n.Pi.getLastRemoteSnapshotVersion(s).next((g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));d.push(p)}return pe.waitFor(d).next((()=>c.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,f,h))).next((()=>f))})).then((s=>(n.Ms=a,s)))}function JG(t,e,n){let r=it(),a=it();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let c=Us();return n.forEach(((d,f)=>{const h=s.get(d);f.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(d)),f.isNoDocument()&&f.version.isEqual($e.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):Ee(bj,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",f.version)})),{ks:c,qs:a}}))}function eK(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=sj),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function tK(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return n.Pi.getTargetData(r,e).next((s=>s?(a=s,pe.resolve(a)):n.Pi.allocateTargetId(r).next((c=>(a=new $o(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=n.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function S_(t,e,n){const r=Fe(t),a=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!hd(c))throw c;Ee(bj,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function Xk(t,e,n){const r=Fe(t);let a=$e.min(),s=it();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,h,p){const g=Fe(f),v=g.xs.get(p);return v!==void 0?pe.resolve(g.Ms.get(v)):g.Pi.getTargetData(h,p)})(r,c,zi(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((f=>{s=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,n?a:$e.min(),n?s:it()))).next((d=>(nK(r,VH(e),d),{documents:d,Qs:s})))))}function nK(t,e,n){let r=t.Os.get(e)||$e.min();n.forEach(((a,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}class Zk{constructor(){this.activeTargetIds=GH()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rK{constructor(){this.Mo=new Zk,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="ConnectivityMonitor";class eI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(Jk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ee(Jk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pg=null;function A_(){return pg===null?pg=(function(){return 268435456+Math.round(2147483648*Math.random())})():pg++,"0x"+pg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="RestConnection",iK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sK{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===dy?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,n,r,a,s){const c=A_(),d=this.zo(e,n.toUriEncodedString());Ee(hw,`Sending RPC '${e}' ${c}:`,d,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,a,s);const{host:h}=new URL(d),p=ol(h);return this.Jo(e,d,f,r,p).then((g=>(Ee(hw,`Received RPC '${e}' ${c}: `,g),g)),(g=>{throw Hu(hw,`RPC '${e}' ${c} failed with error: `,g,"url: ",d,"request:",r),g}))}Ho(e,n,r,a,s,c){return this.Go(e,n,r,a,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,s)=>e[s]=a)),r&&r.headers.forEach(((a,s)=>e[s]=a))}zo(e,n){const r=iK[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="WebChannelConnection";class lK extends sK{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,a,s){const c=A_();return new Promise(((d,f)=>{const h=new cM;h.setWithCredentials(!0),h.listenOnce(uM.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Bg.NO_ERROR:const g=h.getResponseJson();Ee(cr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(g)),d(g);break;case Bg.TIMEOUT:Ee(cr,`RPC '${e}' ${c} timed out`),f(new _e(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Bg.HTTP_ERROR:const v=h.getStatus();if(Ee(cr,`RPC '${e}' ${c} failed with status:`,v,"response text:",h.getResponseText()),v>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w==null?void 0:w.error;if(E&&E.status&&E.message){const j=(function(k){const z=k.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(z)>=0?z:fe.UNKNOWN})(E.status);f(new _e(j,E.message))}else f(new _e(fe.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new _e(fe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Ee(cr,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(a);Ee(cr,`RPC '${e}' ${c} sending request:`,a),h.send(n,"POST",p,r,15)}))}T_(e,n,r){const a=A_(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=hM(),d=fM(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const p=s.join("");Ee(cr,`Creating RPC '${e}' stream ${a}: ${p}`,f);const g=c.createWebChannel(p,f);this.I_(g);let v=!1,w=!1;const E=new oK({Yo:S=>{w?Ee(cr,`Not sending because RPC '${e}' stream ${a} is closed:`,S):(v||(Ee(cr,`Opening RPC '${e}' stream ${a} transport.`),g.open(),v=!0),Ee(cr,`RPC '${e}' stream ${a} sending:`,S),g.send(S))},Zo:()=>g.close()}),j=(S,k,z)=>{S.listen(k,(M=>{try{z(M)}catch(T){setTimeout((()=>{throw T}),0)}}))};return j(g,Wf.EventType.OPEN,(()=>{w||(Ee(cr,`RPC '${e}' stream ${a} transport opened.`),E.o_())})),j(g,Wf.EventType.CLOSE,(()=>{w||(w=!0,Ee(cr,`RPC '${e}' stream ${a} transport closed`),E.a_(),this.E_(g))})),j(g,Wf.EventType.ERROR,(S=>{w||(w=!0,Hu(cr,`RPC '${e}' stream ${a} transport errored. Name:`,S.name,"Message:",S.message),E.a_(new _e(fe.UNAVAILABLE,"The operation could not be completed")))})),j(g,Wf.EventType.MESSAGE,(S=>{var k;if(!w){const z=S.data[0];yt(!!z,16349);const M=z,T=(M==null?void 0:M.error)||((k=M[0])==null?void 0:k.error);if(T){Ee(cr,`RPC '${e}' stream ${a} received error:`,T);const R=T.status;let V=(function(C){const D=Sn[C];if(D!==void 0)return KM(D)})(R),N=T.message;V===void 0&&(V=fe.INTERNAL,N="Unknown error status: "+R+" with message "+T.message),w=!0,E.a_(new _e(V,N)),g.close()}else Ee(cr,`RPC '${e}' stream ${a} received:`,z),E.u_(z)}})),j(d,dM.STAT_EVENT,(S=>{S.stat===m_.PROXY?Ee(cr,`RPC '${e}' stream ${a} detected buffering proxy`):S.stat===m_.NOPROXY&&Ee(cr,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function mw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(t){return new fG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,n,r=1e3,a=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-r);a>0&&Ee("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="PersistentStream";class l6{constructor(e,n,r,a,s,c,d,f){this.Mi=e,this.S_=r,this.b_=a,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new o6(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===fe.RESOURCE_EXHAUSTED?(zs(n.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===n&&this.G_(r,a)}),(r=>{e((()=>{const a=new _e(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(tI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ee(tI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cK extends l6{constructor(e,n,r,a,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pG(this.serializer,e),r=(function(s){if(!("targetChange"in s))return $e.min();const c=s.targetChange;return c.targetIds&&c.targetIds.length?$e.min():c.readTime?Ui(c.readTime):$e.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=j_(this.serializer),n.addTarget=(function(s,c){let d;const f=c.target;if(d=x_(f)?{documents:vG(s,f)}:{query:xG(s,f).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=QM(s,c.resumeToken);const h=w_(s,c.expectedCount);h!==null&&(d.expectedCount=h)}else if(c.snapshotVersion.compareTo($e.min())>0){d.readTime=gy(s,c.snapshotVersion.toTimestamp());const h=w_(s,c.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const r=wG(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=j_(this.serializer),n.removeTarget=e,this.q_(n)}}class uK extends l6{constructor(e,n,r,a,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yG(e.writeResults,e.commitTime),r=Ui(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=j_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>gG(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{}class fK extends dK{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new _e(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,c])=>this.connection.Go(e,__(n,r),a,s,c))).catch((s=>{throw s.name==="FirebaseError"?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _e(fe.UNKNOWN,s.toString())}))}Ho(e,n,r,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,__(n,r),a,c,d,s))).catch((c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(fe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class hK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zs(n),this.aa=!1):Ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="RemoteStore";class mK{constructor(e,n,r,a,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ac(this)&&(Ee(hc,"Restarting streams for network reachability change."),await(async function(f){const h=Fe(f);h.Ea.add(4),await rm(h),h.Ra.set("Unknown"),h.Ea.delete(4),await U0(h)})(this))}))})),this.Ra=new hK(r,a)}}async function U0(t){if(Ac(t))for(const e of t.da)await e(!0)}async function rm(t){for(const e of t.da)await e(!1)}function c6(t,e){const n=Fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),jj(n)?Ej(n):pd(n).O_()&&_j(n,e))}function wj(t,e){const n=Fe(t),r=pd(n);n.Ia.delete(e),r.O_()&&u6(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ac(n)&&n.Ra.set("Unknown"))}function _j(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pd(t).Y_(e)}function u6(t,e){t.Va.Ue(e),pd(t).Z_(e)}function Ej(t){t.Va=new lG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pd(t).start(),t.Ra.ua()}function jj(t){return Ac(t)&&!pd(t).x_()&&t.Ia.size>0}function Ac(t){return Fe(t).Ea.size===0}function d6(t){t.Va=void 0}async function pK(t){t.Ra.set("Online")}async function gK(t){t.Ia.forEach(((e,n)=>{_j(t,e)}))}async function yK(t,e){d6(t),jj(t)?(t.Ra.ha(e),Ej(t)):t.Ra.set("Unknown")}async function vK(t,e,n){if(t.Ra.set("Online"),e instanceof YM&&e.state===2&&e.cause)try{await(async function(a,s){const c=s.cause;for(const d of s.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(t,e)}catch(r){Ee(hc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vy(t,r)}else if(e instanceof Gg?t.Va.Ze(e):e instanceof WM?t.Va.st(e):t.Va.tt(e),!n.isEqual($e.min()))try{const r=await s6(t.localStore);n.compareTo(r)>=0&&await(function(s,c){const d=s.Va.Tt(c);return d.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const p=s.Ia.get(h);p&&s.Ia.set(h,p.withResumeToken(f.resumeToken,c))}})),d.targetMismatches.forEach(((f,h)=>{const p=s.Ia.get(f);if(!p)return;s.Ia.set(f,p.withResumeToken(or.EMPTY_BYTE_STRING,p.snapshotVersion)),u6(s,f);const g=new $o(p.target,f,h,p.sequenceNumber);_j(s,g)})),s.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(r){Ee(hc,"Failed to raise snapshot:",r),await vy(t,r)}}async function vy(t,e,n){if(!hd(e))throw e;t.Ea.add(1),await rm(t),t.Ra.set("Offline"),n||(n=()=>s6(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ee(hc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await U0(t)}))}function f6(t,e){return e().catch((n=>vy(t,n,e)))}async function V0(t){const e=Fe(t),n=Jo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sj;for(;xK(e);)try{const a=await eK(e.localStore,r);if(a===null){e.Ta.length===0&&n.L_();break}r=a.batchId,bK(e,a)}catch(a){await vy(e,a)}h6(e)&&m6(e)}function xK(t){return Ac(t)&&t.Ta.length<10}function bK(t,e){t.Ta.push(e);const n=Jo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function h6(t){return Ac(t)&&!Jo(t).x_()&&t.Ta.length>0}function m6(t){Jo(t).start()}async function wK(t){Jo(t).ra()}async function _K(t){const e=Jo(t);for(const n of t.Ta)e.ea(n.mutations)}async function EK(t,e,n){const r=t.Ta.shift(),a=mj.from(r,e,n);await f6(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await V0(t)}async function jK(t,e){e&&Jo(t).X_&&await(async function(r,a){if((function(c){return iG(c)&&c!==fe.ABORTED})(a.code)){const s=r.Ta.shift();Jo(r).B_(),await f6(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,a))),await V0(r)}})(t,e),h6(t)&&m6(t)}async function nI(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),Ee(hc,"RemoteStore received new credentials");const r=Ac(n);n.Ea.add(3),await rm(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await U0(n)}async function SK(t,e){const n=Fe(t);e?(n.Ea.delete(2),await U0(n)):e||(n.Ea.add(2),await rm(n),n.Ra.set("Unknown"))}function pd(t){return t.ma||(t.ma=(function(n,r,a){const s=Fe(n);return s.sa(),new cK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)})(t.datastore,t.asyncQueue,{Xo:pK.bind(null,t),t_:gK.bind(null,t),r_:yK.bind(null,t),H_:vK.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),jj(t)?Ej(t):t.Ra.set("Unknown")):(await t.ma.stop(),d6(t))}))),t.ma}function Jo(t){return t.fa||(t.fa=(function(n,r,a){const s=Fe(n);return s.sa(),new uK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:wK.bind(null,t),r_:jK.bind(null,t),ta:_K.bind(null,t),na:EK.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await V0(t)):(await t.fa.stop(),t.Ta.length>0&&(Ee(hc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n,r,a,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=s,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,s){const c=Date.now()+r,d=new Sj(e,n,c,a,s);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Aj(t,e){if(zs("AsyncQueue",`${e}: ${t}`),hd(t))return new _e(fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{static emptySet(e){return new Uu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||De.comparator(n.key,r.key):(n,r)=>De.comparator(n.key,r.key),this.keyedMap=Yf(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Uu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,s=r.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Uu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.ga=new Zt(De.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Qu{constructor(e,n,r,a,s,c,d,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,a,s){const c=[];return n.forEach((d=>{c.push({type:0,doc:d})})),new Qu(e,n,Uu.emptySet(n),c,r,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&P0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class NK{constructor(){this.queries=aI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=Fe(n),s=a.queries;a.queries=aI(),s.forEach(((c,d)=>{for(const f of d.Sa)f.onError(r)}))})(this,new _e(fe.ABORTED,"Firestore shutting down"))}}function aI(){return new Sc((t=>DM(t)),P0)}async function p6(t,e){const n=Fe(t);let r=3;const a=e.query;let s=n.queries.get(a);s?!s.ba()&&e.Da()&&(r=2):(s=new AK,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(a,!0);break;case 1:s.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=Aj(c,`Initialization of query '${Su(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Nj(n)}async function g6(t,e){const n=Fe(t),r=e.query;let a=3;const s=n.queries.get(r);if(s){const c=s.Sa.indexOf(e);c>=0&&(s.Sa.splice(c,1),s.Sa.length===0?a=e.Da()?0:1:!s.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TK(t,e){const n=Fe(t);let r=!1;for(const a of e){const s=a.query,c=n.queries.get(s);if(c){for(const d of c.Sa)d.Fa(a)&&(r=!0);c.wa=a}}r&&Nj(n)}function CK(t,e,n){const r=Fe(t),a=r.queries.get(e);if(a)for(const s of a.Sa)s.onError(n);r.queries.delete(e)}function Nj(t){t.Ca.forEach((e=>{e.next()}))}var N_,iI;(iI=N_||(N_={})).Ma="default",iI.Cache="cache";class y6{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Qu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==N_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.key=e}}class x6{constructor(e){this.key=e}}class kK{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=it(),this.mutatedKeys=it(),this.eu=MM(e),this.tu=new Uu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new rI,a=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,g)=>{const v=a.get(p),w=R0(this.query,g)?g:null,E=!!v&&this.mutatedKeys.has(v.key),j=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let S=!1;v&&w?v.data.isEqual(w.data)?E!==j&&(r.track({type:3,doc:w}),S=!0):this.su(v,w)||(r.track({type:2,doc:w}),S=!0,(f&&this.eu(w,f)>0||h&&this.eu(w,h)<0)&&(d=!0)):!v&&w?(r.track({type:0,doc:w}),S=!0):v&&!w&&(r.track({type:1,doc:v}),S=!0,(f||h)&&(d=!0)),S&&(w?(c=c.add(w),s=j?s.add(p):s.delete(p)):(c=c.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Cs:d,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,g)=>(function(w,E){const j=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Rt:S})}};return j(w)-j(E)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),a=a??!1;const d=n&&!a?this._u():[],f=this.Xa.size===0&&this.current&&!a?1:0,h=f!==this.Za;return this.Za=f,c.length!==0||h?{snapshot:new Qu(this.query,e.tu,s,c,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=it(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new x6(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new v6(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=it();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tj="SyncEngine";class IK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OK{constructor(e){this.key=e,this.hu=!1}}class PK{constructor(e,n,r,a,s,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Sc((d=>DM(d)),P0),this.Iu=new Map,this.Eu=new Set,this.du=new Zt(De.comparator),this.Au=new Map,this.Ru=new yj,this.Vu={},this.mu=new Map,this.fu=Yu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function RK(t,e,n=!0){const r=S6(t);let a;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await b6(r,e,n,!0),a}async function DK(t,e){const n=S6(t);await b6(n,e,!0,!1)}async function b6(t,e,n,r){const a=await tK(t.localStore,zi(e)),s=a.targetId,c=t.sharedClientState.addLocalQueryTarget(s,n);let d;return r&&(d=await MK(t,e,s,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&c6(t.remoteStore,a),d}async function MK(t,e,n,r,a){t.pu=(g,v,w)=>(async function(j,S,k,z){let M=S.view.ru(k);M.Cs&&(M=await Xk(j.localStore,S.query,!1).then((({documents:N})=>S.view.ru(N,M))));const T=z&&z.targetChanges.get(S.targetId),R=z&&z.targetMismatches.get(S.targetId)!=null,V=S.view.applyChanges(M,j.isPrimaryClient,T,R);return oI(j,S.targetId,V.au),V.snapshot})(t,g,v,w);const s=await Xk(t.localStore,e,!0),c=new kK(e,s.Qs),d=c.ru(s.documents),f=nm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),h=c.applyChanges(d,t.isPrimaryClient,f);oI(t,n,h.au);const p=new IK(e,n,c);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function LK(t,e,n){const r=Fe(t),a=r.Tu.get(e),s=r.Iu.get(a.targetId);if(s.length>1)return r.Iu.set(a.targetId,s.filter((c=>!P0(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await S_(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&wj(r.remoteStore,a.targetId),T_(r,a.targetId)})).catch(fd)):(T_(r,a.targetId),await S_(r.localStore,a.targetId,!0))}async function zK(t,e){const n=Fe(t),r=n.Tu.get(e),a=n.Iu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wj(n.remoteStore,r.targetId))}async function UK(t,e,n){const r=GK(t);try{const a=await(function(c,d){const f=Fe(c),h=lt.now(),p=d.reduce(((w,E)=>w.add(E.key)),it());let g,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let E=Us(),j=it();return f.Ns.getEntries(w,p).next((S=>{E=S,E.forEach(((k,z)=>{z.isValidDocument()||(j=j.add(k))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,E))).next((S=>{g=S;const k=[];for(const z of d){const M=eG(z,g.get(z.key).overlayedDocument);M!=null&&k.push(new ul(z.key,M,NM(M.value.mapValue),Ca.exists(!0)))}return f.mutationQueue.addMutationBatch(w,h,k,d)})).next((S=>{v=S;const k=S.applyToLocalDocumentSet(g,j);return f.documentOverlayCache.saveOverlays(w,S.batchId,k)}))})).then((()=>({batchId:v.batchId,changes:zM(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,f){let h=c.Vu[c.currentUser.toKey()];h||(h=new Zt(at)),h=h.insert(d,f),c.Vu[c.currentUser.toKey()]=h})(r,a.batchId,n),await am(r,a.changes),await V0(r.remoteStore)}catch(a){const s=Aj(a,"Failed to persist write");n.reject(s)}}async function w6(t,e){const n=Fe(t);try{const r=await ZG(n.localStore,e);e.targetChanges.forEach(((a,s)=>{const c=n.Au.get(s);c&&(yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?yt(c.hu,14607):a.removedDocuments.size>0&&(yt(c.hu,42227),c.hu=!1))})),await am(n,r,e)}catch(r){await fd(r)}}function sI(t,e,n){const r=Fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Tu.forEach(((s,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const f=Fe(c);f.onlineState=d;let h=!1;f.queries.forEach(((p,g)=>{for(const v of g.Sa)v.va(d)&&(h=!0)})),h&&Nj(f)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VK(t,e,n){const r=Fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Au.get(e),s=a&&a.key;if(s){let c=new Zt(De.comparator);c=c.insert(s,fr.newNoDocument(s,$e.min()));const d=it().add(s),f=new L0($e.min(),new Map,new Zt(at),c,d);await w6(r,f),r.du=r.du.remove(s),r.Au.delete(e),Cj(r)}else await S_(r.localStore,e,!1).then((()=>T_(r,e,n))).catch(fd)}async function $K(t,e){const n=Fe(t),r=e.batch.batchId;try{const a=await XG(n.localStore,e);E6(n,r,null),_6(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await am(n,a)}catch(a){await fd(a)}}async function BK(t,e,n){const r=Fe(t);try{const a=await(function(c,d){const f=Fe(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return f.mutationQueue.lookupMutationBatch(h,d).next((g=>(yt(g!==null,37113),p=g.keys(),f.mutationQueue.removeMutationBatch(h,g)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,p,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>f.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);E6(r,e,n),_6(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await am(r,a)}catch(a){await fd(a)}}function _6(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function E6(t,e,n){const r=Fe(t);let a=r.Vu[r.currentUser.toKey()];if(a){const s=a.get(e);s&&(n?s.reject(n):s.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function T_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||j6(t,r)}))}function j6(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(wj(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Cj(t))}function oI(t,e,n){for(const r of n)r instanceof v6?(t.Ru.addReference(r.key,e),FK(t,r)):r instanceof x6?(Ee(Tj,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||j6(t,r.key)):Ue(19791,{wu:r})}function FK(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ee(Tj,"New document in limbo: "+n),t.Eu.add(r),Cj(t))}function Cj(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new De(Mt.fromString(e)),r=t.fu.next();t.Au.set(r,new OK(n)),t.du=t.du.insert(n,r),c6(t.remoteStore,new $o(zi(dj(n.path)),r,"TargetPurposeLimboResolution",k0.ce))}}async function am(t,e,n){const r=Fe(t),a=[],s=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,f)=>{c.push(r.pu(f,e,n).then((h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(f.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(h){a.push(h);const g=xj.As(f.targetId,h);s.push(g)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(f,h){const p=Fe(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>pe.forEach(h,(v=>pe.forEach(v.Es,(w=>p.persistence.referenceDelegate.addReference(g,v.targetId,w))).next((()=>pe.forEach(v.ds,(w=>p.persistence.referenceDelegate.removeReference(g,v.targetId,w)))))))))}catch(g){if(!hd(g))throw g;Ee(bj,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const w=p.Ms.get(v),E=w.snapshotVersion,j=w.withLastLimboFreeSnapshotVersion(E);p.Ms=p.Ms.insert(v,j)}}})(r.localStore,s))}async function qK(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){Ee(Tj,"User change. New user:",e.toKey());const r=await i6(n.localStore,e);n.currentUser=e,(function(s,c){s.mu.forEach((d=>{d.forEach((f=>{f.reject(new _e(fe.CANCELLED,c))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await am(n,r.Ls)}}function HK(t,e){const n=Fe(t),r=n.Au.get(e);if(r&&r.hu)return it().add(r.key);{let a=it();const s=n.Iu.get(e);if(!s)return a;for(const c of s){const d=n.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function S6(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=w6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VK.bind(null,e),e.Pu.H_=TK.bind(null,e.eventManager),e.Pu.yu=CK.bind(null,e.eventManager),e}function GK(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$K.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BK.bind(null,e),e}class xy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=z0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return QG(this.persistence,new KG,e.initialUser,this.serializer)}Cu(e){return new a6(vj.mi,this.serializer)}Du(e){return new rK}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xy.provider={build:()=>new xy};class KK extends xy{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){yt(this.persistence.referenceDelegate instanceof yy,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new OG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new a6((r=>yy.mi(r,n)),this.serializer)}}class C_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qK.bind(null,this.syncEngine),await SK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NK})()}createDatastore(e){const n=z0(e.databaseInfo.databaseId),r=(function(s){return new lK(s)})(e.databaseInfo);return(function(s,c,d,f){return new fK(s,c,d,f)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,a,s,c,d){return new mK(r,a,s,c,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>sI(this.syncEngine,n,0)),(function(){return eI.v()?new eI:new aK})())}createSyncEngine(e,n){return(function(a,s,c,d,f,h,p){const g=new PK(a,s,c,d,f,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const s=Fe(a);Ee(hc,"RemoteStore shutting down."),s.Ea.add(5),await rm(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}C_.provider={build:()=>new C_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="FirestoreClient";class WK{constructor(e,n,r,a,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=dr.UNAUTHENTICATED,this.clientId=ij.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async c=>{Ee(el,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Ee(el,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Aj(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function pw(t,e){t.asyncQueue.verifyOperationInProgress(),Ee(el,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async a=>{r.isEqual(a)||(await i6(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function lI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YK(t);Ee(el,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>nI(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,a)=>nI(e.remoteStore,a))),t._onlineComponents=e}async function YK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee(el,"Using user provided OfflineComponentProvider");try{await pw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===fe.FAILED_PRECONDITION||a.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Hu("Error using user provided cache. Falling back to memory cache: "+n),await pw(t,new xy)}}else Ee(el,"Using default OfflineComponentProvider"),await pw(t,new KK(void 0));return t._offlineComponents}async function N6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee(el,"Using user provided OnlineComponentProvider"),await lI(t,t._uninitializedComponentsProvider._online)):(Ee(el,"Using default OnlineComponentProvider"),await lI(t,new C_))),t._onlineComponents}function QK(t){return N6(t).then((e=>e.syncEngine))}async function T6(t){const e=await N6(t),n=e.eventManager;return n.onListen=RK.bind(null,e.syncEngine),n.onUnlisten=LK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zK.bind(null,e.syncEngine),n}function XK(t,e,n={}){const r=new Is;return t.asyncQueue.enqueueAndForget((async()=>(function(s,c,d,f,h){const p=new A6({next:v=>{p.Nu(),c.enqueueAndForget((()=>g6(s,g)));const w=v.docs.has(d);!w&&v.fromCache?h.reject(new _e(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&f&&f.source==="server"?h.reject(new _e(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new y6(dj(d.path),p,{includeMetadataChanges:!0,qa:!0});return p6(s,g)})(await T6(t),t.asyncQueue,e,n,r))),r.promise}function ZK(t,e,n={}){const r=new Is;return t.asyncQueue.enqueueAndForget((async()=>(function(s,c,d,f,h){const p=new A6({next:v=>{p.Nu(),c.enqueueAndForget((()=>g6(s,g))),v.fromCache&&f.source==="server"?h.reject(new _e(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new y6(d,p,{includeMetadataChanges:!0,qa:!0});return p6(s,g)})(await T6(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6="firestore.googleapis.com",uI=!0;class dI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k6,this.ssl=uI}else this.host=e.host,this.ssl=e.ssl??uI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r6;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kG)throw new _e(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C6(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _e(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _e(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _e(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $0{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new nH;switch(r.type){case"firstParty":return new sH(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=cI.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),cI.delete(n),r.terminate())})(this),Promise.resolve()}}function JK(t,e,n,r={}){var h;t=si(t,$0);const a=ol(e),s=t._getSettings(),c={...s,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;a&&(BE(`https://${d}`),FE("Firestore",!0)),s.host!==k6&&s.host!==d&&Hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...s,host:d,ssl:a,emulatorOptions:r};if(!lc(f,c)&&(t._setSettings(f),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=dr.MOCK_USER;else{p=_4(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new _e(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new dr(v)}t._authCredentials=new rH(new pM(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dl(this.firestore,e,this._query)}}class mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(em(n,mn._jsonSchema))return new mn(e,r||null,new De(Mt.fromString(n.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:Cn("string",mn._jsonSchemaVersion),referencePath:Cn("string")};class Ho extends dl{constructor(e,n,r){super(e,n,dj(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new De(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function qe(t,e,...n){if(t=Rt(t),gM("collection","path",e),t instanceof $0){const r=Mt.fromString(e,...n);return jk(r),new Ho(t,null,r)}{if(!(t instanceof mn||t instanceof Ho))throw new _e(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mt.fromString(e,...n));return jk(r),new Ho(t.firestore,null,r)}}function Me(t,e,...n){if(t=Rt(t),arguments.length===1&&(e=ij.newId()),gM("doc","path",e),t instanceof $0){const r=Mt.fromString(e,...n);return Ek(r),new mn(t,null,new De(r))}{if(!(t instanceof mn||t instanceof Ho))throw new _e(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mt.fromString(e,...n));return Ek(r),new mn(t.firestore,t instanceof Ho?t.converter:null,new De(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="AsyncQueue";class hI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new o6(this,"async_queue_retry"),this._c=()=>{const r=mw();r&&Ee(fI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=mw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=mw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Is;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hd(e))throw e;Ee(fI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,zs("INTERNAL UNHANDLED ERROR: ",mI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Sj.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(a),a}uc(){this.nc&&Ue(47125,{Pc:mI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function mI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Nc extends $0{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new hI,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hI(e),this._firestoreClient=void 0,await e}}}function eW(t,e){const n=typeof t=="object"?t:GE(),r=typeof t=="string"?t:dy,a=S0(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const s=x4("firestore");s&&JK(a,...s)}return a}function kj(t){if(t._terminated)throw new _e(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tW(t),t._firestoreClient}function tW(t){var r,a,s;const e=t._freezeSettings(),n=(function(d,f,h,p){return new jH(d,f,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,C6(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new WK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Na(or.fromBase64String(e))}catch(n){throw new _e(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Na(or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Na._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(em(e,Na._jsonSchema))return Na.fromBase64String(e.bytes)}}Na._jsonSchemaVersion="firestore/bytes/1.0",Na._jsonSchema={type:Cn("string",Na._jsonSchemaVersion),bytes:Cn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(em(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Cn("string",Vi._jsonSchemaVersion),latitude:Cn("number"),longitude:Cn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==a[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(em(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new $i(e.vectorValues);throw new _e(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:Cn("string",$i._jsonSchemaVersion),vectorValues:Cn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW=/^__.*__$/;class rW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ul(e,this.data,this.fieldMask,n,this.fieldTransforms):new tm(e,this.data,n,this.fieldTransforms)}}class I6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ul(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function O6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ac:t})}}class Ij{constructor(e,n,r,a,s,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ij({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return by(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(O6(this.Ac)&&nW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aW{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||z0(e)}Cc(e,n,r,a=!1){return new Ij({Ac:e,methodName:n,Dc:r,path:sr.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q0(t){const e=t._freezeSettings(),n=z0(t._databaseId);return new aW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function P6(t,e,n,r,a,s={}){const c=t.Cc(s.merge||s.mergeFields?2:0,e,n,a);Pj("Data must be an object, but it was:",c,r);const d=R6(r,c);let f,h;if(s.merge)f=new ra(c.fieldMask),h=c.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const v=k_(e,g,n);if(!c.contains(v))throw new _e(fe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);M6(p,v)||p.push(v)}f=new ra(p),h=c.fieldTransforms.filter((g=>f.covers(g.field)))}else f=null,h=c.fieldTransforms;return new rW(new Vr(d),f,h)}class H0 extends F0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof H0}}class Oj extends F0{_toFieldTransform(e){return new QH(e.path,new wh)}isEqual(e){return e instanceof Oj}}function iW(t,e,n,r){const a=t.Cc(1,e,n);Pj("Data must be an object, but it was:",a,r);const s=[],c=Vr.empty();cl(r,((f,h)=>{const p=Rj(e,f,n);h=Rt(h);const g=a.yc(p);if(h instanceof H0)s.push(p);else{const v=im(h,g);v!=null&&(s.push(p),c.set(p,v))}}));const d=new ra(s);return new I6(c,d,a.fieldTransforms)}function sW(t,e,n,r,a,s){const c=t.Cc(1,e,n),d=[k_(e,r,n)],f=[a];if(s.length%2!=0)throw new _e(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)d.push(k_(e,s[v])),f.push(s[v+1]);const h=[],p=Vr.empty();for(let v=d.length-1;v>=0;--v)if(!M6(h,d[v])){const w=d[v];let E=f[v];E=Rt(E);const j=c.yc(w);if(E instanceof H0)h.push(w);else{const S=im(E,j);S!=null&&(h.push(w),p.set(w,S))}}const g=new ra(h);return new I6(p,g,c.fieldTransforms)}function oW(t,e,n,r=!1){return im(n,t.Cc(r?4:3,e))}function im(t,e){if(D6(t=Rt(t)))return Pj("Unsupported field value:",e,t),R6(t,e);if(t instanceof F0)return(function(r,a){if(!O6(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(a);s&&a.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const s=[];let c=0;for(const d of r){let f=im(d,a.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),s.push(f),c++}return{arrayValue:{values:s}}})(t,e)}return(function(r,a){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KH(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=lt.fromDate(r);return{timestampValue:gy(a.serializer,s)}}if(r instanceof lt){const s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gy(a.serializer,s)}}if(r instanceof Vi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Na)return{bytesValue:QM(a.serializer,r._byteString)};if(r instanceof mn){const s=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(s))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gj(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof $i)return(function(c,d){return{mapValue:{fields:{[SM]:{stringValue:AM},[fy]:{arrayValue:{values:c.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return fj(d.serializer,h)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${C0(r)}`)})(t,e)}function R6(t,e){const n={};return xM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cl(t,((r,a)=>{const s=im(a,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function D6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof Vi||t instanceof Na||t instanceof mn||t instanceof F0||t instanceof $i)}function Pj(t,e,n){if(!D6(n)||!yM(n)){const r=C0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function k_(t,e,n){if((e=Rt(e))instanceof B0)return e._internalPath;if(typeof e=="string")return Rj(t,e);throw by("Field path arguments must be of type string or ",t,!1,void 0,n)}const lW=new RegExp("[~\\*/\\[\\]]");function Rj(t,e,n){if(e.search(lW)>=0)throw by(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new B0(...e.split("."))._internalPath}catch{throw by(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function by(t,e,n,r,a){const s=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||c)&&(f+=" (found",s&&(f+=` in field ${r}`),c&&(f+=` in document ${a}`),f+=")"),new _e(fe.INVALID_ARGUMENT,d+t+f)}function M6(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n,r,a,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(G0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cW extends L6{data(){return super.data()}}function G0(t,e){return typeof e=="string"?Rj(t,e):e instanceof B0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dj{}class Mj extends Dj{}function gn(t,e,...n){let r=[];e instanceof Dj&&r.push(e),r=r.concat(n),(function(s){const c=s.filter((f=>f instanceof Lj)).length,d=s.filter((f=>f instanceof K0)).length;if(c>1||c>0&&d>0)throw new _e(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)t=a._apply(t);return t}class K0 extends Mj{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new K0(e,n,r)}_apply(e){const n=this._parse(e);return z6(e._query,n),new dl(e.firestore,e.converter,b_(e._query,n))}_parse(e){const n=q0(e.firestore);return(function(s,c,d,f,h,p,g){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new _e(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){gI(g,p);const E=[];for(const j of g)E.push(pI(f,s,j));v={arrayValue:{values:E}}}else v=pI(f,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||gI(g,p),v=oW(d,c,g,p==="in"||p==="not-in");return Nn.create(h,p,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Dn(t,e,n){const r=e,a=G0("where",t);return K0._create(a,r,n)}class Lj extends Dj{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lj(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:oi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,s){let c=a;const d=s.getFlattenedFilters();for(const f of d)z6(c,f),c=b_(c,f)})(e._query,n),new dl(e.firestore,e.converter,b_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zj extends Mj{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zj(e,n)}_apply(e){const n=(function(a,s,c){if(a.startAt!==null)throw new _e(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new _e(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bh(s,c)})(e._query,this._field,this._direction);return new dl(e.firestore,e.converter,(function(a,s){const c=a.explicitOrderBy.concat([s]);return new md(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function sm(t,e="asc"){const n=e,r=G0("orderBy",t);return zj._create(r,n)}class Uj extends Mj{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Uj(e,n,r)}_apply(e){return new dl(e.firestore,e.converter,my(e._query,this._limit,this._limitType))}}function W0(t){return hH("limit",t),Uj._create("limit",t,"F")}function pI(t,e,n){if(typeof(n=Rt(n))=="string"){if(n==="")throw new _e(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RM(e)&&n.indexOf("/")!==-1)throw new _e(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Mt.fromString(n));if(!De.isDocumentKey(r))throw new _e(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ok(t,new De(r))}if(n instanceof mn)return Ok(t,n._key);throw new _e(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${C0(n)}.`)}function gI(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z6(t,e){const n=(function(a,s){for(const c of a)for(const d of c.getFlattenedFilters())if(s.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new _e(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dW{convertValue(e,n="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cl(e,((a,s)=>{r[a]=this.convertValue(s,n)})),r}convertVectorValue(e){var r,a,s;const n=(s=(a=(r=e.fields)==null?void 0:r[fy].arrayValue)==null?void 0:a.values)==null?void 0:s.map((c=>hn(c.doubleValue)));return new $i(n)}convertGeoPoint(e){return new Vi(hn(e.latitude),hn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=O0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yh(e));default:return null}}convertTimestamp(e){const n=Qo(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Mt.fromString(e);yt(n6(r),9688,{name:e});const a=new vh(r.get(1),r.get(3)),s=new De(r.popFirst(5));return a.isEqual(n)||zs(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Xf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tc extends L6{constructor(e,n,r,a,s,c){super(e,n,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(G0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=tc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}tc._jsonSchemaVersion="firestore/documentSnapshot/1.0",tc._jsonSchema={type:Cn("string",tc._jsonSchemaVersion),bundleSource:Cn("string","DocumentSnapshot"),bundleName:Cn("string"),bundle:Cn("string")};class Kg extends tc{data(e={}){return super.data(e)}}class Vu{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Xf(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Kg(this._firestore,this._userDataWriter,r.key,r,new Xf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,s){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const f=new Kg(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Xf(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>s||d.type!==3)).map((d=>{const f=new Kg(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Xf(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return d.type!==0&&(h=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),p=c.indexOf(d.doc.key)),{type:fW(d.type),doc:f,oldIndex:h,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ij.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t){t=si(t,mn);const e=si(t.firestore,Nc);return XK(kj(e),t._key).then((n=>hW(e,t,n)))}Vu._jsonSchemaVersion="firestore/querySnapshot/1.0",Vu._jsonSchema={type:Cn("string",Vu._jsonSchemaVersion),bundleSource:Cn("string","QuerySnapshot"),bundleName:Cn("string"),bundle:Cn("string")};class V6 extends dW{constructor(e){super(),this.firestore=e}convertBytes(e){return new Na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function It(t){t=si(t,dl);const e=si(t.firestore,Nc),n=kj(e),r=new V6(e);return uW(t._query),ZK(n,t._query).then((a=>new Vu(e,r,t,a)))}function ri(t,e,n){t=si(t,mn);const r=si(t.firestore,Nc),a=U6(t.converter,e,n);return Y0(r,[P6(q0(r),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,Ca.none())])}function Tn(t,e,n,...r){t=si(t,mn);const a=si(t.firestore,Nc),s=q0(a);let c;return c=typeof(e=Rt(e))=="string"||e instanceof B0?sW(s,"updateDoc",t._key,e,n,r):iW(s,"updateDoc",t._key,e),Y0(a,[c.toMutation(t._key,Ca.exists(!0))])}function Pi(t){return Y0(si(t.firestore,Nc),[new hj(t._key,Ca.none())])}function Sr(t,e){const n=si(t.firestore,Nc),r=Me(t),a=U6(t.converter,e);return Y0(n,[P6(q0(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,Ca.exists(!1))]).then((()=>r))}function Y0(t,e){return(function(r,a){const s=new Is;return r.asyncQueue.enqueueAndForget((async()=>UK(await QK(r),a,s))),s.promise})(kj(t),e)}function hW(t,e,n){const r=n.docs.get(e._key),a=new V6(t);return new tc(t,a,e._key,r,new Xf(n.hasPendingWrites,n.fromCache),e.converter)}function mr(){return new Oj("serverTimestamp")}(function(e,n=!0){(function(a){dd=a})(jc),cc(new Wo("firestore",((r,{instanceIdentifier:a,options:s})=>{const c=r.getProvider("app").getImmediate(),d=new Nc(new aH(r.getProvider("auth-internal")),new oH(c,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new _e(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vh(h.options.projectId,p)})(c,a),c);return s={useFetchStreams:n,...s},d._setSettings(s),d}),"PUBLIC").setMultipleInstances(!0)),Mi(xk,bk,e),Mi(xk,bk,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="firebasestorage.googleapis.com",B6="storageBucket",mW=120*1e3,pW=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on extends Zi{constructor(e,n,r=0){super(gw(e),`Firebase Storage: ${n} (${gw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,on.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var an;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(an||(an={}));function gw(t){return"storage/"+t}function Vj(){const t="An unknown error occurred, please check the error payload for server response.";return new on(an.UNKNOWN,t)}function gW(t){return new on(an.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function yW(t){return new on(an.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vW(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new on(an.UNAUTHENTICATED,t)}function xW(){return new on(an.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bW(t){return new on(an.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function wW(){return new on(an.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _W(){return new on(an.CANCELED,"User canceled the upload/download.")}function EW(t){return new on(an.INVALID_URL,"Invalid URL '"+t+"'.")}function jW(t){return new on(an.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function SW(){return new on(an.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+B6+"' property when initializing the app?")}function AW(){return new on(an.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NW(){return new on(an.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function TW(t){return new on(an.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function I_(t){return new on(an.INVALID_ARGUMENT,t)}function F6(){return new on(an.APP_DELETED,"The Firebase app was deleted.")}function CW(t){return new on(an.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lh(t,e){return new on(an.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Lf(t){throw new on(an.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Er.makeFromUrl(e,n)}catch{return new Er(e,"")}if(r.path==="")return r;throw jW(e)}static makeFromUrl(e,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function s(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),f={bucket:1,path:3};function h(T){T.path_=decodeURIComponent(T.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${g}/${p}/b/${a}/o${v}`,"i"),E={bucket:1,path:3},j=n===$6?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",k=new RegExp(`^https?://${j}/${a}/${S}`,"i"),M=[{regex:d,indices:f,postModify:s},{regex:w,indices:E,postModify:h},{regex:k,indices:{bucket:1,path:2},postModify:h}];for(let T=0;T<M.length;T++){const R=M[T],V=R.regex.exec(e);if(V){const N=V[R.indices.bucket];let I=V[R.indices.path];I||(I=""),r=new Er(N,I),R.postModify(r);break}}if(r==null)throw EW(e);return r}}class kW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IW(t,e,n){let r=1,a=null,s=null,c=!1,d=0;function f(){return d===2}let h=!1;function p(...S){h||(h=!0,e.apply(null,S))}function g(S){a=setTimeout(()=>{a=null,t(w,f())},S)}function v(){s&&clearTimeout(s)}function w(S,...k){if(h){v();return}if(S){v(),p.call(null,S,...k);return}if(f()||c){v(),p.call(null,S,...k);return}r<64&&(r*=2);let M;d===1?(d=2,M=0):M=(r+Math.random())*1e3,g(M)}let E=!1;function j(S){E||(E=!0,v(),!h&&(a!==null?(S||(d=2),clearTimeout(a),g(0)):S||(d=1)))}return g(0),s=setTimeout(()=>{c=!0,j(!0)},n),j}function OW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(t){return t!==void 0}function RW(t){return typeof t=="object"&&!Array.isArray(t)}function $j(t){return typeof t=="string"||t instanceof String}function yI(t){return Bj()&&t instanceof Blob}function Bj(){return typeof Blob<"u"}function O_(t,e,n,r){if(r<e)throw I_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw I_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function q6(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var nc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(nc||(nc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DW(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e,n,r,a,s,c,d,f,h,p,g,v=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=g,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,j)=>{this.resolve_=E,this.reject_=j,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new gg(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{const f=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===nc.NO_ERROR,f=s.getStatus();if(!d||DW(f,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===nc.ABORT;r(!1,new gg(!1,null,p));return}const h=this.successCodes_.indexOf(f)!==-1;r(!0,new gg(h,s))})},n=(r,a)=>{const s=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());PW(f)?s(f):s()}catch(f){c(f)}else if(d!==null){const f=Vj();f.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,f)):c(f)}else if(a.canceled){const f=this.appDelete_?F6():_W();c(f)}else{const f=wW();c(f)}};this.canceled_?n(!1,new gg(!1,null,!0)):this.backoffId_=IW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gg{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function LW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function VW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $W(t,e,n,r,a,s,c=!0,d=!1){const f=q6(t.urlParams),h=t.url+f,p=Object.assign({},t.headers);return UW(p,e),LW(p,n),zW(p,s),VW(p,r),new MW(h,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FW(...t){const e=BW();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Bj())return new Blob(t);throw new on(an.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(t){if(typeof atob>"u")throw TW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yw{constructor(e,n){this.data=e,this.contentType=n||null}}function GW(t,e){switch(t){case Ri.RAW:return new yw(H6(e));case Ri.BASE64:case Ri.BASE64URL:return new yw(G6(t,e));case Ri.DATA_URL:return new yw(WW(e),YW(e))}throw Vj()}function H6(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,c=t.charCodeAt(++n);r=65536|(s&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function KW(t){let e;try{e=decodeURIComponent(t)}catch{throw lh(Ri.DATA_URL,"Malformed data URL.")}return H6(e)}function G6(t,e){switch(t){case Ri.BASE64:{const a=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(a||s)throw lh(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ri.BASE64URL:{const a=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(a||s)throw lh(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=HW(e)}catch(a){throw a.message.includes("polyfill")?a:lh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}class K6{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw lh(Ri.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=QW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function WW(t){const e=new K6(t);return e.base64?G6(Ri.BASE64,e.rest):KW(e.rest)}function YW(t){return new K6(t).contentType}function QW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n){let r=0,a="";yI(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,n){if(yI(this.data_)){const r=this.data_,a=qW(r,e,n);return a===null?null:new Uo(a)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Uo(r,!0)}}static getBlob(...e){if(Bj()){const n=e.map(r=>r instanceof Uo?r.data_:r);return new Uo(FW.apply(null,n))}else{const n=e.map(c=>$j(c)?GW(Ri.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const a=new Uint8Array(r);let s=0;return n.forEach(c=>{for(let d=0;d<c.length;d++)a[s++]=c[d]}),new Uo(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){let e;try{e=JSON.parse(t)}catch{return null}return RW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ZW(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function W6(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JW(t,e){return e}class wr{constructor(e,n,r,a){this.server=e,this.local=n||e,this.writable=!!r,this.xform=a||JW}}let yg=null;function eY(t){return!$j(t)||t.length<2?t:W6(t)}function qj(){if(yg)return yg;const t=[];t.push(new wr("bucket")),t.push(new wr("generation")),t.push(new wr("metageneration")),t.push(new wr("name","fullPath",!0));function e(s,c){return eY(c)}const n=new wr("name");n.xform=e,t.push(n);function r(s,c){return c!==void 0?Number(c):c}const a=new wr("size");return a.xform=r,t.push(a),t.push(new wr("timeCreated")),t.push(new wr("updated")),t.push(new wr("md5Hash",null,!0)),t.push(new wr("cacheControl",null,!0)),t.push(new wr("contentDisposition",null,!0)),t.push(new wr("contentEncoding",null,!0)),t.push(new wr("contentLanguage",null,!0)),t.push(new wr("contentType",null,!0)),t.push(new wr("metadata","customMetadata",!0)),yg=t,yg}function tY(t,e){function n(){const r=t.bucket,a=t.fullPath,s=new Er(r,a);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function nY(t,e,n){const r={};r.type="file";const a=n.length;for(let s=0;s<a;s++){const c=n[s];r[c.local]=c.xform(r,e[c.server])}return tY(r,t),r}function Y6(t,e,n){const r=Fj(e);return r===null?null:nY(t,r,n)}function rY(t,e,n,r){const a=Fj(e);if(a===null||!$j(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const c=encodeURIComponent;return s.split(",").map(h=>{const p=t.bucket,g=t.fullPath,v="/b/"+c(p)+"/o/"+c(g),w=gd(v,n,r),E=q6({alt:"media",token:h});return w+E})[0]}function aY(t,e){const n={},r=e.length;for(let a=0;a<r;a++){const s=e[a];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="prefixes",xI="items";function iY(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[vI])for(const a of n[vI]){const s=a.replace(/\/$/,""),c=t._makeStorageReference(new Er(e,s));r.prefixes.push(c)}if(n[xI])for(const a of n[xI]){const s=t._makeStorageReference(new Er(e,a.name));r.items.push(s)}return r}function sY(t,e,n){const r=Fj(n);return r===null?null:iY(t,e,r)}class om{constructor(e,n,r,a){this.url=e,this.method=n,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t){if(!t)throw Vj()}function Q6(t,e){function n(r,a){const s=Y6(t,a,e);return Hj(s!==null),s}return n}function oY(t,e){function n(r,a){const s=sY(t,e,a);return Hj(s!==null),s}return n}function lY(t,e){function n(r,a){const s=Y6(t,a,e);return Hj(s!==null),rY(s,a,t.host,t._protocol)}return n}function Gj(t){function e(n,r){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=xW():a=vW():n.getStatus()===402?a=yW(t.bucket):n.getStatus()===403?a=bW(t.path):a=r,a.status=n.getStatus(),a.serverResponse=r.serverResponse,a}return e}function Kj(t){const e=Gj(t);function n(r,a){let s=e(r,a);return r.getStatus()===404&&(s=gW(t.path)),s.serverResponse=a.serverResponse,s}return n}function cY(t,e,n){const r=e.fullServerUrl(),a=gd(r,t.host,t._protocol),s="GET",c=t.maxOperationRetryTime,d=new om(a,s,Q6(t,n),c);return d.errorHandler=Kj(e),d}function uY(t,e,n,r,a){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),a&&(s.maxResults=a);const c=e.bucketOnlyServerUrl(),d=gd(c,t.host,t._protocol),f="GET",h=t.maxOperationRetryTime,p=new om(d,f,oY(t,e.bucket),h);return p.urlParams=s,p.errorHandler=Gj(e),p}function dY(t,e,n){const r=e.fullServerUrl(),a=gd(r,t.host,t._protocol),s="GET",c=t.maxOperationRetryTime,d=new om(a,s,lY(t,n),c);return d.errorHandler=Kj(e),d}function fY(t,e){const n=e.fullServerUrl(),r=gd(n,t.host,t._protocol),a="DELETE",s=t.maxOperationRetryTime;function c(f,h){}const d=new om(r,a,c,s);return d.successCodes=[200,204],d.errorHandler=Kj(e),d}function hY(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function mY(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=hY(null,e)),r}function pY(t,e,n,r,a){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let M="";for(let T=0;T<2;T++)M=M+Math.random().toString().slice(2);return M}const f=d();c["Content-Type"]="multipart/related; boundary="+f;const h=mY(e,r,a),p=aY(h,n),g="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+f+`\r
Content-Type: `+h.contentType+`\r
\r
`,v=`\r
--`+f+"--",w=Uo.getBlob(g,r,v);if(w===null)throw AW();const E={name:h.fullPath},j=gd(s,t.host,t._protocol),S="POST",k=t.maxUploadRetryTime,z=new om(j,S,Q6(t,n),k);return z.urlParams=E,z.headers=c,z.body=w.uploadData(),z.errorHandler=Gj(e),z}class gY{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,a,s){if(this.sent_)throw Lf("cannot .send() more than once");if(ol(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const c in s)s.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,s[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yY extends gY{initXhr(){this.xhr_.responseType="text"}}function lm(){return new yY}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this._service=e,n instanceof Er?this._location=n:this._location=Er.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mc(e,n)}get root(){const e=new Er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W6(this._location.path)}get storage(){return this._service}get parent(){const e=XW(this._location.path);if(e===null)return null;const n=new Er(this._location.bucket,e);return new mc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw CW(e)}}function vY(t,e,n){t._throwIfRoot("uploadBytes");const r=pY(t.storage,t._location,qj(),new Uo(e,!0),n);return t.storage.makeRequestWithTokens(r,lm).then(a=>({metadata:a,ref:t}))}function xY(t){const e={prefixes:[],items:[]};return X6(t,e).then(()=>e)}async function X6(t,e,n){const a=await bY(t,{pageToken:n});e.prefixes.push(...a.prefixes),e.items.push(...a.items),a.nextPageToken!=null&&await X6(t,e,a.nextPageToken)}function bY(t,e){e!=null&&typeof e.maxResults=="number"&&O_("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=uY(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,lm)}function wY(t){t._throwIfRoot("getMetadata");const e=cY(t.storage,t._location,qj());return t.storage.makeRequestWithTokens(e,lm)}function _Y(t){t._throwIfRoot("getDownloadURL");const e=dY(t.storage,t._location,qj());return t.storage.makeRequestWithTokens(e,lm).then(n=>{if(n===null)throw NW();return n})}function EY(t){t._throwIfRoot("deleteObject");const e=fY(t.storage,t._location);return t.storage.makeRequestWithTokens(e,lm)}function jY(t,e){const n=ZW(t._location.path,e),r=new Er(t._location.bucket,n);return new mc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SY(t){return/^[A-Za-z]+:\/\//.test(t)}function AY(t,e){return new mc(t,e)}function Z6(t,e){if(t instanceof Wj){const n=t;if(n._bucket==null)throw SW();const r=new mc(n,n._bucket);return e!=null?Z6(r,e):r}else return e!==void 0?jY(t,e):t}function NY(t,e){if(e&&SY(e)){if(t instanceof Wj)return AY(t,e);throw I_("To use ref(service, url), the first argument must be a Storage instance.")}else return Z6(t,e)}function bI(t,e){const n=e==null?void 0:e[B6];return n==null?null:Er.makeFromBucketSpec(n,t)}function TY(t,e,n,r={}){t.host=`${e}:${n}`;const a=ol(e);a&&(BE(`https://${t.host}/b`),FE("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:_4(s,t.app.options.projectId))}class Wj{constructor(e,n,r,a,s,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=c,this._bucket=null,this._host=$6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mW,this._maxUploadRetryTime=pW,this._requests=new Set,a!=null?this._bucket=Er.makeFromBucketSpec(a,this._host):this._bucket=bI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Er.makeFromBucketSpec(this._url,e):this._bucket=bI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){O_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){O_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mc(this,e)}_makeRequest(e,n,r,a,s=!0){if(this._deleted)return new kW(F6());{const c=$W(e,this._appId,r,a,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,a).getPromise()}}const wI="@firebase/storage",_I="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="storage";function e3(t,e,n){return t=Rt(t),vY(t,e,n)}function CY(t){return t=Rt(t),wY(t)}function kY(t){return t=Rt(t),xY(t)}function Yj(t){return t=Rt(t),_Y(t)}function IY(t){return t=Rt(t),EY(t)}function wy(t,e){return t=Rt(t),NY(t,e)}function OY(t=GE(),e){t=Rt(t);const r=S0(t,J6).getImmediate({identifier:e}),a=x4("storage");return a&&PY(r,...a),r}function PY(t,e,n,r={}){TY(t,e,n,r)}function RY(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Wj(n,r,a,e,jc)}function DY(){cc(new Wo(J6,RY,"PUBLIC").setMultipleInstances(!0)),Mi(wI,_I,""),Mi(wI,_I,"esm2020")}DY();const MY={apiKey:"AIzaSyCEEQBoSXPKiG0mEX_H6bA1aSn072FD_DA",authDomain:"gcse-a7ffe.firebaseapp.com",projectId:"gcse-a7ffe",storageBucket:"gcse-a7ffe.firebasestorage.app",messagingSenderId:"266952172762",appId:"1:266952172762:web:9ef234cf67a8ab32afb1e3"},Qj=S4(MY),xe=rj(Qj),ve=eW(Qj),jh=OY(Qj),LY=new _s,li=["testadmin@example.com","sami8051@gmail.com"],ai=["sami8051@gmail.com"],ch={terms:"1.0",privacy:"1.0",educationalDisclaimer:"1.0"},t3=async t=>{try{const e=await Yn(Me(ve,"users",t));if(e.exists()){const n=e.data();return n.hasConsented===!0&&n.consentVersion===ch.terms}return!1}catch(e){return console.error("Error checking consent:",e),!1}},Q0=async t=>{try{const e=await Yn(Me(ve,"users",t));return e.exists()&&e.data().isAdmin===!0}catch(e){return console.error("Error checking admin status:",e),!1}},X0=async t=>{try{const e=await Yn(Me(ve,"users",t));return e.exists()&&e.data().isTeacher===!0}catch(e){return console.error("Error checking teacher status:",e),!1}},n3=async(t,e,n,r,a,s,c,d="email")=>{try{const f=new Date;let h="unknown";try{h=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{console.warn("Could not fetch IP for consent log")}const p=navigator.userAgent,g={userId:t,email:e,ageGroup:n,consents:{termsAndPrivacy:{accepted:r,version:ch.terms,timestamp:f},educationalDisclaimer:{accepted:a,version:ch.educationalDisclaimer,timestamp:f},marketingOptIn:{accepted:c,timestamp:c?f:null}},metadata:{ipAddress:h,userAgent:p,country:"UK"},createdAt:f};return n==="13-15"&&(g.consents.parentalConfirmation={confirmed:s,timestamp:f}),await ri(Me(ve,"userConsents",t),{...g,signUpMethod:d,consentSourcePage:"signup-consent-v1"}),await ri(Me(ve,"users",t),{hasConsented:!0,consentVersion:ch.terms,ageGroup:n,signUpMethod:d,marketingOptIn:c,lastConsentUpdate:mr()},{merge:!0}),console.log("Consent saved for user:",t),!0}catch(f){return console.error("Failed to save consent:",f),!1}},r3=async(t,e)=>{try{const n=Me(ve,"users",t);return await Tn(n,e),console.log("User consent updated for user:",t),!0}catch(n){return console.error("Failed to update user consent:",n),!1}},zY=async(t,e,n,r,a)=>{var s,c;try{await Sr(qe(ve,"activityLogs"),{action:t,actionType:e,userId:((s=xe.currentUser)==null?void 0:s.uid)||"unknown",userEmail:((c=xe.currentUser)==null?void 0:c.email)||"unknown",targetType:n,targetId:r,details:a,timestamp:mr()})}catch(d){console.error("Failed to log admin action",d)}},UY=async(t,e,n)=>{var r;try{await Sr(qe(ve,"loginEvents"),{email:t,userId:((r=xe.currentUser)==null?void 0:r.uid)||"unknown",success:e,reason:n,timestamp:mr()})}catch(a){console.error("Failed to log login event",a)}},a3=async()=>{try{return(await lq(xe,LY)).user}catch(t){throw console.error("Error signing in",t),t}},i3=async(t,e,n)=>{try{const r=await MF(xe,e,n);return await Q4(r.user,{displayName:t}),r.user}catch(r){throw console.error("Error registering",r),r}},s3=async()=>{xe.currentUser&&await zF(xe.currentUser)},Xj=async(t,e)=>{try{return await Q4(t,e),!0}catch(n){throw console.error("Error updating profile",n),n}},VY=async(t,e)=>{try{const n=wy(jh,`profile_pictures/${t.uid}`);await e3(n,e);const r=await Yj(n);return await Xj(t,{photoURL:r}),r}catch(n){throw console.error("Error uploading profile picture",n),n}},Zj=async(t,e)=>{try{return(await LF(xe,t,e)).user}catch(n){throw console.error("Error signing in with password",n),n}},yd=async()=>{try{await BF(xe)}catch(t){throw console.error("Error signing out",t),t}},o3=async(t,e,n,r)=>{try{const a={userId:t,...e,score:e.totalScore,date:lt.now(),paperData:n,fullAnswers:r},s=new Promise((f,h)=>setTimeout(()=>h(new Error("Firestore save timed out")),1e4)),c=Sr(qe(ve,"examResults"),a),d=await Promise.race([c,s]);return console.log("Document written with ID: ",d.id),d.id}catch(a){return console.error("Error adding document: ",a),null}},$Y=async(t,e)=>{try{const n=Me(ve,"examResults",t);await Tn(n,{pdfUrl:e}),console.log("Updated document with PDF URL")}catch(n){console.error("Error updating PDF URL",n)}},_y=async t=>{try{const e=Me(ve,"examResults",t);return await Pi(e),console.log("Document deleted with ID: ",t),!0}catch(e){return console.error("Error deleting document: ",e),!1}},BY=async(t,e,n)=>{try{const r=wy(jh,`exam-pdfs/${t}/${e}.pdf`);await e3(r,n);const a=await Yj(r);return console.log("PDF Uploaded to:",a),a}catch(r){return console.error("Error uploading PDF",r),null}},Jj=async t=>{console.time("fetchHistory");try{const e=gn(qe(ve,"examResults"),Dn("userId","==",t)),r=(await It(e)).docs.map(a=>({id:a.id,...a.data()}));return r.sort((a,s)=>{const c=d=>d?d.seconds?d.seconds*1e3:new Date(d).getTime():0;return c(s.date)-c(a.date)}),console.timeEnd("fetchHistory"),r.slice(0,20)}catch(e){return console.timeEnd("fetchHistory"),console.error("Error fetching history: ",e),[]}},l3=async(t,e,n,r)=>{try{return await Sr(qe(ve,"labSessions"),{userId:t,method:e,text:n,feedback:r,date:lt.now()}),!0}catch(a){return console.error("Error saving lab session:",a),!1}},c3=async t=>{var e;if(t)try{const n=Me(ve,"users",t.uid);await ri(n,{uid:t.uid,email:t.email,displayName:(t==null?void 0:t.displayName)||((e=t==null?void 0:t.email)==null?void 0:e.split("@")[0]),photoURL:t.photoURL,lastActive:lt.now()},{merge:!0});const r=await Yn(n);if(r.exists()){const a=r.data();li.includes(t.email)&&(!a.isAdmin||!a.isApproved)?await Tn(n,{isAdmin:!0,isApproved:!0}):(a.isAdmin===void 0||a.isApproved===void 0)&&await Tn(n,{isAdmin:a.isAdmin??!1,isApproved:a.isApproved??!1})}else{const a=li.includes(t.email);await Tn(n,{isAdmin:a,isApproved:a})}}catch(n){console.error("Error syncing user profile:",n)}},FY=async(t,e)=>{try{const n=Me(ve,"users",t);return await Tn(n,{isApproved:e}),!0}catch(n){return console.error("Error updating user status:",n),!1}},Tc=async()=>{try{return(await It(qe(ve,"users"))).docs.map(e=>({...e.data(),id:e.id}))}catch(t){return console.error("Admin: Error fetching users",t),[]}},eS=async()=>{try{const t=gn(qe(ve,"examResults"),sm("date","desc"),W0(100));return(await It(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Admin: Error fetching exam results",t),[]}},u3=async(t,e)=>{try{const n=Me(ve,"examResults",t);return await Tn(n,e),!0}catch(n){return console.error("Admin: Error updating exam",n),!1}},d3=async t=>{try{await Pi(Me(ve,"users",t));const e=gn(qe(ve,"examResults"),Dn("userId","==",t)),r=(await It(e)).docs.map(a=>Pi(a.ref));return await Promise.all(r),!0}catch(e){return console.error("Admin: Error deleting user data",e),!1}},tS=Object.freeze(Object.defineProperty({__proto__:null,ADMIN_EMAILS:li,LEGAL_VERSIONS:ch,SUPER_ADMIN_EMAILS:ai,auth:xe,checkIsAdmin:Q0,checkIsTeacher:X0,checkUserConsent:t3,db:ve,deleteExamResult:_y,deleteUserData:d3,getAllExamResults:eS,getAllUsers:Tc,getUserHistory:Jj,logAdminAction:zY,logInWithEmailAndPassword:Zj,logLoginEvent:UY,logOut:yd,registerWithEmailAndPassword:i3,saveExamResult:o3,saveLabSession:l3,saveUserConsent:n3,sendVerification:s3,signInWithGoogle:a3,storage:jh,syncUserProfile:c3,updateExamResultData:u3,updateExamWithPdf:$Y,updateUserConsent:r3,updateUserProfile:Xj,updateUserStatus:FY,uploadExamPdf:BY,uploadProfilePicture:VY},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),EI=t=>{const e=HY(t);return e.charAt(0).toUpperCase()+e.slice(1)},f3=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),GY=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:c,...d},f)=>b.createElement("svg",{ref:f,...KY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:f3("lucide",a),...!s&&!GY(d)&&{"aria-hidden":"true"},...d},[...c.map(([h,p])=>b.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(t,e)=>{const n=b.forwardRef(({className:r,...a},s)=>b.createElement(WY,{ref:s,iconNode:e,className:f3(`lucide-${qY(EI(t))}`,`lucide-${t}`,r),...a}));return n.displayName=EI(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ey=we("activity",YY);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],oa=we("arrow-left",QY);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Z0=we("arrow-right",XY);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],vw=we("arrow-up",ZY);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Xu=we("award",JY);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tQ=we("ban",eQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],h3=we("bell",nQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Xt=we("book-open",rQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],tl=we("calendar",aQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],J0=we("chart-column",iQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],oQ=we("chart-pie",sQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ev=we("check",lQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],m3=we("chevron-down",cQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],nS=we("chevron-left",uQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Sh=we("chevron-right",dQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],p3=we("chevron-up",fQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pc=we("circle-alert",hQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],za=we("circle-check-big",mQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],gQ=we("circle-x",pQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Os=we("clock",yQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]],xQ=we("cookie",vQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],rS=we("crown",bQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],aS=we("download",wQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],EQ=we("external-link",_Q);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],g3=we("eye-off",jQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vd=we("eye",SQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$r=we("file-text",AQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],jI=we("flag",NQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],vg=we("folder",TQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],y3=we("funnel",CQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],tv=we("graduation-cap",kQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],OQ=we("grid-3x3",IQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],RQ=we("grip-vertical",PQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],MQ=we("highlighter",DQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],jy=we("house",LQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],UQ=we("image",zQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],P_=we("info",VQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],BQ=we("key",$Q);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],qQ=we("layers",FQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],v3=we("layout-dashboard",HQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],KQ=we("lightbulb",GQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Sy=we("log-in",WQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],uh=we("lock",YQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],xd=we("log-out",QQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],x3=we("mail",XQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],JQ=we("map-pin",ZQ);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],tX=we("menu",eX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],rX=we("message-square",nX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],b3=we("moon",aX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],sX=we("panels-top-left",iX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Wg=we("pen-tool",oX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],gc=we("pen",lX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],iS=we("plus",cX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],w3=we("printer",uX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],fX=we("quote",dX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sS=we("refresh-cw",hX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ay=we("save",mX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],aa=we("search",pX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oS=we("settings",gX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],vX=we("shield-alert",yX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],bX=we("shield-off",xX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],es=we("shield",wX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ka=we("sparkles",_X);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],_3=we("sun",EX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],E3=we("target",jX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],AX=we("timer",SX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],xw=we("toggle-left",NX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],bw=we("toggle-right",TX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ia=we("trash-2",CX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dh=we("trending-up",kX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bi=we("triangle-alert",IX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],PX=we("type",OX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],DX=we("user-check",RX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],LX=we("user-plus",MX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nl=we("user",zX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fr=we("users",UX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ar=we("x",VX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],BX=we("zap",$X);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],qX=we("zoom-in",FX);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],GX=we("zoom-out",HX);var Zf=(t=>(t.PAPER_1="PAPER_1",t.PAPER_2="PAPER_2",t))(Zf||{});const KX="modulepreload",WX=function(t){return"/"+t},SI={},Ny=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){let c=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=c(n.map(h=>{if(h=WX(h),h in SI)return;SI[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":KX,p||(v.as="script"),v.crossOrigin="",v.href=h,f&&v.setAttribute("nonce",f),document.head.appendChild(v),p)return new Promise((w,E)=>{v.addEventListener("load",w),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&s(d.reason);return e().catch(s)})};class Zu{constructor(){console.log("GeminiService initialized (Backend Mode)")}async post(e,n){try{const{auth:r}=await Ny(async()=>{const{auth:g}=await Promise.resolve().then(()=>tS);return{auth:g}},[]),a=r.currentUser;let s={"Content-Type":"application/json"};if(a){const g=await a.getIdToken();s.Authorization=`Bearer ${g}`}else console.warn(`Attempting to call ${e} without a user. This may fail if the endpoint is protected.`);const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";console.log(`[GeminiService Mode Check] Hostname: ${window.location.hostname}, isLocalhost: ${c}, ImportMetaProd: true`);const d=!c,h=`${d?"https://us-central1-gcse-a7ffe.cloudfunctions.net/api":"/api"}/${e}`;console.log(`[GeminiService] Calling ${d?"PRODUCTION":"DEV"} API: ${h}`);const p=await fetch(h,{method:"POST",headers:s,body:JSON.stringify(n)});if(p.status===401||p.status===403)throw new Error(`Authentication Error: ${p.statusText}. Please log in.`);if(!p.ok)throw new Error(`API Error: ${p.statusText}`);return await p.json()}catch(r){throw console.error(`Failed to call ${e}:`,r),r}}async generateExam(e,n="1K"){return this.post("generate-exam",{type:e,imageSize:n})}async markExam(e,n){return this.post("mark-exam",{paper:e,answers:n})}async generateModelAnswers(e){return(await this.post("model-answers",{paper:e})).text}async analyzeTextForMethods(e){return this.post("analyze-text",{text:e})}async evaluateWritingPractice(e,n){return this.post("evaluate-writing",{text:e,targetMethod:n})}async generatePracticeSet(e,n,r){return this.post("generate-practice-set",{topic:e,difficulty:n,numQuestions:r})}async markAssignment(e,n){return this.post("mark-assignment",{assignmentId:e,studentAnswers:n})}}const lS="/assets/logo-BcVET0cA.png",j3=({title:t,description:e})=>(b.useEffect(()=>{if(document.title=`${t} | GoGCSE`,e){let n=document.querySelector("meta[name='description']");n||(n=document.createElement("meta"),n.setAttribute("name","description"),document.head.appendChild(n)),n.setAttribute("content",e)}},[t,e]),null),YX=()=>{const t=Bt(),[e,n]=b.useState(!1),[r,a]=b.useState(""),[s,c]=b.useState(!1),[d,f]=b.useState(!1),[h,p]=b.useState(""),[g,v]=b.useState(null),[w,E]=b.useState(!1),[j,S]=b.useState(!1),[k,z]=b.useState({paper1Enabled:!0,paper2Enabled:!0,languageLabEnabled:!0});b.useEffect(()=>{const V=Zh(xe,async N=>{if(v(N),N){c3(N);try{if(li.includes(N.email||"")){E(!0);return}const I=await X0(N.uid);S(I);const C=Me(ve,"users",N.uid),D=await Yn(C);D.exists()&&D.data().isApproved?E(!0):E(!1)}catch(I){console.error("Error fetching approval",I),E(!1)}}else E(!1)});return()=>V()},[]),b.useEffect(()=>{(async()=>{try{const N=Me(ve,"systemSettings","config"),I=await Yn(N);if(I.exists()){const C=I.data();C.featureFlags&&z({paper1Enabled:C.featureFlags.paper1Enabled??!0,paper2Enabled:C.featureFlags.paper2Enabled??!0,languageLabEnabled:C.featureFlags.languageLabEnabled??!0})}}catch(N){console.error("Failed to load feature flags",N)}})()},[]),b.useEffect(()=>{},[]);const M=async V=>{if(!g){t("/login");return}if(g&&!w){alert("Your account is pending approval. You cannot start an exam yet.");return}if(V===Zf.PAPER_1&&!k.paper1Enabled){alert("Paper 1 is currently disabled.");return}if(V===Zf.PAPER_2&&!k.paper2Enabled){alert("Paper 2 is currently disabled.");return}localStorage.getItem("gemini_api_key"),n(!0),a("Creating your unique exam...");try{const I=await new Zu().generateExam(V,"1K");if(I.questions){const C=I.questions.flatMap(D=>D.images||[]);C.length>0&&(a("Preparing materials..."),await Promise.all(C.map(D=>new Promise(O=>{const U=new Image;U.onload=()=>O(!0),U.onerror=()=>O(!1),U.src=D}))))}t(`/exam/${V}`,{state:{examData:I}})}catch(N){console.error(N),alert("Failed to generate exam."),n(!1)}},T=()=>{if(!g){t("/login");return}if(!k.languageLabEnabled){alert("Language Lab is currently disabled.");return}t("/language-lab")},R=()=>{h.trim()&&(localStorage.setItem("gemini_api_key",h.trim()),c(!1),p(""),alert("API key saved!"))};return e?l.jsxs("div",{className:"h-screen flex flex-col items-center justify-center bg-white",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-20 h-20 border-4 border-indigo-200 rounded-full animate-spin border-t-indigo-600"}),l.jsx(ka,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-indigo-600",size:32})]}),l.jsx("p",{className:"text-gray-600 mt-8 text-lg",children:r})]}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-purple-50/30 overflow-y-auto overflow-x-hidden",children:[l.jsx(j3,{title:"Edexcel GCSE English Language Exam Simulator & Practice",description:"Sit realistic Edexcel GCSE English mock exams online. Get instant AI marking, feedback, and grade estimates. Perfect for Paper 1 & 2 revision."}),l.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 px-6 py-4",children:l.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center bg-white/70 backdrop-blur-xl rounded-2xl px-6 py-3 shadow-lg shadow-purple-500/5 border border-white/50",children:[l.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("/"),children:[l.jsx("img",{src:lS,alt:"Logo",className:"w-9 h-9 rounded-xl shadow-sm"}),l.jsx("span",{className:"font-bold text-gray-900 hidden sm:block",children:"Go GCSE"})]}),l.jsx("div",{className:"flex items-center gap-3",children:g?l.jsxs(l.Fragment,{children:[j&&l.jsxs("button",{onClick:()=>t("/teacher"),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/25 transition-all text-sm",children:[l.jsx(Xt,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Teacher Dashboard"})]}),l.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-purple-500/25 transition-all text-sm",children:[l.jsx(v3,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]})]}):l.jsx("button",{onClick:()=>t("/login"),className:"px-5 py-2.5 bg-gray-900 text-white rounded-xl font-semibold hover:bg-gray-800 transition-all text-sm",children:"Sign In"})})]})}),l.jsx("section",{className:"pt-32 pb-20 px-6",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsxs("div",{className:"inline-flex mb-8 bg-amber-50 border border-amber-200 rounded-lg px-4 py-2 text-xs text-amber-800",children:[l.jsx("span",{className:"font-semibold",children:" Disclaimer:"}),l.jsx("span",{className:"ml-2",children:"This is an independent educational tool. Not affiliated with exam boards or educational authorities."})]}),l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium mb-8",children:[l.jsx(BX,{size:14}),"Powered by AI"]}),l.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 mb-6 leading-tight tracking-tight",children:["Master Your",l.jsx("span",{className:"block bg-gradient-to-r from-purple-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent py-2",children:"English GCSE"})]}),l.jsx("p",{className:"text-xl text-gray-500 max-w-2xl mx-auto mb-12 leading-relaxed",children:"Unlimited AI-generated mock exams with instant marking, grade predictions, and personalized feedback."}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[l.jsxs("button",{onClick:()=>f(!0),disabled:g&&!w,className:`group flex items-center gap-3 px-8 py-4 rounded-2xl font-bold text-lg transition-all ${g&&!w?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800 hover:shadow-xl hover:scale-[1.02]"}`,children:[g&&!w?"Approval Pending":"Start Mock Exam",(!g||w)&&l.jsx(Z0,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),l.jsxs("button",{onClick:T,disabled:!k.languageLabEnabled,className:`flex items-center gap-3 px-8 py-4 rounded-2xl font-bold text-lg border-2 transition-all ${k.languageLabEnabled?"border-gray-200 text-gray-700 hover:border-purple-300 hover:bg-purple-50":"border-gray-100 text-gray-300 cursor-not-allowed"}`,children:[l.jsx(Wg,{size:20}),"Language Lab"]})]})]})}),l.jsx("section",{className:"py-20 px-6",children:l.jsx("div",{className:"max-w-6xl mx-auto",children:l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"group p-8 bg-white rounded-3xl border border-gray-100 hover:border-purple-200 hover:shadow-xl hover:shadow-purple-500/5 transition-all",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:l.jsx(ka,{size:24,className:"text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"AI-Generated Papers"}),l.jsx("p",{className:"text-gray-500 leading-relaxed",children:"Every exam is unique, crafted by advanced AI to match real Edexcel specifications."})]}),l.jsxs("div",{className:"group p-8 bg-white rounded-3xl border border-gray-100 hover:border-purple-200 hover:shadow-xl hover:shadow-purple-500/5 transition-all",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:l.jsx(E3,{size:24,className:"text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Instant Marking"}),l.jsx("p",{className:"text-gray-500 leading-relaxed",children:"Get detailed feedback and model answers the moment you submit."})]}),l.jsxs("div",{className:"group p-8 bg-white rounded-3xl border border-gray-100 hover:border-purple-200 hover:shadow-xl hover:shadow-purple-500/5 transition-all",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",children:l.jsx(Xu,{size:24,className:"text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Grade Predictions"}),l.jsx("p",{className:"text-gray-500 leading-relaxed",children:"Track your progress with accurate grade estimates based on Edexcel boundaries."})]})]})})}),d&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl max-w-2xl w-full p-8 shadow-2xl",children:[l.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:"Choose Your Paper"}),l.jsx("p",{className:"text-gray-500",children:"Select the type of exam you want to practice."})]}),l.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("button",{onClick:()=>{M(Zf.PAPER_1),f(!1)},disabled:!k.paper1Enabled,className:`relative group p-6 rounded-2xl border-2 text-left transition-all ${k.paper1Enabled?"border-gray-100 hover:border-purple-600 hover:bg-purple-50 hover:shadow-xl":"border-gray-100 opacity-50 cursor-not-allowed"}`,children:[l.jsx("div",{className:"w-12 h-12 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:l.jsx(Xt,{size:24})}),l.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"Fiction & Imaginative Writing"}),l.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Paper 1  1 hour 45 mins"}),l.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full"}),"19th Century Fiction"]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full"}),"Creative Writing"]})]})]}),l.jsxs("button",{onClick:()=>{M(Zf.PAPER_2),f(!1)},disabled:!k.paper2Enabled,className:`relative group p-6 rounded-2xl border-2 text-left transition-all ${k.paper2Enabled?"border-gray-100 hover:border-teal-600 hover:bg-teal-50 hover:shadow-xl":"border-gray-100 opacity-50 cursor-not-allowed"}`,children:[l.jsx("div",{className:"w-12 h-12 bg-teal-100 text-teal-600 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:l.jsx($r,{size:24})}),l.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"Non-Fiction & Transactional"}),l.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Paper 2  2 hours 05 mins"}),l.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-teal-400 rounded-full"}),"20th/21st Century Texts"]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-teal-400 rounded-full"}),"Persuasive Writing"]})]})]})]})]})}),s&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl max-w-md w-full p-8 shadow-2xl",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Configure API Key"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Enter your Gemini API key to generate exams."}),l.jsx("div",{className:"bg-purple-50 border border-purple-100 rounded-2xl p-4 mb-6",children:l.jsxs("p",{className:"text-sm text-purple-800",children:["Get your key at ",l.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold",children:"Google AI Studio"})]})}),l.jsx("input",{type:"password",value:h,onChange:V=>p(V.target.value),placeholder:"Paste API key...",className:"w-full px-5 py-4 bg-gray-50 border border-gray-200 rounded-2xl mb-6 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",onKeyDown:V=>V.key==="Enter"&&R()}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>{c(!1),p("")},className:"flex-1 py-4 text-gray-600 font-semibold bg-gray-100 hover:bg-gray-200 rounded-2xl transition-colors",children:"Cancel"}),l.jsx("button",{onClick:R,className:"flex-1 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold rounded-2xl hover:shadow-lg transition-all",children:"Save Key"})]})]})})]})},QX=({sources:t=[],isOpen:e,onToggle:n})=>{var v;const[r,a]=b.useState(((v=t==null?void 0:t[0])==null?void 0:v.id)||"A"),[s,c]=b.useState(16),[d,f]=b.useState(1.8),[h,p]=b.useState(!1);b.useEffect(()=>{t&&t.length>0&&a(t[0].id)},[t]);const g=(t==null?void 0:t.find(w=>w.id===r))||(t==null?void 0:t[0]);return e?l.jsxs("div",{className:`fixed inset-y-0 left-0 z-40 w-full md:w-1/2 lg:w-[45%] bg-white shadow-2xl transform transition-transform duration-300 flex flex-col border-r border-gray-200 ${h?"bg-gray-900 text-yellow-50":""}`,children:[l.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${h?"border-gray-700 bg-gray-800":"border-gray-200 bg-edexcel-light"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:n,className:"md:hidden p-1 text-gray-600 hover:bg-black/10 rounded-full",children:l.jsx(Ar,{size:20})}),l.jsxs("h2",{className:"font-bold text-lg text-edexcel-dark flex items-center gap-2",children:[l.jsx(qQ,{size:20}),l.jsx("span",{children:"SOURCE BOOKLET"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>c(w=>Math.max(12,w-2)),className:"p-1 hover:bg-black/10 rounded",title:"Decrease Font",children:l.jsx(GX,{size:18})}),l.jsx("button",{onClick:()=>c(w=>Math.min(24,w+2)),className:"p-1 hover:bg-black/10 rounded",title:"Increase Font",children:l.jsx(qX,{size:18})}),l.jsx("button",{onClick:()=>f(w=>w>=2.2?1.6:2.2),className:"p-1 hover:bg-black/10 rounded",title:"Toggle Line Height",children:l.jsx(PX,{size:18})}),l.jsx("button",{onClick:()=>p(!h),className:`p-1 rounded ${h?"bg-yellow-400 text-black":"hover:bg-black/10"}`,title:"High Contrast",children:l.jsx(MQ,{size:18})})]})]}),t&&t.length>1&&l.jsx("div",{className:"flex border-b border-gray-200",children:t.map(w=>l.jsxs("button",{onClick:()=>a(w.id),className:`flex-1 py-3 text-sm font-semibold border-b-2 transition-colors ${r===w.id?"border-edexcel-blue text-edexcel-blue bg-white":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} ${h?"bg-gray-800 border-gray-700 text-gray-300":""}`,children:["Source ",w.id]},w.id))}),l.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 source-scroll",children:g?l.jsxs("article",{className:"max-w-2xl mx-auto ",style:{fontSize:`${s}px`,lineHeight:d},children:[l.jsxs("div",{className:`mb-8 p-4 rounded-lg text-sm italic border-l-4 no-print ${h?"bg-gray-800 border-gray-600 text-gray-300":"bg-gray-100 border-gray-400 text-gray-700"}`,children:[l.jsx("strong",{className:`block not-italic mb-1 text-lg ${h?"text-white":"text-gray-900"}`,children:g.title||`Source ${g.id}`}),l.jsxs("div",{className:"text-base font-serif mb-2",children:[g.author&&`By ${g.author}`," ",g.year&&`(${g.year})`]}),l.jsx("p",{className:`mt-2 ${h?"text-gray-400":"text-gray-600"}`,children:g.summary})]}),l.jsx("div",{className:"font-serif select-text relative",style:{textAlign:"justify",textJustify:"inter-word"},children:g.content.split(`
`).filter(w=>w.trim()!=="").map((w,E)=>l.jsx("div",{className:"mb-5",children:l.jsx("p",{className:"mb-0",children:w})},E))})]}):l.jsx("div",{className:"p-8 text-center text-gray-500",children:t.length===0?"Sources are generating...":"No active source selected."})})]}):null},XX=({paper:t,onFinish:e,onDiscard:n})=>{var $,Z,he,Y,ie;const[r,a]=b.useState(0),[s,c]=b.useState({}),[d,f]=b.useState(!0),[h,p]=b.useState(t.timeLimitMinutes*60),[g,v]=b.useState(!1),[w,E]=b.useState(!1),[j,S]=b.useState(!1),[k,z]=b.useState({});b.useEffect(()=>{const H=localStorage.getItem(`exam_draft_${t.id}`);if(H){const K=JSON.parse(H);c(K);const le={};t.questions.forEach(q=>{var ae;q.optionalGroup&&((ae=K[q.id])!=null&&ae.text)&&(le[q.optionalGroup]=q.id)}),z(q=>({...q,...le}))}else{const K={};t.questions.forEach(le=>{K[le.id]={questionId:le.id,text:"",timestamp:Date.now(),isFlagged:!1}}),c(K)}},[t]),b.useEffect(()=>{const H=setInterval(()=>{p(K=>K<=0?(clearInterval(H),0):K-1)},1e3);return()=>clearInterval(H)},[]);const M=H=>{const K=Math.floor(H/3600),le=Math.floor(H%3600/60),q=H%60;return`${K}:${le.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`},T=t.questions[r],R=!!T.optionalGroup,V=R?k[T.optionalGroup]:null,N=(H,K)=>{z(q=>({...q,[K]:H}));const le=t.questions.findIndex(q=>q.id===H);le!==-1&&a(le)},I=(($=s[T.id])==null?void 0:$.text)||"",C=H=>{const K={...s,[T.id]:{...s[T.id],text:H,timestamp:Date.now()}};T.optionalGroup&&z(le=>({...le,[T.optionalGroup]:T.id})),c(K),localStorage.setItem(`exam_draft_${t.id}`,JSON.stringify(K))},D=H=>{const K={...s,[T.id]:{...s[T.id],selectedImageIndex:H,timestamp:Date.now()}};c(K)},O=()=>{const H={...s,[T.id]:{...s[T.id],isFlagged:!s[T.id].isFlagged}};c(H),localStorage.setItem(`exam_draft_${t.id}`,JSON.stringify(H))},U=I.trim().split(/\s+/).filter(H=>H.length>0).length;return l.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden font-sans",children:[l.jsx(QX,{sources:t.sources,isOpen:d,onToggle:()=>f(!d)}),l.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${d?"md:ml-[45%] lg:ml-[45%]":""}`,children:[l.jsxs("div",{className:"bg-amber-50 border-b border-amber-200 px-4 lg:px-6 py-3 flex gap-2 items-start",children:[l.jsx(Bi,{size:18,className:"text-amber-600 flex-shrink-0 mt-0.5"}),l.jsx("p",{className:"text-xs text-amber-800 font-medium",children:"This is a practice exam. Grades are AI-generated estimates and not official qualifications. Use for revision purposes only."})]}),l.jsxs("header",{className:"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-4 lg:px-6 z-20 shadow-sm shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>f(!d),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${d?"bg-edexcel-dark text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[l.jsx(Xt,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:d?"Hide Sources":"Show Sources"})]}),l.jsx("button",{onClick:()=>S(!j),className:"lg:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-md",children:l.jsx(OQ,{size:20})}),l.jsxs("div",{className:"hidden lg:block",children:[l.jsx("h1",{className:"text-sm font-bold text-gray-800",children:t.title}),l.jsxs("span",{className:"text-xs text-gray-500",children:["Specimen 1EN0  ",t.timeLimitMinutes," mins"]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:`flex items-center gap-2 font-mono text-lg font-bold ${h<300?"text-red-600 animate-pulse":"text-edexcel-dark"}`,children:[l.jsx(Os,{size:20}),M(h)]}),l.jsxs("button",{onClick:()=>E(!0),className:"px-3 md:px-4 py-2 border border-red-200 text-red-600 hover:bg-red-50 rounded-md font-bold text-xs md:text-sm transition-all flex items-center gap-2",title:"Leave & Discard Progress",children:[l.jsx(xd,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Leave Exam"})]}),l.jsx("button",{onClick:()=>v(!0),className:"bg-edexcel-blue hover:bg-edexcel-dark text-white px-4 md:px-6 py-2 rounded-md font-bold text-xs md:text-sm shadow-sm transition-transform active:scale-95",children:"Finish & Submit"})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[l.jsx("div",{className:`${j?"absolute inset-y-0 left-0 w-64 bg-white shadow-xl z-30 transform translate-x-0":"hidden lg:flex lg:w-20 lg:flex-col lg:items-center lg:border-r lg:bg-gray-50 lg:py-4"} transition-transform duration-200 overflow-y-auto`,children:l.jsxs("div",{className:"w-full px-4 lg:px-2 space-y-2 pb-20 pt-4 lg:pt-0",children:[l.jsxs("div",{className:"flex justify-between items-center lg:hidden mb-4 px-2",children:[l.jsx("h3",{className:"font-bold text-gray-500",children:"Questions"}),l.jsx("button",{onClick:()=>S(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:l.jsx(Ar,{size:20,className:"text-gray-500"})})]}),t.questions.map((H,K)=>{var Pe,vt;const le=s[H.id],q=K===r,ae=(le==null?void 0:le.text.length)>5,ge=le==null?void 0:le.isFlagged,ye=H.optionalGroup&&(!((Pe=t.questions[K-1])!=null&&Pe.optionalGroup)||t.questions[K-1].optionalGroup!==H.optionalGroup);H.optionalGroup&&(!((vt=t.questions[K+1])!=null&&vt.optionalGroup)||(t.questions[K+1].optionalGroup,H.optionalGroup));const Te=H.optionalGroup?k[H.optionalGroup]===H.id:!0,Oe=H.optionalGroup&&k[H.optionalGroup]&&!Te;return l.jsxs("div",{children:[ye&&l.jsx("div",{className:"text-[10px] text-center uppercase font-bold text-gray-400 mt-2 mb-1",children:"OR"}),l.jsxs("button",{onClick:()=>{a(K),S(!1),H.optionalGroup&&N(H.id,H.optionalGroup)},className:`w-full lg:w-12 lg:h-12 flex items-center lg:justify-center px-4 py-3 lg:p-0 rounded-lg text-left lg:text-center text-sm font-bold transition-all
                          ${q?"bg-edexcel-blue text-white shadow-md ring-2 ring-blue-300":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-100"}
                          ${ge?"ring-2 ring-orange-400":""}
                          ${ae&&!q?"bg-blue-50 border-blue-200 text-edexcel-dark":""}
                          ${Oe?"opacity-40 grayscale":""}
                        `,children:[l.jsx("span",{className:"lg:hidden mr-2",children:"Question"}),H.number,ge&&l.jsx(jI,{size:10,className:"ml-auto lg:absolute lg:top-1 lg:right-1 text-orange-500"})]})]},H.id)})]})}),l.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 p-3 md:p-4 lg:p-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto pb-20",children:[R&&l.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow-sm border border-purple-200 flex flex-col sm:flex-row items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Bi,{className:"text-purple-600",size:24}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-gray-900",children:"Choice of Question"}),l.jsxs("p",{className:"text-sm text-gray-600",children:["You must answer EITHER Question ",t.questions.filter(H=>H.optionalGroup===T.optionalGroup)[0].number," OR Question ",t.questions.filter(H=>H.optionalGroup===T.optionalGroup)[1].number,"."]})]})]}),l.jsx("div",{className:"flex gap-2",children:t.questions.filter(H=>H.optionalGroup===T.optionalGroup).map(H=>l.jsxs("button",{onClick:()=>N(H.id,H.optionalGroup),className:`px-4 py-2 rounded text-sm font-bold border ${k[H.optionalGroup]===H.id?"bg-purple-600 text-white border-purple-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:["Q",H.number]},H.id))})]}),l.jsxs("div",{className:`bg-white rounded-xl shadow-sm border transition-opacity duration-300 ${R&&V&&V!==T.id?"opacity-50 pointer-events-none grayscale":"opacity-100 border-gray-200"}`,children:[l.jsxs("div",{className:"p-4 md:p-6 lg:p-10 border-b border-gray-100",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-2",children:[l.jsxs("span",{className:"bg-edexcel-dark text-white px-3 py-1 rounded text-xs md:text-sm font-bold shadow-sm",children:["Question ",T.number]}),R&&l.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Option"})]}),l.jsxs("div",{className:"text-xs md:text-sm font-medium text-gray-500",children:[T.marks," Marks  ",T.aos.join(", ")]})]}),l.jsxs("span",{className:"text-[10px] md:text-xs font-bold text-gray-400 uppercase tracking-wide bg-gray-100 px-2 py-1 rounded",children:["Section ",T.section]})]}),T.sourceRef&&l.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-100 rounded-lg p-3 flex items-start gap-3",children:[l.jsx(Xt,{className:"text-edexcel-blue mt-0.5 shrink-0",size:18}),l.jsxs("div",{className:"text-xs md:text-sm text-edexcel-dark font-medium",children:["Refer to: ",T.sourceRef]})]}),l.jsx("h2",{className:"text-lg md:text-xl lg:text-2xl font-serif text-gray-900 leading-relaxed",children:T.text}),T.images&&T.images.length>0&&l.jsxs("div",{className:"mt-8",children:[l.jsx("p",{className:"text-sm font-bold text-gray-500 mb-4 uppercase tracking-wider",children:"Select an image prompt:"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:T.images.map((H,K)=>{var le,q;return l.jsxs("div",{onClick:()=>D(K),className:`relative group cursor-pointer rounded-lg overflow-hidden border-4 transition-all ${((le=s[T.id])==null?void 0:le.selectedImageIndex)===K?"border-edexcel-blue ring-4 ring-blue-100":"border-transparent hover:border-gray-300"}`,children:[l.jsx("img",{src:H,alt:`Prompt ${K+1}`,className:"w-full h-48 object-cover"}),l.jsxs("div",{className:"absolute top-2 left-2 bg-black/60 text-white px-2 py-1 rounded text-xs font-bold backdrop-blur-sm",children:["Option ",K+1]}),((q=s[T.id])==null?void 0:q.selectedImageIndex)===K&&l.jsx("div",{className:"absolute inset-0 bg-blue-500/20 flex items-center justify-center backdrop-blur-[1px]",children:l.jsx(za,{className:"text-white drop-shadow-md",size:48})})]},K)})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{value:I,onChange:H=>C(H.target.value),className:"w-full min-h-[400px] p-4 md:p-10 text-base md:text-lg leading-relaxed bg-white rounded-b-xl focus:bg-blue-50/30 outline-none resize-y font-serif",placeholder:R&&V!==T.id?"You have selected the other option.":"Start typing your answer here...",spellCheck:!1,disabled:R&&V!==T.id}),l.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center gap-4 text-xs text-gray-400 font-sans pointer-events-none bg-white/80 p-2 rounded backdrop-blur",children:[l.jsxs("span",{className:(Z=s[T.id])!=null&&Z.text?"text-green-600 flex items-center gap-1":"opacity-0",children:[l.jsx(Ay,{size:12})," Saved"]}),l.jsxs("span",{children:[U," words ",T.wordCountTarget?`/ ~${T.wordCountTarget}`:""]})]})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-8",children:[l.jsxs("button",{disabled:r===0,onClick:()=>a(H=>H-1),className:"flex items-center gap-2 px-4 md:px-6 py-3 bg-white border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 disabled:opacity-50 transition-colors shadow-sm text-sm md:text-base",children:[l.jsx(nS,{size:20})," ",l.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),l.jsxs("button",{onClick:O,className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded transition-colors ${(he=s[T.id])!=null&&he.isFlagged?"text-orange-600 bg-orange-50":"text-gray-500 hover:bg-gray-100"}`,children:[l.jsx(jI,{size:16,fill:(Y=s[T.id])!=null&&Y.isFlagged?"currentColor":"none"}),(ie=s[T.id])!=null&&ie.isFlagged?"Flagged":"Flag"]}),l.jsxs("button",{disabled:r===t.questions.length-1,onClick:()=>a(H=>H+1),className:"flex items-center gap-2 px-4 md:px-6 py-3 bg-edexcel-dark text-white rounded-lg font-medium hover:bg-gray-800 disabled:opacity-50 transition-colors shadow-sm text-sm md:text-base",children:[l.jsx("span",{className:"hidden sm:inline",children:"Next"})," ",l.jsx(Sh,{size:20})]})]})]})})]})]}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-8 shadow-2xl",children:[l.jsx("h3",{className:"text-2xl font-bold mb-2 text-gray-900",children:"Finish Exam?"}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["You are about to submit your assessment.",l.jsx("br",{}),"Note: Unanswered optional questions will be ignored."]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border border-gray-100",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[l.jsx("span",{className:"text-gray-600",children:"Answered"}),l.jsxs("span",{className:"font-bold",children:[Object.values(s).filter(H=>H.text.trim().length>0).length," Questions"]})]}),l.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-edexcel-blue",style:{width:`${Object.values(s).filter(H=>H.text.trim().length>0).length/t.questions.length*100}%`}})})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>v(!1),className:"flex-1 py-3 text-gray-700 font-medium bg-white border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",children:"Return"}),l.jsx("button",{onClick:()=>{localStorage.removeItem(`exam_draft_${t.id}`);const H=t.timeLimitMinutes*60-h;e(s,H)},className:"flex-1 py-3 bg-edexcel-blue text-white font-bold rounded-lg hover:bg-edexcel-dark shadow-lg transition-colors",children:"Submit Now"})]})]})}),w&&l.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-8 shadow-2xl",children:[l.jsx("div",{className:"w-16 h-16 bg-red-50 text-red-600 rounded-full flex items-center justify-center mb-6 mx-auto",children:l.jsx(Bi,{size:32})}),l.jsx("h3",{className:"text-2xl font-bold mb-2 text-gray-900 text-center",children:"Discard Exam?"}),l.jsxs("p",{className:"text-gray-600 mb-8 text-center",children:["Are you sure you want to leave? All your progress and answers for this paper will be ",l.jsx("strong",{children:"permanently deleted"}),"."]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-3 text-gray-700 font-medium bg-white border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",children:"Stay & Continue"}),l.jsx("button",{onClick:()=>{localStorage.removeItem(`exam_draft_${t.id}`),n()},className:"flex-1 py-3 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 shadow-lg transition-colors",children:"Discard & Exit"})]})]})})]})},ZX=()=>{var d;const t=ua(),e=Bt(),n=(d=t.state)==null?void 0:d.examData,[r,a]=b.useState(!1);if(!n)return l.jsx(Ko,{to:"/"});const s=async(f,h)=>{console.log("Starting handleFinishExam with answers:",f),a(!0);try{const p=new Zu;console.log("Calling gemini.markExam...");const g=await p.markExam(n,f);console.log("gemini.markExam completed:",g),g.duration=h,console.log("Calling gemini.generateModelAnswers...");const v=await p.generateModelAnswers(n);if(console.log("gemini.generateModelAnswers completed"),g.generatedModelAnswers=v,xe.currentUser){const w=xe.currentUser.uid;console.log("Saving result to Firebase for user:",w);const E=await o3(w,g,n,f);if(E){console.log("Save to Firebase successful, ID:",E);try{const{PdfService:j}=await Ny(async()=>{const{PdfService:T}=await import("./PdfService-BKYiFUYF.js").then(R=>R.P);return{PdfService:T}},[]),S=j.generateExamPdf(g,n),{uploadExamPdf:k,updateExamWithPdf:z}=await Ny(async()=>{const{uploadExamPdf:T,updateExamWithPdf:R}=await Promise.resolve().then(()=>tS);return{uploadExamPdf:T,updateExamWithPdf:R}},void 0),M=await k(w,E,S);M&&(await z(E,M),console.log("PDF linked to exam result successfully"))}catch(j){console.error("PDF Generation/Upload Failed:",j)}}else console.error("Failed to save exam result document")}else console.log("Skipping Firebase save: User not logged in");console.log("Navigating to /results..."),e("/results",{state:{examResult:g,examData:n,answers:f}})}catch(p){console.error("Marking failed DETAILS:",p);let g="Marking failed. Please try again.";p.message.includes("API key")&&(g="AI Marking unavailable: Missing API Key."),p.message.includes("generate content")&&(g="AI Service Error: Failed to generate report."),alert(`${g}

Technical Details: ${p.message||p}`),a(!1)}},c=()=>{e("/dashboard")};return r?l.jsxs("div",{className:"h-screen flex flex-col items-center justify-center bg-slate-50 text-center p-8",children:[l.jsx("div",{className:"animate-spin text-edexcel-blue mb-6",children:l.jsx(ka,{size:48})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Grading Assessment"}),l.jsx("p",{className:"text-gray-500 max-w-md",children:"AI Examiner is marking your scripts against the Edexcel 1EN0 criteria..."})]}):l.jsx(XX,{paper:n,onFinish:s,onDiscard:c})};function S3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=S3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function dt(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=S3(t))&&(r&&(r+=" "),r+=e);return r}var JX=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function cS(t){if(typeof t!="string")return!1;var e=JX;return e.includes(t)}var eZ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],tZ=new Set(eZ);function A3(t){return typeof t!="string"?!1:tZ.has(t)}function N3(t){return typeof t=="string"&&t.startsWith("data-")}function Nr(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(A3(n)||N3(n))&&(e[n]=t[n]);return e}function yc(t){if(t==null)return null;if(b.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Nr(e)}return typeof t=="object"&&!Array.isArray(t)?Nr(t):null}function yr(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(A3(n)||N3(n)||cS(n))&&(e[n]=t[n]);return e}function nZ(t){return t==null?null:b.isValidElement(t)?yr(t.props):typeof t=="object"&&!Array.isArray(t)?yr(t):null}var rZ=["children","width","height","viewBox","className","style","title","desc"];function R_(){return R_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R_.apply(null,arguments)}function aZ(t,e){if(t==null)return{};var n,r,a=iZ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function iZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var T3=b.forwardRef((t,e)=>{var{children:n,width:r,height:a,viewBox:s,className:c,style:d,title:f,desc:h}=t,p=aZ(t,rZ),g=s||{width:r,height:a,x:0,y:0},v=dt("recharts-surface",c);return b.createElement("svg",R_({},yr(p),{className:v,width:r,height:a,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),b.createElement("title",null,f),b.createElement("desc",null,h),n)}),sZ=["children","className"];function D_(){return D_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D_.apply(null,arguments)}function oZ(t,e){if(t==null)return{};var n,r,a=lZ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function lZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sn=b.forwardRef((t,e)=>{var{children:n,className:r}=t,a=oZ(t,sZ),s=dt("recharts-layer",r);return b.createElement("g",D_({className:s},yr(a),{ref:e}),n)}),cZ=b.createContext(null);function Dt(t){return function(){return t}}const C3=Math.cos,Ty=Math.sin,ci=Math.sqrt,Cy=Math.PI,nv=2*Cy,M_=Math.PI,L_=2*M_,Kl=1e-6,uZ=L_-Kl;function k3(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function dZ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return k3;const n=10**e;return function(r){this._+=r[0];for(let a=1,s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class fZ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?k3:dZ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,s,c){this._append`C${+e},${+n},${+r},${+a},${this._x1=+s},${this._y1=+c}`}arcTo(e,n,r,a,s){if(e=+e,n=+n,r=+r,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,d=this._y1,f=r-e,h=a-n,p=c-e,g=d-n,v=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>Kl)if(!(Math.abs(g*f-h*p)>Kl)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let w=r-c,E=a-d,j=f*f+h*h,S=w*w+E*E,k=Math.sqrt(j),z=Math.sqrt(v),M=s*Math.tan((M_-Math.acos((j+v-S)/(2*k*z)))/2),T=M/z,R=M/k;Math.abs(T-1)>Kl&&this._append`L${e+T*p},${n+T*g}`,this._append`A${s},${s},0,0,${+(g*w>p*E)},${this._x1=e+R*f},${this._y1=n+R*h}`}}arc(e,n,r,a,s,c){if(e=+e,n=+n,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let d=r*Math.cos(a),f=r*Math.sin(a),h=e+d,p=n+f,g=1^c,v=c?a-s:s-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Kl||Math.abs(this._y1-p)>Kl)&&this._append`L${h},${p}`,r&&(v<0&&(v=v%L_+L_),v>uZ?this._append`A${r},${r},0,1,${g},${e-d},${n-f}A${r},${r},0,1,${g},${this._x1=h},${this._y1=p}`:v>Kl&&this._append`A${r},${r},0,${+(v>=M_)},${g},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function uS(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new fZ(e)}function dS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function I3(t){this._context=t}I3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function rv(t){return new I3(t)}function O3(t){return t[0]}function P3(t){return t[1]}function R3(t,e){var n=Dt(!0),r=null,a=rv,s=null,c=uS(d);t=typeof t=="function"?t:t===void 0?O3:Dt(t),e=typeof e=="function"?e:e===void 0?P3:Dt(e);function d(f){var h,p=(f=dS(f)).length,g,v=!1,w;for(r==null&&(s=a(w=c())),h=0;h<=p;++h)!(h<p&&n(g=f[h],h,f))===v&&((v=!v)?s.lineStart():s.lineEnd()),v&&s.point(+t(g,h,f),+e(g,h,f));if(w)return s=null,w+""||null}return d.x=function(f){return arguments.length?(t=typeof f=="function"?f:Dt(+f),d):t},d.y=function(f){return arguments.length?(e=typeof f=="function"?f:Dt(+f),d):e},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Dt(!!f),d):n},d.curve=function(f){return arguments.length?(a=f,r!=null&&(s=a(r)),d):a},d.context=function(f){return arguments.length?(f==null?r=s=null:s=a(r=f),d):r},d}function xg(t,e,n){var r=null,a=Dt(!0),s=null,c=rv,d=null,f=uS(h);t=typeof t=="function"?t:t===void 0?O3:Dt(+t),e=typeof e=="function"?e:Dt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?P3:Dt(+n);function h(g){var v,w,E,j=(g=dS(g)).length,S,k=!1,z,M=new Array(j),T=new Array(j);for(s==null&&(d=c(z=f())),v=0;v<=j;++v){if(!(v<j&&a(S=g[v],v,g))===k)if(k=!k)w=v,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),E=v-1;E>=w;--E)d.point(M[E],T[E]);d.lineEnd(),d.areaEnd()}k&&(M[v]=+t(S,v,g),T[v]=+e(S,v,g),d.point(r?+r(S,v,g):M[v],n?+n(S,v,g):T[v]))}if(z)return d=null,z+""||null}function p(){return R3().defined(a).curve(c).context(s)}return h.x=function(g){return arguments.length?(t=typeof g=="function"?g:Dt(+g),r=null,h):t},h.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Dt(+g),h):t},h.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Dt(+g),h):r},h.y=function(g){return arguments.length?(e=typeof g=="function"?g:Dt(+g),n=null,h):e},h.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Dt(+g),h):e},h.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Dt(+g),h):n},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(n)},h.lineX1=function(){return p().x(r).y(e)},h.defined=function(g){return arguments.length?(a=typeof g=="function"?g:Dt(!!g),h):a},h.curve=function(g){return arguments.length?(c=g,s!=null&&(d=c(s)),h):c},h.context=function(g){return arguments.length?(g==null?s=d=null:d=c(s=g),h):s},h}class D3{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function hZ(t){return new D3(t,!0)}function mZ(t){return new D3(t,!1)}const fS={draw(t,e){const n=ci(e/Cy);t.moveTo(n,0),t.arc(0,0,n,0,nv)}},pZ={draw(t,e){const n=ci(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},M3=ci(1/3),gZ=M3*2,yZ={draw(t,e){const n=ci(e/gZ),r=n*M3;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},vZ={draw(t,e){const n=ci(e),r=-n/2;t.rect(r,r,n,n)}},xZ=.8908130915292852,L3=Ty(Cy/10)/Ty(7*Cy/10),bZ=Ty(nv/10)*L3,wZ=-C3(nv/10)*L3,_Z={draw(t,e){const n=ci(e*xZ),r=bZ*n,a=wZ*n;t.moveTo(0,-n),t.lineTo(r,a);for(let s=1;s<5;++s){const c=nv*s/5,d=C3(c),f=Ty(c);t.lineTo(f*n,-d*n),t.lineTo(d*r-f*a,f*r+d*a)}t.closePath()}},ww=ci(3),EZ={draw(t,e){const n=-ci(e/(ww*3));t.moveTo(0,n*2),t.lineTo(-ww*n,-n),t.lineTo(ww*n,-n),t.closePath()}},ja=-.5,Sa=ci(3)/2,z_=1/ci(12),jZ=(z_/2+1)*3,SZ={draw(t,e){const n=ci(e/jZ),r=n/2,a=n*z_,s=r,c=n*z_+n,d=-s,f=c;t.moveTo(r,a),t.lineTo(s,c),t.lineTo(d,f),t.lineTo(ja*r-Sa*a,Sa*r+ja*a),t.lineTo(ja*s-Sa*c,Sa*s+ja*c),t.lineTo(ja*d-Sa*f,Sa*d+ja*f),t.lineTo(ja*r+Sa*a,ja*a-Sa*r),t.lineTo(ja*s+Sa*c,ja*c-Sa*s),t.lineTo(ja*d+Sa*f,ja*f-Sa*d),t.closePath()}};function AZ(t,e){let n=null,r=uS(a);t=typeof t=="function"?t:Dt(t||fS),e=typeof e=="function"?e:Dt(e===void 0?64:+e);function a(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Dt(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Dt(+s),a):e},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function ky(){}function Iy(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function z3(t){this._context=t}z3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Iy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Iy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NZ(t){return new z3(t)}function U3(t){this._context=t}U3.prototype={areaStart:ky,areaEnd:ky,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Iy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function TZ(t){return new U3(t)}function V3(t){this._context=t}V3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Iy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function CZ(t){return new V3(t)}function $3(t){this._context=t}$3.prototype={areaStart:ky,areaEnd:ky,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function kZ(t){return new $3(t)}function AI(t){return t<0?-1:1}function NI(t,e,n){var r=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(r||a<0&&-0),c=(n-t._y1)/(a||r<0&&-0),d=(s*a+c*r)/(r+a);return(AI(s)+AI(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(d))||0}function TI(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function _w(t,e,n){var r=t._x0,a=t._y0,s=t._x1,c=t._y1,d=(s-r)/3;t._context.bezierCurveTo(r+d,a+d*e,s-d,c-d*n,s,c)}function Oy(t){this._context=t}Oy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_w(this,this._t0,TI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,_w(this,TI(this,n=NI(this,t,e)),n);break;default:_w(this,this._t0,n=NI(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function B3(t){this._context=new F3(t)}(B3.prototype=Object.create(Oy.prototype)).point=function(t,e){Oy.prototype.point.call(this,e,t)};function F3(t){this._context=t}F3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,a,s){this._context.bezierCurveTo(e,t,r,n,s,a)}};function IZ(t){return new Oy(t)}function OZ(t){return new B3(t)}function q3(t){this._context=t}q3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=CI(t),a=CI(e),s=0,c=1;c<n;++s,++c)this._context.bezierCurveTo(r[0][s],a[0][s],r[1][s],a[1][s],t[c],e[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function CI(t){var e,n=t.length-1,r,a=new Array(n),s=new Array(n),c=new Array(n);for(a[0]=0,s[0]=2,c[0]=t[0]+2*t[1],e=1;e<n-1;++e)a[e]=1,s[e]=4,c[e]=4*t[e]+2*t[e+1];for(a[n-1]=2,s[n-1]=7,c[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=a[e]/s[e-1],s[e]-=r,c[e]-=r*c[e-1];for(a[n-1]=c[n-1]/s[n-1],e=n-2;e>=0;--e)a[e]=(c[e]-a[e+1])/s[e];for(s[n-1]=(t[n]+a[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function PZ(t){return new q3(t)}function av(t,e){this._context=t,this._t=e}av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function RZ(t){return new av(t,.5)}function DZ(t){return new av(t,0)}function MZ(t){return new av(t,1)}function Ju(t,e){if((c=t.length)>1)for(var n=1,r,a,s=t[e[0]],c,d=s.length;n<c;++n)for(a=s,s=t[e[n]],r=0;r<d;++r)s[r][1]+=s[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function U_(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function LZ(t,e){return t[e]}function zZ(t){const e=[];return e.key=t,e}function UZ(){var t=Dt([]),e=U_,n=Ju,r=LZ;function a(s){var c=Array.from(t.apply(this,arguments),zZ),d,f=c.length,h=-1,p;for(const g of s)for(d=0,++h;d<f;++d)(c[d][h]=[0,+r(g,c[d].key,h,s)]).data=g;for(d=0,p=dS(e(c));d<f;++d)c[p[d]].index=d;return n(c,p),c}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Dt(Array.from(s)),a):t},a.value=function(s){return arguments.length?(r=typeof s=="function"?s:Dt(+s),a):r},a.order=function(s){return arguments.length?(e=s==null?U_:typeof s=="function"?s:Dt(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(n=s??Ju,a):n},a}function VZ(t,e){if((r=t.length)>0){for(var n,r,a=0,s=t[0].length,c;a<s;++a){for(c=n=0;n<r;++n)c+=t[n][a][1]||0;if(c)for(n=0;n<r;++n)t[n][a][1]/=c}Ju(t,e)}}function $Z(t,e){if((a=t.length)>0){for(var n=0,r=t[e[0]],a,s=r.length;n<s;++n){for(var c=0,d=0;c<a;++c)d+=t[c][n][1]||0;r[n][1]+=r[n][0]=-d/2}Ju(t,e)}}function BZ(t,e){if(!(!((c=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var n=0,r=1,a,s,c;r<s;++r){for(var d=0,f=0,h=0;d<c;++d){for(var p=t[e[d]],g=p[r][1]||0,v=p[r-1][1]||0,w=(g-v)/2,E=0;E<d;++E){var j=t[e[E]],S=j[r][1]||0,k=j[r-1][1]||0;w+=S-k}f+=g,h+=w*g}a[r-1][1]+=a[r-1][0]=n,f&&(n-=h/f)}a[r-1][1]+=a[r-1][0]=n,Ju(t,e)}}var Ew={},jw={},kI;function FZ(){return kI||(kI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(jw)),jw}var Sw={},II;function H3(){return II||(II=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(Sw)),Sw}var Aw={},OI;function hS(){return OI||(OI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(Aw)),Aw}var Nw={},Tw={},PI;function qZ(){return PI||(PI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(Tw)),Tw}var RI;function mS(){return RI||(RI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qZ(),n=hS();function r(a){if(Array.isArray(a))return a.map(n.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],c=a.length;if(c===0)return s;let d=0,f="",h="",p=!1;for(a.charCodeAt(0)===46&&(s.push(""),d++);d<c;){const g=a[d];h?g==="\\"&&d+1<c?(d++,f+=a[d]):g===h?h="":f+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,s.push(f),f=""):f+=g:g==="["?(p=!0,f&&(s.push(f),f="")):g==="."?f&&(s.push(f),f=""):f+=g,d++}return f&&s.push(f),s}t.toPath=r})(Nw)),Nw}var DI;function pS(){return DI||(DI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FZ(),n=H3(),r=hS(),a=mS();function s(d,f,h){if(d==null)return h;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return h;const p=d[f];return p===void 0?n.isDeepKey(f)?s(d,a.toPath(f),h):h:p}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const p=d[f];return p===void 0?h:p}default:{if(Array.isArray(f))return c(d,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return h;const p=d[f];return p===void 0?h:p}}}function c(d,f,h){if(f.length===0)return h;let p=d;for(let g=0;g<f.length;g++){if(p==null||e.isUnsafeProperty(f[g]))return h;p=p[f[g]]}return p===void 0?h:p}t.get=s})(Ew)),Ew}var Cw,MI;function HZ(){return MI||(MI=1,Cw=pS().get),Cw}var GZ=HZ();const vc=Xi(GZ);var Wn=t=>t===0?0:t>0?1:-1,Ra=t=>typeof t=="number"&&t!=+t,Vs=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,je=t=>(typeof t=="number"||t instanceof Number)&&!Ra(t),Hi=t=>je(t)||typeof t=="string",KZ=0,Ah=t=>{var e=++KZ;return"".concat(t||"").concat(e)},pr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!je(e)&&typeof e!="string")return r;var s;if(Vs(e)){if(n==null)return r;var c=e.indexOf("%");s=n*parseFloat(e.slice(0,c))/100}else s=+e;return Ra(s)&&(s=r),a&&n!=null&&s>n&&(s=n),s},G3=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function gt(t,e,n){return je(t)&&je(e)?t+n*(e-t):e}function K3(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):vc(r,e))===n)}var Vt=t=>t===null||typeof t>"u",cm=t=>Vt(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function WZ(t){return t!=null}function um(){}var YZ=["type","size","sizeType"];function V_(){return V_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V_.apply(null,arguments)}function LI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function zI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LI(Object(n),!0).forEach(function(r){QZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QZ(t,e,n){return(e=XZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XZ(t){var e=ZZ(t,"string");return typeof e=="symbol"?e:e+""}function ZZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JZ(t,e){if(t==null)return{};var n,r,a=eJ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function eJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var W3={symbolCircle:fS,symbolCross:pZ,symbolDiamond:yZ,symbolSquare:vZ,symbolStar:_Z,symbolTriangle:EZ,symbolWye:SZ},tJ=Math.PI/180,nJ=t=>{var e="symbol".concat(cm(t));return W3[e]||fS},rJ=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*tJ;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},aJ=(t,e)=>{W3["symbol".concat(cm(t))]=e},Y3=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,a=JZ(t,YZ),s=zI(zI({},a),{},{type:e,size:n,sizeType:r}),c="circle";typeof e=="string"&&(c=e);var d=()=>{var v=nJ(c),w=AZ().type(v).size(rJ(n,r,c)),E=w();if(E!==null)return E},{className:f,cx:h,cy:p}=s,g=yr(s);return je(h)&&je(p)&&je(n)?b.createElement("path",V_({},g,{className:dt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};Y3.registerSymbol=aJ;var Q3=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,gS=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(b.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(a=>{cS(a)&&(r[a]=(s=>n[a](n,s)))}),r},iJ=(t,e,n)=>r=>(t(e,n,r),null),iv=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(a=>{var s=t[a];cS(a)&&typeof s=="function"&&(r||(r={}),r[a]=iJ(s,e,n))}),r};function UI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function sJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UI(Object(n),!0).forEach(function(r){oJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oJ(t,e,n){return(e=lJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lJ(t){var e=cJ(t,"string");return typeof e=="symbol"?e:e+""}function cJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function On(t,e){var n=sJ({},t),r=e,a=Object.keys(e),s=a.reduce((c,d)=>(c[d]===void 0&&r[d]!==void 0&&(c[d]=r[d]),c),n);return s}var kw={},Iw={},VI;function uJ(){return VI||(VI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const a=new Map;for(let s=0;s<n.length;s++){const c=n[s],d=r(c);a.has(d)||a.set(d,c)}return Array.from(a.values())}t.uniqBy=e})(Iw)),Iw}var Ow={},$I;function X3(){return $I||($I=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Ow)),Ow}var Pw={},Rw={},Dw={},BI;function dJ(){return BI||(BI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Dw)),Dw}var FI;function yS(){return FI||(FI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dJ();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Rw)),Rw}var Mw={},qI;function fJ(){return qI||(qI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Mw)),Mw}var HI;function hJ(){return HI||(HI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yS(),n=fJ();function r(a){return n.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=r})(Pw)),Pw}var Lw={},zw={},GI;function mJ(){return GI||(GI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pS();function n(r){return function(a){return e.get(a,r)}}t.property=n})(zw)),zw}var Uw={},Vw={},$w={},Bw={},KI;function Z3(){return KI||(KI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Bw)),Bw}var Fw={},WI;function J3(){return WI||(WI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Fw)),Fw}var qw={},YI;function e5(){return YI||(YI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(qw)),qw}var QI;function pJ(){return QI||(QI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z3(),n=J3(),r=e5();function a(p,g,v){return typeof v!="function"?a(p,g,()=>{}):s(p,g,function w(E,j,S,k,z,M){const T=v(E,j,S,k,z,M);return T!==void 0?!!T:s(E,j,w,M)},new Map)}function s(p,g,v,w){if(g===p)return!0;switch(typeof g){case"object":return c(p,g,v,w);case"function":return Object.keys(g).length>0?s(p,{...g},v,w):r.eq(p,g);default:return e.isObject(p)?typeof g=="string"?g==="":!0:r.eq(p,g)}}function c(p,g,v,w){if(g==null)return!0;if(Array.isArray(g))return f(p,g,v,w);if(g instanceof Map)return d(p,g,v,w);if(g instanceof Set)return h(p,g,v,w);const E=Object.keys(g);if(p==null)return E.length===0;if(E.length===0)return!0;if(w!=null&&w.has(g))return w.get(g)===p;w==null||w.set(g,p);try{for(let j=0;j<E.length;j++){const S=E[j];if(!n.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!v(p[S],g[S],S,p,g,w))return!1}return!0}finally{w==null||w.delete(g)}}function d(p,g,v,w){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[E,j]of g.entries()){const S=p.get(E);if(v(S,j,E,p,g,w)===!1)return!1}return!0}function f(p,g,v,w){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const E=new Set;for(let j=0;j<g.length;j++){const S=g[j];let k=!1;for(let z=0;z<p.length;z++){if(E.has(z))continue;const M=p[z];let T=!1;if(v(M,S,j,p,g,w)&&(T=!0),T){E.add(z),k=!0;break}}if(!k)return!1}return!0}function h(p,g,v,w){return g.size===0?!0:p instanceof Set?f([...p],[...g],v,w):!1}t.isMatchWith=a,t.isSetMatch=h})($w)),$w}var XI;function t5(){return XI||(XI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pJ();function n(r,a){return e.isMatchWith(r,a,()=>{})}t.isMatch=n})(Vw)),Vw}var Hw={},Gw={},Kw={},ZI;function gJ(){return ZI||(ZI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Kw)),Kw}var Ww={},JI;function n5(){return JI||(JI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Ww)),Ww}var Yw={},eO;function r5(){return eO||(eO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",a="[object Boolean]",s="[object Arguments]",c="[object Symbol]",d="[object Date]",f="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",v="[object ArrayBuffer]",w="[object Object]",E="[object Error]",j="[object DataView]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",z="[object Uint16Array]",M="[object Uint32Array]",T="[object BigUint64Array]",R="[object Int8Array]",V="[object Int16Array]",N="[object Int32Array]",I="[object BigInt64Array]",C="[object Float32Array]",D="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=v,t.arrayTag=p,t.bigInt64ArrayTag=I,t.bigUint64ArrayTag=T,t.booleanTag=a,t.dataViewTag=j,t.dateTag=d,t.errorTag=E,t.float32ArrayTag=C,t.float64ArrayTag=D,t.functionTag=g,t.int16ArrayTag=V,t.int32ArrayTag=N,t.int8ArrayTag=R,t.mapTag=f,t.numberTag=r,t.objectTag=w,t.regexpTag=e,t.setTag=h,t.stringTag=n,t.symbolTag=c,t.uint16ArrayTag=z,t.uint32ArrayTag=M,t.uint8ArrayTag=S,t.uint8ClampedArrayTag=k})(Yw)),Yw}var Qw={},tO;function yJ(){return tO||(tO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Qw)),Qw}var nO;function a5(){return nO||(nO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gJ(),n=n5(),r=r5(),a=J3(),s=yJ();function c(p,g){return d(p,void 0,p,new Map,g)}function d(p,g,v,w=new Map,E=void 0){const j=E==null?void 0:E(p,g,v,w);if(j!==void 0)return j;if(a.isPrimitive(p))return p;if(w.has(p))return w.get(p);if(Array.isArray(p)){const S=new Array(p.length);w.set(p,S);for(let k=0;k<p.length;k++)S[k]=d(p[k],k,v,w,E);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;w.set(p,S);for(const[k,z]of p)S.set(k,d(z,k,v,w,E));return S}if(p instanceof Set){const S=new Set;w.set(p,S);for(const k of p)S.add(d(k,void 0,v,w,E));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);w.set(p,S);for(let k=0;k<p.length;k++)S[k]=d(p[k],k,v,w,E);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return w.set(p,S),f(S,p,v,w,E),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return w.set(p,S),f(S,p,v,w,E),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return w.set(p,S),f(S,p,v,w,E),S}if(p instanceof Error){const S=new p.constructor;return w.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,f(S,p,v,w,E),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return w.set(p,S),f(S,p,v,w,E),S}if(p instanceof Number){const S=new Number(p.valueOf());return w.set(p,S),f(S,p,v,w,E),S}if(p instanceof String){const S=new String(p.valueOf());return w.set(p,S),f(S,p,v,w,E),S}if(typeof p=="object"&&h(p)){const S=Object.create(Object.getPrototypeOf(p));return w.set(p,S),f(S,p,v,w,E),S}return p}function f(p,g,v=p,w,E){const j=[...Object.keys(g),...e.getSymbols(g)];for(let S=0;S<j.length;S++){const k=j[S],z=Object.getOwnPropertyDescriptor(p,k);(z==null||z.writable)&&(p[k]=d(g[k],k,v,w,E))}}function h(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=c,t.cloneDeepWithImpl=d,t.copyProperties=f})(Gw)),Gw}var rO;function vJ(){return rO||(rO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=a5();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Hw)),Hw}var aO;function xJ(){return aO||(aO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=t5(),n=vJ();function r(a){return a=n.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=r})(Uw)),Uw}var Xw={},Zw={},Jw={},iO;function bJ(){return iO||(iO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=a5(),n=r5();function r(a,s){return e.cloneDeepWith(a,(c,d,f,h)=>{const p=s==null?void 0:s(c,d,f,h);if(p!==void 0)return p;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(g,a),g}case n.argumentsTag:{const g={};return e.copyProperties(g,a),g.length=a.length,g[Symbol.iterator]=a[Symbol.iterator],g}default:return}})}t.cloneDeepWith=r})(Jw)),Jw}var sO;function wJ(){return sO||(sO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bJ();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Zw)),Zw}var e1={},t1={},oO;function i5(){return oO||(oO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,a=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<a;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(t1)),t1}var n1={},lO;function _J(){return lO||(lO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=n5();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(n1)),n1}var cO;function EJ(){return cO||(cO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H3(),n=i5(),r=_J(),a=mS();function s(c,d){let f;if(Array.isArray(d)?f=d:typeof d=="string"&&e.isDeepKey(d)&&(c==null?void 0:c[d])==null?f=a.toPath(d):f=[d],f.length===0)return!1;let h=c;for(let p=0;p<f.length;p++){const g=f[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}t.has=s})(e1)),e1}var uO;function jJ(){return uO||(uO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=t5(),n=hS(),r=wJ(),a=pS(),s=EJ();function c(d,f){switch(typeof d){case"object":{Object.is(d==null?void 0:d.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return f=r.cloneDeep(f),function(h){const p=a.get(h,d);return p===void 0?s.has(h,d):f===void 0?p===void 0:e.isMatch(p,f)}}t.matchesProperty=c})(Xw)),Xw}var dO;function SJ(){return dO||(dO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X3(),n=mJ(),r=xJ(),a=jJ();function s(c){if(c==null)return e.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?a.matchesProperty(c[0],c[1]):r.matches(c);case"string":case"symbol":case"number":return n.property(c)}}t.iteratee=s})(Lw)),Lw}var fO;function AJ(){return fO||(fO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uJ(),n=X3(),r=hJ(),a=SJ();function s(c,d=n.identity){return r.isArrayLikeObject(c)?e.uniqBy(Array.from(c),a.iteratee(d)):[]}t.uniqBy=s})(kw)),kw}var r1,hO;function NJ(){return hO||(hO=1,r1=AJ().uniqBy),r1}var TJ=NJ();const mO=Xi(TJ);function CJ(t,e,n){return e===!0?mO(t,n):typeof e=="function"?mO(t,e):t}var a1={exports:{}},i1={},s1={exports:{}},o1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pO;function kJ(){if(pO)return o1;pO=1;var t=sd();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,s=t.useLayoutEffect,c=t.useDebugValue;function d(g,v){var w=v(),E=r({inst:{value:w,getSnapshot:v}}),j=E[0].inst,S=E[1];return s(function(){j.value=w,j.getSnapshot=v,f(j)&&S({inst:j})},[g,w,v]),a(function(){return f(j)&&S({inst:j}),g(function(){f(j)&&S({inst:j})})},[g]),c(w),w}function f(g){var v=g.getSnapshot;g=g.value;try{var w=v();return!n(g,w)}catch{return!0}}function h(g,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return o1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,o1}var gO;function IJ(){return gO||(gO=1,s1.exports=kJ()),s1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yO;function OJ(){if(yO)return i1;yO=1;var t=sd(),e=IJ();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,s=t.useRef,c=t.useEffect,d=t.useMemo,f=t.useDebugValue;return i1.useSyncExternalStoreWithSelector=function(h,p,g,v,w){var E=s(null);if(E.current===null){var j={hasValue:!1,value:null};E.current=j}else j=E.current;E=d(function(){function k(V){if(!z){if(z=!0,M=V,V=v(V),w!==void 0&&j.hasValue){var N=j.value;if(w(N,V))return T=N}return T=V}if(N=T,r(M,V))return N;var I=v(V);return w!==void 0&&w(N,I)?(M=V,N):(M=V,T=I)}var z=!1,M,T,R=g===void 0?null:g;return[function(){return k(p())},R===null?void 0:function(){return k(R())}]},[p,g,v,w]);var S=a(h,E[0],E[1]);return c(function(){j.hasValue=!0,j.value=S},[S]),f(S),S},i1}var vO;function PJ(){return vO||(vO=1,a1.exports=OJ()),a1.exports}var RJ=PJ(),vS=b.createContext(null),DJ=t=>t,Wt=()=>{var t=b.useContext(vS);return t?t.store.dispatch:DJ},Yg=()=>{},MJ=()=>Yg,LJ=(t,e)=>t===e;function Ne(t){var e=b.useContext(vS);return RJ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:MJ,e?e.store.getState:Yg,e?e.store.getState:Yg,e?t:Yg,LJ)}function zJ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function UJ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function VJ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var xO=t=>Array.isArray(t)?t:[t];function $J(t){const e=Array.isArray(t[0])?t[0]:t;return VJ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function BJ(t,e){const n=[],{length:r}=t;for(let a=0;a<r;a++)n.push(t[a].apply(null,e));return n}var FJ=class{constructor(t){this.value=t}deref(){return this.value}},qJ=typeof WeakRef<"u"?WeakRef:FJ,HJ=0,bO=1;function bg(){return{s:HJ,v:void 0,o:null,p:null}}function s5(t,e={}){let n=bg();const{resultEqualityCheck:r}=e;let a,s=0;function c(){var g;let d=n;const{length:f}=arguments;for(let v=0,w=f;v<w;v++){const E=arguments[v];if(typeof E=="function"||typeof E=="object"&&E!==null){let j=d.o;j===null&&(d.o=j=new WeakMap);const S=j.get(E);S===void 0?(d=bg(),j.set(E,d)):d=S}else{let j=d.p;j===null&&(d.p=j=new Map);const S=j.get(E);S===void 0?(d=bg(),j.set(E,d)):d=S}}const h=d;let p;if(d.s===bO)p=d.v;else if(p=t.apply(null,arguments),s++,r){const v=((g=a==null?void 0:a.deref)==null?void 0:g.call(a))??a;v!=null&&r(v,p)&&(p=v,s!==0&&s--),a=typeof p=="object"&&p!==null||typeof p=="function"?new qJ(p):p}return h.s=bO,h.v=p,p}return c.clearCache=()=>{n=bg(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function GJ(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...a)=>{let s=0,c=0,d,f={},h=a.pop();typeof h=="object"&&(f=h,h=a.pop()),zJ(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...f},{memoize:g,memoizeOptions:v=[],argsMemoize:w=s5,argsMemoizeOptions:E=[]}=p,j=xO(v),S=xO(E),k=$J(a),z=g(function(){return s++,h.apply(null,arguments)},...j),M=w(function(){c++;const R=BJ(k,arguments);return d=z.apply(null,R),d},...S);return Object.assign(M,{resultFunc:h,memoizedResultFunc:z,dependencies:k,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>d,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:w})};return Object.assign(r,{withTypes:()=>r}),r}var te=GJ(s5),KJ=Object.assign((t,e=te)=>{UJ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((c,d,f)=>(c[n[f]]=d,c),{}))},{withTypes:()=>KJ}),l1={},c1={},u1={},wO;function WJ(){return wO||(wO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,a,s)=>{if(r!==a){const c=e(r),d=e(a);if(c===d&&c===0){if(r<a)return s==="desc"?1:-1;if(r>a)return s==="desc"?-1:1}return s==="desc"?d-c:c-d}return 0};t.compareValues=n})(u1)),u1}var d1={},f1={},_O;function o5(){return _O||(_O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(f1)),f1}var EO;function YJ(){return EO||(EO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=o5(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function a(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||c!=null&&Object.hasOwn(c,s)}t.isKey=a})(d1)),d1}var jO;function QJ(){return jO||(jO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WJ(),n=YJ(),r=mS();function a(s,c,d,f){if(s==null)return[];d=f?void 0:d,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(w=>String(w));const h=(w,E)=>{let j=w;for(let S=0;S<E.length&&j!=null;++S)j=j[E[S]];return j},p=(w,E)=>E==null||w==null?E:typeof w=="object"&&"key"in w?Object.hasOwn(E,w.key)?E[w.key]:h(E,w.path):typeof w=="function"?w(E):Array.isArray(w)?h(E,w):typeof E=="object"?E[w]:E,g=c.map(w=>(Array.isArray(w)&&w.length===1&&(w=w[0]),w==null||typeof w=="function"||Array.isArray(w)||n.isKey(w)?w:{key:w,path:r.toPath(w)}));return s.map(w=>({original:w,criteria:g.map(E=>p(E,w))})).slice().sort((w,E)=>{for(let j=0;j<g.length;j++){const S=e.compareValues(w.criteria[j],E.criteria[j],d[j]);if(S!==0)return S}return 0}).map(w=>w.original)}t.orderBy=a})(c1)),c1}var h1={},SO;function XJ(){return SO||(SO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const a=[],s=Math.floor(r),c=(d,f)=>{for(let h=0;h<d.length;h++){const p=d[h];Array.isArray(p)&&f<s?c(p,f+1):a.push(p)}};return c(n,0),a}t.flatten=e})(h1)),h1}var m1={},AO;function l5(){return AO||(AO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=i5(),n=yS(),r=Z3(),a=e5();function s(c,d,f){return r.isObject(f)&&(typeof d=="number"&&n.isArrayLike(f)&&e.isIndex(d)&&d<f.length||typeof d=="string"&&d in f)?a.eq(f[d],c):!1}t.isIterateeCall=s})(m1)),m1}var NO;function ZJ(){return NO||(NO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QJ(),n=XJ(),r=l5();function a(s,...c){const d=c.length;return d>1&&r.isIterateeCall(s,c[0],c[1])?c=[]:d>2&&r.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),e.orderBy(s,n.flatten(c),["asc"])}t.sortBy=a})(l1)),l1}var p1,TO;function JJ(){return TO||(TO=1,p1=ZJ().sortBy),p1}var eee=JJ();const sv=Xi(eee);var c5=t=>t.legend.settings,tee=t=>t.legend.size,nee=t=>t.legend.payload;te([nee,c5],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?sv(r,n):r});var wg=1;function ree(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=b.useState({height:0,left:0,top:0,width:0}),r=b.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-e.height)>wg||Math.abs(c.left-e.left)>wg||Math.abs(c.top-e.top)>wg||Math.abs(c.width-e.width)>wg)&&n({height:c.height,left:c.left,top:c.top,width:c.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ar(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var aee=typeof Symbol=="function"&&Symbol.observable||"@@observable",CO=aee,g1=()=>Math.random().toString(36).substring(7).split("").join("."),iee={INIT:`@@redux/INIT${g1()}`,REPLACE:`@@redux/REPLACE${g1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${g1()}`},Py=iee;function xS(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function u5(t,e,n){if(typeof t!="function")throw new Error(ar(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ar(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ar(1));return n(u5)(t,e)}let r=t,a=e,s=new Map,c=s,d=0,f=!1;function h(){c===s&&(c=new Map,s.forEach((S,k)=>{c.set(k,S)}))}function p(){if(f)throw new Error(ar(3));return a}function g(S){if(typeof S!="function")throw new Error(ar(4));if(f)throw new Error(ar(5));let k=!0;h();const z=d++;return c.set(z,S),function(){if(k){if(f)throw new Error(ar(6));k=!1,h(),c.delete(z),s=null}}}function v(S){if(!xS(S))throw new Error(ar(7));if(typeof S.type>"u")throw new Error(ar(8));if(typeof S.type!="string")throw new Error(ar(17));if(f)throw new Error(ar(9));try{f=!0,a=r(a,S)}finally{f=!1}return(s=c).forEach(z=>{z()}),S}function w(S){if(typeof S!="function")throw new Error(ar(10));r=S,v({type:Py.REPLACE})}function E(){const S=g;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(ar(11));function z(){const T=k;T.next&&T.next(p())}return z(),{unsubscribe:S(z)}},[CO](){return this}}}return v({type:Py.INIT}),{dispatch:v,subscribe:g,getState:p,replaceReducer:w,[CO]:E}}function see(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Py.INIT})>"u")throw new Error(ar(12));if(typeof n(void 0,{type:Py.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ar(13))})}function d5(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const c=e[s];typeof t[c]=="function"&&(n[c]=t[c])}const r=Object.keys(n);let a;try{see(n)}catch(s){a=s}return function(c={},d){if(a)throw a;let f=!1;const h={};for(let p=0;p<r.length;p++){const g=r[p],v=n[g],w=c[g],E=v(w,d);if(typeof E>"u")throw d&&d.type,new Error(ar(14));h[g]=E,f=f||E!==w}return f=f||r.length!==Object.keys(c).length,f?h:c}}function Ry(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function oee(...t){return e=>(n,r)=>{const a=e(n,r);let s=()=>{throw new Error(ar(15))};const c={getState:a.getState,dispatch:(f,...h)=>s(f,...h)},d=t.map(f=>f(c));return s=Ry(...d)(a.dispatch),{...a,dispatch:s}}}function f5(t){return xS(t)&&"type"in t&&typeof t.type=="string"}var h5=Symbol.for("immer-nothing"),kO=Symbol.for("immer-draftable"),Tr=Symbol.for("immer-state");function Za(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ia=Object,ed=ia.getPrototypeOf,Dy="constructor",ov="prototype",$_="configurable",My="enumerable",Qg="writable",Nh="value",$s=t=>!!t&&!!t[Tr];function Gi(t){var e;return t?m5(t)||lv(t)||!!t[kO]||!!((e=t[Dy])!=null&&e[kO])||cv(t)||uv(t):!1}var lee=ia[ov][Dy].toString(),IO=new WeakMap;function m5(t){if(!t||!bS(t))return!1;const e=ed(t);if(e===null||e===ia[ov])return!0;const n=ia.hasOwnProperty.call(e,Dy)&&e[Dy];if(n===Object)return!0;if(!Tu(n))return!1;let r=IO.get(n);return r===void 0&&(r=Function.toString.call(n),IO.set(n,r)),r===lee}function dm(t,e,n=!0){fm(t)===0?(n?Reflect.ownKeys(t):ia.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((r,a)=>e(a,r,t))}function fm(t){const e=t[Tr];return e?e.type_:lv(t)?1:cv(t)?2:uv(t)?3:0}var OO=(t,e,n=fm(t))=>n===2?t.has(e):ia[ov].hasOwnProperty.call(t,e),B_=(t,e,n=fm(t))=>n===2?t.get(e):t[e],Ly=(t,e,n,r=fm(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function cee(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var lv=Array.isArray,cv=t=>t instanceof Map,uv=t=>t instanceof Set,bS=t=>typeof t=="object",Tu=t=>typeof t=="function",y1=t=>typeof t=="boolean",ws=t=>t.copy_||t.base_,wS=t=>t.modified_?t.copy_:t.base_;function F_(t,e){if(cv(t))return new Map(t);if(uv(t))return new Set(t);if(lv(t))return Array[ov].slice.call(t);const n=m5(t);if(e===!0||e==="class_only"&&!n){const r=ia.getOwnPropertyDescriptors(t);delete r[Tr];let a=Reflect.ownKeys(r);for(let s=0;s<a.length;s++){const c=a[s],d=r[c];d[Qg]===!1&&(d[Qg]=!0,d[$_]=!0),(d.get||d.set)&&(r[c]={[$_]:!0,[Qg]:!0,[My]:d[My],[Nh]:t[c]})}return ia.create(ed(t),r)}else{const r=ed(t);if(r!==null&&n)return{...t};const a=ia.create(r);return ia.assign(a,t)}}function _S(t,e=!1){return dv(t)||$s(t)||(fm(t)>1&&ia.defineProperties(t,{set:_g,add:_g,clear:_g,delete:_g}),ia.freeze(t),e&&dm(t,(n,r)=>{_S(r,!0)},!1)),t}function uee(){Za(2)}var _g={[Nh]:uee};function dv(t){return t===null||!bS(t)?!0:ia.isFrozen(t)}var zy="MapSet",q_="Patches",p5={};function td(t){const e=p5[t];return e||Za(0,t),e}var dee=t=>!!p5[t],Th,g5=()=>Th,fee=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:dee(zy)?td(zy):void 0});function PO(t,e){e&&(t.patchPlugin_=td(q_),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function H_(t){G_(t),t.drafts_.forEach(hee),t.drafts_=null}function G_(t){t===Th&&(Th=t.parent_)}var RO=t=>Th=fee(Th,t);function hee(t){const e=t[Tr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function DO(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Tr].modified_&&(H_(e),Za(4)),Gi(t)&&(t=MO(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(n[Tr].base_,t,e)}else t=MO(e,n);return mee(e,t,!0),H_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==h5?t:void 0}function MO(t,e){if(dv(e))return e;const n=e[Tr];if(!n)return ES(e,t.handledSet_,t);if(!fv(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);x5(n,t)}return n.copy_}function mee(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&_S(e,n)}function y5(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var fv=(t,e)=>t.scope_===e,pee=[];function v5(t,e,n,r){const a=ws(t),s=t.type_;if(r!==void 0&&B_(a,r,s)===e){Ly(a,r,n,s);return}if(!t.draftLocations_){const d=t.draftLocations_=new Map;dm(a,(f,h)=>{if($s(h)){const p=d.get(h)||[];p.push(f),d.set(h,p)}})}const c=t.draftLocations_.get(e)??pee;for(const d of c)Ly(a,d,n,s)}function gee(t,e,n){t.callbacks_.push(function(a){var d;const s=e;if(!s||!fv(s,a))return;(d=a.mapSetPlugin_)==null||d.fixSetContents(s);const c=wS(s);v5(t,s.draft_??s,c,n),x5(s,a)})}function x5(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}y5(t)}}function yee(t,e,n){const{scope_:r}=t;if($s(n)){const a=n[Tr];fv(a,r)&&a.callbacks_.push(function(){Xg(t);const c=wS(a);v5(t,n,c,e)})}else Gi(n)&&t.callbacks_.push(function(){const s=ws(t);B_(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&ES(B_(t.copy_,e,t.type_),r.handledSet_,r)})}function ES(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||$s(t)||e.has(t)||!Gi(t)||dv(t)||(e.add(t),dm(t,(r,a)=>{if($s(a)){const s=a[Tr];if(fv(s,n)){const c=wS(s);Ly(t,r,c,t.type_),y5(s)}}else Gi(a)&&ES(a,e,n)})),t}function vee(t,e){const n=lv(t),r={type_:n?1:0,scope_:e?e.scope_:g5(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,s=jS;n&&(a=[r],s=Ch);const{revoke:c,proxy:d}=Proxy.revocable(a,s);return r.draft_=d,r.revoke_=c,[d,r]}var jS={get(t,e){if(e===Tr)return t;const n=ws(t);if(!OO(n,e,t.type_))return xee(t,n,e);const r=n[e];if(t.finalized_||!Gi(r))return r;if(r===v1(t.base_,e)){Xg(t);const a=t.type_===1?+e:e,s=W_(t.scope_,r,t,a);return t.copy_[a]=s}return r},has(t,e){return e in ws(t)},ownKeys(t){return Reflect.ownKeys(ws(t))},set(t,e,n){const r=b5(ws(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const a=v1(ws(t),e),s=a==null?void 0:a[Tr];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(cee(n,a)&&(n!==void 0||OO(t.base_,e,t.type_)))return!0;Xg(t),K_(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),yee(t,e,n)),!0},deleteProperty(t,e){return Xg(t),v1(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),K_(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ws(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Qg]:!0,[$_]:t.type_!==1||e!=="length",[My]:r[My],[Nh]:n[e]}},defineProperty(){Za(11)},getPrototypeOf(t){return ed(t.base_)},setPrototypeOf(){Za(12)}},Ch={};dm(jS,(t,e)=>{Ch[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});Ch.deleteProperty=function(t,e){return Ch.set.call(this,t,e,void 0)};Ch.set=function(t,e,n){return jS.set.call(this,t[0],e,n,t[0])};function v1(t,e){const n=t[Tr];return(n?ws(n):t)[e]}function xee(t,e,n){var a;const r=b5(e,n);return r?Nh in r?r[Nh]:(a=r.get)==null?void 0:a.call(t.draft_):void 0}function b5(t,e){if(!(e in t))return;let n=ed(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=ed(n)}}function K_(t){t.modified_||(t.modified_=!0,t.parent_&&K_(t.parent_))}function Xg(t){t.copy_||(t.assigned_=new Map,t.copy_=F_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var bee=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,a)=>{if(Tu(n)&&!Tu(r)){const c=r;r=n;const d=this;return function(h=c,...p){return d.produce(h,g=>r.call(this,g,...p))}}Tu(r)||Za(6),a!==void 0&&!Tu(a)&&Za(7);let s;if(Gi(n)){const c=RO(this),d=W_(c,n,void 0);let f=!0;try{s=r(d),f=!1}finally{f?H_(c):G_(c)}return PO(c,a),DO(s,c)}else if(!n||!bS(n)){if(s=r(n),s===void 0&&(s=n),s===h5&&(s=void 0),this.autoFreeze_&&_S(s,!0),a){const c=[],d=[];td(q_).generateReplacementPatches_(n,s,{patches_:c,inversePatches_:d}),a(c,d)}return s}else Za(1,n)},this.produceWithPatches=(n,r)=>{if(Tu(n))return(d,...f)=>this.produceWithPatches(d,h=>n(h,...f));let a,s;return[this.produce(n,r,(d,f)=>{a=d,s=f}),a,s]},y1(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),y1(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),y1(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Gi(e)||Za(8),$s(e)&&(e=ii(e));const n=RO(this),r=W_(n,e,void 0);return r[Tr].isManual_=!0,G_(n),r}finishDraft(e,n){const r=e&&e[Tr];(!r||!r.isManual_)&&Za(9);const{scope_:a}=r;return PO(a,n),DO(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const a=td(q_).applyPatches_;return $s(e)?a(e,n):this.produce(e,s=>a(s,n))}};function W_(t,e,n,r){const[a,s]=cv(e)?td(zy).proxyMap_(e,n):uv(e)?td(zy).proxySet_(e,n):vee(e,n);return((n==null?void 0:n.scope_)??g5()).drafts_.push(a),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?gee(n,s,r):s.callbacks_.push(function(f){var p;(p=f.mapSetPlugin_)==null||p.fixSetContents(s);const{patchPlugin_:h}=f;s.modified_&&h&&h.generatePatches_(s,[],f)}),a}function ii(t){return $s(t)||Za(10,t),w5(t)}function w5(t){if(!Gi(t)||dv(t))return t;const e=t[Tr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=F_(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=F_(t,!0);return dm(n,(a,s)=>{Ly(n,a,w5(s))},r),e&&(e.finalized_=!1),n}var wee=new bee,_5=wee.produce;function E5(t){return({dispatch:n,getState:r})=>a=>s=>typeof s=="function"?s(n,r,t):a(s)}var _ee=E5(),Eee=E5,jee=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ry:Ry.apply(null,arguments)};function Da(t,e){function n(...r){if(e){let a=e(...r);if(!a)throw new Error(sa(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>f5(r)&&r.type===t,n}var j5=class Jf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Jf.prototype)}static get[Symbol.species](){return Jf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Jf(...e[0].concat(this)):new Jf(...e.concat(this))}};function LO(t){return Gi(t)?_5(t,()=>{}):t}function Eg(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function See(t){return typeof t=="boolean"}var Aee=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let c=new j5;return n&&(See(n)?c.push(_ee):c.push(Eee(n.extraArgument))),c},S5="RTK_autoBatch",Ht=()=>t=>({payload:t,meta:{[S5]:!0}}),zO=t=>e=>{setTimeout(e,t)},A5=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let a=!0,s=!1,c=!1;const d=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:zO(10):t.type==="callback"?t.queueNotification:zO(t.timeout),h=()=>{c=!1,s&&(s=!1,d.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const g=()=>a&&p(),v=r.subscribe(g);return d.add(p),()=>{v(),d.delete(p)}},dispatch(p){var g;try{return a=!((g=p==null?void 0:p.meta)!=null&&g[S5]),s=!a,s&&(c||(c=!0,f(h))),r.dispatch(p)}finally{a=!0}}})},Nee=t=>function(n){const{autoBatch:r=!0}=n??{};let a=new j5(t);return r&&a.push(A5(typeof r=="object"?r:void 0)),a};function Tee(t){const e=Aee(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:s=void 0,enhancers:c=void 0}=t||{};let d;if(typeof n=="function")d=n;else if(xS(n))d=d5(n);else throw new Error(sa(1));let f;typeof r=="function"?f=r(e):f=e();let h=Ry;a&&(h=jee({trace:!1,...typeof a=="object"&&a}));const p=oee(...f),g=Nee(p);let v=typeof c=="function"?c(g):g();const w=h(...v);return u5(d,s,w)}function N5(t){const e={},n=[];let r;const a={addCase(s,c){const d=typeof s=="string"?s:s.type;if(!d)throw new Error(sa(28));if(d in e)throw new Error(sa(29));return e[d]=c,a},addAsyncThunk(s,c){return c.pending&&(e[s.pending.type]=c.pending),c.rejected&&(e[s.rejected.type]=c.rejected),c.fulfilled&&(e[s.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:s.settled,reducer:c.settled}),a},addMatcher(s,c){return n.push({matcher:s,reducer:c}),a},addDefaultCase(s){return r=s,a}};return t(a),[e,n,r]}function Cee(t){return typeof t=="function"}function kee(t,e){let[n,r,a]=N5(e),s;if(Cee(t))s=()=>LO(t());else{const d=LO(t);s=()=>d}function c(d=s(),f){let h=[n[f.type],...r.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[a]),h.reduce((p,g)=>{if(g)if($s(p)){const w=g(p,f);return w===void 0?p:w}else{if(Gi(p))return _5(p,v=>g(v,f));{const v=g(p,f);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return p},d)}return c.getInitialState=s,c}var Iee="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Oee=(t=21)=>{let e="",n=t;for(;n--;)e+=Iee[Math.random()*64|0];return e},Pee=Symbol.for("rtk-slice-createasyncthunk");function Ree(t,e){return`${t}/${e}`}function Dee({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Pee];return function(a){const{name:s,reducerPath:c=s}=a;if(!s)throw new Error(sa(11));const d=(typeof a.reducers=="function"?a.reducers(Lee()):a.reducers)||{},f=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(T,R){const V=typeof T=="string"?T:T.type;if(!V)throw new Error(sa(12));if(V in h.sliceCaseReducersByType)throw new Error(sa(13));return h.sliceCaseReducersByType[V]=R,p},addMatcher(T,R){return h.sliceMatchers.push({matcher:T,reducer:R}),p},exposeAction(T,R){return h.actionCreators[T]=R,p},exposeCaseReducer(T,R){return h.sliceCaseReducersByName[T]=R,p}};f.forEach(T=>{const R=d[T],V={reducerName:T,type:Ree(s,T),createNotation:typeof a.reducers=="function"};Uee(R)?$ee(V,R,p,e):zee(V,R,p)});function g(){const[T={},R=[],V=void 0]=typeof a.extraReducers=="function"?N5(a.extraReducers):[a.extraReducers],N={...T,...h.sliceCaseReducersByType};return kee(a.initialState,I=>{for(let C in N)I.addCase(C,N[C]);for(let C of h.sliceMatchers)I.addMatcher(C.matcher,C.reducer);for(let C of R)I.addMatcher(C.matcher,C.reducer);V&&I.addDefaultCase(V)})}const v=T=>T,w=new Map,E=new WeakMap;let j;function S(T,R){return j||(j=g()),j(T,R)}function k(){return j||(j=g()),j.getInitialState()}function z(T,R=!1){function V(I){let C=I[T];return typeof C>"u"&&R&&(C=Eg(E,V,k)),C}function N(I=v){const C=Eg(w,R,()=>new WeakMap);return Eg(C,I,()=>{const D={};for(const[O,U]of Object.entries(a.selectors??{}))D[O]=Mee(U,I,()=>Eg(E,I,k),R);return D})}return{reducerPath:T,getSelectors:N,get selectors(){return N(V)},selectSlice:V}}const M={name:s,reducer:S,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:k,...z(c),injectInto(T,{reducerPath:R,...V}={}){const N=R??c;return T.inject({reducerPath:N,reducer:S},V),{...M,...z(N,!0)}}};return M}}function Mee(t,e,n,r){function a(s,...c){let d=e(s);return typeof d>"u"&&r&&(d=n()),t(d,...c)}return a.unwrapped=t,a}var qr=Dee();function Lee(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function zee({type:t,reducerName:e,createNotation:n},r,a){let s,c;if("reducer"in r){if(n&&!Vee(r))throw new Error(sa(17));s=r.reducer,c=r.prepare}else s=r;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,c?Da(t,c):Da(t))}function Uee(t){return t._reducerDefinitionType==="asyncThunk"}function Vee(t){return t._reducerDefinitionType==="reducerWithPrepare"}function $ee({type:t,reducerName:e},n,r,a){if(!a)throw new Error(sa(18));const{payloadCreator:s,fulfilled:c,pending:d,rejected:f,settled:h,options:p}=n,g=a(t,s,p);r.exposeAction(e,g),c&&r.addCase(g.fulfilled,c),d&&r.addCase(g.pending,d),f&&r.addCase(g.rejected,f),h&&r.addMatcher(g.settled,h),r.exposeCaseReducer(e,{fulfilled:c||jg,pending:d||jg,rejected:f||jg,settled:h||jg})}function jg(){}var Bee="task",T5="listener",C5="completed",SS="cancelled",Fee=`task-${SS}`,qee=`task-${C5}`,Y_=`${T5}-${SS}`,Hee=`${T5}-${C5}`,hv=class{constructor(t){Wb(this,"name","TaskAbortError");Wb(this,"message");this.code=t,this.message=`${Bee} ${SS} (reason: ${t})`}},AS=(t,e)=>{if(typeof t!="function")throw new TypeError(sa(32))},Uy=()=>{},k5=(t,e=Uy)=>(t.catch(e),t),I5=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),rc=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},ac=t=>{if(t.aborted){const{reason:e}=t;throw new hv(e)}};function O5(t,e){let n=Uy;return new Promise((r,a)=>{const s=()=>a(new hv(t.reason));if(t.aborted){s();return}n=I5(t,s),e.finally(()=>n()).then(r,a)}).finally(()=>{n=Uy})}var Gee=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof hv?"cancelled":"rejected",error:n}}finally{e==null||e()}},Vy=t=>e=>k5(O5(t,e).then(n=>(ac(t),n))),P5=t=>{const e=Vy(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:$u}=Object,UO={},mv="listenerMiddleware",Kee=(t,e)=>{const n=r=>I5(t,()=>rc(r,t.reason));return(r,a)=>{AS(r);const s=new AbortController;n(s);const c=Gee(async()=>{ac(t),ac(s.signal);const d=await r({pause:Vy(s.signal),delay:P5(s.signal),signal:s.signal});return ac(s.signal),d},()=>rc(s,qee));return a!=null&&a.autoJoin&&e.push(c.catch(Uy)),{result:Vy(t)(c),cancel(){rc(s,Fee)}}}},Wee=(t,e)=>{const n=async(r,a)=>{ac(e);let s=()=>{};const d=[new Promise((f,h)=>{let p=t({predicate:r,effect:(g,v)=>{v.unsubscribe(),f([g,v.getState(),v.getOriginalState()])}});s=()=>{p(),h()}})];a!=null&&d.push(new Promise(f=>setTimeout(f,a,null)));try{const f=await O5(e,Promise.race(d));return ac(e),f}finally{s()}};return(r,a)=>k5(n(r,a))},R5=t=>{let{type:e,actionCreator:n,matcher:r,predicate:a,effect:s}=t;if(e)a=Da(e).match;else if(n)e=n.type,a=n.match;else if(r)a=r;else if(!a)throw new Error(sa(21));return AS(s),{predicate:a,type:e,effect:s}},D5=$u(t=>{const{type:e,predicate:n,effect:r}=R5(t);return{id:Oee(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(sa(22))}}},{withTypes:()=>D5}),VO=(t,e)=>{const{type:n,effect:r,predicate:a}=R5(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===a)&&s.effect===r)},Q_=t=>{t.pending.forEach(e=>{rc(e,Y_)})},Yee=(t,e)=>()=>{for(const n of e.keys())Q_(n);t.clear()},$O=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},M5=$u(Da(`${mv}/add`),{withTypes:()=>M5}),Qee=Da(`${mv}/removeAll`),L5=$u(Da(`${mv}/remove`),{withTypes:()=>L5}),Xee=(...t)=>{console.error(`${mv}/error`,...t)},hm=(t={})=>{const e=new Map,n=new Map,r=w=>{const E=n.get(w)??0;n.set(w,E+1)},a=w=>{const E=n.get(w)??1;E===1?n.delete(w):n.set(w,E-1)},{extra:s,onError:c=Xee}=t;AS(c);const d=w=>(w.unsubscribe=()=>e.delete(w.id),e.set(w.id,w),E=>{w.unsubscribe(),E!=null&&E.cancelActive&&Q_(w)}),f=w=>{const E=VO(e,w)??D5(w);return d(E)};$u(f,{withTypes:()=>f});const h=w=>{const E=VO(e,w);return E&&(E.unsubscribe(),w.cancelActive&&Q_(E)),!!E};$u(h,{withTypes:()=>h});const p=async(w,E,j,S)=>{const k=new AbortController,z=Wee(f,k.signal),M=[];try{w.pending.add(k),r(w),await Promise.resolve(w.effect(E,$u({},j,{getOriginalState:S,condition:(T,R)=>z(T,R).then(Boolean),take:z,delay:P5(k.signal),pause:Vy(k.signal),extra:s,signal:k.signal,fork:Kee(k.signal,M),unsubscribe:w.unsubscribe,subscribe:()=>{e.set(w.id,w)},cancelActiveListeners:()=>{w.pending.forEach((T,R,V)=>{T!==k&&(rc(T,Y_),V.delete(T))})},cancel:()=>{rc(k,Y_),w.pending.delete(k)},throwIfCancelled:()=>{ac(k.signal)}})))}catch(T){T instanceof hv||$O(c,T,{raisedBy:"effect"})}finally{await Promise.all(M),rc(k,Hee),a(w),w.pending.delete(k)}},g=Yee(e,n);return{middleware:w=>E=>j=>{if(!f5(j))return E(j);if(M5.match(j))return f(j.payload);if(Qee.match(j)){g();return}if(L5.match(j))return h(j.payload);let S=w.getState();const k=()=>{if(S===UO)throw new Error(sa(23));return S};let z;try{if(z=E(j),e.size>0){const M=w.getState(),T=Array.from(e.values());for(const R of T){let V=!1;try{V=R.predicate(j,M,S)}catch(N){V=!1,$O(c,N,{raisedBy:"predicate"})}V&&p(R,j,w,k)}}}finally{S=UO}return z},startListening:f,stopListening:h,clearListeners:g}};function sa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Zee={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},z5=qr({name:"chartLayout",initialState:Zee,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,a,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Jee,setLayout:ete,setChartSize:tte,setScale:nte}=z5.actions,rte=z5.reducer;function U5(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function BO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Iu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BO(Object(n),!0).forEach(function(r){ate(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ate(t,e,n){return(e=ite(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ite(t){var e=ste(t,"string");return typeof e=="symbol"?e:e+""}function ste(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jt(t,e,n){return Vt(t)||Vt(e)?n:Hi(e)?vc(t,e,n):typeof e=="function"?e(t):n}var ote=(t,e,n)=>{if(e&&n){var{width:r,height:a}=n,{align:s,verticalAlign:c,layout:d}=e;if((d==="vertical"||d==="horizontal"&&c==="middle")&&s!=="center"&&je(t[s]))return Iu(Iu({},t),{},{[s]:t[s]+(r||0)});if((d==="horizontal"||d==="vertical"&&s==="center")&&c!=="middle"&&je(t[c]))return Iu(Iu({},t),{},{[c]:t[c]+(a||0)})}return t},ts=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",V5=(t,e,n,r)=>{if(r)return t.map(d=>d.coordinate);var a,s,c=t.map(d=>(d.coordinate===e&&(a=!0),d.coordinate===n&&(s=!0),d.coordinate));return a||c.push(e),s||c.push(n),c},$5=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:a,range:s,scale:c,realScaleType:d,isCategorical:f,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:v,axisType:w}=t;if(!c)return null;var E=d==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=a==="category"&&c.bandwidth?c.bandwidth()/E:0;if(j=w==="angleAxis"&&s&&s.length>=2?Wn(s[0]-s[1])*2*j:j,g||v){var S=(g||v||[]).map((k,z)=>{var M=r?r.indexOf(k):k;return{coordinate:c(M)+j,value:k,offset:j,index:z}});return S.filter(k=>!Ra(k.coordinate))}return f&&h?h.map((k,z)=>({coordinate:c(k)+j,value:k,index:z,offset:j})):c.ticks&&p!=null?c.ticks(p).map((k,z)=>({coordinate:c(k)+j,value:k,offset:j,index:z})):c.domain().map((k,z)=>({coordinate:c(k)+j,value:r?r[k]:k,index:z,offset:j}))},FO=1e-4,lte=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),a=Math.min(r[0],r[1])-FO,s=Math.max(r[0],r[1])+FO,c=t(e[0]),d=t(e[n-1]);(c<a||c>s||d<a||d>s)&&t.domain([e[0],e[n-1]])}},cte=(t,e)=>{if(!e||e.length!==2||!je(e[0])||!je(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!je(t[0])||t[0]<n)&&(a[0]=n),(!je(t[1])||t[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a},ute=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var a=0,s=0,c=0;c<e;++c){var d=Ra(t[c][n][1])?t[c][n][0]:t[c][n][1];d>=0?(t[c][n][0]=a,t[c][n][1]=a+d,a=t[c][n][1]):(t[c][n][0]=s,t[c][n][1]=s+d,s=t[c][n][1])}},dte=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var a=0,s=0;s<e;++s){var c=Ra(t[s][n][1])?t[s][n][0]:t[s][n][1];c>=0?(t[s][n][0]=a,t[s][n][1]=a+c,a=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},fte={sign:ute,expand:VZ,none:Ju,silhouette:$Z,wiggle:BZ,positive:dte},hte=(t,e,n)=>{var r=fte[n],a=UZ().keys(e).value((s,c)=>Number(jt(s,c,0))).order(U_).offset(r);return a(t)};function B5(t){return t==null?void 0:String(t)}function $y(t){var{axis:e,ticks:n,bandSize:r,entry:a,index:s,dataKey:c}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Vt(a[e.dataKey])){var d=K3(n,"value",a[e.dataKey]);if(d)return d.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var f=jt(a,Vt(c)?e.dataKey:c);return Vt(f)?null:e.scale(f)}var qO=t=>{var{axis:e,ticks:n,offset:r,bandSize:a,entry:s,index:c}=t;if(e.type==="category")return n[c]?n[c].coordinate+r:null;var d=jt(s,e.dataKey,e.scale.domain()[c]);return Vt(d)?null:e.scale(d)-a/2+r},mte=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]},pte=t=>{var e=t.flat(2).filter(je);return[Math.min(...e),Math.max(...e)]},gte=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],yte=(t,e,n)=>{if(t!=null)return gte(Object.keys(t).reduce((r,a)=>{var s=t[a],{stackedData:c}=s,d=c.reduce((f,h)=>{var p=U5(h,e,n),g=pte(p);return[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(d[0],r[0]),Math.max(d[1],r[1])]},[1/0,-1/0]))},HO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,GO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rl=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var a=sv(e,p=>p.coordinate),s=1/0,c=1,d=a.length;c<d;c++){var f=a[c],h=a[c-1];s=Math.min((f.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function KO(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:a,name:s}=t;return Iu(Iu({},e),{},{dataKey:n,payload:r,value:a,name:s})}function fl(t,e){if(t)return String(t);if(typeof e=="string")return e}var vte=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},xte=(t,e)=>e==="centric"?t.angle:t.radius,Ws=t=>t.layout.width,Ys=t=>t.layout.height,bte=t=>t.layout.scale,F5=t=>t.layout.margin,pv=te(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),gv=te(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),q5="data-recharts-item-index",H5="data-recharts-item-data-key",mm=60;function WO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Sg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WO(Object(n),!0).forEach(function(r){wte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wte(t,e,n){return(e=_te(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _te(t){var e=Ete(t,"string");return typeof e=="symbol"?e:e+""}function Ete(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jte=t=>t.brush.height;function Ste(t){var e=gv(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var a=typeof r.width=="number"?r.width:mm;return n+a}return n},0)}function Ate(t){var e=gv(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var a=typeof r.width=="number"?r.width:mm;return n+a}return n},0)}function Nte(t){var e=pv(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Tte(t){var e=pv(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ln=te([Ws,Ys,F5,jte,Ste,Ate,Nte,Tte,c5,tee],(t,e,n,r,a,s,c,d,f,h)=>{var p={left:(n.left||0)+a,right:(n.right||0)+s},g={top:(n.top||0)+c,bottom:(n.bottom||0)+d},v=Sg(Sg({},g),p),w=v.bottom;v.bottom+=r,v=ote(v,f,h);var E=t-v.left-v.right,j=e-v.top-v.bottom;return Sg(Sg({brushBottom:w},v),{},{width:Math.max(E,0),height:Math.max(j,0)})}),Cte=te(Ln,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),NS=te(Ws,Ys,(t,e)=>({x:0,y:0,width:t,height:e})),kte=b.createContext(null),Qn=()=>b.useContext(kte)!=null,yv=t=>t.brush,vv=te([yv,Ln,F5],(t,e,n)=>({height:t.height,x:je(t.x)?t.x:e.left,y:je(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:je(t.width)?t.width:e.width})),x1={},b1={},w1={},YO;function Ite(){return YO||(YO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:a,edges:s}={}){let c,d=null;const f=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{d!==null&&(n.apply(c,d),c=void 0,d=null)},g=()=>{h&&p(),j()};let v=null;const w=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},r)},E=()=>{v!==null&&(clearTimeout(v),v=null)},j=()=>{E(),c=void 0,d=null},S=()=>{p()},k=function(...z){if(a!=null&&a.aborted)return;c=this,d=z;const M=v==null;w(),f&&M&&p()};return k.schedule=w,k.cancel=j,k.flush=S,a==null||a.addEventListener("abort",j,{once:!0}),k}t.debounce=e})(w1)),w1}var QO;function Ote(){return QO||(QO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ite();function n(r,a=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:d=!0,maxWait:f}=s,h=Array(2);c&&(h[0]="leading"),d&&(h[1]="trailing");let p,g=null;const v=e.debounce(function(...j){p=r.apply(this,j),g=null},a,{edges:h}),w=function(...j){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(p=r.apply(this,j),g=Date.now(),v.cancel(),v.schedule(),p):(v.apply(this,j),p)},E=()=>(v.flush(),p);return w.cancel=v.cancel,w.flush=E,w}t.debounce=n})(b1)),b1}var XO;function Pte(){return XO||(XO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ote();function n(r,a=0,s={}){const{leading:c=!0,trailing:d=!0}=s;return e.debounce(r,a,{leading:c,maxWait:a,trailing:d})}t.throttle=n})(x1)),x1}var _1,ZO;function Rte(){return ZO||(ZO=1,_1=Pte().throttle),_1}var Dte=Rte();const Mte=Xi(Dte);var By=function(e,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(n.replace(/%s/g,()=>a[c++]))}},G5=(t,e,n)=>{var{width:r="100%",height:a="100%",aspect:s,maxHeight:c}=n,d=Vs(r)?t:Number(r),f=Vs(a)?e:Number(a);return s&&s>0&&(d?f=d/s:f&&(d=f*s),c&&f!=null&&f>c&&(f=c)),{calculatedWidth:d,calculatedHeight:f}},Lte={width:0,height:0,overflow:"visible"},zte={width:0,overflowX:"visible"},Ute={height:0,overflowY:"visible"},Vte={},$te=t=>{var{width:e,height:n}=t,r=Vs(e),a=Vs(n);return r&&a?Lte:r?zte:a?Ute:Vte};function Bte(t){var{width:e,height:n,aspect:r}=t,a=e,s=n;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:a,height:s}}function $t(t){return Number.isFinite(t)}function Ki(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function X_(){return X_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X_.apply(null,arguments)}function JO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function eP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JO(Object(n),!0).forEach(function(r){Fte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fte(t,e,n){return(e=qte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qte(t){var e=Hte(t,"string");return typeof e=="symbol"?e:e+""}function Hte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K5=b.createContext({width:-1,height:-1});function Gte(t){return Ki(t.width)&&Ki(t.height)}function W5(t){var{children:e,width:n,height:r}=t,a=b.useMemo(()=>({width:n,height:r}),[n,r]);return Gte(a)?b.createElement(K5.Provider,{value:a},e):null}var TS=()=>b.useContext(K5),Kte=b.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:a,height:s,minWidth:c=0,minHeight:d,maxHeight:f,children:h,debounce:p=0,id:g,className:v,onResize:w,style:E={}}=t,j=b.useRef(null),S=b.useRef();S.current=w,b.useImperativeHandle(e,()=>j.current);var[k,z]=b.useState({containerWidth:r.width,containerHeight:r.height}),M=b.useCallback((I,C)=>{z(D=>{var O=Math.round(I),U=Math.round(C);return D.containerWidth===O&&D.containerHeight===U?D:{containerWidth:O,containerHeight:U}})},[]);b.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return um;var I=U=>{var $,{width:Z,height:he}=U[0].contentRect;M(Z,he),($=S.current)===null||$===void 0||$.call(S,Z,he)};p>0&&(I=Mte(I,p,{trailing:!0,leading:!1}));var C=new ResizeObserver(I),{width:D,height:O}=j.current.getBoundingClientRect();return M(D,O),C.observe(j.current),()=>{C.disconnect()}},[M,p]);var{containerWidth:T,containerHeight:R}=k;By(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:V,calculatedHeight:N}=G5(T,R,{width:a,height:s,aspect:n,maxHeight:f});return By(V!=null&&V>0||N!=null&&N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,N,a,s,c,d,n),b.createElement("div",{id:g?"".concat(g):void 0,className:dt("recharts-responsive-container",v),style:eP(eP({},E),{},{width:a,height:s,minWidth:c,minHeight:d,maxHeight:f}),ref:j},b.createElement("div",{style:$te({width:a,height:s})},b.createElement(W5,{width:V,height:N},h)))}),Cu=b.forwardRef((t,e)=>{var n=TS();if(Ki(n.width)&&Ki(n.height))return t.children;var{width:r,height:a}=Bte({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:c}=G5(void 0,void 0,{width:r,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return je(s)&&je(c)?b.createElement(W5,{width:s,height:c},t.children):b.createElement(Kte,X_({},t,{width:r,height:a,ref:e}))});function Y5(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var xv=()=>{var t,e=Qn(),n=Ne(Cte),r=Ne(vv),a=(t=Ne(yv))===null||t===void 0?void 0:t.padding;return!e||!r||!a?n:{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,x:a.left,y:a.top}},Wte={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Q5=()=>{var t;return(t=Ne(Ln))!==null&&t!==void 0?t:Wte},X5=()=>Ne(Ws),Z5=()=>Ne(Ys),Je=t=>t.layout.layoutType,Cc=()=>Ne(Je),Yte=()=>{var t=Cc();if(t==="horizontal"||t==="vertical")return t},Qte=()=>{var t=Cc();return t!==void 0},bv=t=>{var e=Wt(),n=Qn(),{width:r,height:a}=t,s=TS(),c=r,d=a;return s&&(c=s.width>0?s.width:r,d=s.height>0?s.height:a),b.useEffect(()=>{!n&&Ki(c)&&Ki(d)&&e(tte({width:c,height:d}))},[e,n,c,d]),null},J5=Symbol.for("immer-nothing"),tP=Symbol.for("immer-draftable"),la=Symbol.for("immer-state");function Ja(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var kh=Object.getPrototypeOf;function nd(t){return!!t&&!!t[la]}function xc(t){var e;return t?eL(t)||Array.isArray(t)||!!t[tP]||!!((e=t.constructor)!=null&&e[tP])||pm(t)||_v(t):!1}var Xte=Object.prototype.constructor.toString(),nP=new WeakMap;function eL(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=nP.get(n);return r===void 0&&(r=Function.toString.call(n),nP.set(n,r)),r===Xte}function Fy(t,e,n=!0){wv(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((r,a)=>e(a,r,t))}function wv(t){const e=t[la];return e?e.type_:Array.isArray(t)?1:pm(t)?2:_v(t)?3:0}function Z_(t,e){return wv(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function tL(t,e,n){const r=wv(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Zte(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function pm(t){return t instanceof Map}function _v(t){return t instanceof Set}function Wl(t){return t.copy_||t.base_}function J_(t,e){if(pm(t))return new Map(t);if(_v(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=eL(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[la];let a=Reflect.ownKeys(r);for(let s=0;s<a.length;s++){const c=a[s],d=r[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:t[c]})}return Object.create(kh(t),r)}else{const r=kh(t);if(r!==null&&n)return{...t};const a=Object.create(r);return Object.assign(a,t)}}function CS(t,e=!1){return Ev(t)||nd(t)||!xc(t)||(wv(t)>1&&Object.defineProperties(t,{set:Ag,add:Ag,clear:Ag,delete:Ag}),Object.freeze(t),e&&Object.values(t).forEach(n=>CS(n,!0))),t}function Jte(){Ja(2)}var Ag={value:Jte};function Ev(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var ene={};function bc(t){const e=ene[t];return e||Ja(0,t),e}var Ih;function nL(){return Ih}function tne(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function rP(t,e){e&&(bc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function eE(t){tE(t),t.drafts_.forEach(nne),t.drafts_=null}function tE(t){t===Ih&&(Ih=t.parent_)}function aP(t){return Ih=tne(Ih,t)}function nne(t){const e=t[la];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function iP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[la].modified_&&(eE(e),Ja(4)),xc(t)&&(t=qy(e,t),e.parent_||Hy(e,t)),e.patches_&&bc("Patches").generateReplacementPatches_(n[la].base_,t,e.patches_,e.inversePatches_)):t=qy(e,n,[]),eE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==J5?t:void 0}function qy(t,e,n){if(Ev(e))return e;const r=t.immer_.shouldUseStrictIteration(),a=e[la];if(!a)return Fy(e,(s,c)=>sP(t,a,e,s,c,n),r),e;if(a.scope_!==t)return e;if(!a.modified_)return Hy(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let c=s,d=!1;a.type_===3&&(c=new Set(s),s.clear(),d=!0),Fy(c,(f,h)=>sP(t,a,s,f,h,n,d),r),Hy(t,s,!1),n&&t.patches_&&bc("Patches").generatePatches_(a,n,t.patches_,t.inversePatches_)}return a.copy_}function sP(t,e,n,r,a,s,c){if(a==null||typeof a!="object"&&!c)return;const d=Ev(a);if(!(d&&!c)){if(nd(a)){const f=s&&e&&e.type_!==3&&!Z_(e.assigned_,r)?s.concat(r):void 0,h=qy(t,a,f);if(tL(n,r,h),nd(h))t.canAutoFreeze_=!1;else return}else c&&n.add(a);if(xc(a)&&!d){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===a&&d)return;qy(t,a),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(pm(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Hy(t,a)}}}function Hy(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&CS(e,n)}function rne(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:nL(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,s=kS;n&&(a=[r],s=Oh);const{revoke:c,proxy:d}=Proxy.revocable(a,s);return r.draft_=d,r.revoke_=c,d}var kS={get(t,e){if(e===la)return t;const n=Wl(t);if(!Z_(n,e))return ane(t,n,e);const r=n[e];return t.finalized_||!xc(r)?r:r===E1(t.base_,e)?(j1(t),t.copy_[e]=rE(r,t)):r},has(t,e){return e in Wl(t)},ownKeys(t){return Reflect.ownKeys(Wl(t))},set(t,e,n){const r=rL(Wl(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const a=E1(Wl(t),e),s=a==null?void 0:a[la];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Zte(n,a)&&(n!==void 0||Z_(t.base_,e)))return!0;j1(t),nE(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return E1(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,j1(t),nE(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Wl(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Ja(11)},getPrototypeOf(t){return kh(t.base_)},setPrototypeOf(){Ja(12)}},Oh={};Fy(kS,(t,e)=>{Oh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Oh.deleteProperty=function(t,e){return Oh.set.call(this,t,e,void 0)};Oh.set=function(t,e,n){return kS.set.call(this,t[0],e,n,t[0])};function E1(t,e){const n=t[la];return(n?Wl(n):t)[e]}function ane(t,e,n){var a;const r=rL(e,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(t.draft_):void 0}function rL(t,e){if(!(e in t))return;let n=kh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=kh(n)}}function nE(t){t.modified_||(t.modified_=!0,t.parent_&&nE(t.parent_))}function j1(t){t.copy_||(t.copy_=J_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ine=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const c=this;return function(f=s,...h){return c.produce(f,p=>n.call(this,p,...h))}}typeof n!="function"&&Ja(6),r!==void 0&&typeof r!="function"&&Ja(7);let a;if(xc(e)){const s=aP(this),c=rE(e,void 0);let d=!0;try{a=n(c),d=!1}finally{d?eE(s):tE(s)}return rP(s,r),iP(a,s)}else if(!e||typeof e!="object"){if(a=n(e),a===void 0&&(a=e),a===J5&&(a=void 0),this.autoFreeze_&&CS(a,!0),r){const s=[],c=[];bc("Patches").generateReplacementPatches_(e,a,s,c),r(s,c)}return a}else Ja(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...d)=>this.produceWithPatches(c,f=>e(f,...d));let r,a;return[this.produce(e,n,(c,d)=>{r=c,a=d}),r,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){xc(t)||Ja(8),nd(t)&&(t=sne(t));const e=aP(this),n=rE(t,void 0);return n[la].isManual_=!0,tE(e),n}finishDraft(t,e){const n=t&&t[la];(!n||!n.isManual_)&&Ja(9);const{scope_:r}=n;return rP(r,e),iP(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const a=e[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(e=e.slice(n+1));const r=bc("Patches").applyPatches_;return nd(t)?r(t,e):this.produce(t,a=>r(a,e))}};function rE(t,e){const n=pm(t)?bc("MapSet").proxyMap_(t,e):_v(t)?bc("MapSet").proxySet_(t,e):rne(t,e);return(e?e.scope_:nL()).drafts_.push(n),n}function sne(t){return nd(t)||Ja(10,t),aL(t)}function aL(t){if(!xc(t)||Ev(t))return t;const e=t[la];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=J_(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=J_(t,!0);return Fy(n,(a,s)=>{tL(n,a,aL(s))},r),e&&(e.finalized_=!1),n}var one=new ine;one.produce;var lne={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},iL=qr({name:"legend",initialState:lne,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Ht()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,a=ii(t).payload.indexOf(n);a>-1&&(t.payload[a]=r)},prepare:Ht()},removeLegendPayload:{reducer(t,e){var n=ii(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Ht()}}}),{setLegendSize:Xye,setLegendSettings:Zye,addLegendPayload:sL,replaceLegendPayload:oL,removeLegendPayload:lL}=iL.actions,cne=iL.reducer;function aE(){return aE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aE.apply(null,arguments)}function oP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function S1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oP(Object(n),!0).forEach(function(r){une(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function une(t,e,n){return(e=dne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dne(t){var e=fne(t,"string");return typeof e=="symbol"?e:e+""}function fne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hne(t){return Array.isArray(t)&&Hi(t[0])&&Hi(t[1])?t.join(" ~ "):t}var mne=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:a={},payload:s,formatter:c,itemSorter:d,wrapperClassName:f,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:v=!1}=t,w=()=>{if(s&&s.length){var R={padding:0,margin:0},V=(d?sv(s,d):s).map((N,I)=>{if(N.type==="none")return null;var C=N.formatter||c||hne,{value:D,name:O}=N,U=D,$=O;if(C){var Z=C(D,O,N,I,s);if(Array.isArray(Z))[U,$]=Z;else if(Z!=null)U=Z;else return null}var he=S1({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},r);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:he},Hi($)?b.createElement("span",{className:"recharts-tooltip-item-name"},$):null,Hi($)?b.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,b.createElement("span",{className:"recharts-tooltip-item-value"},U),b.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:R},V)}return null},E=S1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),j=S1({margin:0},a),S=!Vt(p),k=S?p:"",z=dt("recharts-default-tooltip",f),M=dt("recharts-tooltip-label",h);S&&g&&s!==void 0&&s!==null&&(k=g(p,s));var T=v?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",aE({className:z,style:E},T),b.createElement("p",{className:M,style:j},b.isValidElement(k)?k:"".concat(k)),w())},zf="recharts-tooltip-wrapper",pne={visibility:"hidden"};function gne(t){var{coordinate:e,translateX:n,translateY:r}=t;return dt(zf,{["".concat(zf,"-right")]:je(n)&&e&&je(e.x)&&n>=e.x,["".concat(zf,"-left")]:je(n)&&e&&je(e.x)&&n<e.x,["".concat(zf,"-bottom")]:je(r)&&e&&je(e.y)&&r>=e.y,["".concat(zf,"-top")]:je(r)&&e&&je(e.y)&&r<e.y})}function lP(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:a,position:s,reverseDirection:c,tooltipDimension:d,viewBox:f,viewBoxDimension:h}=t;if(s&&je(s[r]))return s[r];var p=n[r]-d-(a>0?a:0),g=n[r]+a;if(e[r])return c[r]?p:g;var v=f[r];if(v==null)return 0;if(c[r]){var w=p,E=v;return w<E?Math.max(g,v):Math.max(p,v)}if(h==null)return 0;var j=g+d,S=v+h;return j>S?Math.max(p,v):Math.max(g,v)}function yne(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function vne(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:a,reverseDirection:s,tooltipBox:c,useTranslate3d:d,viewBox:f}=t,h,p,g;return c.height>0&&c.width>0&&n?(p=lP({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:c.width,viewBox:f,viewBoxDimension:f.width}),g=lP({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:c.height,viewBox:f,viewBoxDimension:f.height}),h=yne({translateX:p,translateY:g,useTranslate3d:d})):h=pne,{cssProperties:h,cssClasses:gne({translateX:p,translateY:g,coordinate:n})}}function cP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ng(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cP(Object(n),!0).forEach(function(r){iE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iE(t,e,n){return(e=xne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xne(t){var e=bne(t,"string");return typeof e=="symbol"?e:e+""}function bne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class wne extends b.PureComponent{constructor(){super(...arguments),iE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),iE(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:a,children:s,coordinate:c,hasPayload:d,isAnimationActive:f,offset:h,position:p,reverseDirection:g,useTranslate3d:v,viewBox:w,wrapperStyle:E,lastBoundingBox:j,innerRef:S,hasPortalFromProps:k}=this.props,{cssClasses:z,cssProperties:M}=vne({allowEscapeViewBox:n,coordinate:c,offsetTopLeft:h,position:p,reverseDirection:g,tooltipBox:{height:j.height,width:j.width},useTranslate3d:v,viewBox:w}),T=k?{}:Ng(Ng({transition:f&&e?"transform ".concat(r,"ms ").concat(a):void 0},M),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&d?"visible":"hidden",position:"absolute",top:0,left:0}),R=Ng(Ng({},T),{},{visibility:!this.state.dismissed&&e&&d?"visible":"hidden"},E);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:z,style:R,ref:S},s)}}var _ne=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),hl={devToolsEnabled:!1,isSsr:_ne()},cL=()=>{var t;return(t=Ne(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function sE(){return sE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sE.apply(null,arguments)}function uP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function dP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uP(Object(n),!0).forEach(function(r){Ene(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ene(t,e,n){return(e=jne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jne(t){var e=Sne(t,"string");return typeof e=="symbol"?e:e+""}function Sne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fP={curveBasisClosed:TZ,curveBasisOpen:CZ,curveBasis:NZ,curveBumpX:hZ,curveBumpY:mZ,curveLinearClosed:kZ,curveLinear:rv,curveMonotoneX:IZ,curveMonotoneY:OZ,curveNatural:PZ,curveStep:RZ,curveStepAfter:MZ,curveStepBefore:DZ},Gy=t=>$t(t.x)&&$t(t.y),hP=t=>t.base!=null&&Gy(t.base)&&Gy(t),Uf=t=>t.x,Vf=t=>t.y,Ane=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(cm(t));return(n==="curveMonotone"||n==="curveBump")&&e?fP["".concat(n).concat(e==="vertical"?"Y":"X")]:fP[n]||rv},Nne=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:a,connectNulls:s=!1}=t,c=Ane(e,a),d=s?n.filter(Gy):n,f;if(Array.isArray(r)){var h=n.map((w,E)=>dP(dP({},w),{},{base:r[E]}));a==="vertical"?f=xg().y(Vf).x1(Uf).x0(w=>w.base.x):f=xg().x(Uf).y1(Vf).y0(w=>w.base.y);var p=f.defined(hP).curve(c),g=s?h.filter(hP):h;return p(g)}a==="vertical"&&je(r)?f=xg().y(Vf).x1(Uf).x0(r):je(r)?f=xg().x(Uf).y1(Vf).y0(r):f=R3().x(Uf).y(Vf);var v=f.defined(Gy).curve(c);return v(d)},Bu=t=>{var{className:e,points:n,path:r,pathRef:a}=t;if((!n||!n.length)&&!r)return null;var s=n&&n.length?Nne(t):r;return b.createElement("path",sE({},Nr(t),gS(t),{className:dt("recharts-curve",e),d:s===null?void 0:s,ref:a}))},Tne=["x","y","top","left","width","height","className"];function oE(){return oE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oE.apply(null,arguments)}function mP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Cne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(n),!0).forEach(function(r){kne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kne(t,e,n){return(e=Ine(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ine(t){var e=One(t,"string");return typeof e=="symbol"?e:e+""}function One(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pne(t,e){if(t==null)return{};var n,r,a=Rne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Rne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Dne=(t,e,n,r,a,s)=>"M".concat(t,",").concat(a,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),Mne=t=>{var{x:e=0,y:n=0,top:r=0,left:a=0,width:s=0,height:c=0,className:d}=t,f=Pne(t,Tne),h=Cne({x:e,y:n,top:r,left:a,width:s,height:c},f);return!je(e)||!je(n)||!je(s)||!je(c)||!je(r)||!je(a)?null:b.createElement("path",oE({},yr(h),{className:dt("recharts-cross",d),d:Dne(e,n,s,c,r,a)}))};function Lne(t,e,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-a,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function pP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pP(Object(n),!0).forEach(function(r){zne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zne(t,e,n){return(e=Une(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Une(t){var e=Vne(t,"string");return typeof e=="symbol"?e:e+""}function Vne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $ne=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),uL=(t,e,n)=>t.map(r=>"".concat($ne(r)," ").concat(e,"ms ").concat(n)).join(","),Bne=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(a=>r.includes(a))),Ph=(t,e)=>Object.keys(e).reduce((n,r)=>gP(gP({},n),{},{[r]:t(r,e[r])}),{});function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(n),!0).forEach(function(r){Fne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fne(t,e,n){return(e=qne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qne(t){var e=Hne(t,"string");return typeof e=="symbol"?e:e+""}function Hne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ky=(t,e,n)=>t+(e-t)*n,lE=t=>{var{from:e,to:n}=t;return e!==n},dL=(t,e,n)=>{var r=Ph((a,s)=>{if(lE(s)){var[c,d]=t(s.from,s.to,s.velocity);return Rn(Rn({},s),{},{from:c,velocity:d})}return s},e);return n<1?Ph((a,s)=>lE(s)?Rn(Rn({},s),{},{velocity:Ky(s.velocity,r[a].velocity,n),from:Ky(s.from,r[a].from,n)}):s,e):dL(t,r,n-1)};function Gne(t,e,n,r,a,s){var c,d=r.reduce((v,w)=>Rn(Rn({},v),{},{[w]:{from:t[w],velocity:0,to:e[w]}}),{}),f=()=>Ph((v,w)=>w.from,d),h=()=>!Object.values(d).filter(lE).length,p=null,g=v=>{c||(c=v);var w=v-c,E=w/n.dt;d=dL(n,d,E),a(Rn(Rn(Rn({},t),e),f())),c=v,h()||(p=s.setTimeout(g))};return()=>(p=s.setTimeout(g),()=>{var v;(v=p)===null||v===void 0||v()})}function Kne(t,e,n,r,a,s,c){var d=null,f=a.reduce((g,v)=>Rn(Rn({},g),{},{[v]:[t[v],e[v]]}),{}),h,p=g=>{h||(h=g);var v=(g-h)/r,w=Ph((j,S)=>Ky(...S,n(v)),f);if(s(Rn(Rn(Rn({},t),e),w)),v<1)d=c.setTimeout(p);else{var E=Ph((j,S)=>Ky(...S,n(1)),f);s(Rn(Rn(Rn({},t),e),E))}};return()=>(d=c.setTimeout(p),()=>{var g;(g=d)===null||g===void 0||g()})}const Wne=(t,e,n,r,a,s)=>{var c=Bne(t,e);return n==null?()=>(a(Rn(Rn({},t),e)),()=>{}):n.isStepper===!0?Gne(t,e,n,c,a,s):Kne(t,e,n,r,c,a,s)};var Wy=1e-4,fL=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],hL=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),vP=(t,e)=>n=>{var r=fL(t,e);return hL(r,n)},Yne=(t,e)=>n=>{var r=fL(t,e),a=[...r.map((s,c)=>s*c).slice(1),0];return hL(a,n)},Qne=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,s=n[0].split("(");if(s[0]==="cubic-bezier"&&((a=s[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var c=s[1].split(")")[0].split(",").map(d=>parseFloat(d));return[c[0],c[1],c[2],c[3]]}}}return n.length===4?n:[0,0,1,1]},Xne=(t,e,n,r)=>{var a=vP(t,n),s=vP(e,r),c=Yne(t,n),d=h=>h>1?1:h<0?0:h,f=h=>{for(var p=h>1?1:h,g=p,v=0;v<8;++v){var w=a(g)-p,E=c(g);if(Math.abs(w-p)<Wy||E<Wy)return s(g);g=d(g-w/E)}return s(g)};return f.isStepper=!1,f},xP=function(){return Xne(...Qne(...arguments))},Zne=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:a=17}=e,s=(c,d,f)=>{var h=-(c-d)*n,p=f*r,g=f+(h-p)*a/1e3,v=f*a/1e3+c;return Math.abs(v-d)<Wy&&Math.abs(g)<Wy?[d,0]:[v,g]};return s.isStepper=!0,s.dt=a,s},Jne=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return xP(t);case"spring":return Zne();default:if(t.split("(")[0]==="cubic-bezier")return xP(t)}return typeof t=="function"?t:null};function ere(t){var e,n=()=>null,r=!1,a=null,s=c=>{if(!r){if(Array.isArray(c)){if(!c.length)return;var d=c,[f,...h]=d;if(typeof f=="number"){a=t.setTimeout(s.bind(null,h),f);return}s(f),a=t.setTimeout(s.bind(null,h));return}typeof c=="string"&&(e=c,n(e)),typeof c=="object"&&(e=c,n(e)),typeof c=="function"&&c()}};return{stop:()=>{r=!0},start:c=>{r=!1,a&&(a(),a=null),s(c)},subscribe:c=>(n=c,()=>{n=()=>null}),getTimeoutController:()=>t}}class tre{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),a=null,s=c=>{c-r>=n?e(c):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function nre(){return ere(new tre)}var rre=b.createContext(nre);function are(t,e){var n=b.useContext(rre);return b.useMemo(()=>e??n(t),[t,e,n])}var ire={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},bP={t:0},A1={t:1};function bd(t){var e=On(t,ire),{isActive:n,canBegin:r,duration:a,easing:s,begin:c,onAnimationEnd:d,onAnimationStart:f,children:h}=e,p=n==="auto"?!hl.isSsr:n,g=are(e.animationId,e.animationManager),[v,w]=b.useState(p?bP:A1),E=b.useRef(null);return b.useEffect(()=>{p||w(A1)},[p]),b.useEffect(()=>{if(!p||!r)return um;var j=Wne(bP,A1,Jne(s),a,w,g.getTimeoutController()),S=()=>{E.current=j()};return g.start([f,c,S,a,d]),()=>{g.stop(),E.current&&E.current(),d()}},[p,r,a,s,c,f,d,g]),h(v.t)}function wd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=b.useRef(Ah(e)),r=b.useRef(t);return r.current!==t&&(n.current=Ah(e),r.current=t),n.current}var sre=["radius"],ore=["radius"];function wP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function _P(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wP(Object(n),!0).forEach(function(r){lre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lre(t,e,n){return(e=cre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cre(t){var e=ure(t,"string");return typeof e=="symbol"?e:e+""}function ure(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yy(){return Yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yy.apply(null,arguments)}function EP(t,e){if(t==null)return{};var n,r,a=dre(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function dre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jP=(t,e,n,r,a)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),c=r>=0?1:-1,d=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,h;if(s>0&&a instanceof Array){for(var p=[0,0,0,0],g=0,v=4;g<v;g++)p[g]=a[g]>s?s:a[g];h="M".concat(t,",").concat(e+c*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(f,",").concat(t+d*p[0],",").concat(e)),h+="L ".concat(t+n-d*p[1],",").concat(e),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(f,`,
        `).concat(t+n,",").concat(e+c*p[1])),h+="L ".concat(t+n,",").concat(e+r-c*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(f,`,
        `).concat(t+n-d*p[2],",").concat(e+r)),h+="L ".concat(t+d*p[3],",").concat(e+r),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(f,`,
        `).concat(t,",").concat(e+r-c*p[3])),h+="Z"}else if(s>0&&a===+a&&a>0){var w=Math.min(s,a);h="M ".concat(t,",").concat(e+c*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(f,",").concat(t+d*w,",").concat(e,`
            L `).concat(t+n-d*w,",").concat(e,`
            A `).concat(w,",").concat(w,",0,0,").concat(f,",").concat(t+n,",").concat(e+c*w,`
            L `).concat(t+n,",").concat(e+r-c*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(f,",").concat(t+n-d*w,",").concat(e+r,`
            L `).concat(t+d*w,",").concat(e+r,`
            A `).concat(w,",").concat(w,",0,0,").concat(f,",").concat(t,",").concat(e+r-c*w," Z")}else h="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},SP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mL=t=>{var e=On(t,SP),n=b.useRef(null),[r,a]=b.useState(-1);b.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ie=n.current.getTotalLength();ie&&a(ie)}catch{}},[]);var{x:s,y:c,width:d,height:f,radius:h,className:p}=e,{animationEasing:g,animationDuration:v,animationBegin:w,isAnimationActive:E,isUpdateAnimationActive:j}=e,S=b.useRef(d),k=b.useRef(f),z=b.useRef(s),M=b.useRef(c),T=b.useMemo(()=>({x:s,y:c,width:d,height:f,radius:h}),[s,c,d,f,h]),R=wd(T,"rectangle-");if(s!==+s||c!==+c||d!==+d||f!==+f||d===0||f===0)return null;var V=dt("recharts-rectangle",p);if(!j){var N=yr(e),{radius:I}=N,C=EP(N,sre);return b.createElement("path",Yy({},C,{radius:typeof h=="number"?h:void 0,className:V,d:jP(s,c,d,f,h)}))}var D=S.current,O=k.current,U=z.current,$=M.current,Z="0px ".concat(r===-1?1:r,"px"),he="".concat(r,"px 0px"),Y=uL(["strokeDasharray"],v,typeof g=="string"?g:SP.animationEasing);return b.createElement(bd,{animationId:R,key:R,canBegin:r>0,duration:v,easing:g,isActive:j,begin:w},ie=>{var H=gt(D,d,ie),K=gt(O,f,ie),le=gt(U,s,ie),q=gt($,c,ie);n.current&&(S.current=H,k.current=K,z.current=le,M.current=q);var ae;E?ie>0?ae={transition:Y,strokeDasharray:he}:ae={strokeDasharray:Z}:ae={strokeDasharray:he};var ge=yr(e),{radius:ye}=ge,Te=EP(ge,ore);return b.createElement("path",Yy({},Te,{radius:typeof h=="number"?h:void 0,className:V,d:jP(le,q,H,K,h),ref:n,style:_P(_P({},ae),e.style)}))})};function AP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function NP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(n),!0).forEach(function(r){fre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fre(t,e,n){return(e=hre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hre(t){var e=mre(t,"string");return typeof e=="symbol"?e:e+""}function mre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qy=Math.PI/180,pre=t=>t*180/Math.PI,kn=(t,e,n,r)=>({x:t+Math.cos(-Qy*r)*n,y:e+Math.sin(-Qy*r)*n}),pL=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},gre=(t,e)=>{var{x:n,y:r}=t,{x:a,y:s}=e;return Math.sqrt((n-a)**2+(r-s)**2)},yre=(t,e)=>{var{x:n,y:r}=t,{cx:a,cy:s}=e,c=gre({x:n,y:r},{x:a,y:s});if(c<=0)return{radius:c,angle:0};var d=(n-a)/c,f=Math.acos(d);return r>s&&(f=2*Math.PI-f),{radius:c,angle:pre(f),angleInRadian:f}},vre=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),a=Math.floor(n/360),s=Math.min(r,a);return{startAngle:e-s*360,endAngle:n-s*360}},xre=(t,e)=>{var{startAngle:n,endAngle:r}=e,a=Math.floor(n/360),s=Math.floor(r/360),c=Math.min(a,s);return t+c*360},bre=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:a,angle:s}=yre({x:n,y:r},e),{innerRadius:c,outerRadius:d}=e;if(a<c||a>d||a===0)return null;var{startAngle:f,endAngle:h}=vre(e),p=s,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?NP(NP({},e),{},{radius:a,angle:xre(p,e)}):null};function gL(t){var{cx:e,cy:n,radius:r,startAngle:a,endAngle:s}=t,c=kn(e,n,r,a),d=kn(e,n,r,s);return{points:[c,d],cx:e,cy:n,radius:r,startAngle:a,endAngle:s}}function cE(){return cE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cE.apply(null,arguments)}var wre=(t,e)=>{var n=Wn(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Tg=t=>{var{cx:e,cy:n,radius:r,angle:a,sign:s,isExternal:c,cornerRadius:d,cornerIsExternal:f}=t,h=d*(c?1:-1)+r,p=Math.asin(d/h)/Qy,g=f?a:a+s*p,v=kn(e,n,h,g),w=kn(e,n,r,g),E=f?a-s*p:a,j=kn(e,n,h*Math.cos(p*Qy),E);return{center:v,circleTangency:w,lineTangency:j,theta:p}},yL=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:a,startAngle:s,endAngle:c}=t,d=wre(s,c),f=s+d,h=kn(e,n,a,s),p=kn(e,n,a,f),g="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>f),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(r>0){var v=kn(e,n,r,s),w=kn(e,n,r,f);g+="L ".concat(w.x,",").concat(w.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=f),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(e,",").concat(n," Z");return g},_re=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:a,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:h}=t,p=Wn(h-f),{circleTangency:g,lineTangency:v,theta:w}=Tg({cx:e,cy:n,radius:a,angle:f,sign:p,cornerRadius:s,cornerIsExternal:d}),{circleTangency:E,lineTangency:j,theta:S}=Tg({cx:e,cy:n,radius:a,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:d}),k=d?Math.abs(f-h):Math.abs(f-h)-w-S;if(k<0)return c?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):yL({cx:e,cy:n,innerRadius:r,outerRadius:a,startAngle:f,endAngle:h});var z="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(k>180),",").concat(+(p<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(j.x,",").concat(j.y,`
  `);if(r>0){var{circleTangency:M,lineTangency:T,theta:R}=Tg({cx:e,cy:n,radius:r,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),{circleTangency:V,lineTangency:N,theta:I}=Tg({cx:e,cy:n,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),C=d?Math.abs(f-h):Math.abs(f-h)-R-I;if(C<0&&s===0)return"".concat(z,"L").concat(e,",").concat(n,"Z");z+="L".concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(V.x,",").concat(V.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(C>180),",").concat(+(p>0),",").concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,"Z")}else z+="L".concat(e,",").concat(n,"Z");return z},Ere={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vL=t=>{var e=On(t,Ere),{cx:n,cy:r,innerRadius:a,outerRadius:s,cornerRadius:c,forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:p,className:g}=e;if(s<a||h===p)return null;var v=dt("recharts-sector",g),w=s-a,E=pr(c,w,0,!0),j;return E>0&&Math.abs(h-p)<360?j=_re({cx:n,cy:r,innerRadius:a,outerRadius:s,cornerRadius:Math.min(E,w/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:p}):j=yL({cx:n,cy:r,innerRadius:a,outerRadius:s,startAngle:h,endAngle:p}),b.createElement("path",cE({},yr(e),{className:v,d:j}))};function jre(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(Q3(e)){if(t==="centric"){var{cx:r,cy:a,innerRadius:s,outerRadius:c,angle:d}=e,f=kn(r,a,s,d),h=kn(r,a,c,d);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return gL(e)}}var N1={},T1={},C1={},TP;function Sre(){return TP||(TP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=o5();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(C1)),C1}var CP;function Are(){return CP||(CP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Sre();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(T1)),T1}var kP;function Nre(){return kP||(kP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l5(),n=Are();function r(a,s,c){c&&typeof c!="number"&&e.isIterateeCall(a,s,c)&&(s=c=void 0),a=n.toFinite(a),s===void 0?(s=a,a=0):s=n.toFinite(s),c=c===void 0?a<s?1:-1:n.toFinite(c);const d=Math.max(Math.ceil((s-a)/(c||1)),0),f=new Array(d);for(let h=0;h<d;h++)f[h]=a,a+=c;return f}t.range=r})(N1)),N1}var k1,IP;function Tre(){return IP||(IP=1,k1=Nre().range),k1}var Cre=Tre();const xL=Xi(Cre);function Go(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kre(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IS(t){let e,n,r;t.length!==2?(e=Go,n=(d,f)=>Go(t(d),f),r=(d,f)=>t(d)-f):(e=t===Go||t===kre?t:Ire,n=t,r=t);function a(d,f,h=0,p=d.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;n(d[g],f)<0?h=g+1:p=g}while(h<p)}return h}function s(d,f,h=0,p=d.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;n(d[g],f)<=0?h=g+1:p=g}while(h<p)}return h}function c(d,f,h=0,p=d.length){const g=a(d,f,h,p-1);return g>h&&r(d[g-1],f)>-r(d[g],f)?g-1:g}return{left:a,center:c,right:s}}function Ire(){return 0}function bL(t){return t===null?NaN:+t}function*Ore(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Pre=IS(Go),gm=Pre.right;IS(bL).center;class OP extends Map{constructor(e,n=Mre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(PP(this,e))}has(e){return super.has(PP(this,e))}set(e,n){return super.set(Rre(this,e),n)}delete(e){return super.delete(Dre(this,e))}}function PP({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Rre({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Dre({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Mre(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Lre(t=Go){if(t===Go)return wL;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function wL(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const zre=Math.sqrt(50),Ure=Math.sqrt(10),Vre=Math.sqrt(2);function Xy(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),c=s>=zre?10:s>=Ure?5:s>=Vre?2:1;let d,f,h;return a<0?(h=Math.pow(10,-a)/c,d=Math.round(t*h),f=Math.round(e*h),d/h<t&&++d,f/h>e&&--f,h=-h):(h=Math.pow(10,a)*c,d=Math.round(t/h),f=Math.round(e/h),d*h<t&&++d,f*h>e&&--f),f<d&&.5<=n&&n<2?Xy(t,e,n*2):[d,f,h]}function uE(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,s,c]=r?Xy(e,t,n):Xy(t,e,n);if(!(s>=a))return[];const d=s-a+1,f=new Array(d);if(r)if(c<0)for(let h=0;h<d;++h)f[h]=(s-h)/-c;else for(let h=0;h<d;++h)f[h]=(s-h)*c;else if(c<0)for(let h=0;h<d;++h)f[h]=(a+h)/-c;else for(let h=0;h<d;++h)f[h]=(a+h)*c;return f}function dE(t,e,n){return e=+e,t=+t,n=+n,Xy(t,e,n)[2]}function fE(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?dE(e,t,n):dE(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function RP(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function DP(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function _L(t,e,n=0,r=1/0,a){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(a=a===void 0?wL:Lre(a);r>n;){if(r-n>600){const f=r-n+1,h=e-n+1,p=Math.log(f),g=.5*Math.exp(2*p/3),v=.5*Math.sqrt(p*g*(f-g)/f)*(h-f/2<0?-1:1),w=Math.max(n,Math.floor(e-h*g/f+v)),E=Math.min(r,Math.floor(e+(f-h)*g/f+v));_L(t,e,w,E,a)}const s=t[e];let c=n,d=r;for($f(t,n,e),a(t[r],s)>0&&$f(t,n,r);c<d;){for($f(t,c,d),++c,--d;a(t[c],s)<0;)++c;for(;a(t[d],s)>0;)--d}a(t[n],s)===0?$f(t,n,d):(++d,$f(t,d,r)),d<=e&&(n=d+1),e<=d&&(r=d-1)}return t}function $f(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function $re(t,e,n){if(t=Float64Array.from(Ore(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return DP(t);if(e>=1)return RP(t);var r,a=(r-1)*e,s=Math.floor(a),c=RP(_L(t,s).subarray(0,s+1)),d=DP(t.subarray(s+1));return c+(d-c)*(a-s)}}function Bre(t,e,n=bL){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,a=(r-1)*e,s=Math.floor(a),c=+n(t[s],s,t),d=+n(t[s+1],s+1,t);return c+(d-c)*(a-s)}}function Fre(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(a);++r<a;)s[r]=t+r*n;return s}function Ua(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qs(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const hE=Symbol("implicit");function OS(){var t=new OP,e=[],n=[],r=hE;function a(s){let c=t.get(s);if(c===void 0){if(r!==hE)return r;t.set(s,c=e.push(s)-1)}return n[c%n.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new OP;for(const c of s)t.has(c)||t.set(c,e.push(c)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return OS(e,n).unknown(r)},Ua.apply(a,arguments),a}function PS(){var t=OS().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,s,c,d=!1,f=0,h=0,p=.5;delete t.unknown;function g(){var v=e().length,w=a<r,E=w?a:r,j=w?r:a;s=(j-E)/Math.max(1,v-f+h*2),d&&(s=Math.floor(s)),E+=(j-E-s*(v-f))*p,c=s*(1-f),d&&(E=Math.round(E),c=Math.round(c));var S=Fre(v).map(function(k){return E+s*k});return n(w?S.reverse():S)}return t.domain=function(v){return arguments.length?(e(v),g()):e()},t.range=function(v){return arguments.length?([r,a]=v,r=+r,a=+a,g()):[r,a]},t.rangeRound=function(v){return[r,a]=v,r=+r,a=+a,d=!0,g()},t.bandwidth=function(){return c},t.step=function(){return s},t.round=function(v){return arguments.length?(d=!!v,g()):d},t.padding=function(v){return arguments.length?(f=Math.min(1,h=+v),g()):f},t.paddingInner=function(v){return arguments.length?(f=Math.min(1,v),g()):f},t.paddingOuter=function(v){return arguments.length?(h=+v,g()):h},t.align=function(v){return arguments.length?(p=Math.max(0,Math.min(1,v)),g()):p},t.copy=function(){return PS(e(),[r,a]).round(d).paddingInner(f).paddingOuter(h).align(p)},Ua.apply(g(),arguments)}function EL(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return EL(e())},t}function qre(){return EL(PS.apply(null,arguments).paddingInner(1))}function RS(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function jL(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ym(){}var Rh=.7,Zy=1/Rh,Fu="\\s*([+-]?\\d+)\\s*",Dh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hre=/^#([0-9a-f]{3,8})$/,Gre=new RegExp(`^rgb\\(${Fu},${Fu},${Fu}\\)$`),Kre=new RegExp(`^rgb\\(${Fi},${Fi},${Fi}\\)$`),Wre=new RegExp(`^rgba\\(${Fu},${Fu},${Fu},${Dh}\\)$`),Yre=new RegExp(`^rgba\\(${Fi},${Fi},${Fi},${Dh}\\)$`),Qre=new RegExp(`^hsl\\(${Dh},${Fi},${Fi}\\)$`),Xre=new RegExp(`^hsla\\(${Dh},${Fi},${Fi},${Dh}\\)$`),MP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};RS(ym,Mh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:LP,formatHex:LP,formatHex8:Zre,formatHsl:Jre,formatRgb:zP,toString:zP});function LP(){return this.rgb().formatHex()}function Zre(){return this.rgb().formatHex8()}function Jre(){return SL(this).formatHsl()}function zP(){return this.rgb().formatRgb()}function Mh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Hre.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?UP(e):n===3?new Br(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Cg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Cg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Gre.exec(t))?new Br(e[1],e[2],e[3],1):(e=Kre.exec(t))?new Br(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Wre.exec(t))?Cg(e[1],e[2],e[3],e[4]):(e=Yre.exec(t))?Cg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Qre.exec(t))?BP(e[1],e[2]/100,e[3]/100,1):(e=Xre.exec(t))?BP(e[1],e[2]/100,e[3]/100,e[4]):MP.hasOwnProperty(t)?UP(MP[t]):t==="transparent"?new Br(NaN,NaN,NaN,0):null}function UP(t){return new Br(t>>16&255,t>>8&255,t&255,1)}function Cg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Br(t,e,n,r)}function eae(t){return t instanceof ym||(t=Mh(t)),t?(t=t.rgb(),new Br(t.r,t.g,t.b,t.opacity)):new Br}function mE(t,e,n,r){return arguments.length===1?eae(t):new Br(t,e,n,r??1)}function Br(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}RS(Br,mE,jL(ym,{brighter(t){return t=t==null?Zy:Math.pow(Zy,t),new Br(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Rh:Math.pow(Rh,t),new Br(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Br(ic(this.r),ic(this.g),ic(this.b),Jy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VP,formatHex:VP,formatHex8:tae,formatRgb:$P,toString:$P}));function VP(){return`#${Zl(this.r)}${Zl(this.g)}${Zl(this.b)}`}function tae(){return`#${Zl(this.r)}${Zl(this.g)}${Zl(this.b)}${Zl((isNaN(this.opacity)?1:this.opacity)*255)}`}function $P(){const t=Jy(this.opacity);return`${t===1?"rgb(":"rgba("}${ic(this.r)}, ${ic(this.g)}, ${ic(this.b)}${t===1?")":`, ${t})`}`}function Jy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ic(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Zl(t){return t=ic(t),(t<16?"0":"")+t.toString(16)}function BP(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ei(t,e,n,r)}function SL(t){if(t instanceof ei)return new ei(t.h,t.s,t.l,t.opacity);if(t instanceof ym||(t=Mh(t)),!t)return new ei;if(t instanceof ei)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),s=Math.max(e,n,r),c=NaN,d=s-a,f=(s+a)/2;return d?(e===s?c=(n-r)/d+(n<r)*6:n===s?c=(r-e)/d+2:c=(e-n)/d+4,d/=f<.5?s+a:2-s-a,c*=60):d=f>0&&f<1?0:c,new ei(c,d,f,t.opacity)}function nae(t,e,n,r){return arguments.length===1?SL(t):new ei(t,e,n,r??1)}function ei(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}RS(ei,nae,jL(ym,{brighter(t){return t=t==null?Zy:Math.pow(Zy,t),new ei(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Rh:Math.pow(Rh,t),new ei(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new Br(I1(t>=240?t-240:t+120,a,r),I1(t,a,r),I1(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new ei(FP(this.h),kg(this.s),kg(this.l),Jy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jy(this.opacity);return`${t===1?"hsl(":"hsla("}${FP(this.h)}, ${kg(this.s)*100}%, ${kg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function FP(t){return t=(t||0)%360,t<0?t+360:t}function kg(t){return Math.max(0,Math.min(1,t||0))}function I1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const DS=t=>()=>t;function rae(t,e){return function(n){return t+n*e}}function aae(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function iae(t){return(t=+t)==1?AL:function(e,n){return n-e?aae(e,n,t):DS(isNaN(e)?n:e)}}function AL(t,e){var n=e-t;return n?rae(t,n):DS(isNaN(t)?e:t)}const qP=(function t(e){var n=iae(e);function r(a,s){var c=n((a=mE(a)).r,(s=mE(s)).r),d=n(a.g,s.g),f=n(a.b,s.b),h=AL(a.opacity,s.opacity);return function(p){return a.r=c(p),a.g=d(p),a.b=f(p),a.opacity=h(p),a+""}}return r.gamma=t,r})(1);function sae(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=t[a]*(1-s)+e[a]*s;return r}}function oae(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function lae(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),s=new Array(n),c;for(c=0;c<r;++c)a[c]=_d(t[c],e[c]);for(;c<n;++c)s[c]=e[c];return function(d){for(c=0;c<r;++c)s[c]=a[c](d);return s}}function cae(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function e0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function uae(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=_d(t[a],e[a]):r[a]=e[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var pE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O1=new RegExp(pE.source,"g");function dae(t){return function(){return t}}function fae(t){return function(e){return t(e)+""}}function hae(t,e){var n=pE.lastIndex=O1.lastIndex=0,r,a,s,c=-1,d=[],f=[];for(t=t+"",e=e+"";(r=pE.exec(t))&&(a=O1.exec(e));)(s=a.index)>n&&(s=e.slice(n,s),d[c]?d[c]+=s:d[++c]=s),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,f.push({i:c,x:e0(r,a)})),n=O1.lastIndex;return n<e.length&&(s=e.slice(n),d[c]?d[c]+=s:d[++c]=s),d.length<2?f[0]?fae(f[0].x):dae(e):(e=f.length,function(h){for(var p=0,g;p<e;++p)d[(g=f[p]).i]=g.x(h);return d.join("")})}function _d(t,e){var n=typeof e,r;return e==null||n==="boolean"?DS(e):(n==="number"?e0:n==="string"?(r=Mh(e))?(e=r,qP):hae:e instanceof Mh?qP:e instanceof Date?cae:oae(e)?sae:Array.isArray(e)?lae:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?uae:e0)(t,e)}function MS(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function mae(t,e){e===void 0&&(e=t,t=_d);for(var n=0,r=e.length-1,a=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(a,a=e[++n]);return function(c){var d=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return s[d](c-d)}}function pae(t){return function(){return t}}function t0(t){return+t}var HP=[0,1];function jr(t){return t}function gE(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:pae(isNaN(e)?NaN:.5)}function gae(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function yae(t,e,n){var r=t[0],a=t[1],s=e[0],c=e[1];return a<r?(r=gE(a,r),s=n(c,s)):(r=gE(r,a),s=n(s,c)),function(d){return s(r(d))}}function vae(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),s=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)a[c]=gE(t[c],t[c+1]),s[c]=n(e[c],e[c+1]);return function(d){var f=gm(t,d,1,r)-1;return s[f](a[f](d))}}function vm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jv(){var t=HP,e=HP,n=_d,r,a,s,c=jr,d,f,h;function p(){var v=Math.min(t.length,e.length);return c!==jr&&(c=gae(t[0],t[v-1])),d=v>2?vae:yae,f=h=null,g}function g(v){return v==null||isNaN(v=+v)?s:(f||(f=d(t.map(r),e,n)))(r(c(v)))}return g.invert=function(v){return c(a((h||(h=d(e,t.map(r),e0)))(v)))},g.domain=function(v){return arguments.length?(t=Array.from(v,t0),p()):t.slice()},g.range=function(v){return arguments.length?(e=Array.from(v),p()):e.slice()},g.rangeRound=function(v){return e=Array.from(v),n=MS,p()},g.clamp=function(v){return arguments.length?(c=v?!0:jr,p()):c!==jr},g.interpolate=function(v){return arguments.length?(n=v,p()):n},g.unknown=function(v){return arguments.length?(s=v,g):s},function(v,w){return r=v,a=w,p()}}function LS(){return jv()(jr,jr)}function xae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function n0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function rd(t){return t=n0(Math.abs(t)),t?t[1]:NaN}function bae(t,e){return function(n,r){for(var a=n.length,s=[],c=0,d=t[0],f=0;a>0&&d>0&&(f+d+1>r&&(d=Math.max(1,r-f)),s.push(n.substring(a-=d,a+d)),!((f+=d+1)>r));)d=t[c=(c+1)%t.length];return s.reverse().join(e)}}function wae(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var _ae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lh(t){if(!(e=_ae.exec(t)))throw new Error("invalid format: "+t);var e;return new zS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Lh.prototype=zS.prototype;function zS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}zS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Eae(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var NL;function jae(t,e){var n=n0(t,e);if(!n)return t+"";var r=n[0],a=n[1],s=a-(NL=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,c=r.length;return s===c?r:s>c?r+new Array(s-c+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+n0(t,Math.max(0,e+s-1))[0]}function GP(t,e){var n=n0(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const KP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xae,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>GP(t*100,e),r:GP,s:jae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function WP(t){return t}var YP=Array.prototype.map,QP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Sae(t){var e=t.grouping===void 0||t.thousands===void 0?WP:bae(YP.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?WP:wae(YP.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function h(g){g=Lh(g);var v=g.fill,w=g.align,E=g.sign,j=g.symbol,S=g.zero,k=g.width,z=g.comma,M=g.precision,T=g.trim,R=g.type;R==="n"?(z=!0,R="g"):KP[R]||(M===void 0&&(M=12),T=!0,R="g"),(S||v==="0"&&w==="=")&&(S=!0,v="0",w="=");var V=j==="$"?n:j==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",N=j==="$"?r:/[%p]/.test(R)?c:"",I=KP[R],C=/[defgprs%]/.test(R);M=M===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function D(O){var U=V,$=N,Z,he,Y;if(R==="c")$=I(O)+$,O="";else{O=+O;var ie=O<0||1/O<0;if(O=isNaN(O)?f:I(Math.abs(O),M),T&&(O=Eae(O)),ie&&+O==0&&E!=="+"&&(ie=!1),U=(ie?E==="("?E:d:E==="-"||E==="("?"":E)+U,$=(R==="s"?QP[8+NL/3]:"")+$+(ie&&E==="("?")":""),C){for(Z=-1,he=O.length;++Z<he;)if(Y=O.charCodeAt(Z),48>Y||Y>57){$=(Y===46?a+O.slice(Z+1):O.slice(Z))+$,O=O.slice(0,Z);break}}}z&&!S&&(O=e(O,1/0));var H=U.length+O.length+$.length,K=H<k?new Array(k-H+1).join(v):"";switch(z&&S&&(O=e(K+O,K.length?k-$.length:1/0),K=""),w){case"<":O=U+O+$+K;break;case"=":O=U+K+O+$;break;case"^":O=K.slice(0,H=K.length>>1)+U+O+$+K.slice(H);break;default:O=K+U+O+$;break}return s(O)}return D.toString=function(){return g+""},D}function p(g,v){var w=h((g=Lh(g),g.type="f",g)),E=Math.max(-8,Math.min(8,Math.floor(rd(v)/3)))*3,j=Math.pow(10,-E),S=QP[8+E/3];return function(k){return w(j*k)+S}}return{format:h,formatPrefix:p}}var Ig,US,TL;Aae({thousands:",",grouping:[3],currency:["$",""]});function Aae(t){return Ig=Sae(t),US=Ig.format,TL=Ig.formatPrefix,Ig}function Nae(t){return Math.max(0,-rd(Math.abs(t)))}function Tae(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rd(e)/3)))*3-rd(Math.abs(t)))}function Cae(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,rd(e)-rd(t))+1}function CL(t,e,n,r){var a=fE(t,e,n),s;switch(r=Lh(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Tae(a,c))&&(r.precision=s),TL(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Cae(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Nae(a))&&(r.precision=s-(r.type==="%")*2);break}}return US(r)}function ml(t){var e=t.domain;return t.ticks=function(n){var r=e();return uE(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return CL(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,s=r.length-1,c=r[a],d=r[s],f,h,p=10;for(d<c&&(h=c,c=d,d=h,h=a,a=s,s=h);p-- >0;){if(h=dE(c,d,n),h===f)return r[a]=c,r[s]=d,e(r);if(h>0)c=Math.floor(c/h)*h,d=Math.ceil(d/h)*h;else if(h<0)c=Math.ceil(c*h)/h,d=Math.floor(d*h)/h;else break;f=h}return t},t}function kL(){var t=LS();return t.copy=function(){return vm(t,kL())},Ua.apply(t,arguments),ml(t)}function IL(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,t0),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return IL(t).unknown(e)},t=arguments.length?Array.from(t,t0):[0,1],ml(n)}function OL(t,e){t=t.slice();var n=0,r=t.length-1,a=t[n],s=t[r],c;return s<a&&(c=n,n=r,r=c,c=a,a=s,s=c),t[n]=e.floor(a),t[r]=e.ceil(s),t}function XP(t){return Math.log(t)}function ZP(t){return Math.exp(t)}function kae(t){return-Math.log(-t)}function Iae(t){return-Math.exp(-t)}function Oae(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Pae(t){return t===10?Oae:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Rae(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function JP(t){return(e,n)=>-t(-e,n)}function VS(t){const e=t(XP,ZP),n=e.domain;let r=10,a,s;function c(){return a=Rae(r),s=Pae(r),n()[0]<0?(a=JP(a),s=JP(s),t(kae,Iae)):t(XP,ZP),e}return e.base=function(d){return arguments.length?(r=+d,c()):r},e.domain=function(d){return arguments.length?(n(d),c()):n()},e.ticks=d=>{const f=n();let h=f[0],p=f[f.length-1];const g=p<h;g&&([h,p]=[p,h]);let v=a(h),w=a(p),E,j;const S=d==null?10:+d;let k=[];if(!(r%1)&&w-v<S){if(v=Math.floor(v),w=Math.ceil(w),h>0){for(;v<=w;++v)for(E=1;E<r;++E)if(j=v<0?E/s(-v):E*s(v),!(j<h)){if(j>p)break;k.push(j)}}else for(;v<=w;++v)for(E=r-1;E>=1;--E)if(j=v>0?E/s(-v):E*s(v),!(j<h)){if(j>p)break;k.push(j)}k.length*2<S&&(k=uE(h,p,S))}else k=uE(v,w,Math.min(w-v,S)).map(s);return g?k.reverse():k},e.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Lh(f)).precision==null&&(f.trim=!0),f=US(f)),d===1/0)return f;const h=Math.max(1,r*d/e.ticks().length);return p=>{let g=p/s(Math.round(a(p)));return g*r<r-.5&&(g*=r),g<=h?f(p):""}},e.nice=()=>n(OL(n(),{floor:d=>s(Math.floor(a(d))),ceil:d=>s(Math.ceil(a(d)))})),e}function PL(){const t=VS(jv()).domain([1,10]);return t.copy=()=>vm(t,PL()).base(t.base()),Ua.apply(t,arguments),t}function eR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function tR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function $S(t){var e=1,n=t(eR(e),tR(e));return n.constant=function(r){return arguments.length?t(eR(e=+r),tR(e)):e},ml(n)}function RL(){var t=$S(jv());return t.copy=function(){return vm(t,RL()).constant(t.constant())},Ua.apply(t,arguments)}function nR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Dae(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Mae(t){return t<0?-t*t:t*t}function BS(t){var e=t(jr,jr),n=1;function r(){return n===1?t(jr,jr):n===.5?t(Dae,Mae):t(nR(n),nR(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,r()):n},ml(e)}function FS(){var t=BS(jv());return t.copy=function(){return vm(t,FS()).exponent(t.exponent())},Ua.apply(t,arguments),t}function Lae(){return FS.apply(null,arguments).exponent(.5)}function rR(t){return Math.sign(t)*t*t}function zae(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function DL(){var t=LS(),e=[0,1],n=!1,r;function a(s){var c=zae(t(s));return isNaN(c)?r:n?Math.round(c):c}return a.invert=function(s){return t.invert(rR(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,t0)).map(rR)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return DL(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ua.apply(a,arguments),ml(a)}function ML(){var t=[],e=[],n=[],r;function a(){var c=0,d=Math.max(1,e.length);for(n=new Array(d-1);++c<d;)n[c-1]=Bre(t,c/d);return s}function s(c){return c==null||isNaN(c=+c)?r:e[gm(n,c)]}return s.invertExtent=function(c){var d=e.indexOf(c);return d<0?[NaN,NaN]:[d>0?n[d-1]:t[0],d<n.length?n[d]:t[t.length-1]]},s.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let d of c)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(Go),a()},s.range=function(c){return arguments.length?(e=Array.from(c),a()):e.slice()},s.unknown=function(c){return arguments.length?(r=c,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return ML().domain(t).range(e).unknown(r)},Ua.apply(s,arguments)}function LL(){var t=0,e=1,n=1,r=[.5],a=[0,1],s;function c(f){return f!=null&&f<=f?a[gm(r,f,0,n)]:s}function d(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*e-(f-n)*t)/(n+1);return c}return c.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,d()):[t,e]},c.range=function(f){return arguments.length?(n=(a=Array.from(f)).length-1,d()):a.slice()},c.invertExtent=function(f){var h=a.indexOf(f);return h<0?[NaN,NaN]:h<1?[t,r[0]]:h>=n?[r[n-1],e]:[r[h-1],r[h]]},c.unknown=function(f){return arguments.length&&(s=f),c},c.thresholds=function(){return r.slice()},c.copy=function(){return LL().domain([t,e]).range(a).unknown(s)},Ua.apply(ml(c),arguments)}function zL(){var t=[.5],e=[0,1],n,r=1;function a(s){return s!=null&&s<=s?e[gm(t,s,0,r)]:n}return a.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var c=e.indexOf(s);return[t[c-1],t[c]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return zL().domain(t).range(e).unknown(n)},Ua.apply(a,arguments)}const P1=new Date,R1=new Date;function zn(t,e,n,r){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const c=a(s),d=a.ceil(s);return s-c<d-s?c:d},a.offset=(s,c)=>(e(s=new Date(+s),c==null?1:Math.floor(c)),s),a.range=(s,c,d)=>{const f=[];if(s=a.ceil(s),d=d==null?1:Math.floor(d),!(s<c)||!(d>0))return f;let h;do f.push(h=new Date(+s)),e(s,d),t(s);while(h<s&&s<c);return f},a.filter=s=>zn(c=>{if(c>=c)for(;t(c),!s(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;e(c,-1),!s(c););else for(;--d>=0;)for(;e(c,1),!s(c););}),n&&(a.count=(s,c)=>(P1.setTime(+s),R1.setTime(+c),t(P1),t(R1),Math.floor(n(P1,R1))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(r?c=>r(c)%s===0:c=>a.count(0,c)%s===0):a)),a}const r0=zn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);r0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?zn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):r0);r0.range;const Ns=1e3,Ta=Ns*60,Ts=Ta*60,Bs=Ts*24,qS=Bs*7,aR=Bs*30,D1=Bs*365,Jl=zn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ns)},(t,e)=>(e-t)/Ns,t=>t.getUTCSeconds());Jl.range;const HS=zn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ns)},(t,e)=>{t.setTime(+t+e*Ta)},(t,e)=>(e-t)/Ta,t=>t.getMinutes());HS.range;const GS=zn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ta)},(t,e)=>(e-t)/Ta,t=>t.getUTCMinutes());GS.range;const KS=zn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ns-t.getMinutes()*Ta)},(t,e)=>{t.setTime(+t+e*Ts)},(t,e)=>(e-t)/Ts,t=>t.getHours());KS.range;const WS=zn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ts)},(t,e)=>(e-t)/Ts,t=>t.getUTCHours());WS.range;const xm=zn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ta)/Bs,t=>t.getDate()-1);xm.range;const Sv=zn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bs,t=>t.getUTCDate()-1);Sv.range;const UL=zn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bs,t=>Math.floor(t/Bs));UL.range;function kc(t){return zn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ta)/qS)}const Av=kc(0),a0=kc(1),Uae=kc(2),Vae=kc(3),ad=kc(4),$ae=kc(5),Bae=kc(6);Av.range;a0.range;Uae.range;Vae.range;ad.range;$ae.range;Bae.range;function Ic(t){return zn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/qS)}const Nv=Ic(0),i0=Ic(1),Fae=Ic(2),qae=Ic(3),id=Ic(4),Hae=Ic(5),Gae=Ic(6);Nv.range;i0.range;Fae.range;qae.range;id.range;Hae.range;Gae.range;const YS=zn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());YS.range;const QS=zn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());QS.range;const Fs=zn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Fs.range;const qs=zn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());qs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});qs.range;function VL(t,e,n,r,a,s){const c=[[Jl,1,Ns],[Jl,5,5*Ns],[Jl,15,15*Ns],[Jl,30,30*Ns],[s,1,Ta],[s,5,5*Ta],[s,15,15*Ta],[s,30,30*Ta],[a,1,Ts],[a,3,3*Ts],[a,6,6*Ts],[a,12,12*Ts],[r,1,Bs],[r,2,2*Bs],[n,1,qS],[e,1,aR],[e,3,3*aR],[t,1,D1]];function d(h,p,g){const v=p<h;v&&([h,p]=[p,h]);const w=g&&typeof g.range=="function"?g:f(h,p,g),E=w?w.range(h,+p+1):[];return v?E.reverse():E}function f(h,p,g){const v=Math.abs(p-h)/g,w=IS(([,,S])=>S).right(c,v);if(w===c.length)return t.every(fE(h/D1,p/D1,g));if(w===0)return r0.every(Math.max(fE(h,p,g),1));const[E,j]=c[v/c[w-1][2]<c[w][2]/v?w-1:w];return E.every(j)}return[d,f]}const[Kae,Wae]=VL(qs,QS,Nv,UL,WS,GS),[Yae,Qae]=VL(Fs,YS,Av,xm,KS,HS);function M1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function L1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bf(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Xae(t){var e=t.dateTime,n=t.date,r=t.time,a=t.periods,s=t.days,c=t.shortDays,d=t.months,f=t.shortMonths,h=Ff(a),p=qf(a),g=Ff(s),v=qf(s),w=Ff(c),E=qf(c),j=Ff(d),S=qf(d),k=Ff(f),z=qf(f),M={a:ie,A:H,b:K,B:le,c:null,d:uR,e:uR,f:bie,g:kie,G:Oie,H:yie,I:vie,j:xie,L:$L,m:wie,M:_ie,p:q,q:ae,Q:hR,s:mR,S:Eie,u:jie,U:Sie,V:Aie,w:Nie,W:Tie,x:null,X:null,y:Cie,Y:Iie,Z:Pie,"%":fR},T={a:ge,A:ye,b:Te,B:Oe,c:null,d:dR,e:dR,f:Lie,g:Kie,G:Yie,H:Rie,I:Die,j:Mie,L:FL,m:zie,M:Uie,p:Pe,q:vt,Q:hR,s:mR,S:Vie,u:$ie,U:Bie,V:Fie,w:qie,W:Hie,x:null,X:null,y:Gie,Y:Wie,Z:Qie,"%":fR},R={a:D,A:O,b:U,B:$,c:Z,d:lR,e:lR,f:hie,g:oR,G:sR,H:cR,I:cR,j:cie,L:fie,m:lie,M:uie,p:C,q:oie,Q:pie,s:gie,S:die,u:nie,U:rie,V:aie,w:tie,W:iie,x:he,X:Y,y:oR,Y:sR,Z:sie,"%":mie};M.x=V(n,M),M.X=V(r,M),M.c=V(e,M),T.x=V(n,T),T.X=V(r,T),T.c=V(e,T);function V(ue,Ve){return function(He){var W=[],Ce=-1,Ie=0,Ye=ue.length,et,en,St;for(He instanceof Date||(He=new Date(+He));++Ce<Ye;)ue.charCodeAt(Ce)===37&&(W.push(ue.slice(Ie,Ce)),(en=iR[et=ue.charAt(++Ce)])!=null?et=ue.charAt(++Ce):en=et==="e"?" ":"0",(St=Ve[et])&&(et=St(He,en)),W.push(et),Ie=Ce+1);return W.push(ue.slice(Ie,Ce)),W.join("")}}function N(ue,Ve){return function(He){var W=Bf(1900,void 0,1),Ce=I(W,ue,He+="",0),Ie,Ye;if(Ce!=He.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(Ve&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(Ie=L1(Bf(W.y,0,1)),Ye=Ie.getUTCDay(),Ie=Ye>4||Ye===0?i0.ceil(Ie):i0(Ie),Ie=Sv.offset(Ie,(W.V-1)*7),W.y=Ie.getUTCFullYear(),W.m=Ie.getUTCMonth(),W.d=Ie.getUTCDate()+(W.w+6)%7):(Ie=M1(Bf(W.y,0,1)),Ye=Ie.getDay(),Ie=Ye>4||Ye===0?a0.ceil(Ie):a0(Ie),Ie=xm.offset(Ie,(W.V-1)*7),W.y=Ie.getFullYear(),W.m=Ie.getMonth(),W.d=Ie.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),Ye="Z"in W?L1(Bf(W.y,0,1)).getUTCDay():M1(Bf(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(Ye+5)%7:W.w+W.U*7-(Ye+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,L1(W)):M1(W)}}function I(ue,Ve,He,W){for(var Ce=0,Ie=Ve.length,Ye=He.length,et,en;Ce<Ie;){if(W>=Ye)return-1;if(et=Ve.charCodeAt(Ce++),et===37){if(et=Ve.charAt(Ce++),en=R[et in iR?Ve.charAt(Ce++):et],!en||(W=en(ue,He,W))<0)return-1}else if(et!=He.charCodeAt(W++))return-1}return W}function C(ue,Ve,He){var W=h.exec(Ve.slice(He));return W?(ue.p=p.get(W[0].toLowerCase()),He+W[0].length):-1}function D(ue,Ve,He){var W=w.exec(Ve.slice(He));return W?(ue.w=E.get(W[0].toLowerCase()),He+W[0].length):-1}function O(ue,Ve,He){var W=g.exec(Ve.slice(He));return W?(ue.w=v.get(W[0].toLowerCase()),He+W[0].length):-1}function U(ue,Ve,He){var W=k.exec(Ve.slice(He));return W?(ue.m=z.get(W[0].toLowerCase()),He+W[0].length):-1}function $(ue,Ve,He){var W=j.exec(Ve.slice(He));return W?(ue.m=S.get(W[0].toLowerCase()),He+W[0].length):-1}function Z(ue,Ve,He){return I(ue,e,Ve,He)}function he(ue,Ve,He){return I(ue,n,Ve,He)}function Y(ue,Ve,He){return I(ue,r,Ve,He)}function ie(ue){return c[ue.getDay()]}function H(ue){return s[ue.getDay()]}function K(ue){return f[ue.getMonth()]}function le(ue){return d[ue.getMonth()]}function q(ue){return a[+(ue.getHours()>=12)]}function ae(ue){return 1+~~(ue.getMonth()/3)}function ge(ue){return c[ue.getUTCDay()]}function ye(ue){return s[ue.getUTCDay()]}function Te(ue){return f[ue.getUTCMonth()]}function Oe(ue){return d[ue.getUTCMonth()]}function Pe(ue){return a[+(ue.getUTCHours()>=12)]}function vt(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var Ve=V(ue+="",M);return Ve.toString=function(){return ue},Ve},parse:function(ue){var Ve=N(ue+="",!1);return Ve.toString=function(){return ue},Ve},utcFormat:function(ue){var Ve=V(ue+="",T);return Ve.toString=function(){return ue},Ve},utcParse:function(ue){var Ve=N(ue+="",!0);return Ve.toString=function(){return ue},Ve}}}var iR={"-":"",_:" ",0:"0"},Xn=/^\s*\d+/,Zae=/^%/,Jae=/[\\^$*+?|[\]().{}]/g;function ft(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(e)+a:a)}function eie(t){return t.replace(Jae,"\\$&")}function Ff(t){return new RegExp("^(?:"+t.map(eie).join("|")+")","i")}function qf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function tie(t,e,n){var r=Xn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function nie(t,e,n){var r=Xn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function rie(t,e,n){var r=Xn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function aie(t,e,n){var r=Xn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function iie(t,e,n){var r=Xn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function sR(t,e,n){var r=Xn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function oR(t,e,n){var r=Xn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sie(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function oie(t,e,n){var r=Xn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function lie(t,e,n){var r=Xn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function lR(t,e,n){var r=Xn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function cie(t,e,n){var r=Xn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function cR(t,e,n){var r=Xn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function uie(t,e,n){var r=Xn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function die(t,e,n){var r=Xn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function fie(t,e,n){var r=Xn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function hie(t,e,n){var r=Xn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mie(t,e,n){var r=Zae.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function pie(t,e,n){var r=Xn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function gie(t,e,n){var r=Xn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function uR(t,e){return ft(t.getDate(),e,2)}function yie(t,e){return ft(t.getHours(),e,2)}function vie(t,e){return ft(t.getHours()%12||12,e,2)}function xie(t,e){return ft(1+xm.count(Fs(t),t),e,3)}function $L(t,e){return ft(t.getMilliseconds(),e,3)}function bie(t,e){return $L(t,e)+"000"}function wie(t,e){return ft(t.getMonth()+1,e,2)}function _ie(t,e){return ft(t.getMinutes(),e,2)}function Eie(t,e){return ft(t.getSeconds(),e,2)}function jie(t){var e=t.getDay();return e===0?7:e}function Sie(t,e){return ft(Av.count(Fs(t)-1,t),e,2)}function BL(t){var e=t.getDay();return e>=4||e===0?ad(t):ad.ceil(t)}function Aie(t,e){return t=BL(t),ft(ad.count(Fs(t),t)+(Fs(t).getDay()===4),e,2)}function Nie(t){return t.getDay()}function Tie(t,e){return ft(a0.count(Fs(t)-1,t),e,2)}function Cie(t,e){return ft(t.getFullYear()%100,e,2)}function kie(t,e){return t=BL(t),ft(t.getFullYear()%100,e,2)}function Iie(t,e){return ft(t.getFullYear()%1e4,e,4)}function Oie(t,e){var n=t.getDay();return t=n>=4||n===0?ad(t):ad.ceil(t),ft(t.getFullYear()%1e4,e,4)}function Pie(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ft(e/60|0,"0",2)+ft(e%60,"0",2)}function dR(t,e){return ft(t.getUTCDate(),e,2)}function Rie(t,e){return ft(t.getUTCHours(),e,2)}function Die(t,e){return ft(t.getUTCHours()%12||12,e,2)}function Mie(t,e){return ft(1+Sv.count(qs(t),t),e,3)}function FL(t,e){return ft(t.getUTCMilliseconds(),e,3)}function Lie(t,e){return FL(t,e)+"000"}function zie(t,e){return ft(t.getUTCMonth()+1,e,2)}function Uie(t,e){return ft(t.getUTCMinutes(),e,2)}function Vie(t,e){return ft(t.getUTCSeconds(),e,2)}function $ie(t){var e=t.getUTCDay();return e===0?7:e}function Bie(t,e){return ft(Nv.count(qs(t)-1,t),e,2)}function qL(t){var e=t.getUTCDay();return e>=4||e===0?id(t):id.ceil(t)}function Fie(t,e){return t=qL(t),ft(id.count(qs(t),t)+(qs(t).getUTCDay()===4),e,2)}function qie(t){return t.getUTCDay()}function Hie(t,e){return ft(i0.count(qs(t)-1,t),e,2)}function Gie(t,e){return ft(t.getUTCFullYear()%100,e,2)}function Kie(t,e){return t=qL(t),ft(t.getUTCFullYear()%100,e,2)}function Wie(t,e){return ft(t.getUTCFullYear()%1e4,e,4)}function Yie(t,e){var n=t.getUTCDay();return t=n>=4||n===0?id(t):id.ceil(t),ft(t.getUTCFullYear()%1e4,e,4)}function Qie(){return"+0000"}function fR(){return"%"}function hR(t){return+t}function mR(t){return Math.floor(+t/1e3)}var xu,HL,GL;Xie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Xie(t){return xu=Xae(t),HL=xu.format,xu.parse,GL=xu.utcFormat,xu.utcParse,xu}function Zie(t){return new Date(t)}function Jie(t){return t instanceof Date?+t:+new Date(+t)}function XS(t,e,n,r,a,s,c,d,f,h){var p=LS(),g=p.invert,v=p.domain,w=h(".%L"),E=h(":%S"),j=h("%I:%M"),S=h("%I %p"),k=h("%a %d"),z=h("%b %d"),M=h("%B"),T=h("%Y");function R(V){return(f(V)<V?w:d(V)<V?E:c(V)<V?j:s(V)<V?S:r(V)<V?a(V)<V?k:z:n(V)<V?M:T)(V)}return p.invert=function(V){return new Date(g(V))},p.domain=function(V){return arguments.length?v(Array.from(V,Jie)):v().map(Zie)},p.ticks=function(V){var N=v();return t(N[0],N[N.length-1],V??10)},p.tickFormat=function(V,N){return N==null?R:h(N)},p.nice=function(V){var N=v();return(!V||typeof V.range!="function")&&(V=e(N[0],N[N.length-1],V??10)),V?v(OL(N,V)):p},p.copy=function(){return vm(p,XS(t,e,n,r,a,s,c,d,f,h))},p}function ese(){return Ua.apply(XS(Yae,Qae,Fs,YS,Av,xm,KS,HS,Jl,HL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function tse(){return Ua.apply(XS(Kae,Wae,qs,QS,Nv,Sv,WS,GS,Jl,GL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tv(){var t=0,e=1,n,r,a,s,c=jr,d=!1,f;function h(g){return g==null||isNaN(g=+g)?f:c(a===0?.5:(g=(s(g)-n)*a,d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e]=g,n=s(t=+t),r=s(e=+e),a=n===r?0:1/(r-n),h):[t,e]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(v){var w,E;return arguments.length?([w,E]=v,c=g(w,E),h):[c(0),c(1)]}}return h.range=p(_d),h.rangeRound=p(MS),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return s=g,n=g(t),r=g(e),a=n===r?0:1/(r-n),h}}function pl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function KL(){var t=ml(Tv()(jr));return t.copy=function(){return pl(t,KL())},Qs.apply(t,arguments)}function WL(){var t=VS(Tv()).domain([1,10]);return t.copy=function(){return pl(t,WL()).base(t.base())},Qs.apply(t,arguments)}function YL(){var t=$S(Tv());return t.copy=function(){return pl(t,YL()).constant(t.constant())},Qs.apply(t,arguments)}function ZS(){var t=BS(Tv());return t.copy=function(){return pl(t,ZS()).exponent(t.exponent())},Qs.apply(t,arguments)}function nse(){return ZS.apply(null,arguments).exponent(.5)}function QL(){var t=[],e=jr;function n(r){if(r!=null&&!isNaN(r=+r))return e((gm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let a of r)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Go),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,a)=>e(a/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,s)=>$re(t,s/r))},n.copy=function(){return QL(e).domain(t)},Qs.apply(n,arguments)}function Cv(){var t=0,e=.5,n=1,r=1,a,s,c,d,f,h=jr,p,g=!1,v;function w(j){return isNaN(j=+j)?v:(j=.5+((j=+p(j))-s)*(r*j<r*s?d:f),h(g?Math.max(0,Math.min(1,j)):j))}w.domain=function(j){return arguments.length?([t,e,n]=j,a=p(t=+t),s=p(e=+e),c=p(n=+n),d=a===s?0:.5/(s-a),f=s===c?0:.5/(c-s),r=s<a?-1:1,w):[t,e,n]},w.clamp=function(j){return arguments.length?(g=!!j,w):g},w.interpolator=function(j){return arguments.length?(h=j,w):h};function E(j){return function(S){var k,z,M;return arguments.length?([k,z,M]=S,h=mae(j,[k,z,M]),w):[h(0),h(.5),h(1)]}}return w.range=E(_d),w.rangeRound=E(MS),w.unknown=function(j){return arguments.length?(v=j,w):v},function(j){return p=j,a=j(t),s=j(e),c=j(n),d=a===s?0:.5/(s-a),f=s===c?0:.5/(c-s),r=s<a?-1:1,w}}function XL(){var t=ml(Cv()(jr));return t.copy=function(){return pl(t,XL())},Qs.apply(t,arguments)}function ZL(){var t=VS(Cv()).domain([.1,1,10]);return t.copy=function(){return pl(t,ZL()).base(t.base())},Qs.apply(t,arguments)}function JL(){var t=$S(Cv());return t.copy=function(){return pl(t,JL()).constant(t.constant())},Qs.apply(t,arguments)}function JS(){var t=BS(Cv());return t.copy=function(){return pl(t,JS()).exponent(t.exponent())},Qs.apply(t,arguments)}function rse(){return JS.apply(null,arguments).exponent(.5)}const eh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:PS,scaleDiverging:XL,scaleDivergingLog:ZL,scaleDivergingPow:JS,scaleDivergingSqrt:rse,scaleDivergingSymlog:JL,scaleIdentity:IL,scaleImplicit:hE,scaleLinear:kL,scaleLog:PL,scaleOrdinal:OS,scalePoint:qre,scalePow:FS,scaleQuantile:ML,scaleQuantize:LL,scaleRadial:DL,scaleSequential:KL,scaleSequentialLog:WL,scaleSequentialPow:ZS,scaleSequentialQuantile:QL,scaleSequentialSqrt:nse,scaleSequentialSymlog:YL,scaleSqrt:Lae,scaleSymlog:RL,scaleThreshold:zL,scaleTime:ese,scaleUtc:tse,tickFormat:CL},Symbol.toStringTag,{value:"Module"}));var gl=t=>t.chartData,eA=te([gl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),bm=(t,e,n,r)=>r?eA(t):gl(t);function al(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if($t(e)&&$t(n))return!0}return!1}function pR(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function ez(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,a,s;if($t(n))a=n;else if(typeof n=="function")return;if($t(r))s=r;else if(typeof r=="function")return;var c=[a,s];if(al(c))return c}}function ase(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(al(r))return pR(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,c,d;if(a==="auto")e!=null&&(c=Math.min(...e));else if(je(a))c=a;else if(typeof a=="function")try{e!=null&&(c=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&HO.test(a)){var f=HO.exec(a);if(f==null||e==null)c=void 0;else{var h=+f[1];c=e[0]-h}}else c=e==null?void 0:e[0];if(s==="auto")e!=null&&(d=Math.max(...e));else if(je(s))d=s;else if(typeof s=="function")try{e!=null&&(d=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&GO.test(s)){var p=GO.exec(s);if(p==null||e==null)d=void 0;else{var g=+p[1];d=e[1]+g}}else d=e==null?void 0:e[1];var v=[c,d];if(al(v))return e==null?v:pR(v,e,n)}}}var Ed=1e9,ise={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},nA,Gt=!0,Ma="[DecimalError] ",sc=Ma+"Invalid argument: ",tA=Ma+"Exponent out of range: ",jd=Math.floor,Yl=Math.pow,sse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,na,Kn=1e7,Ut=7,tz=9007199254740991,s0=jd(tz/Ut),Se={};Se.absoluteValue=Se.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Se.comparedTo=Se.cmp=function(t){var e,n,r,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,a=t.d.length,e=0,n=r<a?r:a;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===a?0:r>a^s.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ut;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Se.dividedBy=Se.div=function(t){return Ps(this,new this.constructor(t))};Se.dividedToIntegerBy=Se.idiv=function(t){var e=this,n=e.constructor;return Pt(Ps(e,new n(t),0,1),n.precision)};Se.equals=Se.eq=function(t){return!this.cmp(t)};Se.exponent=function(){return In(this)};Se.greaterThan=Se.gt=function(t){return this.cmp(t)>0};Se.greaterThanOrEqualTo=Se.gte=function(t){return this.cmp(t)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(t){return this.cmp(t)<0};Se.lessThanOrEqualTo=Se.lte=function(t){return this.cmp(t)<1};Se.logarithm=Se.log=function(t){var e,n=this,r=n.constructor,a=r.precision,s=a+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(na))throw Error(Ma+"NaN");if(n.s<1)throw Error(Ma+(n.s?"NaN":"-Infinity"));return n.eq(na)?new r(0):(Gt=!1,e=Ps(zh(n,s),zh(t,s),s),Gt=!0,Pt(e,a))};Se.minus=Se.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?az(e,t):nz(e,(t.s=-t.s,t))};Se.modulo=Se.mod=function(t){var e,n=this,r=n.constructor,a=r.precision;if(t=new r(t),!t.s)throw Error(Ma+"NaN");return n.s?(Gt=!1,e=Ps(n,t,0,1).times(t),Gt=!0,n.minus(e)):Pt(new r(n),a)};Se.naturalExponential=Se.exp=function(){return rz(this)};Se.naturalLogarithm=Se.ln=function(){return zh(this)};Se.negated=Se.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Se.plus=Se.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?nz(e,t):az(e,(t.s=-t.s,t))};Se.precision=Se.sd=function(t){var e,n,r,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(sc+t);if(e=In(a)+1,r=a.d.length-1,n=r*Ut+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Se.squareRoot=Se.sqrt=function(){var t,e,n,r,a,s,c,d=this,f=d.constructor;if(d.s<1){if(!d.s)return new f(0);throw Error(Ma+"NaN")}for(t=In(d),Gt=!1,a=Math.sqrt(+d),a==0||a==1/0?(e=Di(d.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=jd((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new f(e)):r=new f(a.toString()),n=f.precision,a=c=n+3;;)if(s=r,r=s.plus(Ps(d,s,c+2)).times(.5),Di(s.d).slice(0,c)===(e=Di(r.d)).slice(0,c)){if(e=e.slice(c-3,c+1),a==c&&e=="4999"){if(Pt(s,n+1,0),s.times(s).eq(d)){r=s;break}}else if(e!="9999")break;c+=4}return Gt=!0,Pt(r,n)};Se.times=Se.mul=function(t){var e,n,r,a,s,c,d,f,h,p=this,g=p.constructor,v=p.d,w=(t=new g(t)).d;if(!p.s||!t.s)return new g(0);for(t.s*=p.s,n=p.e+t.e,f=v.length,h=w.length,f<h&&(s=v,v=w,w=s,c=f,f=h,h=c),s=[],c=f+h,r=c;r--;)s.push(0);for(r=h;--r>=0;){for(e=0,a=f+r;a>r;)d=s[a]+w[r]*v[a-r-1]+e,s[a--]=d%Kn|0,e=d/Kn|0;s[a]=(s[a]+e)%Kn|0}for(;!s[--c];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Gt?Pt(t,g.precision):t};Se.toDecimalPlaces=Se.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Wi(t,0,Ed),e===void 0?e=r.rounding:Wi(e,0,8),Pt(n,t+In(n)+1,e))};Se.toExponential=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=wc(r,!0):(Wi(t,0,Ed),e===void 0?e=a.rounding:Wi(e,0,8),r=Pt(new a(r),t+1,e),n=wc(r,!0,t+1)),n};Se.toFixed=function(t,e){var n,r,a=this,s=a.constructor;return t===void 0?wc(a):(Wi(t,0,Ed),e===void 0?e=s.rounding:Wi(e,0,8),r=Pt(new s(a),t+In(a)+1,e),n=wc(r.abs(),!1,t+In(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};Se.toInteger=Se.toint=function(){var t=this,e=t.constructor;return Pt(new e(t),In(t)+1,e.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(t){var e,n,r,a,s,c,d=this,f=d.constructor,h=12,p=+(t=new f(t));if(!t.s)return new f(na);if(d=new f(d),!d.s){if(t.s<1)throw Error(Ma+"Infinity");return d}if(d.eq(na))return d;if(r=f.precision,t.eq(na))return Pt(d,r);if(e=t.e,n=t.d.length-1,c=e>=n,s=d.s,c){if((n=p<0?-p:p)<=tz){for(a=new f(na),e=Math.ceil(r/Ut+4),Gt=!1;n%2&&(a=a.times(d),yR(a.d,e)),n=jd(n/2),n!==0;)d=d.times(d),yR(d.d,e);return Gt=!0,t.s<0?new f(na).div(a):Pt(a,r)}}else if(s<0)throw Error(Ma+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,d.s=1,Gt=!1,a=t.times(zh(d,r+h)),Gt=!0,a=rz(a),a.s=s,a};Se.toPrecision=function(t,e){var n,r,a=this,s=a.constructor;return t===void 0?(n=In(a),r=wc(a,n<=s.toExpNeg||n>=s.toExpPos)):(Wi(t,1,Ed),e===void 0?e=s.rounding:Wi(e,0,8),a=Pt(new s(a),t,e),n=In(a),r=wc(a,t<=n||n<=s.toExpNeg,t)),r};Se.toSignificantDigits=Se.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Wi(t,1,Ed),e===void 0?e=r.rounding:Wi(e,0,8)),Pt(new r(n),t,e)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=In(t),n=t.constructor;return wc(t,e<=n.toExpNeg||e>=n.toExpPos)};function nz(t,e){var n,r,a,s,c,d,f,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Gt?Pt(e,g):e;if(f=t.d,h=e.d,c=t.e,a=e.e,f=f.slice(),s=c-a,s){for(s<0?(r=f,s=-s,d=h.length):(r=h,a=c,d=f.length),c=Math.ceil(g/Ut),d=c>d?c+1:d+1,s>d&&(s=d,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(d=f.length,s=h.length,d-s<0&&(s=d,r=h,h=f,f=r),n=0;s;)n=(f[--s]=f[s]+h[s]+n)/Kn|0,f[s]%=Kn;for(n&&(f.unshift(n),++a),d=f.length;f[--d]==0;)f.pop();return e.d=f,e.e=a,Gt?Pt(e,g):e}function Wi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(sc+t)}function Di(t){var e,n,r,a=t.length-1,s="",c=t[0];if(a>0){for(s+=c,e=1;e<a;e++)r=t[e]+"",n=Ut-r.length,n&&(s+=Ro(n)),s+=r;c=t[e],r=c+"",n=Ut-r.length,n&&(s+=Ro(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var Ps=(function(){function t(r,a){var s,c=0,d=r.length;for(r=r.slice();d--;)s=r[d]*a+c,r[d]=s%Kn|0,c=s/Kn|0;return c&&r.unshift(c),r}function e(r,a,s,c){var d,f;if(s!=c)f=s>c?1:-1;else for(d=f=0;d<s;d++)if(r[d]!=a[d]){f=r[d]>a[d]?1:-1;break}return f}function n(r,a,s){for(var c=0;s--;)r[s]-=c,c=r[s]<a[s]?1:0,r[s]=c*Kn+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,c){var d,f,h,p,g,v,w,E,j,S,k,z,M,T,R,V,N,I,C=r.constructor,D=r.s==a.s?1:-1,O=r.d,U=a.d;if(!r.s)return new C(r);if(!a.s)throw Error(Ma+"Division by zero");for(f=r.e-a.e,N=U.length,R=O.length,w=new C(D),E=w.d=[],h=0;U[h]==(O[h]||0);)++h;if(U[h]>(O[h]||0)&&--f,s==null?z=s=C.precision:c?z=s+(In(r)-In(a))+1:z=s,z<0)return new C(0);if(z=z/Ut+2|0,h=0,N==1)for(p=0,U=U[0],z++;(h<R||p)&&z--;h++)M=p*Kn+(O[h]||0),E[h]=M/U|0,p=M%U|0;else{for(p=Kn/(U[0]+1)|0,p>1&&(U=t(U,p),O=t(O,p),N=U.length,R=O.length),T=N,j=O.slice(0,N),S=j.length;S<N;)j[S++]=0;I=U.slice(),I.unshift(0),V=U[0],U[1]>=Kn/2&&++V;do p=0,d=e(U,j,N,S),d<0?(k=j[0],N!=S&&(k=k*Kn+(j[1]||0)),p=k/V|0,p>1?(p>=Kn&&(p=Kn-1),g=t(U,p),v=g.length,S=j.length,d=e(g,j,v,S),d==1&&(p--,n(g,N<v?I:U,v))):(p==0&&(d=p=1),g=U.slice()),v=g.length,v<S&&g.unshift(0),n(j,g,S),d==-1&&(S=j.length,d=e(U,j,N,S),d<1&&(p++,n(j,N<S?I:U,S))),S=j.length):d===0&&(p++,j=[0]),E[h++]=p,d&&j[0]?j[S++]=O[T]||0:(j=[O[T]],S=1);while((T++<R||j[0]!==void 0)&&z--)}return E[0]||E.shift(),w.e=f,Pt(w,c?s+In(w)+1:s)}})();function rz(t,e){var n,r,a,s,c,d,f=0,h=0,p=t.constructor,g=p.precision;if(In(t)>16)throw Error(tA+In(t));if(!t.s)return new p(na);for(Gt=!1,d=g,c=new p(.03125);t.abs().gte(.1);)t=t.times(c),h+=5;for(r=Math.log(Yl(2,h))/Math.LN10*2+5|0,d+=r,n=a=s=new p(na),p.precision=d;;){if(a=Pt(a.times(t),d),n=n.times(++f),c=s.plus(Ps(a,n,d)),Di(c.d).slice(0,d)===Di(s.d).slice(0,d)){for(;h--;)s=Pt(s.times(s),d);return p.precision=g,e==null?(Gt=!0,Pt(s,g)):s}s=c}}function In(t){for(var e=t.e*Ut,n=t.d[0];n>=10;n/=10)e++;return e}function z1(t,e,n){if(e>t.LN10.sd())throw Gt=!0,n&&(t.precision=n),Error(Ma+"LN10 precision limit exceeded");return Pt(new t(t.LN10),e)}function Ro(t){for(var e="";t--;)e+="0";return e}function zh(t,e){var n,r,a,s,c,d,f,h,p,g=1,v=10,w=t,E=w.d,j=w.constructor,S=j.precision;if(w.s<1)throw Error(Ma+(w.s?"NaN":"-Infinity"));if(w.eq(na))return new j(0);if(e==null?(Gt=!1,h=S):h=e,w.eq(10))return e==null&&(Gt=!0),z1(j,h);if(h+=v,j.precision=h,n=Di(E),r=n.charAt(0),s=In(w),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)w=w.times(t),n=Di(w.d),r=n.charAt(0),g++;s=In(w),r>1?(w=new j("0."+n),s++):w=new j(r+"."+n.slice(1))}else return f=z1(j,h+2,S).times(s+""),w=zh(new j(r+"."+n.slice(1)),h-v).plus(f),j.precision=S,e==null?(Gt=!0,Pt(w,S)):w;for(d=c=w=Ps(w.minus(na),w.plus(na),h),p=Pt(w.times(w),h),a=3;;){if(c=Pt(c.times(p),h),f=d.plus(Ps(c,new j(a),h)),Di(f.d).slice(0,h)===Di(d.d).slice(0,h))return d=d.times(2),s!==0&&(d=d.plus(z1(j,h+2,S).times(s+""))),d=Ps(d,new j(g),h),j.precision=S,e==null?(Gt=!0,Pt(d,S)):d;d=f,a+=2}}function gR(t,e){var n,r,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(r,a),e){if(a-=r,n=n-r-1,t.e=jd(n/Ut),t.d=[],r=(n+1)%Ut,n<0&&(r+=Ut),r<a){for(r&&t.d.push(+e.slice(0,r)),a-=Ut;r<a;)t.d.push(+e.slice(r,r+=Ut));e=e.slice(r),r=Ut-e.length}else r-=a;for(;r--;)e+="0";if(t.d.push(+e),Gt&&(t.e>s0||t.e<-s0))throw Error(tA+n)}else t.s=0,t.e=0,t.d=[0];return t}function Pt(t,e,n){var r,a,s,c,d,f,h,p,g=t.d;for(c=1,s=g[0];s>=10;s/=10)c++;if(r=e-c,r<0)r+=Ut,a=e,h=g[p=0];else{if(p=Math.ceil((r+1)/Ut),s=g.length,p>=s)return t;for(h=s=g[p],c=1;s>=10;s/=10)c++;r%=Ut,a=r-Ut+c}if(n!==void 0&&(s=Yl(10,c-a-1),d=h/s%10|0,f=e<0||g[p+1]!==void 0||h%s,f=n<4?(d||f)&&(n==0||n==(t.s<0?3:2)):d>5||d==5&&(n==4||f||n==6&&(r>0?a>0?h/Yl(10,c-a):0:g[p-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return f?(s=In(t),g.length=1,e=e-s-1,g[0]=Yl(10,(Ut-e%Ut)%Ut),t.e=jd(-e/Ut)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=p,s=1,p--):(g.length=p+1,s=Yl(10,Ut-r),g[p]=a>0?(h/Yl(10,c-a)%Yl(10,a)|0)*s:0),f)for(;;)if(p==0){(g[0]+=s)==Kn&&(g[0]=1,++t.e);break}else{if(g[p]+=s,g[p]!=Kn)break;g[p--]=0,s=1}for(r=g.length;g[--r]===0;)g.pop();if(Gt&&(t.e>s0||t.e<-s0))throw Error(tA+In(t));return t}function az(t,e){var n,r,a,s,c,d,f,h,p,g,v=t.constructor,w=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),Gt?Pt(e,w):e;if(f=t.d,g=e.d,r=e.e,h=t.e,f=f.slice(),c=h-r,c){for(p=c<0,p?(n=f,c=-c,d=g.length):(n=g,r=h,d=f.length),a=Math.max(Math.ceil(w/Ut),d)+2,c>a&&(c=a,n.length=1),n.reverse(),a=c;a--;)n.push(0);n.reverse()}else{for(a=f.length,d=g.length,p=a<d,p&&(d=a),a=0;a<d;a++)if(f[a]!=g[a]){p=f[a]<g[a];break}c=0}for(p&&(n=f,f=g,g=n,e.s=-e.s),d=f.length,a=g.length-d;a>0;--a)f[d++]=0;for(a=g.length;a>c;){if(f[--a]<g[a]){for(s=a;s&&f[--s]===0;)f[s]=Kn-1;--f[s],f[a]+=Kn}f[a]-=g[a]}for(;f[--d]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(e.d=f,e.e=r,Gt?Pt(e,w):e):new v(0)}function wc(t,e,n){var r,a=In(t),s=Di(t.d),c=s.length;return e?(n&&(r=n-c)>0?s=s.charAt(0)+"."+s.slice(1)+Ro(r):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Ro(-a-1)+s,n&&(r=n-c)>0&&(s+=Ro(r))):a>=c?(s+=Ro(a+1-c),n&&(r=n-a-1)>0&&(s=s+"."+Ro(r))):((r=a+1)<c&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-c)>0&&(a+1===c&&(s+="."),s+=Ro(r))),t.s<0?"-"+s:s}function yR(t,e){if(t.length>e)return t.length=e,!0}function iz(t){var e,n,r;function a(s){var c=this;if(!(c instanceof a))return new a(s);if(c.constructor=a,s instanceof a){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(sc+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return gR(c,s.toString())}else if(typeof s!="string")throw Error(sc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,sse.test(s))gR(c,s);else throw Error(sc+s)}if(a.prototype=Se,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=iz,a.config=a.set=ose,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return a.config(t),a}function ose(t){if(!t||typeof t!="object")throw Error(Ma+"Object expected");var e,n,r,a=["precision",1,Ed,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((r=t[n=a[e]])!==void 0)if(jd(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(sc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(sc+n+": "+r);return this}var nA=iz(ise);na=new nA(1);const Et=nA;var lse=t=>t,sz={},oz=t=>t===sz,vR=t=>function e(){return arguments.length===0||arguments.length===1&&oz(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},lz=(t,e)=>t===1?e:vR(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=r.filter(c=>c!==sz).length;return s>=t?e(...r):lz(t-s,vR(function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];var h=r.map(p=>oz(p)?d.shift():p);return e(...h,...d)}))}),cse=t=>lz(t.length,t),yE=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},use=cse((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),dse=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return lse;var a=n.reverse(),s=a[0],c=a.slice(1);return function(){return c.reduce((d,f)=>f(d),s(...arguments))}},vE=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function cz(t){var e;return t===0?e=1:e=Math.floor(new Et(t).abs().log(10).toNumber())+1,e}function uz(t,e,n){for(var r=new Et(t),a=0,s=[];r.lt(e)&&a<1e5;)s.push(r.toNumber()),r=r.add(n),a++;return s}var dz=t=>{var[e,n]=t,[r,a]=[e,n];return e>n&&([r,a]=[n,e]),[r,a]},fz=(t,e,n)=>{if(t.lte(0))return new Et(0);var r=cz(t.toNumber()),a=new Et(10).pow(r),s=t.div(a),c=r!==1?.05:.1,d=new Et(Math.ceil(s.div(c).toNumber())).add(n).mul(c),f=d.mul(a);return e?new Et(f.toNumber()):new Et(Math.ceil(f.toNumber()))},fse=(t,e,n)=>{var r=new Et(1),a=new Et(t);if(!a.isint()&&n){var s=Math.abs(t);s<1?(r=new Et(10).pow(cz(t)-1),a=new Et(Math.floor(a.div(r).toNumber())).mul(r)):s>1&&(a=new Et(Math.floor(t)))}else t===0?a=new Et(Math.floor((e-1)/2)):n||(a=new Et(Math.floor(t)));var c=Math.floor((e-1)/2),d=dse(use(f=>a.add(new Et(f-c).mul(r)).toNumber()),yE);return d(0,e)},hz=function(e,n,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Et(0),tickMin:new Et(0),tickMax:new Et(0)};var c=fz(new Et(n).sub(e).div(r-1),a,s),d;e<=0&&n>=0?d=new Et(0):(d=new Et(e).add(n).div(2),d=d.sub(new Et(d).mod(c)));var f=Math.ceil(d.sub(e).div(c).toNumber()),h=Math.ceil(new Et(n).sub(d).div(c).toNumber()),p=f+h+1;return p>r?hz(e,n,r,a,s+1):(p<r&&(h=n>0?h+(r-p):h,f=n>0?f:f+(r-p)),{step:c,tickMin:d.sub(new Et(f).mul(c)),tickMax:d.add(new Et(h).mul(c))})},hse=function(e){var[n,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(a,2),[d,f]=dz([n,r]);if(d===-1/0||f===1/0){var h=f===1/0?[d,...yE(0,a-1).map(()=>1/0)]:[...yE(0,a-1).map(()=>-1/0),f];return n>r?vE(h):h}if(d===f)return fse(d,a,s);var{step:p,tickMin:g,tickMax:v}=hz(d,f,c,s,0),w=uz(g,v.add(new Et(.1).mul(p)),p);return n>r?vE(w):w},mse=function(e,n){var[r,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,d]=dz([r,a]);if(c===-1/0||d===1/0)return[r,a];if(c===d)return[c];var f=Math.max(n,2),h=fz(new Et(d).sub(c).div(f-1),s,0),p=[...uz(new Et(c),new Et(d),h),d];return s===!1&&(p=p.map(g=>Math.round(g))),r>a?vE(p):p},mz=t=>t.rootProps.maxBarSize,pse=t=>t.rootProps.barGap,pz=t=>t.rootProps.barCategoryGap,gse=t=>t.rootProps.barSize,wm=t=>t.rootProps.stackOffset,gz=t=>t.rootProps.reverseStackOrder,rA=t=>t.options.chartName,aA=t=>t.rootProps.syncId,yz=t=>t.rootProps.syncMethod,iA=t=>t.options.eventEmitter,yse=t=>t.rootProps.baseValue,pn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Es={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ea={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},kv=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},vse={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Es.angleAxisId,includeHidden:!1,name:void 0,reversed:Es.reversed,scale:Es.scale,tick:Es.tick,tickCount:void 0,ticks:void 0,type:Es.type,unit:void 0},xse={allowDataOverflow:ea.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ea.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ea.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ea.scale,tick:ea.tick,tickCount:ea.tickCount,ticks:void 0,type:ea.type,unit:void 0},bse={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Es.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Es.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Es.scale,tick:Es.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},wse={allowDataOverflow:ea.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ea.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ea.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ea.scale,tick:ea.tick,tickCount:ea.tickCount,ticks:void 0,type:"category",unit:void 0},sA=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?bse:vse,oA=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?wse:xse,Iv=t=>t.polarOptions,lA=te([Ws,Ys,Ln],pL),vz=te([Iv,lA],(t,e)=>{if(t!=null)return pr(t.innerRadius,e,0)}),xz=te([Iv,lA],(t,e)=>{if(t!=null)return pr(t.outerRadius,e,e*.8)}),_se=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},bz=te([Iv],_se);te([sA,bz],kv);var wz=te([lA,vz,xz],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});te([oA,wz],kv);var _z=te([Je,Iv,vz,xz,Ws,Ys],(t,e,n,r,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:c,cy:d,startAngle:f,endAngle:h}=e;return{cx:pr(c,a,a/2),cy:pr(d,s,s/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:h,clockWise:!1}}}),Yt=(t,e)=>e,_m=(t,e,n)=>n;function Ov(t){return t==null?void 0:t.id}function Ez(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=n,c=new Map;return t.forEach(d=>{var f,h=(f=d.data)!==null&&f!==void 0?f:r;if(!(h==null||h.length===0)){var p=Ov(d);h.forEach((g,v)=>{var w=s==null||a?v:String(jt(g,s,null)),E=jt(g,d.dataKey,0),j;c.has(w)?j=c.get(w):j={},Object.assign(j,{[p]:E}),c.set(w,j)})}}),Array.from(c.values())}function Pv(t){return t.stackId!=null&&t.dataKey!=null}var Rv=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Dv(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Ese(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Un=t=>{var e=Je(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Sd=t=>t.tooltip.settings.axisId;function xR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function o0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xR(Object(n),!0).forEach(function(r){jse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jse(t,e,n){return(e=Sse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sse(t){var e=Ase(t,"string");return typeof e=="symbol"?e:e+""}function Ase(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xE=[0,"auto"],qn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},jz=(t,e)=>t.cartesianAxis.xAxis[e],Xs=(t,e)=>{var n=jz(t,e);return n??qn},Hn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:xE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:mm},Sz=(t,e)=>t.cartesianAxis.yAxis[e],Zs=(t,e)=>{var n=Sz(t,e);return n??Hn},Nse={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},cA=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Nse},Jt=(t,e,n)=>{switch(e){case"xAxis":return Xs(t,n);case"yAxis":return Zs(t,n);case"zAxis":return cA(t,n);case"angleAxis":return sA(t,n);case"radiusAxis":return oA(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Tse=(t,e,n)=>{switch(e){case"xAxis":return Xs(t,n);case"yAxis":return Zs(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Em=(t,e,n)=>{switch(e){case"xAxis":return Xs(t,n);case"yAxis":return Zs(t,n);case"angleAxis":return sA(t,n);case"radiusAxis":return oA(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Az=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function uA(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var jm=t=>t.graphicalItems.cartesianItems,Cse=te([Yt,_m],uA),dA=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Sm=te([jm,Jt,Cse],dA,{memoizeOptions:{resultEqualityCheck:Dv}}),Nz=te([Sm],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Pv)),Tz=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),kse=te([Sm],Tz),fA=t=>t.map(e=>e.data).filter(Boolean).flat(1),Ise=te([Sm],fA,{memoizeOptions:{resultEqualityCheck:Dv}}),hA=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:a}=e;return t.length>0?t:n.slice(r,a+1)},mA=te([Ise,bm],hA),pA=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:jt(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(a=>({value:jt(a,r)}))):t.map(r=>({value:r})),Mv=te([mA,Jt,Sm],pA);function Cz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Zg(t){if(Hi(t)||t instanceof Date){var e=Number(t);if($t(e))return e}}function bR(t){if(Array.isArray(t)){var e=[Zg(t[0]),Zg(t[1])];return al(e)?e:void 0}var n=Zg(t);if(n!=null)return[n,n]}function Hs(t){return t.map(Zg).filter(WZ)}function Ose(t,e,n){return!n||typeof e!="number"||Ra(e)?[]:n.length?Hs(n.flatMap(r=>{var a=jt(t,r.dataKey),s,c;if(Array.isArray(a)?[s,c]=a:s=c=a,!(!$t(s)||!$t(c)))return[e-s,e+c]})):[]}var Vn=t=>{var e=Un(t),n=Sd(t);return Em(t,e,n)},Am=te([Vn],t=>t==null?void 0:t.dataKey),Pse=te([Nz,bm,Vn],Ez),kz=(t,e,n,r)=>{var a={},s=e.reduce((c,d)=>(d.stackId==null||(c[d.stackId]==null&&(c[d.stackId]=[]),c[d.stackId].push(d)),c),a);return Object.fromEntries(Object.entries(s).map(c=>{var[d,f]=c,h=r?[...f].reverse():f,p=h.map(Ov);return[d,{stackedData:hte(t,p,n),graphicalItems:h}]}))},Uh=te([Pse,Nz,wm,gz],kz),Iz=(t,e,n,r)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var c=yte(t,a,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},Rse=te([Jt],t=>t.allowDataOverflow),gA=t=>{var e;if(t==null||!("domain"in t))return xE;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Hs(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:xE},yA=te([Jt],gA),vA=te([yA,Rse],ez),Dse=te([Uh,gl,Yt,vA],Iz,{memoizeOptions:{resultEqualityCheck:Rv}}),Lv=t=>t.errorBars,Mse=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>Cz(n,r)),l0=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n.filter(Boolean);if(a.length!==0){var s=a.flat(),c=Math.min(...s),d=Math.max(...s);return[c,d]}},xA=(t,e,n,r,a)=>{var s,c;if(n.length>0&&t.forEach(d=>{n.forEach(f=>{var h,p,g=(h=r[f.id])===null||h===void 0?void 0:h.filter(k=>Cz(a,k)),v=jt(d,(p=e.dataKey)!==null&&p!==void 0?p:f.dataKey),w=Ose(d,v,g);if(w.length>=2){var E=Math.min(...w),j=Math.max(...w);(s==null||E<s)&&(s=E),(c==null||j>c)&&(c=j)}var S=bR(v);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),c=c==null?S[1]:Math.max(c,S[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(d=>{var f=bR(jt(d,e.dataKey));f!=null&&(s=s==null?f[0]:Math.min(s,f[0]),c=c==null?f[1]:Math.max(c,f[1]))}),$t(s)&&$t(c))return[s,c]},Lse=te([mA,Jt,kse,Lv,Yt],xA,{memoizeOptions:{resultEqualityCheck:Rv}});function zse(t){var{value:e}=t;if(Hi(e)||e instanceof Date)return e}var Use=(t,e,n)=>{var r=t.map(zse).filter(a=>a!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&G3(r))?xL(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},Oz=t=>t.referenceElements.dots,Ad=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Vse=te([Oz,Yt,_m],Ad),Pz=t=>t.referenceElements.areas,$se=te([Pz,Yt,_m],Ad),Rz=t=>t.referenceElements.lines,Bse=te([Rz,Yt,_m],Ad),Dz=(t,e)=>{var n=Hs(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Fse=te(Vse,Yt,Dz),Mz=(t,e)=>{var n=Hs(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},qse=te([$se,Yt],Mz);function Hse(t){var e;if(t.x!=null)return Hs([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Hs(n)}function Gse(t){var e;if(t.y!=null)return Hs([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Hs(n)}var Lz=(t,e)=>{var n=t.flatMap(r=>e==="xAxis"?Hse(r):Gse(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Kse=te([Bse,Yt],Lz),Wse=te(Fse,Kse,qse,(t,e,n)=>l0(t,n,e)),bA=(t,e,n,r,a,s,c,d)=>{if(n!=null)return n;var f=c==="vertical"&&d==="xAxis"||c==="horizontal"&&d==="yAxis",h=f?l0(r,s,a):l0(s,a);return ase(e,h,t.allowDataOverflow)},Yse=te([Jt,yA,vA,Dse,Lse,Wse,Je,Yt],bA,{memoizeOptions:{resultEqualityCheck:Rv}}),Qse=[0,1],wA=(t,e,n,r,a,s,c)=>{if(!((t==null||n==null||n.length===0)&&c===void 0)){var{dataKey:d,type:f}=t,h=ts(e,s);if(h&&d==null){var p;return xL(0,(p=n==null?void 0:n.length)!==null&&p!==void 0?p:0)}return f==="category"?Use(r,t,h):a==="expand"?Qse:c}},_A=te([Jt,Je,mA,Mv,wm,Yt,Yse],wA),zz=(t,e,n,r,a)=>{if(t!=null){var{scale:s,type:c}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":c==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var d="scale".concat(cm(s));return d in eh?d:"point"}}},Nd=te([Jt,Je,Az,rA,Yt],zz);function Xse(t){if(t!=null){if(t in eh)return eh[t]();var e="scale".concat(cm(t));if(e in eh)return eh[e]()}}function EA(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var a=Xse(e);if(a!=null){var s=a.domain(n).range(r);return lte(s),s}}}var jA=(t,e,n)=>{var r=gA(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&al(t))return hse(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&al(t))return mse(t,e.tickCount,e.allowDecimals)}},SA=te([_A,Em,Nd],jA),AA=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&al(e)&&Array.isArray(n)&&n.length>0){var a=e[0],s=n[0],c=e[1],d=n[n.length-1];return[Math.min(a,s),Math.max(c,d)]}return e},Zse=te([Jt,_A,SA,Yt],AA),Jse=te(Mv,Jt,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Hs(t.map(d=>d.value))).sort((d,f)=>d-f);if(r.length<2)return 1/0;var a=r[r.length-1]-r[0];if(a===0)return 1/0;for(var s=0;s<r.length-1;s++){var c=r[s+1]-r[s];n=Math.min(n,c)}return n/a}}),Uz=te(Jse,Je,pz,Ln,(t,e,n,r)=>r,(t,e,n,r,a)=>{if(!$t(t))return 0;var s=e==="vertical"?r.height:r.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var c=pr(n,t*s),d=t*s/2;return d-c-(d-c)/s*c}return 0}),eoe=(t,e)=>{var n=Xs(t,e);return n==null||typeof n.padding!="string"?0:Uz(t,"xAxis",e,n.padding)},toe=(t,e)=>{var n=Zs(t,e);return n==null||typeof n.padding!="string"?0:Uz(t,"yAxis",e,n.padding)},noe=te(Xs,eoe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((n=a.left)!==null&&n!==void 0?n:0)+e,right:((r=a.right)!==null&&r!==void 0?r:0)+e}}),roe=te(Zs,toe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((n=a.top)!==null&&n!==void 0?n:0)+e,bottom:((r=a.bottom)!==null&&r!==void 0?r:0)+e}}),aoe=te([Ln,noe,vv,yv,(t,e,n)=>n],(t,e,n,r,a)=>{var{padding:s}=r;return a?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),ioe=te([Ln,Je,roe,vv,yv,(t,e,n)=>n],(t,e,n,r,a,s)=>{var{padding:c}=a;return s?[r.height-c.bottom,c.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Nm=(t,e,n,r)=>{var a;switch(e){case"xAxis":return aoe(t,n,r);case"yAxis":return ioe(t,n,r);case"zAxis":return(a=cA(t,n))===null||a===void 0?void 0:a.range;case"angleAxis":return bz(t);case"radiusAxis":return wz(t,n);default:return}},Vz=te([Jt,Nm],kv),Td=te([Jt,Nd,Zse,Vz],EA);te([Sm,Lv,Yt],Mse);function $z(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var zv=(t,e)=>e,Uv=(t,e,n)=>n,soe=te(pv,zv,Uv,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort($z)),ooe=te(gv,zv,Uv,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort($z)),Bz=(t,e)=>({width:t.width,height:e.height}),loe=(t,e)=>{var n=typeof e.width=="number"?e.width:mm;return{width:n,height:t.height}},Fz=te(Ln,Xs,Bz),coe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},uoe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},doe=te(Ys,Ln,soe,zv,Uv,(t,e,n,r,a)=>{var s={},c;return n.forEach(d=>{var f=Bz(e,d);c==null&&(c=coe(e,r,t));var h=r==="top"&&!a||r==="bottom"&&a;s[d.id]=c-Number(h)*f.height,c+=(h?-1:1)*f.height}),s}),foe=te(Ws,Ln,ooe,zv,Uv,(t,e,n,r,a)=>{var s={},c;return n.forEach(d=>{var f=loe(e,d);c==null&&(c=uoe(e,r,t));var h=r==="left"&&!a||r==="right"&&a;s[d.id]=c-Number(h)*f.width,c+=(h?-1:1)*f.width}),s}),hoe=(t,e)=>{var n=Xs(t,e);if(n!=null)return doe(t,n.orientation,n.mirror)},moe=te([Ln,Xs,hoe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var a=n==null?void 0:n[r];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),poe=(t,e)=>{var n=Zs(t,e);if(n!=null)return foe(t,n.orientation,n.mirror)},goe=te([Ln,Zs,poe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var a=n==null?void 0:n[r];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),qz=te(Ln,Zs,(t,e)=>{var n=typeof e.width=="number"?e.width:mm;return{width:n,height:t.height}}),wR=(t,e,n)=>{switch(e){case"xAxis":return Fz(t,n).width;case"yAxis":return qz(t,n).height;default:return}},Hz=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:a,type:s,dataKey:c}=n,d=ts(t,r),f=e.map(h=>h.value);if(c&&d&&s==="category"&&a&&G3(f))return f}},NA=te([Je,Mv,Jt,Yt],Hz),Gz=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:a,scale:s}=n,c=ts(t,r);if(c&&(a==="number"||s!=="auto"))return e.map(d=>d.value)}},TA=te([Je,Mv,Em,Yt],Gz),_R=te([Je,Tse,Nd,Td,NA,TA,Nm,SA,Yt],(t,e,n,r,a,s,c,d,f)=>{if(e!=null){var h=ts(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:s,duplicateDomain:a,isCategorical:h,niceTicks:d,range:c,realScaleType:n,scale:r}}}),yoe=(t,e,n,r,a,s,c,d,f)=>{if(!(e==null||r==null)){var h=ts(t,f),{type:p,ticks:g,tickCount:v}=e,w=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,E=p==="category"&&r.bandwidth?r.bandwidth()/w:0;E=f==="angleAxis"&&s!=null&&s.length>=2?Wn(s[0]-s[1])*2*E:E;var j=g||a;if(j){var S=j.map((k,z)=>{var M=c?c.indexOf(k):k;return{index:z,coordinate:r(M)+E,value:k,offset:E}});return S.filter(k=>$t(k.coordinate))}return h&&d?d.map((k,z)=>({coordinate:r(k)+E,value:k,index:z,offset:E})).filter(k=>$t(k.coordinate)):r.ticks?r.ticks(v).map(k=>({coordinate:r(k)+E,value:k,offset:E})):r.domain().map((k,z)=>({coordinate:r(k)+E,value:c?c[k]:k,index:z,offset:E}))}},Kz=te([Je,Em,Nd,Td,SA,Nm,NA,TA,Yt],yoe),voe=(t,e,n,r,a,s,c)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var d=ts(t,c),{tickCount:f}=e,h=0;return h=c==="angleAxis"&&(r==null?void 0:r.length)>=2?Wn(r[0]-r[1])*2*h:h,d&&s?s.map((p,g)=>({coordinate:n(p)+h,value:p,index:g,offset:h})):n.ticks?n.ticks(f).map(p=>({coordinate:n(p)+h,value:p,offset:h})):n.domain().map((p,g)=>({coordinate:n(p)+h,value:a?a[p]:p,index:g,offset:h}))}},Yi=te([Je,Em,Td,Nm,NA,TA,Yt],voe),Qi=te(Jt,Td,(t,e)=>{if(!(t==null||e==null))return o0(o0({},t),{},{scale:e})}),xoe=te([Jt,Nd,_A,Vz],EA);te((t,e,n)=>cA(t,n),xoe,(t,e)=>{if(!(t==null||e==null))return o0(o0({},t),{},{scale:e})});var boe=te([Je,pv,gv],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Wz=t=>t.options.defaultTooltipEventType,Yz=t=>t.options.validateTooltipEventTypes;function Qz(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function CA(t,e){var n=Wz(t),r=Yz(t);return Qz(e,n,r)}function woe(t){return Ne(e=>CA(e,t))}var Xz=(t,e)=>{var n,r=Number(e);if(!(Ra(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},_oe=t=>t.tooltip.settings,Vo={active:!1,index:null,dataKey:void 0,coordinate:void 0},Eoe={itemInteraction:{click:Vo,hover:Vo},axisInteraction:{click:Vo,hover:Vo},keyboardInteraction:Vo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Zz=qr({name:"tooltip",initialState:Eoe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Ht()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,a=ii(t).tooltipItemPayloads.indexOf(n);a>-1&&(t.tooltipItemPayloads[a]=r)},prepare:Ht()},removeTooltipEntrySettings:{reducer(t,e){var n=ii(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Ht()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:joe,replaceTooltipEntrySettings:Soe,removeTooltipEntrySettings:Aoe,setTooltipSettingsState:Noe,setActiveMouseOverItemIndex:Jz,mouseLeaveItem:Toe,mouseLeaveChart:eU,setActiveClickItemIndex:Coe,setMouseOverAxisIndex:tU,setMouseClickAxisIndex:koe,setSyncInteraction:bE,setKeyboardInteraction:wE}=Zz.actions,Ioe=Zz.reducer;function ER(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Og(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ER(Object(n),!0).forEach(function(r){Ooe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ooe(t,e,n){return(e=Poe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Poe(t){var e=Roe(t,"string");return typeof e=="symbol"?e:e+""}function Roe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Doe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Moe(t){return t.index!=null}var nU=(t,e,n,r)=>{if(e==null)return Vo;var a=Doe(t,e,n);if(a==null)return Vo;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(Moe(a)){if(s)return Og(Og({},a),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Og(Og({},Vo),{},{coordinate:a.coordinate})};function Loe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function zoe(t,e){var n=Loe(t),r=e[0],a=e[1];if(n===void 0)return!1;var s=Math.min(r,a),c=Math.max(r,a);return n>=s&&n<=c}function Uoe(t,e,n){if(n==null||e==null)return!0;var r=jt(t,e);return r==null||!al(n)?!0:zoe(r,n)}var kA=(t,e,n,r)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!$t(s))return a;var c=0,d=1/0;e.length>0&&(d=e.length-1);var f=Math.max(c,Math.min(s,d)),h=e[f];return h==null||Uoe(h,n,r)?String(f):null},rU=(t,e,n,r,a,s,c,d)=>{if(!(s==null||d==null)){var f=c[0],h=f==null?void 0:d(f.positions,s);if(h!=null)return h;var p=a==null?void 0:a[Number(s)];if(p)switch(n){case"horizontal":return{x:p.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:p.coordinate}}}},aU=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;return n==="hover"?a=t.itemInteraction.hover.dataKey:a=t.itemInteraction.click.dataKey,a==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var c;return((c=s.settings)===null||c===void 0?void 0:c.dataKey)===a})},Tm=t=>t.options.tooltipPayloadSearcher,Cd=t=>t.tooltip;function jR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function SR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jR(Object(n),!0).forEach(function(r){Voe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Voe(t,e,n){return(e=$oe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $oe(t){var e=Boe(t,"string");return typeof e=="symbol"?e:e+""}function Boe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Foe(t,e){return t??e}var iU=(t,e,n,r,a,s,c)=>{if(!(e==null||s==null)){var{chartData:d,computedData:f,dataStartIndex:h,dataEndIndex:p}=n,g=[];return t.reduce((v,w)=>{var E,{dataDefinedOnItem:j,settings:S}=w,k=Foe(j,d),z=Array.isArray(k)?U5(k,h,p):k,M=(E=S==null?void 0:S.dataKey)!==null&&E!==void 0?E:r,T=S==null?void 0:S.nameKey,R;if(r&&Array.isArray(z)&&!Array.isArray(z[0])&&c==="axis"?R=K3(z,r,a):R=s(z,e,f,T),Array.isArray(R))R.forEach(N=>{var I=SR(SR({},S),{},{name:N.name,unit:N.unit,color:void 0,fill:void 0});v.push(KO({tooltipEntrySettings:I,dataKey:N.dataKey,payload:N.payload,value:jt(N.payload,N.dataKey),name:N.name}))});else{var V;v.push(KO({tooltipEntrySettings:S,dataKey:M,payload:R,value:jt(R,M),name:(V=jt(R,T))!==null&&V!==void 0?V:S==null?void 0:S.name}))}return v},g)}},IA=te([Vn,Je,Az,rA,Un],zz),qoe=te([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Hoe=te([Un,Sd],uA),Cm=te([qoe,Vn,Hoe],dA,{memoizeOptions:{resultEqualityCheck:Dv}}),Goe=te([Cm],t=>t.filter(Pv)),Koe=te([Cm],fA,{memoizeOptions:{resultEqualityCheck:Dv}}),kd=te([Koe,gl],hA),Woe=te([Goe,gl,Vn],Ez),OA=te([kd,Vn,Cm],pA),sU=te([Vn],gA),Yoe=te([Vn],t=>t.allowDataOverflow),oU=te([sU,Yoe],ez),Qoe=te([Cm],t=>t.filter(Pv)),Xoe=te([Woe,Qoe,wm,gz],kz),Zoe=te([Xoe,gl,Un,oU],Iz),Joe=te([Cm],Tz),ele=te([kd,Vn,Joe,Lv,Un],xA,{memoizeOptions:{resultEqualityCheck:Rv}}),tle=te([Oz,Un,Sd],Ad),nle=te([tle,Un],Dz),rle=te([Pz,Un,Sd],Ad),ale=te([rle,Un],Mz),ile=te([Rz,Un,Sd],Ad),sle=te([ile,Un],Lz),ole=te([nle,sle,ale],l0),lle=te([Vn,sU,oU,Zoe,ele,ole,Je,Un],bA),km=te([Vn,Je,kd,OA,wm,Un,lle],wA),cle=te([km,Vn,IA],jA),ule=te([Vn,km,cle,Un],AA),lU=t=>{var e=Un(t),n=Sd(t),r=!1;return Nm(t,e,n,r)},cU=te([Vn,lU],kv),uU=te([Vn,IA,ule,cU],EA),dle=te([Je,OA,Vn,Un],Hz),fle=te([Je,OA,Vn,Un],Gz),hle=(t,e,n,r,a,s,c,d)=>{if(e){var{type:f}=e,h=ts(t,d);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=f==="category"&&r.bandwidth?r.bandwidth()/p:0;return g=d==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Wn(a[0]-a[1])*2*g:g,h&&c?c.map((v,w)=>({coordinate:r(v)+g,value:v,index:w,offset:g})):r.domain().map((v,w)=>({coordinate:r(v)+g,value:s?s[v]:v,index:w,offset:g}))}}},Js=te([Je,Vn,IA,uU,lU,dle,fle,Un],hle),PA=te([Wz,Yz,_oe],(t,e,n)=>Qz(n.shared,t,e)),dU=t=>t.tooltip.settings.trigger,RA=t=>t.tooltip.settings.defaultIndex,Vv=te([Cd,PA,dU,RA],nU),il=te([Vv,kd,Am,km],kA),fU=te([Js,il],Xz),hU=te([Vv],t=>{if(t)return t.dataKey}),mU=te([Cd,PA,dU,RA],aU),mle=te([Ws,Ys,Je,Ln,Js,RA,mU,Tm],rU),ple=te([Vv,mle],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),gle=te([Vv],t=>t.active),yle=te([mU,il,gl,Am,fU,Tm,PA],iU),vle=te([yle],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function AR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function NR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AR(Object(n),!0).forEach(function(r){xle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xle(t,e,n){return(e=ble(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ble(t){var e=wle(t,"string");return typeof e=="symbol"?e:e+""}function wle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _le=()=>Ne(Vn),Ele=()=>{var t=_le(),e=Ne(Js),n=Ne(uU);return rl(!t||!n?void 0:NR(NR({},t),{},{scale:n}),e)};function TR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TR(Object(n),!0).forEach(function(r){jle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jle(t,e,n){return(e=Sle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sle(t){var e=Ale(t,"string");return typeof e=="symbol"?e:e+""}function Ale(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nle=(t,e,n,r)=>{var a=e.find(s=>s&&s.index===n);if(a){if(t==="horizontal")return{x:a.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:a.coordinate}}return{x:0,y:0}},Tle=(t,e,n,r)=>{var a=e.find(h=>h&&h.index===n);if(a){if(t==="centric"){var s=a.coordinate,{radius:c}=r;return bu(bu(bu({},r),kn(r.cx,r.cy,c,s)),{},{angle:s,radius:c})}var d=a.coordinate,{angle:f}=r;return bu(bu(bu({},r),kn(r.cx,r.cy,d,f)),{},{angle:f,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Cle(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var pU=(t,e,n,r,a)=>{var s,c=-1,d=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(d<=1||t==null)return 0;if(r==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var f=0;f<d;f++){var h=f>0?n[f-1].coordinate:n[d-1].coordinate,p=n[f].coordinate,g=f>=d-1?n[0].coordinate:n[f+1].coordinate,v=void 0;if(Wn(p-h)!==Wn(g-p)){var w=[];if(Wn(g-p)===Wn(a[1]-a[0])){v=g;var E=p+a[1]-a[0];w[0]=Math.min(E,(E+h)/2),w[1]=Math.max(E,(E+h)/2)}else{v=h;var j=g+a[1]-a[0];w[0]=Math.min(p,(j+p)/2),w[1]=Math.max(p,(j+p)/2)}var S=[Math.min(p,(v+p)/2),Math.max(p,(v+p)/2)];if(t>S[0]&&t<=S[1]||t>=w[0]&&t<=w[1]){({index:c}=n[f]);break}}else{var k=Math.min(h,g),z=Math.max(h,g);if(t>(k+p)/2&&t<=(z+p)/2){({index:c}=n[f]);break}}}else if(e){for(var M=0;M<d;M++)if(M===0&&t<=(e[M].coordinate+e[M+1].coordinate)/2||M>0&&M<d-1&&t>(e[M].coordinate+e[M-1].coordinate)/2&&t<=(e[M].coordinate+e[M+1].coordinate)/2||M===d-1&&t>(e[M].coordinate+e[M-1].coordinate)/2){({index:c}=e[M]);break}}return c},gU=()=>Ne(rA),DA=(t,e)=>e,yU=(t,e,n)=>n,MA=(t,e,n,r)=>r,kle=te(Js,t=>sv(t,e=>e.coordinate)),LA=te([Cd,DA,yU,MA],nU),zA=te([LA,kd,Am,km],kA),Ile=(t,e,n)=>{if(e!=null){var r=Cd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},vU=te([Cd,DA,yU,MA],aU),c0=te([Ws,Ys,Je,Ln,Js,MA,vU,Tm],rU),Ole=te([LA,c0],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),xU=te([Js,zA],Xz),Ple=te([vU,zA,gl,Am,xU,Tm,DA],iU),Rle=te([LA,zA],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),Dle=(t,e,n,r,a,s,c)=>{if(!(!t||!n||!r||!a)&&Cle(t,c)){var d=vte(t,e),f=pU(d,s,a,n,r),h=Nle(e,a,f,t);return{activeIndex:String(f),activeCoordinate:h}}},Mle=(t,e,n,r,a,s,c)=>{if(!(!t||!r||!a||!s||!n)){var d=bre(t,n);if(d){var f=xte(d,e),h=pU(f,c,s,r,a),p=Tle(e,s,h,d);return{activeIndex:String(h),activeCoordinate:p}}}},Lle=(t,e,n,r,a,s,c,d)=>{if(!(!t||!e||!r||!a||!s))return e==="horizontal"||e==="vertical"?Dle(t,e,r,a,s,c,d):Mle(t,e,n,r,a,s,c)},zle=te(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElementId:r.elementId}}),Ule=te(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(pn)),n=Array.from(new Set(e));return n.sort((r,a)=>r-a)},{memoizeOptions:{resultEqualityCheck:Ese}});function CR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function kR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CR(Object(n),!0).forEach(function(r){Vle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vle(t,e,n){return(e=$le(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $le(t){var e=Ble(t,"string");return typeof e=="symbol"?e:e+""}function Ble(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fle={},qle={zIndexMap:Object.values(pn).reduce((t,e)=>kR(kR({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Fle)},Hle=new Set(Object.values(pn));function Gle(t){return Hle.has(t)}var bU=qr({name:"zIndex",initialState:qle,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Ht()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Gle(n)&&delete t.zIndexMap[n])},prepare:Ht()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:r,isPanorama:a}=e.payload;t.zIndexMap[n]?a?t.zIndexMap[n].panoramaElementId=r:t.zIndexMap[n].elementId=r:t.zIndexMap[n]={consumers:0,elementId:a?void 0:r,panoramaElementId:a?r:void 0}},prepare:Ht()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:Ht()}}}),{registerZIndexPortal:Kle,unregisterZIndexPortal:Wle,registerZIndexPortalId:Yle,unregisterZIndexPortalId:Qle}=bU.actions,Xle=bU.reducer;function Cr(t){var{zIndex:e,children:n}=t,r=Qte(),a=r&&e!==void 0&&e!==0,s=Qn(),c=Wt();b.useLayoutEffect(()=>a?(c(Kle({zIndex:e})),()=>{c(Wle({zIndex:e}))}):um,[c,e,a]);var d=Ne(h=>zle(h,e,s));if(!a)return n;if(!d)return null;var f=document.getElementById(d);return f?m4.createPortal(n,f):null}function _E(){return _E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_E.apply(null,arguments)}function IR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Pg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(n),!0).forEach(function(r){Zle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zle(t,e,n){return(e=Jle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jle(t){var e=ece(t,"string");return typeof e=="symbol"?e:e+""}function ece(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tce(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return b.isValidElement(e)?b.cloneElement(e,r):b.createElement(n,r)}function nce(t){var e,{coordinate:n,payload:r,index:a,offset:s,tooltipAxisBandSize:c,layout:d,cursor:f,tooltipEventType:h,chartName:p}=t,g=n,v=r,w=a;if(!f||!g||p!=="ScatterChart"&&h!=="axis")return null;var E,j,S;if(p==="ScatterChart")E=g,j=Mne,S=pn.cursorLine;else if(p==="BarChart")E=Lne(d,g,s,c),j=mL,S=pn.cursorRectangle;else if(d==="radial"&&Q3(g)){var{cx:k,cy:z,radius:M,startAngle:T,endAngle:R}=gL(g);E={cx:k,cy:z,startAngle:T,endAngle:R,innerRadius:M,outerRadius:M},j=vL,S=pn.cursorLine}else E={points:jre(d,g,s)},j=Bu,S=pn.cursorLine;var V=typeof f=="object"&&"className"in f?f.className:void 0,N=Pg(Pg(Pg(Pg({stroke:"#ccc",pointerEvents:"none"},s),E),yc(f)),{},{payload:v,payloadIndex:w,className:dt("recharts-tooltip-cursor",V)});return b.createElement(Cr,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:S},b.createElement(tce,{cursor:f,cursorComp:j,cursorProps:N}))}function rce(t){var e=Ele(),n=Q5(),r=Cc(),a=gU();return e==null||n==null||r==null||a==null?null:b.createElement(nce,_E({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:a}))}var wU=b.createContext(null),ace=()=>b.useContext(wU),U1={exports:{}},OR;function ice(){return OR||(OR=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function s(f,h,p,g,v){if(typeof p!="function")throw new TypeError("The listener must be a function");var w=new a(p,g||f,v),E=n?n+h:h;return f._events[E]?f._events[E].fn?f._events[E]=[f._events[E],w]:f._events[E].push(w):(f._events[E]=w,f._eventsCount++),f}function c(f,h){--f._eventsCount===0?f._events=new r:delete f._events[h]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)e.call(p,g)&&h.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},d.prototype.listeners=function(h){var p=n?n+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,w=g.length,E=new Array(w);v<w;v++)E[v]=g[v].fn;return E},d.prototype.listenerCount=function(h){var p=n?n+h:h,g=this._events[p];return g?g.fn?1:g.length:0},d.prototype.emit=function(h,p,g,v,w,E){var j=n?n+h:h;if(!this._events[j])return!1;var S=this._events[j],k=arguments.length,z,M;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),k){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,v),!0;case 5:return S.fn.call(S.context,p,g,v,w),!0;case 6:return S.fn.call(S.context,p,g,v,w,E),!0}for(M=1,z=new Array(k-1);M<k;M++)z[M-1]=arguments[M];S.fn.apply(S.context,z)}else{var T=S.length,R;for(M=0;M<T;M++)switch(S[M].once&&this.removeListener(h,S[M].fn,void 0,!0),k){case 1:S[M].fn.call(S[M].context);break;case 2:S[M].fn.call(S[M].context,p);break;case 3:S[M].fn.call(S[M].context,p,g);break;case 4:S[M].fn.call(S[M].context,p,g,v);break;default:if(!z)for(R=1,z=new Array(k-1);R<k;R++)z[R-1]=arguments[R];S[M].fn.apply(S[M].context,z)}}return!0},d.prototype.on=function(h,p,g){return s(this,h,p,g,!1)},d.prototype.once=function(h,p,g){return s(this,h,p,g,!0)},d.prototype.removeListener=function(h,p,g,v){var w=n?n+h:h;if(!this._events[w])return this;if(!p)return c(this,w),this;var E=this._events[w];if(E.fn)E.fn===p&&(!v||E.once)&&(!g||E.context===g)&&c(this,w);else{for(var j=0,S=[],k=E.length;j<k;j++)(E[j].fn!==p||v&&!E[j].once||g&&E[j].context!==g)&&S.push(E[j]);S.length?this._events[w]=S.length===1?S[0]:S:c(this,w)}return this},d.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&c(this,p)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,t.exports=d})(U1)),U1.exports}var sce=ice();const oce=Xi(sce);var Vh=new oce,EE="recharts.syncEvent.tooltip",PR="recharts.syncEvent.brush";function $v(t,e){if(e){var n=Number.parseInt(e,10);if(!Ra(n))return t==null?void 0:t[n]}}var lce={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},_U=qr({name:"options",initialState:lce,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),cce=_U.reducer,{createEventEmitter:uce}=_U.actions;function dce(t){return t.tooltip.syncInteraction}var fce={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},EU=qr({name:"chartData",initialState:fce,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:RR,setDataStartEndIndexes:hce,setComputedData:Jye}=EU.actions,mce=EU.reducer,pce=["x","y"];function DR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function wu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DR(Object(n),!0).forEach(function(r){gce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gce(t,e,n){return(e=yce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yce(t){var e=vce(t,"string");return typeof e=="symbol"?e:e+""}function vce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xce(t,e){if(t==null)return{};var n,r,a=bce(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function bce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function wce(){var t=Ne(aA),e=Ne(iA),n=Wt(),r=Ne(yz),a=Ne(Js),s=Cc(),c=xv(),d=Ne(f=>f.rootProps.className);b.useEffect(()=>{if(t==null)return um;var f=(h,p,g)=>{if(e!==g&&t===h){if(r==="index"){var v;if(c&&p!==null&&p!==void 0&&(v=p.payload)!==null&&v!==void 0&&v.coordinate&&p.payload.sourceViewBox){var w=p.payload.coordinate,{x:E,y:j}=w,S=xce(w,pce),{x:k,y:z,width:M,height:T}=p.payload.sourceViewBox,R=wu(wu({},S),{},{x:c.x+(M?(E-k)/M:0)*c.width,y:c.y+(T?(j-z)/T:0)*c.height});n(wu(wu({},p),{},{payload:wu(wu({},p.payload),{},{coordinate:R})}))}else n(p);return}if(a!=null){var V;if(typeof r=="function"){var N={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},I=r(a,N);V=a[I]}else r==="value"&&(V=a.find(Y=>String(Y.value)===p.payload.label));var{coordinate:C}=p.payload;if(V==null||p.payload.active===!1||C==null||c==null){n(bE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:D,y:O}=C,U=Math.min(D,c.x+c.width),$=Math.min(O,c.y+c.height),Z={x:s==="horizontal"?V.coordinate:U,y:s==="horizontal"?$:V.coordinate},he=bE({active:p.payload.active,coordinate:Z,dataKey:p.payload.dataKey,index:String(V.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox});n(he)}}};return Vh.on(EE,f),()=>{Vh.off(EE,f)}},[d,n,e,t,r,a,s,c])}function _ce(){var t=Ne(aA),e=Ne(iA),n=Wt();b.useEffect(()=>{if(t==null)return um;var r=(a,s,c)=>{e!==c&&t===a&&n(hce(s))};return Vh.on(PR,r),()=>{Vh.off(PR,r)}},[n,e,t])}function Ece(){var t=Wt();b.useEffect(()=>{t(uce())},[t]),wce(),_ce()}function jce(t,e,n,r,a,s){var c=Ne(w=>Ile(w,t,e)),d=Ne(iA),f=Ne(aA),h=Ne(yz),p=Ne(dce),g=p==null?void 0:p.active,v=xv();b.useEffect(()=>{if(!g&&f!=null&&d!=null){var w=bE({active:s,coordinate:n,dataKey:c,index:a,label:typeof r=="number"?String(r):r,sourceViewBox:v});Vh.emit(EE,f,w,d)}},[g,n,c,a,r,d,f,h,s,v])}function MR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function LR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MR(Object(n),!0).forEach(function(r){Sce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sce(t,e,n){return(e=Ace(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ace(t){var e=Nce(t,"string");return typeof e=="symbol"?e:e+""}function Nce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tce(t){return t.dataKey}function Cce(t,e){return b.isValidElement(t)?b.cloneElement(t,e):typeof t=="function"?b.createElement(t,e):b.createElement(mne,e)}var zR=[],kce={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!hl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ku(t){var e,n,r=On(t,kce),{active:a,allowEscapeViewBox:s,animationDuration:c,animationEasing:d,content:f,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:v,position:w,reverseDirection:E,useTranslate3d:j,wrapperStyle:S,cursor:k,shared:z,trigger:M,defaultIndex:T,portal:R,axisId:V}=r,N=Wt(),I=typeof T=="number"?String(T):T;b.useEffect(()=>{N(Noe({shared:z,trigger:M,axisId:V,active:a,defaultIndex:I}))},[N,z,M,V,a,I]);var C=xv(),D=cL(),O=woe(z),{activeIndex:U,isActive:$}=(e=Ne(Pe=>Rle(Pe,O,M,I)))!==null&&e!==void 0?e:{},Z=Ne(Pe=>Ple(Pe,O,M,I)),he=Ne(Pe=>xU(Pe,O,M,I)),Y=Ne(Pe=>Ole(Pe,O,M,I)),ie=Z,H=ace(),K=(n=a??$)!==null&&n!==void 0?n:!1,[le,q]=ree([ie,K]),ae=O==="axis"?he:void 0;jce(O,M,Y,ae,U,K);var ge=R??H;if(ge==null||C==null||O==null)return null;var ye=ie??zR;K||(ye=zR),h&&ye.length&&(ye=CJ(ye.filter(Pe=>Pe.value!=null&&(Pe.hide!==!0||r.includeHidden)),v,Tce));var Te=ye.length>0,Oe=b.createElement(wne,{allowEscapeViewBox:s,animationDuration:c,animationEasing:d,isAnimationActive:p,active:K,coordinate:Y,hasPayload:Te,offset:g,position:w,reverseDirection:E,useTranslate3d:j,viewBox:C,wrapperStyle:S,lastBoundingBox:le,innerRef:q,hasPortalFromProps:!!R},Cce(f,LR(LR({},r),{},{payload:ye,label:ae,active:K,activeIndex:U,coordinate:Y,accessibilityLayer:D})));return b.createElement(b.Fragment,null,m4.createPortal(Oe,ge),K&&b.createElement(rce,{cursor:k,tooltipEventType:O,coordinate:Y,payload:ye,index:U}))}var Im=t=>null;Im.displayName="Cell";function Ice(t,e,n){return(e=Oce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oce(t){var e=Pce(t,"string");return typeof e=="symbol"?e:e+""}function Pce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Rce{constructor(e){Ice(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function UR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Dce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UR(Object(n),!0).forEach(function(r){Mce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mce(t,e,n){return(e=Lce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lce(t){var e=zce(t,"string");return typeof e=="symbol"?e:e+""}function zce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uce={cacheSize:2e3,enableCache:!0},jU=Dce({},Uce),VR=new Rce(jU.cacheSize),Vce={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$R="recharts_measurement_span";function $ce(t,e){var n=e.fontSize||"",r=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",c=e.letterSpacing||"",d=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(a,"|").concat(s,"|").concat(c,"|").concat(d)}var BR=(t,e)=>{try{var n=document.getElementById($R);n||(n=document.createElement("span"),n.setAttribute("id",$R),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Vce,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},fh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||hl.isSsr)return{width:0,height:0};if(!jU.enableCache)return BR(e,n);var r=$ce(e,n),a=VR.get(r);if(a)return a;var s=BR(e,n);return VR.set(r,s),s},FR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bce=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Fce=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,SU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},qce=Object.keys(SU),Ou="NaN";function Hce(t,e){return t*SU[e]}class Lr{static parse(e){var n,[,r,a]=(n=Fce.exec(e))!==null&&n!==void 0?n:[];return new Lr(parseFloat(r),a??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ra(e)&&(this.unit=""),n!==""&&!Bce.test(n)&&(this.num=NaN,this.unit=""),qce.includes(n)&&(this.num=Hce(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Lr(NaN,""):new Lr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Lr(NaN,""):new Lr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Lr(NaN,""):new Lr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Lr(NaN,""):new Lr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ra(this.num)}}function AU(t){if(t.includes(Ou))return Ou;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,a,s]=(n=FR.exec(e))!==null&&n!==void 0?n:[],c=Lr.parse(r??""),d=Lr.parse(s??""),f=a==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Ou;e=e.replace(FR,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,p,g,v]=(h=qR.exec(e))!==null&&h!==void 0?h:[],w=Lr.parse(p??""),E=Lr.parse(v??""),j=g==="+"?w.add(E):w.subtract(E);if(j.isNaN())return Ou;e=e.replace(qR,j.toString())}return e}var HR=/\(([^()]*)\)/;function Gce(t){for(var e=t,n;(n=HR.exec(e))!=null;){var[,r]=n;e=e.replace(HR,AU(r))}return e}function Kce(t){var e=t.replace(/\s+/g,"");return e=Gce(e),e=AU(e),e}function Wce(t){try{return Kce(t)}catch{return Ou}}function V1(t){var e=Wce(t.slice(5,-1));return e===Ou?"":e}var Yce=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Qce=["dx","dy","angle","className","breakAll"];function jE(){return jE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jE.apply(null,arguments)}function GR(t,e){if(t==null)return{};var n,r,a=Xce(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Xce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var NU=/[ \f\n\r\t\v\u2028\u2029]+/,TU=t=>{var{children:e,breakAll:n,style:r}=t;try{var a=[];Vt(e)||(n?a=e.toString().split(""):a=e.toString().split(NU));var s=a.map(d=>({word:d,width:fh(d,r).width})),c=n?0:fh("",r).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function Zce(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var CU=(t,e,n,r)=>t.reduce((a,s)=>{var{word:c,width:d}=s,f=a[a.length-1];if(f&&d!=null&&(e==null||r||f.width+d+n<Number(e)))f.words.push(c),f.width+=d+n;else{var h={words:[c],width:d};a.push(h)}return a},[]),kU=t=>t.reduce((e,n)=>e.width>n.width?e:n),Jce="",KR=(t,e,n,r,a,s,c,d)=>{var f=t.slice(0,e),h=TU({breakAll:n,style:r,children:f+Jce});if(!h)return[!1,[]];var p=CU(h.wordsWithComputedWidth,s,c,d),g=p.length>a||kU(p).width>Number(s);return[g,p]},eue=(t,e,n,r,a)=>{var{maxLines:s,children:c,style:d,breakAll:f}=t,h=je(s),p=String(c),g=CU(e,r,n,a);if(!h||a)return g;var v=g.length>s||kU(g).width>Number(r);if(!v)return g;for(var w=0,E=p.length-1,j=0,S;w<=E&&j<=p.length-1;){var k=Math.floor((w+E)/2),z=k-1,[M,T]=KR(p,z,f,d,s,r,n,a),[R]=KR(p,k,f,d,s,r,n,a);if(!M&&!R&&(w=k+1),M&&R&&(E=k-1),!M&&R){S=T;break}j++}return S||g},WR=t=>{var e=Vt(t)?[]:t.toString().split(NU);return[{words:e,width:void 0}]},tue=t=>{var{width:e,scaleToFit:n,children:r,style:a,breakAll:s,maxLines:c}=t;if((e||n)&&!hl.isSsr){var d,f,h=TU({breakAll:s,children:r,style:a});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;d=p,f=g}else return WR(r);return eue({breakAll:s,children:r,maxLines:c,style:a},d,f,e,!!n)}return WR(r)},IU="#808080",nue={angle:0,breakAll:!1,capHeight:"0.71em",fill:IU,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Bv=b.forwardRef((t,e)=>{var n=On(t,nue),{x:r,y:a,lineHeight:s,capHeight:c,fill:d,scaleToFit:f,textAnchor:h,verticalAnchor:p}=n,g=GR(n,Yce),v=b.useMemo(()=>tue({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),{dx:w,dy:E,angle:j,className:S,breakAll:k}=g,z=GR(g,Qce);if(!Hi(r)||!Hi(a)||v.length===0)return null;var M=Number(r)+(je(w)?w:0),T=Number(a)+(je(E)?E:0);if(!$t(M)||!$t(T))return null;var R;switch(p){case"start":R=V1("calc(".concat(c,")"));break;case"middle":R=V1("calc(".concat((v.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:R=V1("calc(".concat(v.length-1," * -").concat(s,")"));break}var V=[];if(f){var N=v[0].width,{width:I}=g;V.push("scale(".concat(je(I)&&je(N)?I/N:1,")"))}return j&&V.push("rotate(".concat(j,", ").concat(M,", ").concat(T,")")),V.length&&(z.transform=V.join(" ")),b.createElement("text",jE({},yr(z),{ref:e,x:M,y:T,className:dt("recharts-text",S),textAnchor:h,fill:d.includes("url")?IU:d}),v.map((C,D)=>{var O=C.words.join(k?"":" ");return b.createElement("tspan",{x:M,dy:D===0?R:s,key:"".concat(O,"-").concat(D)},O)}))});Bv.displayName="Text";var rue=["labelRef"];function aue(t,e){if(t==null)return{};var n,r,a=iue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function iue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function YR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YR(Object(n),!0).forEach(function(r){sue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sue(t,e,n){return(e=oue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oue(t){var e=lue(t,"string");return typeof e=="symbol"?e:e+""}function lue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function js(){return js=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},js.apply(null,arguments)}var OU=b.createContext(null),cue=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:a,width:s,height:c,children:d}=t,f=b.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:a,width:s,height:c}),[e,n,r,a,s,c]);return b.createElement(OU.Provider,{value:f},d)},PU=()=>{var t=b.useContext(OU),e=xv();return t||Y5(e)},uue=b.createContext(null),due=()=>{var t=b.useContext(uue),e=Ne(_z);return t||e},fue=t=>{var{value:e,formatter:n}=t,r=Vt(t.children)?e:t.children;return typeof n=="function"?n(r):r},UA=t=>t!=null&&typeof t=="function",hue=(t,e)=>{var n=Wn(e-t),r=Math.min(Math.abs(e-t),360);return n*r},mue=(t,e,n,r,a)=>{var{offset:s,className:c}=t,{cx:d,cy:f,innerRadius:h,outerRadius:p,startAngle:g,endAngle:v,clockWise:w}=a,E=(h+p)/2,j=hue(g,v),S=j>=0?1:-1,k,z;switch(e){case"insideStart":k=g+S*s,z=w;break;case"insideEnd":k=v-S*s,z=!w;break;case"end":k=v+S*s,z=w;break;default:throw new Error("Unsupported position ".concat(e))}z=j<=0?z:!z;var M=kn(d,f,E,k),T=kn(d,f,E,k+(z?1:-1)*359),R="M".concat(M.x,",").concat(M.y,`
    A`).concat(E,",").concat(E,",0,1,").concat(z?0:1,`,
    `).concat(T.x,",").concat(T.y),V=Vt(t.id)?Ah("recharts-radial-line-"):t.id;return b.createElement("text",js({},r,{dominantBaseline:"central",className:dt("recharts-radial-bar-label",c)}),b.createElement("defs",null,b.createElement("path",{id:V,d:R})),b.createElement("textPath",{xlinkHref:"#".concat(V)},n))},pue=(t,e,n)=>{var{cx:r,cy:a,innerRadius:s,outerRadius:c,startAngle:d,endAngle:f}=t,h=(d+f)/2;if(n==="outside"){var{x:p,y:g}=kn(r,a,c+e,h);return{x:p,y:g,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:a,textAnchor:"middle",verticalAnchor:"end"};var v=(s+c)/2,{x:w,y:E}=kn(r,a,v,h);return{x:w,y:E,textAnchor:"middle",verticalAnchor:"middle"}},SE=t=>"cx"in t&&je(t.cx),gue=(t,e)=>{var{parentViewBox:n,offset:r,position:a}=t,s;n!=null&&!SE(n)&&(s=n);var{x:c,y:d,upperWidth:f,lowerWidth:h,height:p}=e,g=c,v=c+(f-h)/2,w=(g+v)/2,E=(f+h)/2,j=g+f/2,S=p>=0?1:-1,k=S*r,z=S>0?"end":"start",M=S>0?"start":"end",T=f>=0?1:-1,R=T*r,V=T>0?"end":"start",N=T>0?"start":"end";if(a==="top"){var I={x:g+f/2,y:d-k,textAnchor:"middle",verticalAnchor:z};return fn(fn({},I),s?{height:Math.max(d-s.y,0),width:f}:{})}if(a==="bottom"){var C={x:v+h/2,y:d+p+k,textAnchor:"middle",verticalAnchor:M};return fn(fn({},C),s?{height:Math.max(s.y+s.height-(d+p),0),width:h}:{})}if(a==="left"){var D={x:w-R,y:d+p/2,textAnchor:V,verticalAnchor:"middle"};return fn(fn({},D),s?{width:Math.max(D.x-s.x,0),height:p}:{})}if(a==="right"){var O={x:w+E+R,y:d+p/2,textAnchor:N,verticalAnchor:"middle"};return fn(fn({},O),s?{width:Math.max(s.x+s.width-O.x,0),height:p}:{})}var U=s?{width:E,height:p}:{};return a==="insideLeft"?fn({x:w+R,y:d+p/2,textAnchor:N,verticalAnchor:"middle"},U):a==="insideRight"?fn({x:w+E-R,y:d+p/2,textAnchor:V,verticalAnchor:"middle"},U):a==="insideTop"?fn({x:g+f/2,y:d+k,textAnchor:"middle",verticalAnchor:M},U):a==="insideBottom"?fn({x:v+h/2,y:d+p-k,textAnchor:"middle",verticalAnchor:z},U):a==="insideTopLeft"?fn({x:g+R,y:d+k,textAnchor:N,verticalAnchor:M},U):a==="insideTopRight"?fn({x:g+f-R,y:d+k,textAnchor:V,verticalAnchor:M},U):a==="insideBottomLeft"?fn({x:v+R,y:d+p-k,textAnchor:N,verticalAnchor:z},U):a==="insideBottomRight"?fn({x:v+h-R,y:d+p-k,textAnchor:V,verticalAnchor:z},U):a&&typeof a=="object"&&(je(a.x)||Vs(a.x))&&(je(a.y)||Vs(a.y))?fn({x:c+pr(a.x,E),y:d+pr(a.y,p),textAnchor:"end",verticalAnchor:"end"},U):fn({x:j,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},U)},yue={angle:0,offset:5,zIndex:pn.label,position:"middle",textBreakAll:!1};function Do(t){var e=On(t,yue),{viewBox:n,position:r,value:a,children:s,content:c,className:d="",textBreakAll:f,labelRef:h}=e,p=due(),g=PU(),v=r==="center"?g:p??g,w,E,j;if(n==null?w=v:SE(n)?w=n:w=Y5(n),!w||Vt(a)&&Vt(s)&&!b.isValidElement(c)&&typeof c!="function")return null;var S=fn(fn({},e),{},{viewBox:w});if(b.isValidElement(c)){var{labelRef:k}=S,z=aue(S,rue);return b.cloneElement(c,z)}if(typeof c=="function"){if(E=b.createElement(c,S),b.isValidElement(E))return E}else E=fue(e);var M=yr(e);if(SE(w)){if(r==="insideStart"||r==="insideEnd"||r==="end")return mue(e,r,E,M,w);j=pue(w,e.offset,e.position)}else j=gue(e,w);return b.createElement(Cr,{zIndex:e.zIndex},b.createElement(Bv,js({ref:h,className:dt("recharts-label",d)},M,j,{textAnchor:Zce(M.textAnchor)?M.textAnchor:j.textAnchor,breakAll:f}),E))}Do.displayName="Label";var vue=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?b.createElement(Do,js({key:"label-implicit"},r)):Hi(t)?b.createElement(Do,js({key:"label-implicit",value:t},r)):b.isValidElement(t)?t.type===Do?b.cloneElement(t,fn({key:"label-implicit"},r)):b.createElement(Do,js({key:"label-implicit",content:t},r)):UA(t)?b.createElement(Do,js({key:"label-implicit",content:t},r)):t&&typeof t=="object"?b.createElement(Do,js({},t,{key:"label-implicit"},r)):null};function xue(t){var{label:e,labelRef:n}=t,r=PU();return vue(e,r,n)||null}var $1={},B1={},QR;function bue(){return QR||(QR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(B1)),B1}var F1={},XR;function wue(){return XR||(XR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(F1)),F1}var ZR;function _ue(){return ZR||(ZR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bue(),n=wue(),r=yS();function a(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=a})($1)),$1}var q1,JR;function Eue(){return JR||(JR=1,q1=_ue().last),q1}var jue=Eue();const Sue=Xi(jue);var Aue=["valueAccessor"],Nue=["dataKey","clockWise","id","textBreakAll","zIndex"];function u0(){return u0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u0.apply(null,arguments)}function eD(t,e){if(t==null)return{};var n,r,a=Tue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Tue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Cue=t=>Array.isArray(t.value)?Sue(t.value):t.value,RU=b.createContext(void 0),VA=RU.Provider,DU=b.createContext(void 0),kue=DU.Provider;function Iue(){return b.useContext(RU)}function Oue(){return b.useContext(DU)}function Jg(t){var{valueAccessor:e=Cue}=t,n=eD(t,Aue),{dataKey:r,clockWise:a,id:s,textBreakAll:c,zIndex:d}=n,f=eD(n,Nue),h=Iue(),p=Oue(),g=h||p;return!g||!g.length?null:b.createElement(Cr,{zIndex:d??pn.label},b.createElement(sn,{className:"recharts-label-list"},g.map((v,w)=>{var E,j=Vt(r)?e(v,w):jt(v&&v.payload,r),S=Vt(s)?{}:{id:"".concat(s,"-").concat(w)};return b.createElement(Do,u0({key:"label-".concat(w)},yr(v),f,S,{fill:(E=n.fill)!==null&&E!==void 0?E:v.fill,parentViewBox:v.parentViewBox,value:j,textBreakAll:c,viewBox:v.viewBox,index:w,zIndex:0}))})))}Jg.displayName="LabelList";function Fv(t){var{label:e}=t;return e?e===!0?b.createElement(Jg,{key:"labelList-implicit"}):b.isValidElement(e)||UA(e)?b.createElement(Jg,{key:"labelList-implicit",content:e}):typeof e=="object"?b.createElement(Jg,u0({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function AE(){return AE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AE.apply(null,arguments)}var MU=t=>{var{cx:e,cy:n,r,className:a}=t,s=dt("recharts-dot",a);return je(e)&&je(n)&&je(r)?b.createElement("circle",AE({},Nr(t),gS(t),{className:s,cx:e,cy:n,r})):null},LU=t=>t.graphicalItems.polarItems,Pue=te([Yt,_m],uA),qv=te([LU,Jt,Pue],dA),Rue=te([qv],fA),Hv=te([Rue,eA],hA),Due=te([Hv,Jt,qv],pA);te([Hv,Jt,qv],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(a=>{var s,c=jt(r,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:jt(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var tD=()=>{},Mue=te([Hv,Jt,qv,Lv,Yt],xA),Lue=te([Jt,yA,vA,tD,Mue,tD,Je,Yt],bA),zU=te([Jt,Je,Hv,Due,wm,Yt,Lue],wA),zue=te([zU,Jt,Nd],jA);te([Jt,zU,zue,Yt],AA);var Uue={radiusAxis:{},angleAxis:{}},UU=qr({name:"polarAxis",initialState:Uue,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:e0e,removeRadiusAxis:t0e,addAngleAxis:n0e,removeAngleAxis:r0e}=UU.actions,Vue=UU.reducer;function nD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(n),!0).forEach(function(r){$ue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ue(t,e,n){return(e=Bue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bue(t){var e=Fue(t,"string");return typeof e=="symbol"?e:e+""}function Fue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var que=(t,e)=>e,$A=te([LU,que],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),Hue=[],BA=(t,e,n)=>(n==null?void 0:n.length)===0?Hue:n,VU=te([eA,$A,BA],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=r,(!a||!a.length)&&n!=null&&(a=n.map(s=>rD(rD({},e.presentationProps),s.props))),a!=null)return a}}),Gue=te([VU,$A,BA],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,a)=>{var s,c=jt(r,e.nameKey,e.name),d;return n!=null&&(s=n[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?d=n[a].props.fill:typeof r=="object"&&r!=null&&"fill"in r?d=r.fill:d=e.fill,{value:fl(c,e.dataKey),color:d,payload:r,type:e.legendType}})}),Kue=te([VU,$A,BA,Ln],(t,e,n,r)=>{if(!(e==null||t==null))return Wde({offset:r,pieSettings:e,displayedData:t,cells:n})}),H1={exports:{}},kt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aD;function Wue(){if(aD)return kt;aD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),w=Symbol.for("react.client.reference");function E(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case t:switch(j=j.type,j){case n:case a:case r:case f:case h:case v:return j;default:switch(j=j&&j.$$typeof,j){case c:case d:case g:case p:return j;case s:return j;default:return S}}case e:return S}}}return kt.ContextConsumer=s,kt.ContextProvider=c,kt.Element=t,kt.ForwardRef=d,kt.Fragment=n,kt.Lazy=g,kt.Memo=p,kt.Portal=e,kt.Profiler=a,kt.StrictMode=r,kt.Suspense=f,kt.SuspenseList=h,kt.isContextConsumer=function(j){return E(j)===s},kt.isContextProvider=function(j){return E(j)===c},kt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===t},kt.isForwardRef=function(j){return E(j)===d},kt.isFragment=function(j){return E(j)===n},kt.isLazy=function(j){return E(j)===g},kt.isMemo=function(j){return E(j)===p},kt.isPortal=function(j){return E(j)===e},kt.isProfiler=function(j){return E(j)===a},kt.isStrictMode=function(j){return E(j)===r},kt.isSuspense=function(j){return E(j)===f},kt.isSuspenseList=function(j){return E(j)===h},kt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===a||j===r||j===f||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===p||j.$$typeof===c||j.$$typeof===s||j.$$typeof===d||j.$$typeof===w||j.getModuleId!==void 0)},kt.typeOf=E,kt}var iD;function Yue(){return iD||(iD=1,H1.exports=Wue()),H1.exports}var Que=Yue(),sD=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",oD=null,G1=null,$U=t=>{if(t===oD&&Array.isArray(G1))return G1;var e=[];return b.Children.forEach(t,n=>{Vt(n)||(Que.isFragment(n)?e=e.concat($U(n.props.children)):e.push(n))}),G1=e,oD=t,e};function FA(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(a=>sD(a)):r=[sD(e)],$U(t).forEach(a=>{var s=vc(a,"type.displayName")||vc(a,"type.name");s&&r.indexOf(s)!==-1&&n.push(a)}),n}var qA=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,K1={},lD;function Xue(){return lD||(lD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var a;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&a.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(K1)),K1}var W1,cD;function Zue(){return cD||(cD=1,W1=Xue().isPlainObject),W1}var Jue=Zue();const ede=Xi(Jue);function uD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function dD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(n),!0).forEach(function(r){tde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tde(t,e,n){return(e=nde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nde(t){var e=rde(t,"string");return typeof e=="symbol"?e:e+""}function rde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d0(){return d0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d0.apply(null,arguments)}var fD=(t,e,n,r,a)=>{var s=n-r,c;return c="M ".concat(t,",").concat(e),c+="L ".concat(t+n,",").concat(e),c+="L ".concat(t+n-s/2,",").concat(e+a),c+="L ".concat(t+n-s/2-r,",").concat(e+a),c+="L ".concat(t,",").concat(e," Z"),c},ade={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ide=t=>{var e=On(t,ade),{x:n,y:r,upperWidth:a,lowerWidth:s,height:c,className:d}=e,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=e,v=b.useRef(null),[w,E]=b.useState(-1),j=b.useRef(a),S=b.useRef(s),k=b.useRef(c),z=b.useRef(n),M=b.useRef(r),T=wd(t,"trapezoid-");if(b.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var Z=v.current.getTotalLength();Z&&E(Z)}catch{}},[]),n!==+n||r!==+r||a!==+a||s!==+s||c!==+c||a===0&&s===0||c===0)return null;var R=dt("recharts-trapezoid",d);if(!g)return b.createElement("g",null,b.createElement("path",d0({},yr(e),{className:R,d:fD(n,r,a,s,c)})));var V=j.current,N=S.current,I=k.current,C=z.current,D=M.current,O="0px ".concat(w===-1?1:w,"px"),U="".concat(w,"px 0px"),$=uL(["strokeDasharray"],h,f);return b.createElement(bd,{animationId:T,key:T,canBegin:w>0,duration:h,easing:f,isActive:g,begin:p},Z=>{var he=gt(V,a,Z),Y=gt(N,s,Z),ie=gt(I,c,Z),H=gt(C,n,Z),K=gt(D,r,Z);v.current&&(j.current=he,S.current=Y,k.current=ie,z.current=H,M.current=K);var le=Z>0?{transition:$,strokeDasharray:U}:{strokeDasharray:O};return b.createElement("path",d0({},yr(e),{className:R,d:fD(H,K,he,Y,ie),ref:v,style:dD(dD({},le),e.style)}))})},sde=["option","shapeType","propTransformer","activeClassName"];function ode(t,e){if(t==null)return{};var n,r,a=lde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function lde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function f0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hD(Object(n),!0).forEach(function(r){cde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cde(t,e,n){return(e=ude(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ude(t){var e=dde(t,"string");return typeof e=="symbol"?e:e+""}function dde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fde(t,e){return f0(f0({},e),t)}function hde(t,e){return t==="symbols"}function mD(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return b.createElement(mL,n);case"trapezoid":return b.createElement(ide,n);case"sector":return b.createElement(vL,n);case"symbols":if(hde(e))return b.createElement(Y3,n);break;case"curve":return b.createElement(Bu,n);default:return null}}function mde(t){return b.isValidElement(t)?t.props:t}function HA(t){var{option:e,shapeType:n,propTransformer:r=fde,activeClassName:a="recharts-active-shape"}=t,s=ode(t,sde),c;if(b.isValidElement(e))c=b.cloneElement(e,f0(f0({},s),mde(e)));else if(typeof e=="function")c=e(s);else if(ede(e)&&typeof e!="boolean"){var d=r(e,s);c=b.createElement(mD,{shapeType:n,elementProps:d})}else{var f=s;c=b.createElement(mD,{shapeType:n,elementProps:f})}return s.isActive?b.createElement(sn,{className:a},c):c}var GA=(t,e)=>{var n=Wt();return(r,a)=>s=>{t==null||t(r,a,s),n(Jz({activeIndex:String(a),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},KA=t=>{var e=Wt();return(n,r)=>a=>{t==null||t(n,r,a),e(Toe())}},WA=(t,e)=>{var n=Wt();return(r,a)=>s=>{t==null||t(r,a,s),n(Coe({activeIndex:String(a),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function Gv(t){var{tooltipEntrySettings:e}=t,n=Wt(),r=Qn(),a=b.useRef(null);return b.useLayoutEffect(()=>{r||(a.current===null?n(joe(e)):a.current!==e&&n(Soe({prev:a.current,next:e})),a.current=e)},[e,n,r]),b.useLayoutEffect(()=>()=>{a.current&&(n(Aoe(a.current)),a.current=null)},[n]),null}function YA(t){var{legendPayload:e}=t,n=Wt(),r=Qn(),a=b.useRef(null);return b.useLayoutEffect(()=>{r||(a.current===null?n(sL(e)):a.current!==e&&n(oL({prev:a.current,next:e})),a.current=e)},[n,r,e]),b.useLayoutEffect(()=>()=>{a.current&&(n(lL(a.current)),a.current=null)},[n]),null}function pde(t){var{legendPayload:e}=t,n=Wt(),r=Ne(Je),a=b.useRef(null);return b.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(a.current===null?n(sL(e)):a.current!==e&&n(oL({prev:a.current,next:e})),a.current=e)},[n,r,e]),b.useLayoutEffect(()=>()=>{a.current&&(n(lL(a.current)),a.current=null)},[n]),null}var Y1,gde=()=>{var[t]=b.useState(()=>Ah("uid-"));return t},yde=(Y1=yV.useId)!==null&&Y1!==void 0?Y1:gde;function BU(t,e){var n=yde();return e||(t?"".concat(t,"-").concat(n):n)}var vde=b.createContext(void 0),Kv=t=>{var{id:e,type:n,children:r}=t,a=BU("recharts-".concat(n),e);return b.createElement(vde.Provider,{value:a},r(a))},xde={cartesianItems:[],polarItems:[]},FU=qr({name:"graphicalItems",initialState:xde,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Ht()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,a=ii(t).cartesianItems.indexOf(n);a>-1&&(t.cartesianItems[a]=r)},prepare:Ht()},removeCartesianGraphicalItem:{reducer(t,e){var n=ii(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Ht()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Ht()},removePolarGraphicalItem:{reducer(t,e){var n=ii(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Ht()}}}),{addCartesianGraphicalItem:bde,replaceCartesianGraphicalItem:wde,removeCartesianGraphicalItem:_de,addPolarGraphicalItem:Ede,removePolarGraphicalItem:jde}=FU.actions,Sde=FU.reducer,Ade=t=>{var e=Wt(),n=b.useRef(null);return b.useLayoutEffect(()=>{n.current===null?e(bde(t)):n.current!==t&&e(wde({prev:n.current,next:t})),n.current=t},[e,t]),b.useLayoutEffect(()=>()=>{n.current&&(e(_de(n.current)),n.current=null)},[e]),null},QA=b.memo(Ade);function Nde(t){var e=Wt();return b.useLayoutEffect(()=>(e(Ede(t)),()=>{e(jde(t))}),[e,t]),null}var Tde=["key"],Cde=["onMouseEnter","onClick","onMouseLeave"],kde=["id"],Ide=["id"];function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){Ode(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ode(t,e,n){return(e=Pde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pde(t){var e=Rde(t,"string");return typeof e=="symbol"?e:e+""}function Rde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sl(){return sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sl.apply(null,arguments)}function Wv(t,e){if(t==null)return{};var n,r,a=Dde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Dde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Mde(t){var e=b.useMemo(()=>FA(t.children,Im),[t.children]),n=Ne(r=>Gue(r,t.id,e));return n==null?null:b.createElement(pde,{legendPayload:n})}var Lde=b.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:a,strokeWidth:s,fill:c,name:d,hide:f,tooltipType:h}=t,p={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:c,dataKey:e,nameKey:n,name:fl(d,e),hide:f,type:h,color:c,unit:""}};return b.createElement(Gv,{tooltipEntrySettings:p})}),zde=(t,e)=>t>e?"start":t<e?"end":"middle",Ude=(t,e,n)=>pr(typeof e=="function"?e(t):e,n,n*.8),Vde=(t,e,n)=>{var{top:r,left:a,width:s,height:c}=e,d=pL(s,c),f=a+pr(t.cx,s,s/2),h=r+pr(t.cy,c,c/2),p=pr(t.innerRadius,d,0),g=Ude(n,t.outerRadius,d),v=t.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:f,cy:h,innerRadius:p,outerRadius:g,maxRadius:v}},$de=(t,e)=>{var n=Wn(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function Bde(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Fde=(t,e)=>{if(b.isValidElement(t))return b.cloneElement(t,e);if(typeof t=="function")return t(e);var n=dt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,a=Wv(e,Tde);return b.createElement(Bu,sl({},a,{type:"linear",className:n}))},qde=(t,e,n)=>{if(b.isValidElement(t))return b.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),b.isValidElement(r)))return r;var a=dt("recharts-pie-label-text",Bde(t));return b.createElement(Bv,sl({},e,{alignmentBaseline:"middle",className:a}),r)};function Hde(t){var{sectors:e,props:n,showLabels:r}=t,{label:a,labelLine:s,dataKey:c}=n;if(!r||!a||!e)return null;var d=Nr(n),f=yc(a),h=yc(s),p=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,g=e.map((v,w)=>{var E=(v.startAngle+v.endAngle)/2,j=kn(v.cx,v.cy,v.outerRadius+p,E),S=rn(rn(rn(rn({},d),v),{},{stroke:"none"},f),{},{index:w,textAnchor:zde(j.x,v.cx)},j),k=rn(rn(rn(rn({},d),v),{},{fill:"none",stroke:v.fill},h),{},{index:w,points:[kn(v.cx,v.cy,v.outerRadius,E),j],key:"line"});return b.createElement(Cr,{zIndex:pn.label,key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(w)},b.createElement(sn,null,s&&Fde(s,k),qde(a,S,jt(v,c))))});return b.createElement(sn,{className:"recharts-pie-labels"},g)}function Gde(t){var{sectors:e,props:n,showLabels:r}=t,{label:a}=n;return typeof a=="object"&&a!=null&&"position"in a?b.createElement(Fv,{label:a}):b.createElement(Hde,{sectors:e,props:n,showLabels:r})}function Kde(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:a,shape:s}=t,c=Ne(il),{onMouseEnter:d,onClick:f,onMouseLeave:h}=a,p=Wv(a,Cde),g=GA(d,a.dataKey),v=KA(h),w=WA(f,a.dataKey);return e==null||e.length===0?null:b.createElement(b.Fragment,null,e.map((E,j)=>{if((E==null?void 0:E.startAngle)===0&&(E==null?void 0:E.endAngle)===0&&e.length!==1)return null;var S=String(j)===c,k=c?r:null,z=n&&S?n:k,M=rn(rn({},E),{},{stroke:E.stroke,tabIndex:-1,[q5]:j,[H5]:a.dataKey});return b.createElement(sn,sl({key:"sector-".concat(E==null?void 0:E.startAngle,"-").concat(E==null?void 0:E.endAngle,"-").concat(E.midAngle,"-").concat(j),tabIndex:-1,className:"recharts-pie-sector"},iv(p,E,j),{onMouseEnter:g(E,j),onMouseLeave:v(E,j),onClick:w(E,j)}),b.createElement(HA,sl({option:s??z,shapeType:"sector",isActive:S},M)))}))}function Wde(t){var e,{pieSettings:n,displayedData:r,cells:a,offset:s}=t,{cornerRadius:c,startAngle:d,endAngle:f,dataKey:h,nameKey:p,tooltipType:g}=n,v=Math.abs(n.minAngle),w=$de(d,f),E=Math.abs(w),j=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,S=r.filter(V=>jt(V,h,0)!==0).length,k=(E>=360?S:S-1)*j,z=E-S*v-k,M=r.reduce((V,N)=>{var I=jt(N,h,0);return V+(je(I)?I:0)},0),T;if(M>0){var R;T=r.map((V,N)=>{var I=jt(V,h,0),C=jt(V,p,N),D=Vde(n,s,V),O=(je(I)?I:0)/M,U,$=rn(rn({},V),a&&a[N]&&a[N].props);N?U=R.endAngle+Wn(w)*j*(I!==0?1:0):U=d;var Z=U+Wn(w)*((I!==0?v:0)+O*z),he=(U+Z)/2,Y=(D.innerRadius+D.outerRadius)/2,ie=[{name:C,value:I,payload:$,dataKey:h,type:g}],H=kn(D.cx,D.cy,Y,he);return R=rn(rn(rn(rn({},n.presentationProps),{},{percent:O,cornerRadius:typeof c=="string"?parseFloat(c):c,name:C,tooltipPayload:ie,midAngle:he,middleRadius:Y,tooltipPosition:H},$),D),{},{value:I,startAngle:U,endAngle:Z,payload:$,paddingAngle:Wn(w)*j}),R})}return T}function Yde(t){var{showLabels:e,sectors:n,children:r}=t,a=b.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return b.createElement(kue,{value:e?a:void 0},r)}function Qde(t){var{props:e,previousSectorsRef:n}=t,{sectors:r,isAnimationActive:a,animationBegin:s,animationDuration:c,animationEasing:d,activeShape:f,inactiveShape:h,onAnimationStart:p,onAnimationEnd:g}=e,v=wd(e,"recharts-pie-"),w=n.current,[E,j]=b.useState(!1),S=b.useCallback(()=>{typeof g=="function"&&g(),j(!1)},[g]),k=b.useCallback(()=>{typeof p=="function"&&p(),j(!0)},[p]);return b.createElement(Yde,{showLabels:!E,sectors:r},b.createElement(bd,{animationId:v,begin:s,duration:c,isActive:a,easing:d,onAnimationStart:k,onAnimationEnd:S,key:v},z=>{var M=[],T=r&&r[0],R=T==null?void 0:T.startAngle;return r==null||r.forEach((V,N)=>{var I=w&&w[N],C=N>0?vc(V,"paddingAngle",0):0;if(I){var D=gt(I.endAngle-I.startAngle,V.endAngle-V.startAngle,z),O=rn(rn({},V),{},{startAngle:R+C,endAngle:R+D+C});M.push(O),R=O.endAngle}else{var{endAngle:U,startAngle:$}=V,Z=gt(0,U-$,z),he=rn(rn({},V),{},{startAngle:R+C,endAngle:R+Z+C});M.push(he),R=he.endAngle}}),n.current=M,b.createElement(sn,null,b.createElement(Kde,{sectors:M,activeShape:f,inactiveShape:h,allOtherPieProps:e,shape:e.shape}))}),b.createElement(Gde,{showLabels:!E,sectors:r,props:e}),e.children)}var Xde={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!hl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:pn.area};function Zde(t){var{id:e}=t,n=Wv(t,kde),{hide:r,className:a,rootTabIndex:s}=t,c=b.useMemo(()=>FA(t.children,Im),[t.children]),d=Ne(p=>Kue(p,e,c)),f=b.useRef(null),h=dt("recharts-pie",a);return r||d==null?(f.current=null,b.createElement(sn,{tabIndex:s,className:h})):b.createElement(Cr,{zIndex:t.zIndex},b.createElement(Lde,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:d,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType}),b.createElement(sn,{tabIndex:s,className:h},b.createElement(Qde,{props:rn(rn({},n),{},{sectors:d}),previousSectorsRef:f})))}function qU(t){var e=On(t,Xde),{id:n}=e,r=Wv(e,Ide),a=Nr(r);return b.createElement(Kv,{id:n,type:"pie"},s=>b.createElement(b.Fragment,null,b.createElement(Nde,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),b.createElement(Mde,sl({},r,{id:s})),b.createElement(Zde,sl({},r,{id:s}))))}qU.displayName="Pie";var Jde=["points"];function gD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Q1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(n),!0).forEach(function(r){efe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function efe(t,e,n){return(e=tfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tfe(t){var e=nfe(t,"string");return typeof e=="symbol"?e:e+""}function nfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h0(){return h0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h0.apply(null,arguments)}function rfe(t,e){if(t==null)return{};var n,r,a=afe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function afe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ife(t){var{option:e,dotProps:n,className:r}=t;if(b.isValidElement(e))return b.cloneElement(e,n);if(typeof e=="function")return e(n);var a=dt(r,typeof e!="boolean"?e.className:""),s=n??{},{points:c}=s,d=rfe(s,Jde);return b.createElement(MU,h0({},d,{className:a}))}function sfe(t,e){return t==null?!1:e?!0:t.length===1}function HU(t){var{points:e,dot:n,className:r,dotClassName:a,dataKey:s,baseProps:c,needClip:d,clipPathId:f,zIndex:h=pn.scatter}=t;if(!sfe(e,n))return null;var p=qA(n),g=nZ(n),v=e.map((E,j)=>{var S,k,z=Q1(Q1(Q1({r:3},c),g),{},{index:j,cx:(S=E.x)!==null&&S!==void 0?S:void 0,cy:(k=E.y)!==null&&k!==void 0?k:void 0,dataKey:s,value:E.value,payload:E.payload,points:e});return b.createElement(ife,{key:"dot-".concat(j),option:n,dotProps:z,className:a})}),w={};return d&&f!=null&&(w.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(f,")")),b.createElement(Cr,{zIndex:h},b.createElement(sn,h0({className:r},w),v))}function yD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function vD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(n),!0).forEach(function(r){ofe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ofe(t,e,n){return(e=lfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lfe(t){var e=cfe(t,"string");return typeof e=="symbol"?e:e+""}function cfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ufe={xAxis:{},yAxis:{},zAxis:{}},GU=qr({name:"cartesianAxis",initialState:ufe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Ht()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Ht()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Ht()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Ht()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Ht()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Ht()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Ht()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Ht()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Ht()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,a=t.yAxis[n];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==a.width&&Math.abs(r-s[0])<=1)return;var c=[...s,r].slice(-3);t.yAxis[n]=vD(vD({},t.yAxis[n]),{},{width:r,widthHistory:c})}}}}),{addXAxis:dfe,replaceXAxis:ffe,removeXAxis:hfe,addYAxis:mfe,replaceYAxis:pfe,removeYAxis:gfe,addZAxis:a0e,replaceZAxis:i0e,removeZAxis:s0e,updateYAxisWidth:yfe}=GU.actions,vfe=GU.reducer,xfe=te([Ln],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),bfe=te([xfe,Ws,Ys],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),Yv=()=>Ne(bfe),wfe=()=>Ne(vle);function xD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function X1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(n),!0).forEach(function(r){_fe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _fe(t,e,n){return(e=Efe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Efe(t){var e=jfe(t,"string");return typeof e=="symbol"?e:e+""}function jfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sfe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:a,dataKey:s,clipPath:c}=t;if(a===!1||e.x==null||e.y==null)return null;var d={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},f=X1(X1(X1({},d),yc(a)),gS(a)),h;return b.isValidElement(a)?h=b.cloneElement(a,f):typeof a=="function"?h=a(f):h=b.createElement(MU,f),b.createElement(sn,{className:"recharts-active-dot",clipPath:c},h)};function NE(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:a,clipPath:s,zIndex:c=pn.activeDot}=t,d=Ne(il),f=wfe();if(e==null||f==null)return null;var h=e.find(p=>f.includes(p.payload));return Vt(h)?null:b.createElement(Cr,{zIndex:c},b.createElement(Sfe,{point:h,childIndex:Number(d),mainColor:n,dataKey:a,activeDot:r,clipPath:s}))}var Afe="Invariant failed";function Nfe(t,e){throw new Error(Afe)}var Tfe=["x","y"];function TE(){return TE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TE.apply(null,arguments)}function bD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Hf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(n),!0).forEach(function(r){Cfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cfe(t,e,n){return(e=kfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kfe(t){var e=Ife(t,"string");return typeof e=="symbol"?e:e+""}function Ife(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ofe(t,e){if(t==null)return{};var n,r,a=Pfe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Pfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Rfe(t,e){var{x:n,y:r}=t,a=Ofe(t,Tfe),s="".concat(n),c=parseInt(s,10),d="".concat(r),f=parseInt(d,10),h="".concat(e.height||a.height),p=parseInt(h,10),g="".concat(e.width||a.width),v=parseInt(g,10);return Hf(Hf(Hf(Hf(Hf({},e),a),c?{x:c}:{}),f?{y:f}:{}),{},{height:p,width:v,name:e.name,radius:e.radius})}function m0(t){return b.createElement(HA,TE({shapeType:"rectangle",propTransformer:Rfe,activeClassName:"recharts-active-bar"},t))}var Dfe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,a)=>{if(je(e))return e;var s=je(r)||Vt(r);return s?e(r,a):(s||Nfe(),n)}},Mfe={},KU=qr({name:"errorBars",initialState:Mfe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:a}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(a=>a.dataKey!==r.dataKey||a.direction!==r.direction))}}}),{addErrorBar:o0e,replaceErrorBar:l0e,removeErrorBar:c0e}=KU.actions,Lfe=KU.reducer,zfe=["children"];function Ufe(t,e){if(t==null)return{};var n,r,a=Vfe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Vfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var $fe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Bfe=b.createContext($fe);function WU(t){var{children:e}=t,n=Ufe(t,zfe);return b.createElement(Bfe.Provider,{value:n},e)}function Qv(t,e){var n,r,a=Ne(h=>Xs(h,t)),s=Ne(h=>Zs(h,e)),c=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:qn.allowDataOverflow,d=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Hn.allowDataOverflow,f=c||d;return{needClip:f,needClipX:c,needClipY:d}}function XA(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,a=Yv(),{needClipX:s,needClipY:c,needClip:d}=Qv(e,n);if(!d||!a)return null;var{x:f,y:h,width:p,height:g}=a;return b.createElement("clipPath",{id:"clipPath-".concat(r)},b.createElement("rect",{x:s?f:f-p/2,y:c?h:h-g/2,width:s?p:p*2,height:c?g:g*2}))}function Ffe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&$t(t.zIndex)?t.zIndex:e}var Z1={exports:{}},J1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wD;function qfe(){if(wD)return J1;wD=1;var t=sd();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,a=t.useRef,s=t.useEffect,c=t.useMemo,d=t.useDebugValue;return J1.useSyncExternalStoreWithSelector=function(f,h,p,g,v){var w=a(null);if(w.current===null){var E={hasValue:!1,value:null};w.current=E}else E=w.current;w=c(function(){function S(R){if(!k){if(k=!0,z=R,R=g(R),v!==void 0&&E.hasValue){var V=E.value;if(v(V,R))return M=V}return M=R}if(V=M,n(z,R))return V;var N=g(R);return v!==void 0&&v(V,N)?(z=R,V):(z=R,M=N)}var k=!1,z,M,T=p===void 0?null:p;return[function(){return S(h())},T===null?void 0:function(){return S(T())}]},[h,p,g,v]);var j=r(f,w[0],w[1]);return s(function(){E.hasValue=!0,E.value=j},[j]),d(j),j},J1}var _D;function Hfe(){return _D||(_D=1,Z1.exports=qfe()),Z1.exports}Hfe();function Gfe(t){t()}function Kfe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Gfe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const a=e={callback:n,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!r||t===null||(r=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var ED={notify(){},get:()=>[]};function Wfe(t,e){let n,r=ED,a=0,s=!1;function c(j){p();const S=r.subscribe(j);let k=!1;return()=>{k||(k=!0,S(),g())}}function d(){r.notify()}function f(){E.onStateChange&&E.onStateChange()}function h(){return s}function p(){a++,n||(n=t.subscribe(f),r=Kfe())}function g(){a--,n&&a===0&&(n(),n=void 0,r.clear(),r=ED)}function v(){s||(s=!0,p())}function w(){s&&(s=!1,g())}const E={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:h,trySubscribe:v,tryUnsubscribe:w,getListeners:()=>r};return E}var Yfe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qfe=Yfe(),Xfe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Zfe=Xfe(),Jfe=()=>Qfe||Zfe?b.useLayoutEffect:b.useEffect,ehe=Jfe();function jD(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function the(t,e){if(jD(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(e,n[a])||!jD(t[n[a]],e[n[a]]))return!1;return!0}var e_=Symbol.for("react-redux-context"),t_=typeof globalThis<"u"?globalThis:{};function nhe(){if(!b.createContext)return{};const t=t_[e_]??(t_[e_]=new Map);let e=t.get(b.createContext);return e||(e=b.createContext(null),t.set(b.createContext,e)),e}var rhe=nhe();function ahe(t){const{children:e,context:n,serverState:r,store:a}=t,s=b.useMemo(()=>{const f=Wfe(a);return{store:a,subscription:f,getServerState:r?()=>r:void 0}},[a,r]),c=b.useMemo(()=>a.getState(),[a]);ehe(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),c!==a.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,c]);const d=n||rhe;return b.createElement(d.Provider,{value:s},e)}var ihe=ahe,she=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function ohe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function Om(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(she.has(r)){if(t[r]==null&&e[r]==null)continue;if(!the(t[r],e[r]))return!1}else if(!ohe(t[r],e[r]))return!1;return!0}var lhe=["onMouseEnter","onMouseLeave","onClick"],che=["value","background","tooltipPosition"],uhe=["id"],dhe=["onMouseEnter","onClick","onMouseLeave"];function Gs(){return Gs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gs.apply(null,arguments)}function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function _r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){fhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fhe(t,e,n){return(e=hhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hhe(t){var e=mhe(t,"string");return typeof e=="symbol"?e:e+""}function mhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p0(t,e){if(t==null)return{};var n,r,a=phe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function phe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ghe=t=>{var{dataKey:e,name:n,fill:r,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:r,value:fl(n,e),payload:t}]},yhe=b.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:a,name:s,hide:c,unit:d,tooltipType:f}=t,h={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:a,dataKey:e,nameKey:void 0,name:fl(s,e),hide:c,type:f,color:a,unit:d}};return b.createElement(Gv,{tooltipEntrySettings:h})});function vhe(t){var e=Ne(il),{data:n,dataKey:r,background:a,allOtherBarProps:s}=t,{onMouseEnter:c,onMouseLeave:d,onClick:f}=s,h=p0(s,lhe),p=GA(c,r),g=KA(d),v=WA(f,r);if(!a||n==null)return null;var w=yc(a);return b.createElement(Cr,{zIndex:Ffe(a,pn.barBackground)},n.map((E,j)=>{var{value:S,background:k,tooltipPosition:z}=E,M=p0(E,che);if(!k)return null;var T=p(E,j),R=g(E,j),V=v(E,j),N=_r(_r(_r(_r(_r({option:a,isActive:String(j)===e},M),{},{fill:"#eee"},k),w),iv(h,E,j)),{},{onMouseEnter:T,onMouseLeave:R,onClick:V,dataKey:r,index:j,className:"recharts-bar-background-rectangle"});return b.createElement(m0,Gs({key:"background-bar-".concat(j)},N))}))}function xhe(t){var{showLabels:e,children:n,rects:r}=t,a=r==null?void 0:r.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return _r(_r({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return b.createElement(VA,{value:e?a:void 0},n)}function bhe(t){var{shape:e,activeBar:n,baseProps:r,entry:a,index:s,dataKey:c}=t,d=Ne(il),f=Ne(hU),h=n&&String(s)===d&&(f==null||c===f),p=h?n:e;return h?b.createElement(Cr,{zIndex:pn.activeBar},b.createElement(m0,Gs({},r,{name:String(r.name)},a,{isActive:h,option:p,index:s,dataKey:c}))):b.createElement(m0,Gs({},r,{name:String(r.name)},a,{isActive:h,option:p,index:s,dataKey:c}))}function whe(t){var{shape:e,baseProps:n,entry:r,index:a,dataKey:s}=t;return b.createElement(m0,Gs({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:a,dataKey:s}))}function _he(t){var e,{data:n,props:r}=t,a=(e=Nr(r))!==null&&e!==void 0?e:{},{id:s}=a,c=p0(a,uhe),{shape:d,dataKey:f,activeBar:h}=r,{onMouseEnter:p,onClick:g,onMouseLeave:v}=r,w=p0(r,dhe),E=GA(p,f),j=KA(v),S=WA(g,f);return n?b.createElement(b.Fragment,null,n.map((k,z)=>b.createElement(sn,Gs({key:"rectangle-".concat(k==null?void 0:k.x,"-").concat(k==null?void 0:k.y,"-").concat(k==null?void 0:k.value,"-").concat(z),className:"recharts-bar-rectangle"},iv(w,k,z),{onMouseEnter:E(k,z),onMouseLeave:j(k,z),onClick:S(k,z)}),h?b.createElement(bhe,{shape:d,activeBar:h,baseProps:c,entry:k,index:z,dataKey:f}):b.createElement(whe,{shape:d,baseProps:c,entry:k,index:z,dataKey:f})))):null}function Ehe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:a,isAnimationActive:s,animationBegin:c,animationDuration:d,animationEasing:f,onAnimationEnd:h,onAnimationStart:p}=e,g=n.current,v=wd(e,"recharts-bar-"),[w,E]=b.useState(!1),j=!w,S=b.useCallback(()=>{typeof h=="function"&&h(),E(!1)},[h]),k=b.useCallback(()=>{typeof p=="function"&&p(),E(!0)},[p]);return b.createElement(xhe,{showLabels:j,rects:r},b.createElement(bd,{animationId:v,begin:c,duration:d,isActive:s,easing:f,onAnimationEnd:S,onAnimationStart:k,key:v},z=>{var M=z===1?r:r==null?void 0:r.map((T,R)=>{var V=g&&g[R];if(V)return _r(_r({},T),{},{x:gt(V.x,T.x,z),y:gt(V.y,T.y,z),width:gt(V.width,T.width,z),height:gt(V.height,T.height,z)});if(a==="horizontal"){var N=gt(0,T.height,z),I=gt(T.stackedBarStart,T.y,z);return _r(_r({},T),{},{y:I,height:N})}var C=gt(0,T.width,z),D=gt(T.stackedBarStart,T.x,z);return _r(_r({},T),{},{width:C,x:D})});return z>0&&(n.current=M??null),M==null?null:b.createElement(sn,null,b.createElement(_he,{props:e,data:M}))}),b.createElement(Fv,{label:e.label}),e.children)}function jhe(t){var e=b.useRef(null);return b.createElement(Ehe,{previousRectanglesRef:e,props:t})}var YU=0,She=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:jt(t,e)}};class Ahe extends b.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:a,xAxisId:s,yAxisId:c,needClip:d,background:f,id:h}=this.props;if(e||n==null)return null;var p=dt("recharts-bar",a),g=h;return b.createElement(sn,{className:p,id:h},d&&b.createElement("defs",null,b.createElement(XA,{clipPathId:g,xAxisId:s,yAxisId:c})),b.createElement(sn,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(g,")"):void 0},b.createElement(vhe,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),b.createElement(jhe,this.props)))}}var Nhe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:YU,xAxisId:0,yAxisId:0,zIndex:pn.bar};function The(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:a,minPointSize:s,activeBar:c,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:p}=t,{needClip:g}=Qv(e,n),v=Cc(),w=Qn(),E=FA(t.children,Im),j=Ne(z=>nme(z,e,n,w,t.id,E));if(v!=="vertical"&&v!=="horizontal")return null;var S,k=j==null?void 0:j[0];return k==null||k.height==null||k.width==null?S=0:S=v==="vertical"?k.height/2:k.width/2,b.createElement(WU,{xAxisId:e,yAxisId:n,data:j,dataPointFormatter:She,errorBarOffset:S},b.createElement(Ahe,Gs({},t,{layout:v,needClip:g,data:j,xAxisId:e,yAxisId:n,hide:r,legendType:a,minPointSize:s,activeBar:c,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:p})))}function Che(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:a,bandSize:s,xAxis:c,yAxis:d,xAxisTicks:f,yAxisTicks:h,stackedData:p,displayedData:g,offset:v,cells:w,parentViewBox:E,dataStartIndex:j}=t,S=e==="horizontal"?d:c,k=p?S.scale.domain():null,z=mte({numericAxis:S}),M=S.scale(z);return g.map((T,R)=>{var V,N,I,C,D,O;p?V=cte(p[R+j],k):(V=jt(T,n),Array.isArray(V)||(V=[z,V]));var U=Dfe(r,YU)(V[1],R);if(e==="horizontal"){var $,[Z,he]=[d.scale(V[0]),d.scale(V[1])];N=qO({axis:c,ticks:f,bandSize:s,offset:a.offset,entry:T,index:R}),I=($=he??Z)!==null&&$!==void 0?$:void 0,C=a.size;var Y=Z-he;if(D=Ra(Y)?0:Y,O={x:N,y:v.top,width:C,height:v.height},Math.abs(U)>0&&Math.abs(D)<Math.abs(U)){var ie=Wn(D||U)*(Math.abs(U)-Math.abs(D));I-=ie,D+=ie}}else{var[H,K]=[c.scale(V[0]),c.scale(V[1])];if(N=H,I=qO({axis:d,ticks:h,bandSize:s,offset:a.offset,entry:T,index:R}),C=K-H,D=a.size,O={x:v.left,y:I,width:v.width,height:D},Math.abs(U)>0&&Math.abs(C)<Math.abs(U)){var le=Wn(C||U)*(Math.abs(U)-Math.abs(C));C+=le}}if(N==null||I==null||C==null||D==null)return null;var q=_r(_r({},T),{},{stackedBarStart:M,x:N,y:I,width:C,height:D,value:p?V:V[1],payload:T,background:O,tooltipPosition:{x:N+C/2,y:I+D/2},parentViewBox:E},w&&w[R]&&w[R].props);return q}).filter(Boolean)}function khe(t){var e=On(t,Nhe),n=Qn();return b.createElement(Kv,{id:e.id,type:"bar"},r=>b.createElement(b.Fragment,null,b.createElement(YA,{legendPayload:ghe(e)}),b.createElement(yhe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),b.createElement(QA,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:B5(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),b.createElement(Cr,{zIndex:e.zIndex},b.createElement(The,Gs({},e,{id:r})))))}var g0=b.memo(khe,Om);g0.displayName="Bar";function AD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Rg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AD(Object(n),!0).forEach(function(r){Ihe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ihe(t,e,n){return(e=Ohe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ohe(t){var e=Phe(t,"string");return typeof e=="symbol"?e:e+""}function Phe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rhe=(t,e)=>e,Dhe=(t,e,n)=>n,Mhe=(t,e,n,r)=>r,Lhe=(t,e,n,r,a)=>a,Pm=te([jm,Lhe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),zhe=te([Pm],t=>t==null?void 0:t.maxBarSize),Uhe=(t,e,n,r,a,s)=>s,ND=(t,e,n)=>{var r=n??t;if(!Vt(r))return pr(r,e,0)},Vhe=te([Je,jm,Rhe,Dhe,Mhe],(t,e,n,r,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),$he=(t,e,n,r)=>{var a=Je(t);return a==="horizontal"?Uh(t,"yAxis",n,r):Uh(t,"xAxis",e,r)},Bhe=(t,e,n)=>{var r=Je(t);return r==="horizontal"?wR(t,"xAxis",e):wR(t,"yAxis",n)},Fhe=(t,e,n)=>{var r={},a=t.filter(Pv),s=t.filter(h=>h.stackId==null),c=a.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),r),d=Object.entries(c).map(h=>{var[p,g]=h,v=g.map(E=>E.dataKey),w=ND(e,n,g[0].barSize);return{stackId:p,dataKeys:v,barSize:w}}),f=s.map(h=>{var p=[h.dataKey].filter(v=>v!=null),g=ND(e,n,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...d,...f]},qhe=te([Vhe,gse,Bhe],Fhe),Hhe=(t,e,n,r,a)=>{var s,c,d=Pm(t,e,n,r,a);if(d!=null){var f=Je(t),h=mz(t),{maxBarSize:p}=d,g=Vt(p)?h:p,v,w;return f==="horizontal"?(v=Qi(t,"xAxis",e,r),w=Yi(t,"xAxis",e,r)):(v=Qi(t,"yAxis",n,r),w=Yi(t,"yAxis",n,r)),(s=(c=rl(v,w,!0))!==null&&c!==void 0?c:g)!==null&&s!==void 0?s:0}},QU=(t,e,n,r)=>{var a=Je(t),s,c;return a==="horizontal"?(s=Qi(t,"xAxis",e,r),c=Yi(t,"xAxis",e,r)):(s=Qi(t,"yAxis",n,r),c=Yi(t,"yAxis",n,r)),rl(s,c)};function Ghe(t,e,n,r,a){var s=r.length;if(!(s<1)){var c=pr(t,n,0,!0),d,f=[];if($t(r[0].barSize)){var h=!1,p=n/s,g=r.reduce((k,z)=>k+(z.barSize||0),0);g+=(s-1)*c,g>=n&&(g-=(s-1)*c,c=0),g>=n&&p>0&&(h=!0,p*=.9,g=s*p);var v=(n-g)/2>>0,w={offset:v-c,size:0};d=r.reduce((k,z)=>{var M,T={stackId:z.stackId,dataKeys:z.dataKeys,position:{offset:w.offset+w.size+c,size:h?p:(M=z.barSize)!==null&&M!==void 0?M:0}},R=[...k,T];return w=R[R.length-1].position,R},f)}else{var E=pr(e,n,0,!0);n-2*E-(s-1)*c<=0&&(c=0);var j=(n-2*E-(s-1)*c)/s;j>1&&(j>>=0);var S=$t(a)?Math.min(j,a):j;d=r.reduce((k,z,M)=>[...k,{stackId:z.stackId,dataKeys:z.dataKeys,position:{offset:E+(j+c)*M+(j-S)/2,size:S}}],f)}return d}}var Khe=(t,e,n,r,a,s,c)=>{var d=Vt(c)?e:c,f=Ghe(n,r,a!==s?a:s,t,d);return a!==s&&f!=null&&(f=f.map(h=>Rg(Rg({},h),{},{position:Rg(Rg({},h.position),{},{offset:h.position.offset-a/2})}))),f},Whe=te([qhe,mz,pse,pz,Hhe,QU,zhe],Khe),Yhe=(t,e,n,r)=>Qi(t,"xAxis",e,r),Qhe=(t,e,n,r)=>Qi(t,"yAxis",n,r),Xhe=(t,e,n,r)=>Yi(t,"xAxis",e,r),Zhe=(t,e,n,r)=>Yi(t,"yAxis",n,r),Jhe=te([Whe,Pm],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),eme=(t,e)=>{var n=Ov(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var a=t[r];if(a){var{stackedData:s}=a;if(s)return s.find(c=>c.key===n)}}}},tme=te([$he,Pm],eme),nme=te([Ln,NS,Yhe,Qhe,Xhe,Zhe,Jhe,Je,bm,QU,tme,Pm,Uhe],(t,e,n,r,a,s,c,d,f,h,p,g,v)=>{var{chartData:w,dataStartIndex:E,dataEndIndex:j}=f;if(!(g==null||c==null||e==null||d!=="horizontal"&&d!=="vertical"||n==null||r==null||a==null||s==null||h==null)){var{data:S}=g,k;if(S!=null&&S.length>0?k=S:k=w==null?void 0:w.slice(E,j+1),k!=null)return Che({layout:d,barSettings:g,pos:c,parentViewBox:e,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:a,yAxisTicks:s,stackedData:p,displayedData:k,offset:t,cells:v,dataStartIndex:E})}}),XU=t=>{var{chartData:e}=t,n=Wt(),r=Qn();return b.useEffect(()=>r?()=>{}:(n(RR(e)),()=>{n(RR(void 0))}),[e,n,r]),null},TD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ZU=qr({name:"brush",initialState:TD,reducers:{setBrushSettings(t,e){return e.payload==null?TD:e.payload}}}),{setBrushSettings:u0e}=ZU.actions,rme=ZU.reducer;function ame(t,e,n){return(e=ime(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ime(t){var e=sme(t,"string");return typeof e=="symbol"?e:e+""}function sme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ZA{static create(e){return new ZA(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+c}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],a=n[n.length-1];return r<=a?e>=r&&e<=a:e>=a&&e<=r}}ame(ZA,"EPS",1e-4);function ome(t){return(t%180+180)%180}var lme=function(e){var{width:n,height:r}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=ome(a),c=s*Math.PI/180,d=Math.atan(r/n),f=c>d&&c<Math.PI-d?r/Math.sin(c):n/Math.cos(c);return Math.abs(f)},cme={dots:[],areas:[],lines:[]},JU=qr({name:"referenceElements",initialState:cme,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ii(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ii(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ii(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:d0e,removeDot:f0e,addArea:h0e,removeArea:m0e,addLine:p0e,removeLine:g0e}=JU.actions,ume=JU.reducer,dme=b.createContext(void 0),fme=t=>{var{children:e}=t,[n]=b.useState("".concat(Ah("recharts"),"-clip")),r=Yv();if(r==null)return null;var{x:a,y:s,width:c,height:d}=r;return b.createElement(dme.Provider,{value:n},b.createElement("defs",null,b.createElement("clipPath",{id:n},b.createElement("rect",{x:a,y:s,height:d,width:c}))),e)};function e8(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e)n.push(t[r]);return n}function hme(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return lme(r,n)}function mme(t,e,n){var r=n==="width",{x:a,y:s,width:c,height:d}=t;return e===1?{start:r?a:s,end:r?a+c:s+d}:{start:r?a+c:s+d,end:r?a:s}}function y0(t,e,n,r,a){if(t*e<t*r||t*e>t*a)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-a)<=0}function pme(t,e){return e8(t,e+1)}function gme(t,e,n,r,a){for(var s=(r||[]).slice(),{start:c,end:d}=e,f=0,h=1,p=c,g=function(){var E=r==null?void 0:r[f];if(E===void 0)return{v:e8(r,h)};var j=f,S,k=()=>(S===void 0&&(S=n(E,j)),S),z=E.coordinate,M=f===0||y0(t,z,k,p,d);M||(f=0,p=c,h+=1),M&&(p=z+t*(k()/2+a),f+=h)},v;h<=s.length;)if(v=g(),v)return v.v;return[]}function CD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CD(Object(n),!0).forEach(function(r){yme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yme(t,e,n){return(e=vme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vme(t){var e=xme(t,"string");return typeof e=="symbol"?e:e+""}function xme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bme(t,e,n,r,a){for(var s=(r||[]).slice(),c=s.length,{start:d}=e,{end:f}=e,h=function(v){var w=s[v],E,j=()=>(E===void 0&&(E=n(w,v)),E);if(v===c-1){var S=t*(w.coordinate+t*j()/2-f);s[v]=w=ur(ur({},w),{},{tickCoord:S>0?w.coordinate-S*t:w.coordinate})}else s[v]=w=ur(ur({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var k=y0(t,w.tickCoord,j,d,f);k&&(f=w.tickCoord-t*(j()/2+a),s[v]=ur(ur({},w),{},{isShow:!0}))}},p=c-1;p>=0;p--)h(p);return s}function wme(t,e,n,r,a,s){var c=(r||[]).slice(),d=c.length,{start:f,end:h}=e;if(s){var p=r[d-1],g=n(p,d-1),v=t*(p.coordinate+t*g/2-h);if(c[d-1]=p=ur(ur({},p),{},{tickCoord:v>0?p.coordinate-v*t:p.coordinate}),p.tickCoord!=null){var w=y0(t,p.tickCoord,()=>g,f,h);w&&(h=p.tickCoord-t*(g/2+a),c[d-1]=ur(ur({},p),{},{isShow:!0}))}}for(var E=s?d-1:d,j=function(z){var M=c[z],T,R=()=>(T===void 0&&(T=n(M,z)),T);if(z===0){var V=t*(M.coordinate-t*R()/2-f);c[z]=M=ur(ur({},M),{},{tickCoord:V<0?M.coordinate-V*t:M.coordinate})}else c[z]=M=ur(ur({},M),{},{tickCoord:M.coordinate});if(M.tickCoord!=null){var N=y0(t,M.tickCoord,R,f,h);N&&(f=M.tickCoord+t*(R()/2+a),c[z]=ur(ur({},M),{},{isShow:!0}))}},S=0;S<E;S++)j(S);return c}function JA(t,e,n){var{tick:r,ticks:a,viewBox:s,minTickGap:c,orientation:d,interval:f,tickFormatter:h,unit:p,angle:g}=t;if(!a||!a.length||!r)return[];if(je(f)||hl.isSsr){var v;return(v=pme(a,je(f)?f:0))!==null&&v!==void 0?v:[]}var w=[],E=d==="top"||d==="bottom"?"width":"height",j=p&&E==="width"?fh(p,{fontSize:e,letterSpacing:n}):{width:0,height:0},S=(M,T)=>{var R=typeof h=="function"?h(M.value,T):M.value;return E==="width"?hme(fh(R,{fontSize:e,letterSpacing:n}),j,g):fh(R,{fontSize:e,letterSpacing:n})[E]},k=a.length>=2?Wn(a[1].coordinate-a[0].coordinate):1,z=mme(s,k,E);return f==="equidistantPreserveStart"?gme(k,z,S,a,c):(f==="preserveStart"||f==="preserveStartEnd"?w=wme(k,z,S,a,c,f==="preserveStartEnd"):w=bme(k,z,S,a,c),w.filter(M=>M.isShow))}var _me=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:a=0,tickMargin:s=0}=t,c=0;if(e){Array.from(e).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>c&&(c=g.width)}});var d=n?n.getBoundingClientRect().width:0,f=a+s,h=c+f+d+(n?r:0);return Math.round(h)}return 0},Eme=["axisLine","width","height","className","hide","ticks","axisType"];function jme(t,e){if(t==null)return{};var n,r,a=Sme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Sme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _c(){return _c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_c.apply(null,arguments)}function kD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kD(Object(n),!0).forEach(function(r){Ame(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ame(t,e,n){return(e=Nme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nme(t){var e=Tme(t,"string");return typeof e=="symbol"?e:e+""}function Tme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:pn.axis};function Cme(t){var{x:e,y:n,width:r,height:a,orientation:s,mirror:c,axisLine:d,otherSvgProps:f}=t;if(!d)return null;var h=An(An(An({},f),Nr(d)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!c||s==="bottom"&&c);h=An(An({},h),{},{x1:e,y1:n+p*a,x2:e+r,y2:n+p*a})}else{var g=+(s==="left"&&!c||s==="right"&&c);h=An(An({},h),{},{x1:e+g*r,y1:n,x2:e+g*r,y2:n+a})}return b.createElement("line",_c({},h,{className:dt("recharts-cartesian-axis-line",vc(d,"className"))}))}function kme(t,e,n,r,a,s,c,d,f){var h,p,g,v,w,E,j=d?-1:1,S=t.tickSize||c,k=je(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":h=p=t.coordinate,v=n+ +!d*a,g=v-j*S,E=g-j*f,w=k;break;case"left":g=v=t.coordinate,p=e+ +!d*r,h=p-j*S,w=h-j*f,E=k;break;case"right":g=v=t.coordinate,p=e+ +d*r,h=p+j*S,w=h+j*f,E=k;break;default:h=p=t.coordinate,v=n+ +d*a,g=v+j*S,E=g+j*f,w=k;break}return{line:{x1:h,y1:g,x2:p,y2:v},tick:{x:w,y:E}}}function Ime(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Ome(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Pme(t){var{option:e,tickProps:n,value:r}=t,a,s=dt(n.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(e))a=b.cloneElement(e,An(An({},n),{},{className:s}));else if(typeof e=="function")a=e(An(An({},n),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(c=dt(c,e==null?void 0:e.className)),a=b.createElement(Bv,_c({},n,{className:c}),r)}return a}var Rme=b.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:a,stroke:s,tickFormatter:c,unit:d,padding:f,tickTextProps:h,orientation:p,mirror:g,x:v,y:w,width:E,height:j,tickSize:S,tickMargin:k,fontSize:z,letterSpacing:M,getTicksConfig:T,events:R,axisType:V}=t,N=JA(An(An({},T),{},{ticks:n}),z,M),I=Ime(p,g),C=Ome(p,g),D=Nr(T),O=yc(r),U={};typeof a=="object"&&(U=a);var $=An(An({},D),{},{fill:"none"},U),Z=N.map(ie=>An({entry:ie},kme(ie,v,w,E,j,p,S,g,k))),he=Z.map(ie=>{var{entry:H,line:K}=ie;return b.createElement(sn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},a&&b.createElement("line",_c({},$,K,{className:dt("recharts-cartesian-axis-tick-line",vc(a,"className"))})))}),Y=Z.map((ie,H)=>{var{entry:K,tick:le}=ie,q=An(An(An(An({textAnchor:I,verticalAnchor:C},D),{},{stroke:"none",fill:s},O),le),{},{index:H,payload:K,visibleTicksCount:N.length,tickFormatter:c,padding:f},h);return b.createElement(sn,_c({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},iv(R,K,H)),r&&b.createElement(Pme,{option:r,tickProps:q,value:"".concat(typeof c=="function"?c(K.value,H):K.value).concat(d||"")}))});return b.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(V,"-ticks")},Y.length>0&&b.createElement(Cr,{zIndex:pn.label},b.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(V,"-tick-labels"),ref:e},Y)),he.length>0&&b.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(V,"-tick-lines")},he))}),Dme=b.forwardRef((t,e)=>{var{axisLine:n,width:r,height:a,className:s,hide:c,ticks:d,axisType:f}=t,h=jme(t,Eme),[p,g]=b.useState(""),[v,w]=b.useState(""),E=b.useRef(null);b.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var S;return _me({ticks:E.current,label:(S=t.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var j=b.useCallback(S=>{if(S){var k=S.getElementsByClassName("recharts-cartesian-axis-tick-value");E.current=k;var z=k[0];if(z){var M=window.getComputedStyle(z),T=M.fontSize,R=M.letterSpacing;(T!==p||R!==v)&&(g(T),w(R))}}},[p,v]);return c||r!=null&&r<=0||a!=null&&a<=0?null:b.createElement(Cr,{zIndex:t.zIndex},b.createElement(sn,{className:dt("recharts-cartesian-axis",s)},b.createElement(Cme,{x:t.x,y:t.y,width:r,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Nr(t)}),b.createElement(Rme,{ref:j,axisType:f,events:h,fontSize:p,getTicksConfig:t,height:t.height,letterSpacing:v,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:d,unit:t.unit,width:t.width,x:t.x,y:t.y}),b.createElement(cue,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},b.createElement(xue,{label:t.label,labelRef:t.labelRef}),t.children)))}),eN=b.forwardRef((t,e)=>{var n=On(t,Rs);return b.createElement(Dme,_c({},n,{ref:e}))});eN.displayName="CartesianAxis";var Mme=["x1","y1","x2","y2","key"],Lme=["offset"],zme=["xAxisId","yAxisId"],Ume=["xAxisId","yAxisId"];function ID(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function hr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ID(Object(n),!0).forEach(function(r){Vme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ID(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vme(t,e,n){return(e=$me(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $me(t){var e=Bme(t,"string");return typeof e=="symbol"?e:e+""}function Bme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ec.apply(null,arguments)}function v0(t,e){if(t==null)return{};var n,r,a=Fme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Fme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qme=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:a,width:s,height:c,ry:d}=t;return b.createElement("rect",{x:r,y:a,ry:d,width:s,height:c,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function t8(t){var{option:e,lineItemProps:n}=t,r;if(b.isValidElement(e))r=b.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var a,{x1:s,y1:c,x2:d,y2:f,key:h}=n,p=v0(n,Mme),g=(a=Nr(p))!==null&&a!==void 0?a:{},{offset:v}=g,w=v0(g,Lme);r=b.createElement("line",ec({},w,{x1:s,y1:c,x2:d,y2:f,fill:"none",key:h}))}return r}function Hme(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:a}=t;if(!r||!a||!a.length)return null;var{xAxisId:s,yAxisId:c}=t,d=v0(t,zme),f=a.map((h,p)=>{var g=hr(hr({},d),{},{x1:e,y1:h,x2:e+n,y2:h,key:"line-".concat(p),index:p});return b.createElement(t8,{key:"line-".concat(p),option:r,lineItemProps:g})});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Gme(t){var{y:e,height:n,vertical:r=!0,verticalPoints:a}=t;if(!r||!a||!a.length)return null;var{xAxisId:s,yAxisId:c}=t,d=v0(t,Ume),f=a.map((h,p)=>{var g=hr(hr({},d),{},{x1:h,y1:e,x2:h,y2:e+n,key:"line-".concat(p),index:p});return b.createElement(t8,{option:r,lineItemProps:g,key:"line-".concat(p)})});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function Kme(t){var{horizontalFill:e,fillOpacity:n,x:r,y:a,width:s,height:c,horizontalPoints:d,horizontal:f=!0}=t;if(!f||!e||!e.length||d==null)return null;var h=d.map(g=>Math.round(g+a-a)).sort((g,v)=>g-v);a!==h[0]&&h.unshift(0);var p=h.map((g,v)=>{var w=!h[v+1],E=w?a+c-g:h[v+1]-g;if(E<=0)return null;var j=v%e.length;return b.createElement("rect",{key:"react-".concat(v),y:g,x:r,height:E,width:s,stroke:"none",fill:e[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function Wme(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:a,y:s,width:c,height:d,verticalPoints:f}=t;if(!e||!n||!n.length)return null;var h=f.map(g=>Math.round(g+a-a)).sort((g,v)=>g-v);a!==h[0]&&h.unshift(0);var p=h.map((g,v)=>{var w=!h[v+1],E=w?a+c-g:h[v+1]-g;if(E<=0)return null;var j=v%n.length;return b.createElement("rect",{key:"react-".concat(v),x:g,y:s,width:E,height:d,stroke:"none",fill:n[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var Yme=(t,e)=>{var{xAxis:n,width:r,height:a,offset:s}=t;return V5(JA(hr(hr(hr({},Rs),n),{},{ticks:$5(n),viewBox:{x:0,y:0,width:r,height:a}})),s.left,s.left+s.width,e)},Qme=(t,e)=>{var{yAxis:n,width:r,height:a,offset:s}=t;return V5(JA(hr(hr(hr({},Rs),n),{},{ticks:$5(n),viewBox:{x:0,y:0,width:r,height:a}})),s.top,s.top+s.height,e)},Xme={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:pn.grid};function th(t){var e=X5(),n=Z5(),r=Q5(),a=hr(hr({},On(t,Xme)),{},{x:je(t.x)?t.x:r.left,y:je(t.y)?t.y:r.top,width:je(t.width)?t.width:r.width,height:je(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:c,x:d,y:f,width:h,height:p,syncWithTicks:g,horizontalValues:v,verticalValues:w}=a,E=Qn(),j=Ne(C=>_R(C,"xAxis",s,E)),S=Ne(C=>_R(C,"yAxis",c,E));if(!Ki(h)||!Ki(p)||!je(d)||!je(f))return null;var k=a.verticalCoordinatesGenerator||Yme,z=a.horizontalCoordinatesGenerator||Qme,{horizontalPoints:M,verticalPoints:T}=a;if((!M||!M.length)&&typeof z=="function"){var R=v&&v.length,V=z({yAxis:S?hr(hr({},S),{},{ticks:R?v:S.ticks}):void 0,width:e??h,height:n??p,offset:r},R?!0:g);By(Array.isArray(V),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof V,"]")),Array.isArray(V)&&(M=V)}if((!T||!T.length)&&typeof k=="function"){var N=w&&w.length,I=k({xAxis:j?hr(hr({},j),{},{ticks:N?w:j.ticks}):void 0,width:e??h,height:n??p,offset:r},N?!0:g);By(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(T=I)}return b.createElement(Cr,{zIndex:a.zIndex},b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(qme,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),b.createElement(Kme,ec({},a,{horizontalPoints:M})),b.createElement(Wme,ec({},a,{verticalPoints:T})),b.createElement(Hme,ec({},a,{offset:r,horizontalPoints:M,xAxis:j,yAxis:S})),b.createElement(Gme,ec({},a,{offset:r,verticalPoints:T,xAxis:j,yAxis:S}))))}th.displayName="CartesianGrid";var n8=(t,e,n,r)=>Qi(t,"xAxis",e,r),r8=(t,e,n,r)=>Yi(t,"xAxis",e,r),a8=(t,e,n,r)=>Qi(t,"yAxis",n,r),i8=(t,e,n,r)=>Yi(t,"yAxis",n,r),Zme=te([Je,n8,a8,r8,i8],(t,e,n,r,a)=>ts(t,"xAxis")?rl(e,r,!1):rl(n,a,!1)),Jme=(t,e,n,r,a)=>a;function epe(t){return t.type==="line"}var tpe=te([jm,Jme],(t,e)=>t.filter(epe).find(n=>n.id===e)),npe=te([Je,n8,a8,r8,i8,tpe,Zme,bm],(t,e,n,r,a,s,c,d)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:p}=d;if(!(s==null||e==null||n==null||r==null||a==null||r.length===0||a.length===0||c==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:g,data:v}=s,w;if(v!=null&&v.length>0?w=v:w=f==null?void 0:f.slice(h,p+1),w!=null)return _pe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataKey:g,bandSize:c,displayedData:w})}});function s8(t){var e=yc(t),n=3,r=2;if(e!=null){var{r:a,strokeWidth:s}=e,c=Number(a),d=Number(s);return(Number.isNaN(c)||c<0)&&(c=n),(Number.isNaN(d)||d<0)&&(d=r),{r:c,strokeWidth:d}}return{r:n,strokeWidth:r}}var rpe=["id"],ape=["type","layout","connectNulls","needClip","shape"],ipe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function $h(){return $h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$h.apply(null,arguments)}function OD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(n),!0).forEach(function(r){spe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function spe(t,e,n){return(e=ope(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ope(t){var e=lpe(t,"string");return typeof e=="symbol"?e:e+""}function lpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tN(t,e){if(t==null)return{};var n,r,a=cpe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function cpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var upe=t=>{var{dataKey:e,name:n,stroke:r,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:r,value:fl(n,e),payload:t}]},dpe=b.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:a,fill:s,name:c,hide:d,unit:f,tooltipType:h}=t,p={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:s,dataKey:e,nameKey:void 0,name:fl(c,e),hide:d,type:h,color:r,unit:f}};return b.createElement(Gv,{tooltipEntrySettings:p})}),o8=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function fpe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],a=0;a<e;++a)r=[...r,...n];return r}var hpe=(t,e,n)=>{var r=n.reduce((g,v)=>g+v);if(!r)return o8(e,t);for(var a=Math.floor(t/r),s=t%r,c=e-t,d=[],f=0,h=0;f<n.length;h+=n[f],++f)if(h+n[f]>s){d=[...n.slice(0,f),s-h];break}var p=d.length%2===0?[0,c]:[c];return[...fpe(n,a),...d,...p].map(g=>"".concat(g,"px")).join(", ")};function mpe(t){var{clipPathId:e,points:n,props:r}=t,{dot:a,dataKey:s,needClip:c}=r,{id:d}=r,f=tN(r,rpe),h=Nr(f);return b.createElement(HU,{points:n,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:c,clipPathId:e})}function ppe(t){var{showLabels:e,children:n,points:r}=t,a=b.useMemo(()=>r==null?void 0:r.map(s=>{var c,d,f={x:(c=s.x)!==null&&c!==void 0?c:0,y:(d=s.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Oi(Oi({},f),{},{value:s.value,payload:s.payload,viewBox:f,parentViewBox:void 0,fill:void 0})}),[r]);return b.createElement(VA,{value:e?a:void 0},n)}function PD(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:a,props:s}=t,{type:c,layout:d,connectNulls:f,needClip:h,shape:p}=s,g=tN(s,ape),v=Oi(Oi({},yr(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(e,")"):void 0,points:r,type:c,layout:d,connectNulls:f,strokeDasharray:a??s.strokeDasharray});return b.createElement(b.Fragment,null,(r==null?void 0:r.length)>1&&b.createElement(HA,$h({shapeType:"curve",option:p},v,{pathRef:n})),b.createElement(mpe,{points:r,clipPathId:e,props:s}))}function gpe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function ype(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:a,longestAnimatedLengthRef:s}=t,{points:c,strokeDasharray:d,isAnimationActive:f,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:v,width:w,height:E,onAnimationEnd:j,onAnimationStart:S}=n,k=a.current,z=wd(c,"recharts-line-"),M=b.useRef(z),[T,R]=b.useState(!1),V=!T,N=b.useCallback(()=>{typeof j=="function"&&j(),R(!1)},[j]),I=b.useCallback(()=>{typeof S=="function"&&S(),R(!0)},[S]),C=gpe(r.current),D=b.useRef(0);M.current!==z&&(D.current=s.current,M.current=z);var O=D.current;return b.createElement(ppe,{points:c,showLabels:V},n.children,b.createElement(bd,{animationId:z,begin:h,duration:p,isActive:f,easing:g,onAnimationEnd:N,onAnimationStart:I,key:z},U=>{var $=gt(O,C+O,U),Z=Math.min($,C),he;if(f)if(d){var Y="".concat(d).split(/[,\s]+/gim).map(K=>parseFloat(K));he=hpe(Z,C,Y)}else he=o8(C,Z);else he=d==null?void 0:String(d);if(U>0&&C>0&&(a.current=c,s.current=Math.max(s.current,Z)),k){var ie=k.length/c.length,H=U===1?c:c.map((K,le)=>{var q=Math.floor(le*ie);if(k[q]){var ae=k[q];return Oi(Oi({},K),{},{x:gt(ae.x,K.x,U),y:gt(ae.y,K.y,U)})}return v?Oi(Oi({},K),{},{x:gt(w*2,K.x,U),y:gt(E/2,K.y,U)}):Oi(Oi({},K),{},{x:K.x,y:K.y})});return a.current=H,b.createElement(PD,{props:n,points:H,clipPathId:e,pathRef:r,strokeDasharray:he})}return b.createElement(PD,{props:n,points:c,clipPathId:e,pathRef:r,strokeDasharray:he})}),b.createElement(Fv,{label:n.label}))}function vpe(t){var{clipPathId:e,props:n}=t,r=b.useRef(null),a=b.useRef(0),s=b.useRef(null);return b.createElement(ype,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:a,pathRef:s})}var xpe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:jt(t.payload,e)}};class bpe extends b.Component{render(){var{hide:e,dot:n,points:r,className:a,xAxisId:s,yAxisId:c,top:d,left:f,width:h,height:p,id:g,needClip:v,zIndex:w}=this.props;if(e)return null;var E=dt("recharts-line",a),j=g,{r:S,strokeWidth:k}=s8(n),z=qA(n),M=S*2+k,T=v?"url(#clipPath-".concat(z?"":"dots-").concat(j,")"):void 0;return b.createElement(Cr,{zIndex:w},b.createElement(sn,{className:E},v&&b.createElement("defs",null,b.createElement(XA,{clipPathId:j,xAxisId:s,yAxisId:c}),!z&&b.createElement("clipPath",{id:"clipPath-dots-".concat(j)},b.createElement("rect",{x:f-M/2,y:d-M/2,width:h+M,height:p+M}))),b.createElement(WU,{xAxisId:s,yAxisId:c,data:r,dataPointFormatter:xpe,errorBarOffset:0},b.createElement(vpe,{props:this.props,clipPathId:j}))),b.createElement(NE,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:T}))}}var l8={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:pn.line,type:"linear"};function wpe(t){var e=On(t,l8),{activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:s,animationEasing:c,connectNulls:d,dot:f,hide:h,isAnimationActive:p,label:g,legendType:v,xAxisId:w,yAxisId:E,id:j}=e,S=tN(e,ipe),{needClip:k}=Qv(w,E),z=Yv(),M=Cc(),T=Qn(),R=Ne(D=>npe(D,w,E,T,j));if(M!=="horizontal"&&M!=="vertical"||R==null||z==null)return null;var{height:V,width:N,x:I,y:C}=z;return b.createElement(bpe,$h({},S,{id:j,connectNulls:d,dot:f,activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:s,animationEasing:c,isAnimationActive:p,hide:h,label:g,legendType:v,xAxisId:w,yAxisId:E,points:R,layout:M,height:V,width:N,left:I,top:C,needClip:k}))}function _pe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:a,yAxisTicks:s,dataKey:c,bandSize:d,displayedData:f}=t;return f.map((h,p)=>{var g=jt(h,c);if(e==="horizontal"){var v=$y({axis:n,ticks:a,bandSize:d,entry:h,index:p}),w=Vt(g)?null:r.scale(g);return{x:v,y:w,value:g,payload:h}}var E=Vt(g)?null:n.scale(g),j=$y({axis:r,ticks:s,bandSize:d,entry:h,index:p});return E==null||j==null?null:{x:E,y:j,value:g,payload:h}}).filter(Boolean)}function Epe(t){var e=On(t,l8),n=Qn();return b.createElement(Kv,{id:e.id,type:"line"},r=>b.createElement(b.Fragment,null,b.createElement(YA,{legendPayload:upe(e)}),b.createElement(dpe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),b.createElement(QA,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),b.createElement(wpe,$h({},e,{id:r}))))}var c8=b.memo(Epe,Om);c8.displayName="Line";var u8=(t,e,n,r)=>Qi(t,"xAxis",e,r),d8=(t,e,n,r)=>Yi(t,"xAxis",e,r),f8=(t,e,n,r)=>Qi(t,"yAxis",n,r),h8=(t,e,n,r)=>Yi(t,"yAxis",n,r),jpe=te([Je,u8,f8,d8,h8],(t,e,n,r,a)=>ts(t,"xAxis")?rl(e,r,!1):rl(n,a,!1)),Spe=(t,e,n,r,a)=>a,m8=te([jm,Spe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),Ape=(t,e,n,r,a)=>{var s,c=m8(t,e,n,r,a);if(c!=null){var d=Je(t),f=ts(d,"xAxis"),h;if(f?h=Uh(t,"yAxis",n,r):h=Uh(t,"xAxis",e,r),h!=null){var{stackId:p}=c,g=Ov(c);if(!(p==null||g==null)){var v=(s=h[p])===null||s===void 0?void 0:s.stackedData;return v==null?void 0:v.find(w=>w.key===g)}}}},Npe=te([Je,u8,f8,d8,h8,Ape,bm,jpe,m8,yse],(t,e,n,r,a,s,c,d,f,h)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:v}=c;if(!(f==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||a==null||r.length===0||a.length===0||d==null)){var{data:w}=f,E;if(w&&w.length>0?E=w:E=p==null?void 0:p.slice(g,v+1),E!=null)return Gpe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataStartIndex:g,areaSettings:f,stackedData:s,displayedData:E,chartBaseValue:h,bandSize:d})}}),Tpe=["id"],Cpe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function oc(){return oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oc.apply(null,arguments)}function p8(t,e){if(t==null)return{};var n,r,a=kpe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function kpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function RD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Pu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(n),!0).forEach(function(r){Ipe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ipe(t,e,n){return(e=Ope(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ope(t){var e=Ppe(t,"string");return typeof e=="symbol"?e:e+""}function Ppe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x0(t,e){return t&&t!=="none"?t:e}var Rpe=t=>{var{dataKey:e,name:n,stroke:r,fill:a,legendType:s,hide:c}=t;return[{inactive:c,dataKey:e,type:s,color:x0(r,a),value:fl(n,e),payload:t}]},Dpe=b.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:a,fill:s,name:c,hide:d,unit:f,tooltipType:h}=t,p={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:s,dataKey:e,nameKey:void 0,name:fl(c,e),hide:d,type:h,color:x0(r,s),unit:f}};return b.createElement(Gv,{tooltipEntrySettings:p})});function Mpe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:a,dot:s,dataKey:c}=r,d=Nr(r);return b.createElement(HU,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:c,baseProps:d,needClip:a,clipPathId:e})}function Lpe(t){var{showLabels:e,children:n,points:r}=t,a=r.map(s=>{var c,d,f={x:(c=s.x)!==null&&c!==void 0?c:0,y:(d=s.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Pu(Pu({},f),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:f,fill:void 0})});return b.createElement(VA,{value:e?a:void 0},n)}function DD(t){var{points:e,baseLine:n,needClip:r,clipPathId:a,props:s}=t,{layout:c,type:d,stroke:f,connectNulls:h,isRange:p}=s,{id:g}=s,v=p8(s,Tpe),w=Nr(v),E=yr(v);return b.createElement(b.Fragment,null,(e==null?void 0:e.length)>1&&b.createElement(sn,{clipPath:r?"url(#clipPath-".concat(a,")"):void 0},b.createElement(Bu,oc({},E,{id:g,points:e,connectNulls:h,type:d,baseLine:n,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&b.createElement(Bu,oc({},w,{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:e})),f!=="none"&&p&&b.createElement(Bu,oc({},w,{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:n}))),b.createElement(Mpe,{points:e,props:v,clipPathId:a}))}function zpe(t){var{alpha:e,baseLine:n,points:r,strokeWidth:a}=t,s=r[0].y,c=r[r.length-1].y;if(!$t(s)||!$t(c))return null;var d=e*Math.abs(s-c),f=Math.max(...r.map(h=>h.x||0));return je(n)?f=Math.max(n,f):n&&Array.isArray(n)&&n.length&&(f=Math.max(...n.map(h=>h.x||0),f)),je(f)?b.createElement("rect",{x:0,y:s<c?s:s-d,width:f+(a?parseInt("".concat(a),10):1),height:Math.floor(d)}):null}function Upe(t){var{alpha:e,baseLine:n,points:r,strokeWidth:a}=t,s=r[0].x,c=r[r.length-1].x;if(!$t(s)||!$t(c))return null;var d=e*Math.abs(s-c),f=Math.max(...r.map(h=>h.y||0));return je(n)?f=Math.max(n,f):n&&Array.isArray(n)&&n.length&&(f=Math.max(...n.map(h=>h.y||0),f)),je(f)?b.createElement("rect",{x:s<c?s:s-d,y:0,width:d,height:Math.floor(f+(a?parseInt("".concat(a),10):1))}):null}function Vpe(t){var{alpha:e,layout:n,points:r,baseLine:a,strokeWidth:s}=t;return n==="vertical"?b.createElement(zpe,{alpha:e,points:r,baseLine:a,strokeWidth:s}):b.createElement(Upe,{alpha:e,points:r,baseLine:a,strokeWidth:s})}function $pe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:s}=t,{points:c,baseLine:d,isAnimationActive:f,animationBegin:h,animationDuration:p,animationEasing:g,onAnimationStart:v,onAnimationEnd:w}=r,E=b.useMemo(()=>({points:c,baseLine:d}),[c,d]),j=wd(E,"recharts-area-"),S=Yte(),[k,z]=b.useState(!1),M=!k,T=b.useCallback(()=>{typeof w=="function"&&w(),z(!1)},[w]),R=b.useCallback(()=>{typeof v=="function"&&v(),z(!0)},[v]);if(S==null)return null;var V=a.current,N=s.current;return b.createElement(Lpe,{showLabels:M,points:c},r.children,b.createElement(bd,{animationId:j,begin:h,duration:p,isActive:f,easing:g,onAnimationEnd:T,onAnimationStart:R,key:j},I=>{if(V){var C=V.length/c.length,D=I===1?c:c.map((U,$)=>{var Z=Math.floor($*C);if(V[Z]){var he=V[Z];return Pu(Pu({},U),{},{x:gt(he.x,U.x,I),y:gt(he.y,U.y,I)})}return U}),O;return je(d)?O=gt(N,d,I):Vt(d)||Ra(d)?O=gt(N,0,I):O=d.map((U,$)=>{var Z=Math.floor($*C);if(Array.isArray(N)&&N[Z]){var he=N[Z];return Pu(Pu({},U),{},{x:gt(he.x,U.x,I),y:gt(he.y,U.y,I)})}return U}),I>0&&(a.current=D,s.current=O),b.createElement(DD,{points:D,baseLine:O,needClip:e,clipPathId:n,props:r})}return I>0&&(a.current=c,s.current=d),b.createElement(sn,null,f&&b.createElement("defs",null,b.createElement("clipPath",{id:"animationClipPath-".concat(n)},b.createElement(Vpe,{alpha:I,points:c,baseLine:d,layout:S,strokeWidth:r.strokeWidth}))),b.createElement(sn,{clipPath:"url(#animationClipPath-".concat(n,")")},b.createElement(DD,{points:c,baseLine:d,needClip:e,clipPathId:n,props:r})))}),b.createElement(Fv,{label:r.label}))}function Bpe(t){var{needClip:e,clipPathId:n,props:r}=t,a=b.useRef(null),s=b.useRef();return b.createElement($pe,{needClip:e,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:s})}class Fpe extends b.PureComponent{render(){var{hide:e,dot:n,points:r,className:a,top:s,left:c,needClip:d,xAxisId:f,yAxisId:h,width:p,height:g,id:v,baseLine:w,zIndex:E}=this.props;if(e)return null;var j=dt("recharts-area",a),S=v,{r:k,strokeWidth:z}=s8(n),M=qA(n),T=k*2+z,R=d?"url(#clipPath-".concat(M?"":"dots-").concat(S,")"):void 0;return b.createElement(Cr,{zIndex:E},b.createElement(sn,{className:j},d&&b.createElement("defs",null,b.createElement(XA,{clipPathId:S,xAxisId:f,yAxisId:h}),!M&&b.createElement("clipPath",{id:"clipPath-dots-".concat(S)},b.createElement("rect",{x:c-T/2,y:s-T/2,width:p+T,height:g+T}))),b.createElement(Bpe,{needClip:d,clipPathId:S,props:this.props})),b.createElement(NE,{points:r,mainColor:x0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:R}),this.props.isRange&&Array.isArray(w)&&b.createElement(NE,{points:w,mainColor:x0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:R}))}}var g8={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:pn.area};function qpe(t){var e,n=On(t,g8),{activeDot:r,animationBegin:a,animationDuration:s,animationEasing:c,connectNulls:d,dot:f,fill:h,fillOpacity:p,hide:g,isAnimationActive:v,legendType:w,stroke:E,xAxisId:j,yAxisId:S}=n,k=p8(n,Cpe),z=Cc(),M=gU(),{needClip:T}=Qv(j,S),R=Qn(),{points:V,isRange:N,baseLine:I}=(e=Ne(Z=>Npe(Z,j,S,R,t.id)))!==null&&e!==void 0?e:{},C=Yv();if(z!=="horizontal"&&z!=="vertical"||C==null||M!=="AreaChart"&&M!=="ComposedChart")return null;var{height:D,width:O,x:U,y:$}=C;return!V||!V.length?null:b.createElement(Fpe,oc({},k,{activeDot:r,animationBegin:a,animationDuration:s,animationEasing:c,baseLine:I,connectNulls:d,dot:f,fill:h,fillOpacity:p,height:D,hide:g,layout:z,isAnimationActive:v==="auto"?!hl.isSsr:v,isRange:N,legendType:w,needClip:T,points:V,stroke:E,width:O,left:U,top:$,xAxisId:j,yAxisId:S}))}var Hpe=(t,e,n,r,a)=>{var s=n??e;if(je(s))return s;var c=t==="horizontal"?a:r,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return s==="dataMin"?h:s==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return s==="dataMin"?d[0]:s==="dataMax"?d[1]:d[0]};function Gpe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:a,layout:s,chartBaseValue:c,xAxis:d,yAxis:f,displayedData:h,dataStartIndex:p,xAxisTicks:g,yAxisTicks:v,bandSize:w}=t,E=a&&a.length,j=Hpe(s,c,n,d,f),S=s==="horizontal",k=!1,z=h.map((T,R)=>{var V;E?V=a[p+R]:(V=jt(T,r),Array.isArray(V)?k=!0:V=[j,V]);var N=V[1]==null||E&&!e&&jt(T,r)==null;return S?{x:$y({axis:d,ticks:g,bandSize:w,entry:T,index:R}),y:N?null:f.scale(V[1]),value:V,payload:T}:{x:N?null:d.scale(V[1]),y:$y({axis:f,ticks:v,bandSize:w,entry:T,index:R}),value:V,payload:T}}),M;return E||k?M=z.map(T=>{var R=Array.isArray(T.value)?T.value[0]:null;return S?{x:T.x,y:R!=null&&T.y!=null?f.scale(R):null,payload:T.payload}:{x:R!=null?d.scale(R):null,y:T.y,payload:T.payload}}):M=S?f.scale(j):d.scale(j),{points:z,baseLine:M,isRange:k}}function Kpe(t){var e=On(t,g8),n=Qn();return b.createElement(Kv,{id:e.id,type:"area"},r=>b.createElement(b.Fragment,null,b.createElement(YA,{legendPayload:Rpe(e)}),b.createElement(Dpe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),b.createElement(QA,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:B5(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),b.createElement(qpe,oc({},e,{id:r}))))}var y8=b.memo(Kpe,Om);y8.displayName="Area";var Wpe=["domain","range"],Ype=["domain","range"];function MD(t,e){if(t==null)return{};var n,r,a=Qpe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Qpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function LD(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function v8(t,e){if(t===e)return!0;var{domain:n,range:r}=t,a=MD(t,Wpe),{domain:s,range:c}=e,d=MD(e,Ype);return!LD(n,s)||!LD(r,c)?!1:Om(a,d)}var Xpe=["dangerouslySetInnerHTML","ticks"],Zpe=["id"];function CE(){return CE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CE.apply(null,arguments)}function zD(t,e){if(t==null)return{};var n,r,a=Jpe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Jpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ege(t){var e=Wt(),n=b.useRef(null);return b.useLayoutEffect(()=>{n.current===null?e(dfe(t)):n.current!==t&&e(ffe({prev:n.current,next:t})),n.current=t},[t,e]),b.useLayoutEffect(()=>()=>{n.current&&(e(hfe(n.current)),n.current=null)},[e]),null}var tge=t=>{var{xAxisId:e,className:n}=t,r=Ne(NS),a=Qn(),s="xAxis",c=Ne(S=>Td(S,s,e,a)),d=Ne(S=>Kz(S,s,e,a)),f=Ne(S=>Fz(S,e)),h=Ne(S=>moe(S,e)),p=Ne(S=>jz(S,e));if(f==null||h==null||p==null)return null;var{dangerouslySetInnerHTML:g,ticks:v}=t,w=zD(t,Xpe),{id:E}=p,j=zD(p,Zpe);return b.createElement(eN,CE({},w,j,{scale:c,x:h.x,y:h.y,width:f.width,height:f.height,className:dt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:d,axisType:s}))},nge={allowDataOverflow:qn.allowDataOverflow,allowDecimals:qn.allowDecimals,allowDuplicatedCategory:qn.allowDuplicatedCategory,angle:qn.angle,axisLine:Rs.axisLine,height:qn.height,hide:!1,includeHidden:qn.includeHidden,interval:qn.interval,minTickGap:qn.minTickGap,mirror:qn.mirror,orientation:qn.orientation,padding:qn.padding,reversed:qn.reversed,scale:qn.scale,tick:qn.tick,tickCount:qn.tickCount,tickLine:Rs.tickLine,tickSize:Rs.tickSize,type:qn.type,xAxisId:0},rge=t=>{var e=On(t,nge);return b.createElement(b.Fragment,null,b.createElement(ege,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),b.createElement(tge,e))},Ru=b.memo(rge,v8);Ru.displayName="XAxis";var age=["dangerouslySetInnerHTML","ticks"],ige=["id"];function kE(){return kE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kE.apply(null,arguments)}function UD(t,e){if(t==null)return{};var n,r,a=sge(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function sge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function oge(t){var e=Wt(),n=b.useRef(null);return b.useLayoutEffect(()=>{n.current===null?e(mfe(t)):n.current!==t&&e(pfe({prev:n.current,next:t})),n.current=t},[t,e]),b.useLayoutEffect(()=>()=>{n.current&&(e(gfe(n.current)),n.current=null)},[e]),null}var lge=t=>{var{yAxisId:e,className:n,width:r,label:a}=t,s=b.useRef(null),c=b.useRef(null),d=Ne(NS),f=Qn(),h=Wt(),p="yAxis",g=Ne(R=>Td(R,p,e,f)),v=Ne(R=>qz(R,e)),w=Ne(R=>goe(R,e)),E=Ne(R=>Kz(R,p,e,f)),j=Ne(R=>Sz(R,e));if(b.useLayoutEffect(()=>{if(!(r!=="auto"||!v||UA(a)||b.isValidElement(a)||j==null)){var R=s.current;if(R){var V=R.getCalculatedWidth();Math.round(v.width)!==Math.round(V)&&h(yfe({id:e,width:V}))}}},[E,v,h,a,e,r,j]),v==null||w==null||j==null)return null;var{dangerouslySetInnerHTML:S,ticks:k}=t,z=UD(t,age),{id:M}=j,T=UD(j,ige);return b.createElement(eN,kE({},z,T,{ref:s,labelRef:c,scale:g,x:w.x,y:w.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:v.width,height:v.height,className:dt("recharts-".concat(p," ").concat(p),n),viewBox:d,ticks:E,axisType:p}))},cge={allowDataOverflow:Hn.allowDataOverflow,allowDecimals:Hn.allowDecimals,allowDuplicatedCategory:Hn.allowDuplicatedCategory,angle:Hn.angle,axisLine:Rs.axisLine,hide:!1,includeHidden:Hn.includeHidden,interval:Hn.interval,minTickGap:Hn.minTickGap,mirror:Hn.mirror,orientation:Hn.orientation,padding:Hn.padding,reversed:Hn.reversed,scale:Hn.scale,tick:Hn.tick,tickCount:Hn.tickCount,tickLine:Rs.tickLine,tickSize:Rs.tickSize,type:Hn.type,width:Hn.width,yAxisId:0},uge=t=>{var e=On(t,cge);return b.createElement(b.Fragment,null,b.createElement(oge,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),b.createElement(lge,e))},Du=b.memo(uge,v8);Du.displayName="YAxis";var dge=(t,e)=>e,nN=te([dge,Je,_z,Un,cU,Js,kle,Ln],Lle),rN=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},x8=Da("mouseClick"),b8=hm();b8.startListening({actionCreator:x8,effect:(t,e)=>{var n=t.payload,r=nN(e.getState(),rN(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(koe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var IE=Da("mouseMove"),w8=hm(),Dg=null;w8.startListening({actionCreator:IE,effect:(t,e)=>{var n=t.payload;Dg!==null&&cancelAnimationFrame(Dg);var r=rN(n);Dg=requestAnimationFrame(()=>{var a=e.getState(),s=CA(a,a.tooltip.settings.shared);if(s==="axis"){var c=nN(a,r);(c==null?void 0:c.activeIndex)!=null?e.dispatch(tU({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):e.dispatch(eU())}Dg=null})}});var VD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},_8=qr({name:"rootProps",initialState:VD,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:VD.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),fge=_8.reducer,{updateOptions:hge}=_8.actions,E8=qr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:mge}=E8.actions,pge=E8.reducer,j8=Da("keyDown"),S8=Da("focus"),aN=hm();aN.startListening({actionCreator:j8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=kA(a,kd(n),Am(n),km(n)),d=c==null?-1:Number(c);if(!(!Number.isFinite(d)||d<0)){var f=Js(n);if(s==="Enter"){var h=c0(n,"axis","hover",String(a.index));e.dispatch(wE({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:h}));return}var p=boe(n),g=p==="left-to-right"?1:-1,v=s==="ArrowRight"?1:-1,w=d+v*g;if(!(f==null||w>=f.length||w<0)){var E=c0(n,"axis","hover",String(w));e.dispatch(wE({active:!0,activeIndex:w.toString(),activeDataKey:void 0,activeCoordinate:E}))}}}}}});aN.startListening({actionCreator:S8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&a.index==null){var s="0",c=c0(n,"axis","hover",String(s));e.dispatch(wE({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:c}))}}}});var Aa=Da("externalEvent"),A8=hm(),n_=new Map;A8.startListening({actionCreator:Aa,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var a=r.type,s=n_.get(a);s!==void 0&&cancelAnimationFrame(s);var c=requestAnimationFrame(()=>{try{var d=e.getState(),f={activeCoordinate:ple(d),activeDataKey:hU(d),activeIndex:il(d),activeLabel:fU(d),activeTooltipIndex:il(d),isTooltipActive:gle(d)};n(f,r)}finally{n_.delete(a)}});n_.set(a,c)}}});var gge=te([Cd],t=>t.tooltipItemPayloads),yge=te([gge,Tm,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var a=t.find(d=>d.settings.dataKey===r);if(a!=null){var{positions:s}=a;if(s!=null){var c=e(s,n);return c}}}),N8=Da("touchMove"),T8=hm();T8.startListening({actionCreator:N8,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),a=CA(r,r.tooltip.settings.shared);if(a==="axis"){var s=nN(r,rN({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(tU({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var c,d=n.touches[0];if(document.elementFromPoint==null)return;var f=document.elementFromPoint(d.clientX,d.clientY);if(!f||!f.getAttribute)return;var h=f.getAttribute(q5),p=(c=f.getAttribute(H5))!==null&&c!==void 0?c:void 0,g=yge(e.getState(),h,p);e.dispatch(Jz({activeDataKey:p,activeIndex:h,activeCoordinate:g}))}}}});var vge=d5({brush:rme,cartesianAxis:vfe,chartData:mce,errorBars:Lfe,graphicalItems:Sde,layout:rte,legend:cne,options:cce,polarAxis:Vue,polarOptions:pge,referenceElements:ume,rootProps:fge,tooltip:Ioe,zIndex:Xle}),xge=function(e){return Tee({reducer:vge,preloadedState:e,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([b8.middleware,w8.middleware,aN.middleware,A8.middleware,T8.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(A5({type:"raf"}))},devTools:hl.devToolsEnabled})};function C8(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,a=Qn(),s=b.useRef(null);if(a)return n;s.current==null&&(s.current=xge(e));var c=vS;return b.createElement(ihe,{context:c,store:s.current},n)}function bge(t){var{layout:e,margin:n}=t,r=Wt(),a=Qn();return b.useEffect(()=>{a||(r(ete(e)),r(Jee(n)))},[r,a,e,n]),null}var k8=b.memo(bge,Om);function I8(t){var e=Wt();return b.useEffect(()=>{e(hge(t))},[e,t]),null}function $D(t){var{zIndex:e,isPanorama:n}=t,r=n?"recharts-zindex-panorama-":"recharts-zindex-",a=BU("".concat(r).concat(e)),s=Wt();return b.useLayoutEffect(()=>(s(Yle({zIndex:e,elementId:a,isPanorama:n})),()=>{s(Qle({zIndex:e,isPanorama:n}))}),[s,e,a,n]),b.createElement("g",{id:a})}function BD(t){var{children:e,isPanorama:n}=t,r=Ne(Ule);if(!r||r.length===0)return e;var a=r.filter(c=>c<0),s=r.filter(c=>c>0);return b.createElement(b.Fragment,null,a.map(c=>b.createElement($D,{key:c,zIndex:c,isPanorama:n})),e,s.map(c=>b.createElement($D,{key:c,zIndex:c,isPanorama:n})))}var wge=["children"];function _ge(t,e){if(t==null)return{};var n,r,a=Ege(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ege(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function b0(){return b0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b0.apply(null,arguments)}var jge={width:"100%",height:"100%",display:"block"},Sge=b.forwardRef((t,e)=>{var n=X5(),r=Z5(),a=cL();if(!Ki(n)||!Ki(r))return null;var{children:s,otherAttributes:c,title:d,desc:f}=t,h,p;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=a?0:void 0,typeof c.role=="string"?p=c.role:p=a?"application":void 0),b.createElement(T3,b0({},c,{title:d,desc:f,role:p,tabIndex:h,width:n,height:r,style:jge,ref:e}),s)}),Age=t=>{var{children:e}=t,n=Ne(vv);if(!n)return null;var{width:r,height:a,y:s,x:c}=n;return b.createElement(T3,{width:r,height:a,x:c,y:s},e)},FD=b.forwardRef((t,e)=>{var{children:n}=t,r=_ge(t,wge),a=Qn();return a?b.createElement(Age,null,b.createElement(BD,{isPanorama:!0},n)):b.createElement(Sge,b0({ref:e},r),b.createElement(BD,{isPanorama:!1},n))});function Nge(){var t=Wt(),[e,n]=b.useState(null),r=Ne(bte);return b.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;$t(s)&&s!==r&&t(nte(s))}},[e,t,r]),n}function qD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Tge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qD(Object(n),!0).forEach(function(r){Cge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cge(t,e,n){return(e=kge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kge(t){var e=Ige(t,"string");return typeof e=="symbol"?e:e+""}function Ige(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ec(){return Ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ec.apply(null,arguments)}var Oge=()=>(Ece(),null);function w0(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Pge=b.forwardRef((t,e)=>{var n,r,a=b.useRef(null),[s,c]=b.useState({containerWidth:w0((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:w0((r=t.style)===null||r===void 0?void 0:r.height)}),d=b.useCallback((h,p)=>{c(g=>{var v=Math.round(h),w=Math.round(p);return g.containerWidth===v&&g.containerHeight===w?g:{containerWidth:v,containerHeight:w}})},[]),f=b.useCallback(h=>{if(typeof e=="function"&&e(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();d(p,g);var v=E=>{var{width:j,height:S}=E[0].contentRect;d(j,S)},w=new ResizeObserver(v);w.observe(h),a.current=w}},[e,d]);return b.useEffect(()=>()=>{var h=a.current;h!=null&&h.disconnect()},[d]),b.createElement(b.Fragment,null,b.createElement(bv,{width:s.containerWidth,height:s.containerHeight}),b.createElement("div",Ec({ref:f},t)))}),Rge=b.forwardRef((t,e)=>{var{width:n,height:r}=t,[a,s]=b.useState({containerWidth:w0(n),containerHeight:w0(r)}),c=b.useCallback((f,h)=>{s(p=>{var g=Math.round(f),v=Math.round(h);return p.containerWidth===g&&p.containerHeight===v?p:{containerWidth:g,containerHeight:v}})},[]),d=b.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null){var{width:h,height:p}=f.getBoundingClientRect();c(h,p)}},[e,c]);return b.createElement(b.Fragment,null,b.createElement(bv,{width:a.containerWidth,height:a.containerHeight}),b.createElement("div",Ec({ref:d},t)))}),Dge=b.forwardRef((t,e)=>{var{width:n,height:r}=t;return b.createElement(b.Fragment,null,b.createElement(bv,{width:n,height:r}),b.createElement("div",Ec({ref:e},t)))}),Mge=b.forwardRef((t,e)=>{var{width:n,height:r}=t;return Vs(n)||Vs(r)?b.createElement(Rge,Ec({},t,{ref:e})):b.createElement(Dge,Ec({},t,{ref:e}))});function Lge(t){return t===!0?Pge:Mge}var zge=b.forwardRef((t,e)=>{var{children:n,className:r,height:a,onClick:s,onContextMenu:c,onDoubleClick:d,onMouseDown:f,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:v,onTouchEnd:w,onTouchMove:E,onTouchStart:j,style:S,width:k,responsive:z,dispatchTouchEvents:M=!0}=t,T=b.useRef(null),R=Wt(),[V,N]=b.useState(null),[I,C]=b.useState(null),D=Nge(),O=TS(),U=(O==null?void 0:O.width)>0?O.width:k,$=(O==null?void 0:O.height)>0?O.height:a,Z=b.useCallback(ue=>{D(ue),typeof e=="function"&&e(ue),N(ue),C(ue),ue!=null&&(T.current=ue)},[D,e,N,C]),he=b.useCallback(ue=>{R(x8(ue)),R(Aa({handler:s,reactEvent:ue}))},[R,s]),Y=b.useCallback(ue=>{R(IE(ue)),R(Aa({handler:h,reactEvent:ue}))},[R,h]),ie=b.useCallback(ue=>{R(eU()),R(Aa({handler:p,reactEvent:ue}))},[R,p]),H=b.useCallback(ue=>{R(IE(ue)),R(Aa({handler:g,reactEvent:ue}))},[R,g]),K=b.useCallback(()=>{R(S8())},[R]),le=b.useCallback(ue=>{R(j8(ue.key))},[R]),q=b.useCallback(ue=>{R(Aa({handler:c,reactEvent:ue}))},[R,c]),ae=b.useCallback(ue=>{R(Aa({handler:d,reactEvent:ue}))},[R,d]),ge=b.useCallback(ue=>{R(Aa({handler:f,reactEvent:ue}))},[R,f]),ye=b.useCallback(ue=>{R(Aa({handler:v,reactEvent:ue}))},[R,v]),Te=b.useCallback(ue=>{R(Aa({handler:j,reactEvent:ue}))},[R,j]),Oe=b.useCallback(ue=>{M&&R(N8(ue)),R(Aa({handler:E,reactEvent:ue}))},[R,M,E]),Pe=b.useCallback(ue=>{R(Aa({handler:w,reactEvent:ue}))},[R,w]),vt=Lge(z);return b.createElement(wU.Provider,{value:V},b.createElement(cZ.Provider,{value:I},b.createElement(vt,{width:U??(S==null?void 0:S.width),height:$??(S==null?void 0:S.height),className:dt("recharts-wrapper",r),style:Tge({position:"relative",cursor:"default",width:U,height:$},S),onClick:he,onContextMenu:q,onDoubleClick:ae,onFocus:K,onKeyDown:le,onMouseDown:ge,onMouseEnter:Y,onMouseLeave:ie,onMouseMove:H,onMouseUp:ye,onTouchEnd:Pe,onTouchMove:Oe,onTouchStart:Te,ref:Z},b.createElement(Oge,null),n)))}),Uge=["width","height","responsive","children","className","style","compact","title","desc"];function Vge(t,e){if(t==null)return{};var n,r,a=$ge(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function $ge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var O8=b.forwardRef((t,e)=>{var{width:n,height:r,responsive:a,children:s,className:c,style:d,compact:f,title:h,desc:p}=t,g=Vge(t,Uge),v=Nr(g);return f?b.createElement(b.Fragment,null,b.createElement(bv,{width:n,height:r}),b.createElement(FD,{otherAttributes:v,title:h,desc:p},s)):b.createElement(zge,{className:c,style:d,width:n,height:r,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},b.createElement(FD,{otherAttributes:v,title:h,desc:p,ref:e},b.createElement(fme,null,s)))});function OE(){return OE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OE.apply(null,arguments)}var Bge={top:5,right:5,bottom:5,left:5},Fge={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Bge,reverseStackOrder:!1,syncMethod:"index",responsive:!1},iN=b.forwardRef(function(e,n){var r,a=On(e.categoricalChartProps,Fge),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=e,p={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return b.createElement(C8,{preloadedState:{options:p},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:s},b.createElement(XU,{chartData:h.data}),b.createElement(k8,{layout:a.layout,margin:a.margin}),b.createElement(I8,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),b.createElement(O8,OE({},a,{ref:n})))}),qge=["axis"],Hge=b.forwardRef((t,e)=>b.createElement(iN,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:qge,tooltipPayloadSearcher:$v,categoricalChartProps:t,ref:e})),Gge=["axis","item"],PE=b.forwardRef((t,e)=>b.createElement(iN,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Gge,tooltipPayloadSearcher:$v,categoricalChartProps:t,ref:e}));function Kge(t){var e=Wt();return b.useEffect(()=>{e(mge(t))},[e,t]),null}var Wge=["layout"];function RE(){return RE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RE.apply(null,arguments)}function Yge(t,e){if(t==null)return{};var n,r,a=Qge(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Qge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Xge={top:5,right:5,bottom:5,left:5},Zge={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Xge,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},Jge=b.forwardRef(function(e,n){var r,a=On(e.categoricalChartProps,Zge),{layout:s}=a,c=Yge(a,Wge),{chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:p}=e,g={chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return b.createElement(C8,{preloadedState:{options:g},reduxStoreName:(r=a.id)!==null&&r!==void 0?r:d},b.createElement(XU,{chartData:a.data}),b.createElement(k8,{layout:s,margin:a.margin}),b.createElement(I8,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),b.createElement(Kge,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),b.createElement(O8,RE({},c,{ref:n})))}),eye=["item"],tye={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},nye=b.forwardRef((t,e)=>{var n=On(t,tye);return b.createElement(Jge,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:eye,tooltipPayloadSearcher:$v,categoricalChartProps:n,ref:e})}),rye=["axis"],aye=b.forwardRef((t,e)=>b.createElement(iN,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:rye,tooltipPayloadSearcher:$v,categoricalChartProps:t,ref:e}));const iye=({result:t,paper:e,answers:n,onDownloadModelAnswers:r,onHome:a})=>{var M;const[s,c]=b.useState(new Set),[d,f]=b.useState(""),[h,p]=b.useState(!1),[g,v]=b.useState(!1);b.useEffect(()=>{const T=(t.questionResults||t.breakdown||[]).map(R=>R.questionId);c(new Set(T))},[t]);const w=T=>{const R=new Set(s);R.has(T)?R.delete(T):R.add(T),c(R)},E=T=>{if(T){const R=(t.questionResults||[]).map(V=>V.questionId);c(new Set(R))}else c(new Set)},j=T=>{const R=document.getElementById(`q-${T}`);R&&(R.scrollIntoView({behavior:"smooth",block:"start"}),f(T),p(!1))},S=T=>{const R=T.currentTarget.scrollTop;v(R>500)},k=()=>{const T=document.getElementById("results-scroll-container");T&&T.scrollTo({top:0,behavior:"smooth"})},z=[{name:"AO1",value:0},{name:"AO2",value:0},{name:"AO3",value:0},{name:"AO4",value:0},{name:"AO5",value:0},{name:"AO6",value:0}];return(t.questionResults||t.breakdown||[]).forEach(T=>{T.aos&&Object.entries(T.aos).forEach(([R,V])=>{const N=parseInt(R.replace("AO",""))-1;z[N]&&(z[N].value+=V||0)})}),l.jsxs("div",{id:"results-scroll-container",onScroll:S,className:"h-screen overflow-y-auto bg-gray-50 font-sans print:bg-white print:p-0 flex flex-col print:h-auto print:overflow-visible scroll-smooth",children:[l.jsxs("nav",{className:"sticky top-0 z-40 bg-white border-b border-gray-200 px-4 md:px-8 py-3 md:py-4 flex justify-between items-center shadow-sm print:hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[l.jsx("button",{onClick:()=>p(!0),className:"lg:hidden p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-md",children:l.jsx(tX,{size:24})}),l.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-gray-600 hover:text-edexcel-blue font-medium transition-colors",children:[l.jsx(jy,{size:20})," ",l.jsx("span",{className:"hidden sm:inline",children:"Home"})]}),l.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),l.jsxs("h1",{className:"text-sm md:text-lg font-bold text-gray-800 truncate max-w-[150px] sm:max-w-md",children:["Results: ",(e==null?void 0:e.title)||`Exam Result - ${new Date((M=t.date)!=null&&M.toDate?t.date.toDate():t.date).toLocaleDateString()}`]})]}),l.jsx("div",{className:"flex gap-2 md:gap-3",children:l.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-edexcel-blue text-white px-4 py-2.5 rounded-lg font-bold hover:bg-edexcel-dark transition-colors shadow-md text-sm md:text-base",children:[l.jsx(w3,{size:18}),l.jsx("span",{children:"Print PDF"})]})})]}),l.jsxs("div",{className:"flex flex-1 max-w-[1400px] mx-auto w-full relative",children:[h&&l.jsxs("div",{className:"fixed inset-0 z-50 flex lg:hidden",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>p(!1)}),l.jsxs("aside",{className:"relative w-72 bg-white h-full shadow-2xl p-4 overflow-y-auto animate-in slide-in-from-left duration-200 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-100 pb-4",children:[l.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:"Question Map"}),l.jsx("button",{onClick:()=>p(!1),className:"p-2 bg-gray-100 rounded-full hover:bg-gray-200",children:l.jsx(Ar,{size:20})})]}),l.jsx("div",{className:"space-y-2 flex-1",children:(t.questionResults||t.breakdown||[]).map(T=>l.jsxs("button",{onClick:()=>j(T.questionId),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex justify-between items-center ${d===T.questionId?"bg-blue-50 text-edexcel-blue border border-blue-100":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-transparent"}`,children:[l.jsxs("span",{className:"truncate font-semibold",children:["Q",T.questionId]}),l.jsxs("span",{className:`text-xs px-2 py-1 rounded-full font-bold ${T.score===T.maxScore?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:[T.score,"/",T.maxScore]})]},T.questionId))}),l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100",children:[l.jsx("button",{onClick:()=>{E(!0),p(!1)},className:"block w-full text-left py-2 text-sm text-blue-600 font-bold hover:underline",children:"Expand All"}),l.jsx("button",{onClick:()=>{E(!1),p(!1)},className:"block w-full text-left py-2 text-sm text-gray-500 font-medium hover:underline",children:"Collapse All"})]})]})]}),l.jsx("aside",{className:"hidden lg:block w-72 sticky top-0 h-screen p-6 border-r border-gray-200 mr-4 bg-gray-50/50 backdrop-blur-sm z-30 overflow-hidden",children:l.jsxs("div",{className:"pt-4",children:[l.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Question Navigator"}),l.jsx("div",{className:"space-y-1 mb-8",children:(t.questionResults||t.breakdown||[]).map(T=>l.jsxs("button",{onClick:()=>j(T.questionId),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors flex justify-between items-center group ${d===T.questionId?"bg-blue-50 text-edexcel-blue":"text-gray-600 hover:bg-gray-100"}`,children:[l.jsxs("span",{className:"truncate",children:["Question ",T.questionId]}),l.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${T.score===T.maxScore?"bg-green-100 text-green-700":"bg-gray-200 text-gray-500 group-hover:bg-gray-300"}`,children:[T.score,"/",T.maxScore]})]},T.questionId))}),l.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[l.jsx("button",{onClick:()=>E(!0),className:"block w-full text-left text-xs text-blue-600 font-bold mb-3 hover:underline",children:"Expand All Cards"}),l.jsx("button",{onClick:()=>E(!1),className:"block w-full text-left text-xs text-gray-500 font-medium hover:underline",children:"Collapse All Cards"})]})]})}),l.jsxs("main",{className:"flex-1 p-3 md:p-8 lg:p-12 print:p-0 print:w-full min-w-0",children:[l.jsxs("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-xl p-4 md:p-6 mb-6 md:mb-8 flex gap-4 items-start print:hidden",children:[l.jsx(pc,{size:24,className:"text-amber-600 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-bold text-amber-900 text-sm md:text-base mb-2",children:" Important Disclaimer"}),l.jsxs("ul",{className:"text-amber-800 text-xs md:text-sm space-y-1 leading-relaxed",children:[l.jsx("li",{children:" AI-generated results may contain errors. Always verify with your teacher or official textbooks."}),l.jsx("li",{children:" These grades are estimates only and not official qualifications."}),l.jsx("li",{children:" GoGCSE is independent and not affiliated with exam boards or educational authorities."}),l.jsx("li",{children:" Use this tool for practice and revision purposes only."})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl md:rounded-2xl p-4 md:p-8 shadow-sm border border-gray-200 mb-6 md:mb-10 print:shadow-none print:border-none print:p-0 print:mb-8 break-inside-avoid",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 md:gap-8",children:[l.jsxs("div",{className:"flex-1 w-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2 print:mb-0",children:[l.jsx("span",{className:"px-3 py-1 bg-edexcel-blue text-white text-[10px] md:text-xs font-bold uppercase rounded-full print:hidden",children:"Official Simulation"}),l.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold text-gray-900",children:"Performance Summary"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 my-6 md:my-8 print:grid-cols-4",children:[l.jsxs("div",{className:"bg-blue-50 p-4 md:p-5 rounded-xl border border-blue-100 print:bg-white print:border-gray-200",children:[l.jsx("span",{className:"block text-[10px] md:text-xs text-blue-600 font-bold uppercase tracking-wider mb-1",children:"Estimated Grade"}),l.jsx("span",{className:"text-3xl md:text-4xl font-extrabold text-edexcel-blue",children:t.gradeEstimate})]}),l.jsxs("div",{className:"bg-gray-50 p-4 md:p-5 rounded-xl border border-gray-100 print:bg-white print:border-gray-200",children:[l.jsx("span",{className:"block text-[10px] md:text-xs text-gray-500 font-bold uppercase tracking-wider mb-1",children:"Total Marks"}),l.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:[t.totalScore," ",l.jsxs("span",{className:"text-sm md:text-lg text-gray-400 font-normal",children:["/ ",t.maxScore]})]})]}),l.jsxs("div",{className:"bg-gray-50 p-4 md:p-5 rounded-xl border border-gray-100 print:bg-white print:border-gray-200",children:[l.jsx("span",{className:"block text-[10px] md:text-xs text-gray-500 font-bold uppercase tracking-wider mb-1",children:"Reading"}),l.jsx("span",{className:"text-xl md:text-2xl font-bold text-gray-800",children:(t.questionResults||t.breakdown||[]).filter(T=>T.questionId.length<2||parseInt(T.questionId)<=4||(e==null?void 0:e.type)==="PAPER_2"&&parseInt(T.questionId)<=6).reduce((T,R)=>T+R.score,0)})]}),l.jsxs("div",{className:"bg-gray-50 p-4 md:p-5 rounded-xl border border-gray-100 print:bg-white print:border-gray-200",children:[l.jsx("span",{className:"block text-[10px] md:text-xs text-gray-500 font-bold uppercase tracking-wider mb-1",children:"Writing"}),l.jsx("span",{className:"text-xl md:text-2xl font-bold text-gray-800",children:(t.questionResults||t.breakdown||[]).filter(T=>parseInt(T.questionId)>=5||T.questionId.includes("7")).reduce((T,R)=>T+R.score,0)})]})]}),l.jsx("div",{className:"pl-4 md:pl-6 py-2 border-l-4 border-edexcel-blue bg-gray-50 rounded-r-lg print:bg-white print:pl-0 print:border-l-0",children:l.jsxs("p",{className:"text-gray-700 text-sm md:text-lg italic leading-relaxed",children:['"',t.overallFeedback,'"']})})]}),l.jsxs("div",{className:"w-full md:w-64 h-48 print:hidden flex-shrink-0 hidden md:block",children:[l.jsx(Cu,{width:"100%",height:"100%",children:l.jsxs(PE,{data:z.filter(T=>T.value>0),children:[l.jsx(Ru,{dataKey:"name",fontSize:10,tickLine:!1,axisLine:!1}),l.jsx(Du,{hide:!0}),l.jsx(ku,{cursor:{fill:"#f3f4f6"},contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),l.jsx(g0,{dataKey:"value",fill:"#005f87",radius:[4,4,0,0]})]})}),l.jsx("p",{className:"text-center text-xs text-gray-400 mt-2 font-medium",children:"AO Performance Breakdown"})]})]}),l.jsxs("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-xl p-4 md:p-6 mb-6 md:mb-8 flex gap-4 items-start print:hidden",children:[l.jsx(pc,{size:24,className:"text-amber-600 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-bold text-amber-900 text-sm md:text-base mb-1",children:" Important: AI-Generated Results"}),l.jsx("p",{className:"text-amber-800 text-xs md:text-sm leading-relaxed",children:"AI can make mistakes. Always check with your teacher or official textbooks. This is not an official grade."})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6 print:hidden",children:[l.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Detailed Analysis"}),l.jsxs("div",{className:"flex gap-2 text-xs md:text-sm lg:hidden",children:[l.jsx("button",{onClick:()=>E(!0),className:"text-blue-600 font-bold hover:bg-blue-50 px-3 py-1 rounded transition-colors",children:"Expand All"}),l.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:bg-gray-100 px-3 py-1 rounded transition-colors",children:"Collapse"})]})]}),l.jsx("div",{className:"space-y-6 md:space-y-12 print:space-y-16 pb-20",children:(t.questionResults||t.breakdown||[]).map(T=>{var C,D;const R=(C=e==null?void 0:e.questions)==null?void 0:C.find(O=>O.id===T.questionId),V=n[T.questionId],N=T.studentAnswer||(V==null?void 0:V.text),I=s.has(T.questionId);return T?l.jsxs("div",{id:`q-${T.questionId}`,className:`bg-white rounded-xl shadow-sm border transition-all duration-300 print:shadow-none print:border-none print:block break-inside-avoid
                    ${I?"border-gray-300 shadow-md ring-1 ring-black/5":"border-gray-200"}`,children:[l.jsxs("div",{onClick:()=>w(T.questionId),className:"cursor-pointer bg-gray-50 p-4 md:p-6 border-b border-gray-200 flex justify-between items-start hover:bg-gray-100 transition-colors print:bg-white print:border-b-2 print:border-black print:px-0",children:[l.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[l.jsx("div",{className:"bg-white p-2 rounded-md shadow-sm border border-gray-200 text-gray-400 print:hidden hidden sm:block",children:l.jsx(RQ,{size:20})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[l.jsxs("span",{className:"text-lg md:text-xl font-bold text-gray-900",children:["Question ",T.questionId]}),l.jsxs("span",{className:"text-xs md:text-sm px-2 py-0.5 bg-gray-200 text-gray-700 rounded-md font-medium print:bg-transparent print:p-0 border border-gray-300 print:border-none",children:[T.score," / ",T.maxScore," Marks"]})]}),l.jsxs("div",{className:"text-xs md:text-sm text-gray-500 font-mono",children:["Assessing: ",Object.keys(T.aos).join(", ")]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[T.level>0&&l.jsxs("div",{className:"text-right hidden sm:block",children:[l.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:"Level"}),l.jsx("div",{className:"text-xl font-bold text-edexcel-blue",children:T.level})]}),l.jsx("button",{className:"text-gray-400 print:hidden p-1 md:p-2 hover:bg-gray-200 rounded-full transition-colors",children:I?l.jsx(p3,{size:20}):l.jsx(m3,{size:20})})]})]}),(I||typeof window<"u"&&window.matchMedia("print").matches)&&l.jsxs("div",{className:"p-4 md:p-6 lg:p-10 space-y-8 md:space-y-10 print:px-0 print:block",children:[l.jsxs("div",{className:"prose max-w-none text-gray-800",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Question"}),l.jsx("p",{className:"text-base md:text-lg font-serif font-medium leading-relaxed border-l-4 border-gray-300 pl-4",children:(R==null?void 0:R.text)||l.jsx("span",{className:"text-gray-400 italic",children:"(Question text not available for this result)"})})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Marks Awarded"}),l.jsxs("div",{className:"flex flex-wrap gap-2 text-xs md:text-sm",children:[Object.entries(T.aos).map(([O,U])=>l.jsxs("div",{className:"bg-gray-50 border border-gray-200 px-3 py-1 rounded font-mono",children:[l.jsxs("span",{className:"font-bold text-gray-700",children:[O,":"]})," ",U]},O)),l.jsxs("div",{className:"ml-auto font-bold text-gray-900 bg-gray-100 px-3 py-1 rounded",children:["Total: ",T.score," / ",T.maxScore]})]})]}),l.jsxs("div",{children:[(R==null?void 0:R.images)&&l.jsx("div",{className:"max-w-md rounded-lg overflow-hidden border border-gray-200 shadow-sm mb-6",children:l.jsx("img",{src:R.images[typeof(V==null?void 0:V.selectedImageIndex)=="number"?V.selectedImageIndex:0],alt:"Prompt Image",className:"w-full h-auto object-cover max-h-64"})}),l.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 flex items-center gap-2",children:["Your Answer ",l.jsx("span",{className:"text-gray-300",children:"|"})," ",N?N.split(/\s+/).length:0," words"]}),l.jsx("div",{className:"w-full bg-blue-50/30 border border-blue-100 rounded-lg p-4 md:p-6 lg:p-8 font-serif text-gray-800 text-sm md:text-base leading-relaxed whitespace-pre-wrap break-words h-auto overflow-visible",children:N||l.jsx("span",{className:"text-gray-400 italic",children:"(No answer text available for this result)"})})]}),l.jsxs("div",{className:"pt-2",children:[l.jsx("h4",{className:"text-xs font-bold text-green-700 uppercase tracking-wider mb-2 bg-green-50 w-fit px-2 py-1 rounded border border-green-100",children:"Model Answer / Suggested Response"}),l.jsx("div",{className:"w-full bg-green-50/20 border border-green-100 rounded-lg p-4 md:p-6 lg:p-8 font-serif text-gray-800 text-sm md:text-base leading-relaxed whitespace-pre-wrap break-words h-auto overflow-visible",children:(D=T.modelAnswer)==null?void 0:D.replace(/^(Prompt \d:|Option \d:|Image \d:)\s*/i,"")})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Examiner Feedback"}),l.jsx("div",{className:"bg-yellow-50 rounded-lg p-4 md:p-6 border border-yellow-100 text-gray-800 text-sm md:text-base leading-relaxed whitespace-pre-wrap",children:T.feedback})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Detailed Comparison"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-3 md:gap-4",children:T.comparisonPoints.map((O,U)=>l.jsxs("div",{className:"flex items-start gap-3 text-xs md:text-sm p-3 rounded bg-gray-50 border border-gray-100",children:[l.jsxs("div",{className:"mt-0.5 shrink-0",children:[O.type==="strength"&&l.jsx(za,{className:"text-green-600",size:16}),O.type==="weakness"&&l.jsx(gQ,{className:"text-red-500",size:16}),O.type==="missing"&&l.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-400 flex items-center justify-center text-[10px] font-bold text-orange-500",children:"M"}),O.type==="improvement"&&l.jsx(vw,{className:"text-blue-500",size:16})]}),l.jsx("span",{className:"text-gray-700 leading-relaxed",children:O.text})]},U))})]})]})]},T.questionId):null})}),(e==null?void 0:e.sources)&&e.sources.length>0&&l.jsxs("div",{className:"mt-12 bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 print:shadow-none print:border-none print:px-0 print:block break-inside-avoid",children:[l.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-6",children:"Source Materials"}),l.jsx("div",{className:"space-y-8",children:e.sources.map(T=>l.jsxs("div",{className:"prose max-w-none",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 border-b border-gray-100 pb-2 mb-4",children:["Source ",T.id,": ",T.title," ",l.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["by ",T.author," (",T.year,")"]})]}),l.jsx("div",{className:"font-serif p-6 bg-gray-50 rounded-lg text-gray-800 leading-relaxed whitespace-pre-wrap border border-gray-100 print:bg-white print:border-none print:p-0 text-justify",children:T.content})]},T.id))})]}),l.jsx("div",{className:"mt-12 text-center print:hidden pb-12",children:l.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 text-gray-500 hover:text-edexcel-blue font-medium transition-colors p-4 bg-white rounded-full shadow-sm border border-gray-200",children:[l.jsx(vw,{size:20})," Back to Top"]})})]}),l.jsx("button",{onClick:k,className:`fixed bottom-6 right-6 z-50 p-3 bg-edexcel-blue text-white rounded-full shadow-xl hover:bg-edexcel-dark transition-all duration-300 md:hidden ${g?"translate-y-0 opacity-100":"translate-y-20 opacity-0"}`,children:l.jsx(vw,{size:24})})]})]})},sye=()=>{const t=ua(),e=Bt(),{examResult:n,examData:r,answers:a={}}=t.state||{};if(!n)return l.jsx(Ko,{to:"/"});const s=()=>{if(!(n!=null&&n.generatedModelAnswers)||!r)return;const c=document.createElement("a"),d=new Blob([n.generatedModelAnswers],{type:"text/markdown"});c.href=URL.createObjectURL(d),c.download=`Model_Answers_${r.type}_${Date.now()}.md`,document.body.appendChild(c),c.click()};return l.jsx(iye,{result:n,paper:r,answers:a,onDownloadModelAnswers:s,onHome:()=>e("/")})},oye=()=>{const t=Bt(),[e,n]=b.useState(""),[r,a]=b.useState(""),[s,c]=b.useState(""),[d,f]=b.useState(!1),[h,p]=b.useState(""),[g,v]=b.useState(""),[w,E]=b.useState(!1),[j,S]=b.useState(""),[k,z]=b.useState("UK"),[M,T]=b.useState(!1),[R,V]=b.useState(!1),[N,I]=b.useState(!1),[C,D]=b.useState(!1),[O,U]=b.useState(!1),$=j==="13-15",Z=j==="under13",he=()=>!(!j||Z||!M||!R||!N||$&&!C||!e||!r||!s),Y=async()=>{E(!0);try{const H=await a3(),K=await t3(H.uid);t(K?"/dashboard":"/legal-consent")}catch(H){console.error("Google Sign-In Failure:",H),p(`Failed to sign in with Google. ${H.message||""}`)}finally{E(!1)}},ie=async H=>{H.preventDefault(),p(""),v(""),E(!0);try{if(d){if(!he()){p("Please complete all required fields and checkboxes."),E(!1);return}const K=await i3(e,r,s);await n3(K.uid,r,j,M,R,C,O,"email"),await r3(K.uid,{aiDisclaimerAccepted:!0,aiConsentTimestamp:new Date().toISOString()}),await s3(),v("Account created! Please check your email for verification."),setTimeout(()=>t("/dashboard"),3e3)}else await Zj(r,s),t("/dashboard")}catch(K){K.code==="auth/email-already-in-use"?p("Email is already in use."):K.code==="auth/wrong-password"||K.code==="auth/user-not-found"||K.code==="auth/invalid-credential"?p("Invalid email or password."):K.code==="auth/weak-password"?p("Password is too weak (minimum 6 characters)."):p("Authentication failed. Please try again."),console.error(K)}finally{E(!1)}};return l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 py-8 px-4 font-sans",children:[l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-lg relative overflow-hidden",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("img",{src:lS,alt:"Logo",className:"w-20 h-20 rounded-2xl shadow-lg mx-auto mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:d?"Create Account":"Welcome Back"}),l.jsx("p",{className:"text-gray-500 mt-1 text-sm",children:d?"Start your GCSE English practice today.":"Sign in to access your dashboard."})]}),d&&l.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-100 rounded-xl p-4 text-sm text-blue-900",children:[l.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2 text-blue-800",children:[l.jsx(P_,{size:16}),l.jsx("span",{children:"Before you start:"})]}),l.jsxs("ul",{className:"space-y-1 ml-1 list-disc list-inside opacity-90 text-xs sm:text-sm",children:[l.jsxs("li",{children:["This is a ",l.jsx("strong",{children:"practice platform only"}),"."]}),l.jsxs("li",{children:["We are ",l.jsx("strong",{children:"not"})," an exam board or awarding body."]}),l.jsxs("li",{children:["Results are ",l.jsx("strong",{children:"estimates"})," and not official grades."]}),l.jsxs("li",{children:["AI marking is automated and ",l.jsx("strong",{children:"may be inaccurate"}),"."]})]})]}),h&&l.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100 flex items-start gap-2",children:[l.jsx(Bi,{size:18,className:"flex-shrink-0 mt-0.5"}),h]}),g&&l.jsxs("div",{className:"mb-4 p-3 bg-green-50 text-green-600 text-sm rounded-lg border border-green-100 flex items-start gap-2",children:[l.jsx(za,{size:18,className:"flex-shrink-0 mt-0.5"}),g]}),l.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[d&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[l.jsxs("label",{className:"block text-xs font-bold text-gray-700 mb-1 uppercase tracking-wider",children:["Age Group ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:j,onChange:H=>S(H.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#003764] focus:ring-2 focus:ring-[#003764]/20 outline-none transition-all bg-white text-sm",required:!0,children:[l.jsx("option",{value:"",children:"Select Age"}),l.jsx("option",{value:"under13",children:"Under 13"}),l.jsx("option",{value:"13-15",children:"13-15 years"}),l.jsx("option",{value:"16-17",children:"16-17 years"}),l.jsx("option",{value:"18+",children:"18+ / Adult"}),l.jsx("option",{value:"parent",children:"Parent"}),l.jsx("option",{value:"teacher",children:"Teacher"})]})]}),l.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[l.jsxs("label",{className:"block text-xs font-bold text-gray-700 mb-1 uppercase tracking-wider",children:["Country ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:k,onChange:H=>z(H.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#003764] focus:ring-2 focus:ring-[#003764]/20 outline-none transition-all bg-white text-sm",required:!0,children:[l.jsx("option",{value:"UK",children:"United Kingdom"}),l.jsx("option",{value:"Other",children:"Other"})]})]})]}),Z&&l.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-xl text-amber-800 text-sm flex items-start gap-3",children:[l.jsx(es,{size:20,className:"mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("strong",{children:"Age Restriction"}),l.jsx("br",{}),"You must be at least 13 years old to create an account. Please ask a parent to help you."]})]}),!Z&&j&&l.jsx("input",{type:"text",placeholder:"Full Name",value:e,onChange:H=>n(H.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#003764] focus:ring-2 focus:ring-[#003764]/20 outline-none transition-all text-sm",required:!0})]}),(!d||d&&j&&!Z)&&l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"email",placeholder:"Email address",value:r,onChange:H=>a(H.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#003764] focus:ring-2 focus:ring-[#003764]/20 outline-none transition-all text-sm",required:!0}),l.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:H=>c(H.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#003764] focus:ring-2 focus:ring-[#003764]/20 outline-none transition-all text-sm",required:!0})]}),d&&j&&!Z&&l.jsxs("div",{className:"space-y-3 pt-3 border-t border-gray-100",children:[l.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider",children:"Required Consents"}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",checked:M,onChange:H=>T(H.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-300 text-[#003764] focus:ring-[#003764]"}),l.jsxs("span",{className:"text-xs sm:text-sm text-gray-600 group-hover:text-gray-900 leading-snug",children:["I agree to the"," ",l.jsx(ta,{to:"/terms",target:"_blank",className:"text-[#003764] font-medium hover:underline",children:"Terms"})," ","and"," ",l.jsx(ta,{to:"/privacy",target:"_blank",className:"text-[#003764] font-medium hover:underline",children:"Privacy Policy"}),".",l.jsx("span",{className:"text-red-500",children:"*"})]})]}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",checked:R,onChange:H=>V(H.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-300 text-[#003764] focus:ring-[#003764]"}),l.jsxs("span",{className:"text-xs sm:text-sm text-gray-600 group-hover:text-gray-900 leading-snug",children:["I understand GoGCSE is for ",l.jsx("strong",{children:"practice only"})," and does not provide official grades or qualifications.",l.jsx("span",{className:"text-red-500",children:"*"})]})]}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group bg-amber-50/50 p-3 rounded-lg border border-amber-200",children:[l.jsx("input",{type:"checkbox",checked:N,onChange:H=>I(H.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-300 text-[#003764] focus:ring-[#003764]"}),l.jsxs("span",{className:"text-xs sm:text-sm text-amber-900 group-hover:text-amber-950 leading-snug font-medium",children:["I agree that AI-generated content may occasionally contain errors. I will verify important information with official textbooks or my teacher.",l.jsx("span",{className:"text-red-500",children:"*"})]})]}),$&&l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group bg-blue-50/50 p-2 rounded-lg border border-blue-100",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:H=>D(H.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-300 text-[#003764] focus:ring-[#003764]"}),l.jsxs("span",{className:"text-xs sm:text-sm text-blue-800 font-medium leading-snug",children:["My parent/guardian knows I am using this site and has given permission.",l.jsx("span",{className:"text-red-500",children:"*"})]})]}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group pt-2 opacity-80 hover:opacity-100",children:[l.jsx("input",{type:"checkbox",checked:O,onChange:H=>U(H.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-300 text-[#003764] focus:ring-[#003764]"}),l.jsx("span",{className:"text-xs text-gray-500 group-hover:text-gray-700 leading-snug",children:"(Optional) Send me study tips and updates."})]})]}),(!d||d&&!Z)&&l.jsxs("div",{className:"pt-2",children:[d&&j&&l.jsx("p",{className:"text-xs text-center text-gray-500 mb-3 italic",children:"All three consent checkboxes are required to create your account."}),l.jsx("button",{type:"submit",disabled:w||d&&!he(),className:"w-full py-3 px-4 rounded-xl transition-all font-bold flex items-center justify-center gap-2 shadow-sm hover:shadow-md",style:{backgroundColor:w||d&&!he()?"#e5e7eb":"#003764",color:w||d&&!he()?"#9ca3af":"#ffffff",cursor:w||d&&!he()?"not-allowed":"pointer"},children:w?l.jsx("span",{className:"animate-pulse",children:"Processing..."}):l.jsxs(l.Fragment,{children:[d?l.jsx(LX,{size:18}):l.jsx(Sy,{size:18}),d?"Create Account":"Sign In"]})})]})]}),!d&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative my-6",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-200"})}),l.jsx("div",{className:"relative flex justify-center text-xs uppercase tracking-widest",children:l.jsx("span",{className:"px-2 bg-white text-gray-400",children:"Or"})})]}),l.jsxs("button",{onClick:Y,disabled:w,className:"w-full py-3 px-4 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 disabled:opacity-50 transition-colors flex items-center justify-center gap-3 text-gray-700 font-bold text-sm",children:[l.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-4 h-4"}),"Sign in with Google"]})]}),l.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600 border-t border-gray-100 pt-6",children:[d?"Already have an account?":"Don't have an account?"," ",l.jsx("button",{onClick:()=>{f(!d),p(""),S(""),T(!1),V(!1),I(!1)},className:"text-[#003764] hover:text-[#007fa3] font-bold hover:underline",children:d?"Sign In":"Sign Up"})]}),l.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-x-4 gap-y-2 text-xs text-gray-400",children:[l.jsx(ta,{to:"/terms",target:"_blank",className:"hover:text-gray-600 hover:underline",children:"Terms"}),l.jsx(ta,{to:"/privacy",target:"_blank",className:"hover:text-gray-600 hover:underline",children:"Privacy"}),l.jsx(ta,{to:"/cookies",target:"_blank",className:"hover:text-gray-600 hover:underline",children:"Cookies"}),l.jsx(ta,{to:"/child-privacy",target:"_blank",className:"hover:text-gray-600 hover:underline",children:"Child Safety"})]})]}),l.jsx("p",{className:"text-[10px] text-gray-500 mt-4 text-center max-w-md px-4 leading-relaxed",children:"GoGCSE is not affiliated with Pearson Edexcel, AQA, or any examination board. All trademarks belong to their respective owners."})]})},P8="/assets/profile_icon-CK7ltl4l.png",lye=({isOpen:t,onClose:e,user:n})=>{const r=Bt(),[a,s]=b.useState(!1),[c,d]=b.useState(n.displayName||""),[f,h]=b.useState(!1),[p,g]=b.useState(!1),v=Bh.useRef(null);if(b.useEffect(()=>{d(n.displayName||"")},[n,t]),!t)return null;const w=async S=>{if(S.target.files&&S.target.files[0]){g(!0);try{const k=S.target.files[0],z=await Ny(()=>Promise.resolve().then(()=>tS),void 0).then(M=>M.uploadProfilePicture(n,k));window.location.reload()}catch(k){console.error("Failed to upload image",k),alert("Failed to upload profile picture.")}finally{g(!1)}}},E=async()=>{if(c.trim()){h(!0);try{await Xj(n,{displayName:c}),s(!1),window.location.reload()}catch(S){console.error("Failed to update profile",S),alert("Failed to update profile.")}finally{h(!1)}}},j=async()=>{await yd(),r("/login")};return l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[l.jsxs("div",{className:"bg-edexcel-blue p-6 flex justify-between items-start",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile Details"}),l.jsx("button",{onClick:e,className:"text-white/80 hover:text-white hover:bg-white/10 p-1 rounded-full transition-colors",children:l.jsx(Ar,{size:20})})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex flex-col items-center mb-6 -mt-12 group relative",children:[l.jsxs("div",{className:"bg-white p-2 rounded-full shadow-md cursor-pointer relative",onClick:()=>{var S;return(S=v.current)==null?void 0:S.click()},children:[l.jsx("img",{src:n.photoURL||P8,alt:"Profile",className:"w-20 h-20 rounded-full bg-slate-100 object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx("span",{className:"text-white text-xs font-bold",children:"Change"})}),p&&l.jsx("div",{className:"absolute inset-0 bg-white/80 rounded-full flex items-center justify-center",children:l.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-edexcel-blue border-t-transparent rounded-full"})})]}),l.jsx("input",{type:"file",ref:v,onChange:w,accept:"image/*",className:"hidden"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1 block",children:"Full Name"}),l.jsx("div",{className:"flex items-center gap-2",children:a?l.jsx("input",{type:"text",value:c,onChange:S=>d(S.target.value),className:"flex-1 px-3 py-2 border border-edexcel-teal rounded-lg focus:ring-2 focus:ring-edexcel-teal/20 outline-none font-bold text-gray-900",autoFocus:!0}):l.jsxs("div",{className:"flex-1 font-bold text-gray-900 text-lg flex items-center gap-2",children:[n.displayName||"No Name Set",l.jsx("button",{onClick:()=>s(!0),className:"text-gray-400 hover:text-edexcel-blue transition-colors",children:l.jsx(gc,{size:14})})]})})]}),l.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[l.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1 block",children:"Email Address"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx(x3,{size:16,className:"text-gray-400"}),l.jsx("span",{children:n.email})]})]}),l.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[l.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1 block",children:"Member Since"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx(tl,{size:16,className:"text-gray-400"}),l.jsx("span",{children:n.metadata.creationTime?new Date(n.metadata.creationTime).toLocaleDateString():"Unknown"})]})]})]}),l.jsx("div",{className:"mt-8 flex gap-3",children:a?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>s(!1),className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg font-bold text-gray-600 hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:E,disabled:f,className:"flex-1 py-2 px-4 bg-edexcel-teal text-white rounded-lg font-bold hover:bg-teal-700 transition-colors flex items-center justify-center gap-2",children:f?"Saving...":l.jsxs(l.Fragment,{children:[l.jsx(ev,{size:18})," Save Changes"]})})]}):l.jsxs("button",{onClick:j,className:"w-full py-2 px-4 border border-red-100 text-red-600 bg-red-50 rounded-lg font-bold hover:bg-red-100 transition-colors flex items-center justify-center gap-2",children:[l.jsx(xd,{size:18})," Sign Out"]})})]})]})})},cye=()=>{const[t,e]=b.useState(xe.currentUser),[n,r]=b.useState([]),[a,s]=b.useState(!0),[c,d]=b.useState(!1),[f,h]=b.useState([]),[p,g]=b.useState(new Set),[v,w]=b.useState(null),[E,j]=b.useState(!1),S=Bt();b.useEffect(()=>{const I=xe.onAuthStateChanged(async C=>{if(e(C),C){const D=await X0(C.uid);j(D),k(C.uid),z()}else s(!1)});return()=>I()},[]);const k=async I=>{const C=await Jj(I);r(C),s(!1)},z=async()=>{try{const I=lt.now(),C=gn(qe(ve,"announcements")),O=(await It(C)).docs.map(U=>({id:U.id,...U.data()})).filter(U=>U.active===!0).sort((U,$)=>{var Z,he;return(((Z=$.createdAt)==null?void 0:Z.seconds)||0)-(((he=U.createdAt)==null?void 0:he.seconds)||0)}).filter(U=>!(U.startDate&&U.startDate.seconds>I.seconds||U.endDate&&U.endDate.seconds<I.seconds));h(O)}catch(I){console.error("Failed to fetch announcements",I)}},M=I=>{g(C=>new Set(C).add(I))},T=async(I,C,D="this exam")=>{C.stopPropagation(),w({isOpen:!0,examId:I,examTitle:D})},R=async()=>{if(!v)return;await _y(v.examId)&&r(C=>C.filter(D=>D.id!==v.examId)),w(null)},V=I=>{switch(I){case"info":return{bg:"bg-blue-50 border-blue-200",text:"text-blue-800",icon:P_};case"success":return{bg:"bg-emerald-50 border-emerald-200",text:"text-emerald-800",icon:za};case"warning":return{bg:"bg-amber-50 border-amber-200",text:"text-amber-800",icon:Bi};case"error":return{bg:"bg-red-50 border-red-200",text:"text-red-800",icon:pc};default:return{bg:"bg-blue-50 border-blue-200",text:"text-blue-800",icon:P_}}},N=f.filter(I=>!p.has(I.id));return l.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans",children:[l.jsx(j3,{title:"Student Dashboard",description:"Track your Edexcel GCSE English mock exam progress and view detailed grade reports."}),l.jsx("nav",{className:"bg-white border-b border-gray-200 py-3 px-4 md:px-12 sticky top-0 z-10",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>S("/"),children:[l.jsx("img",{src:lS,alt:"Logo",className:"w-10 h-10 rounded-lg shadow-sm"}),l.jsx("span",{className:"font-bold text-lg text-gray-800",children:"Go GCSE"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[E&&l.jsxs("button",{onClick:()=>S("/teacher"),className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 text-white text-sm font-bold rounded-lg shadow-md hover:shadow-lg hover:from-blue-700 hover:to-cyan-700 transition-all",children:[l.jsx(Xt,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Teacher Dashboard"})]}),(t==null?void 0:t.email)&&li.includes(t.email)&&l.jsxs("button",{onClick:()=>S("/admin"),className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-sm font-bold rounded-lg shadow-md hover:shadow-lg hover:from-purple-700 hover:to-indigo-700 transition-all",children:[l.jsx(es,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Admin Panel"})]}),l.jsxs("div",{onClick:()=>d(!0),className:"flex items-center gap-2 text-sm font-bold text-gray-800 bg-white border border-gray-200 pl-1 pr-3 py-1 rounded-full shadow-sm cursor-pointer hover:bg-gray-50 transition-colors",children:[l.jsx("img",{src:(t==null?void 0:t.photoURL)||P8,alt:"Profile",className:"w-9 h-9 rounded-full border-2 border-gray-200 object-cover"}),l.jsx("span",{className:"hidden sm:inline",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)})]})]})]})}),l.jsxs("main",{className:"max-w-5xl mx-auto px-6 py-8",children:[l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4 mb-8 flex gap-3",children:[l.jsx("span",{className:"text-blue-600 font-bold flex-shrink-0",children:"i"}),l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("p",{className:"font-semibold mb-1",children:"Important Notice"}),l.jsx("p",{children:"All exam results and grades shown here are AI-generated estimates for practice purposes only. They are not official qualifications. Always verify your learning with your teacher."})]})]}),N.length>0&&l.jsx("div",{className:"space-y-3 mb-6",children:N.map(I=>{const C=V(I.type),D=C.icon;return l.jsxs("div",{className:`p-4 rounded-xl border ${C.bg} flex items-start gap-3`,children:[l.jsx(D,{size:20,className:C.text}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:`font-bold ${C.text}`,children:I.title}),l.jsx("p",{className:`text-sm ${C.text} opacity-80`,children:I.message})]}),l.jsx("button",{onClick:()=>M(I.id),className:`p-1 rounded hover:bg-white/50 ${C.text}`,children:l.jsx(Ar,{size:16})})]},I.id)})}),l.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:justify-between sm:items-end gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Your Progress"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Track your mock exams and improvement over time."})]}),l.jsx("button",{onClick:()=>S("/"),className:"w-full sm:w-auto bg-gray-900 text-white px-6 py-2.5 rounded-lg font-bold hover:bg-gray-800 transition-colors shadow-lg shadow-gray-200",children:"New Mock Exam"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2 text-purple-600",children:[l.jsx(Xt,{size:20}),l.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:"Exams Taken"})]}),l.jsx("div",{className:"text-4xl font-extrabold text-gray-900",children:n.length})]}),l.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2 text-teal-600",children:[l.jsx(Xu,{size:20}),l.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:"Average Score"})]}),l.jsx("div",{className:"text-4xl font-extrabold text-gray-900",children:n.length>0?Math.round(n.reduce((I,C)=>I+(C.score||0),0)/n.length):"-"})]}),l.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2 text-blue-600",children:[l.jsx(Os,{size:20}),l.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:"Study Time"})]}),l.jsx("div",{className:"text-4xl font-extrabold text-gray-900",children:(()=>{const I=n.reduce((O,U)=>O+(U.duration||0),0),C=Math.floor(I/3600),D=Math.floor(I%3600/60);return C===0&&D===0?"0m":C===0?`${D}m`:`${C}h ${D}m`})()})]}),l.jsxs("div",{onClick:()=>S("/student/classroom"),className:"bg-white p-6 rounded-2xl shadow-sm border border-indigo-100 cursor-pointer hover:shadow-md hover:border-indigo-300 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2 text-indigo-600",children:[l.jsx(Xt,{size:20}),l.jsx("span",{className:"font-bold text-sm uppercase tracking-wide group-hover:underline",children:"My Classroom"})]}),l.jsx("div",{className:"text-gray-500 text-sm",children:"Join classes & view assignments"}),l.jsxs("div",{className:"mt-4 text-indigo-700 font-bold flex items-center gap-1 text-sm",children:["Go to Class ",l.jsx(Sh,{size:16})]})]})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Mock Exam History"}),a?l.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading history..."}):n.length===0?l.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-gray-100 border-dashed",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-300",children:l.jsx(Xt,{size:32})}),l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"No exams taken yet"}),l.jsx("p",{className:"text-gray-500 mb-6 max-w-sm mx-auto",children:"Complete your first mock exam to see your detailed analysis and grade here."}),l.jsx("button",{onClick:()=>S("/"),className:"text-edexcel-blue font-bold hover:underline",children:"Start an Exam Now"})]}):l.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:n.map((I,C)=>{var D;return l.jsxs("div",{onClick:()=>S("/results",{state:{examResult:{...I,questionResults:I.questionResults||I.breakdown||[],overallFeedback:I.overallFeedback||I.feedback||"",gradeEstimate:I.gradeEstimate||"N/A"},examData:I.paperData||null,answers:I.fullAnswers||{}}}),className:"flex items-center p-6 border-b border-gray-50 last:border-0 hover:bg-gray-50 transition-colors cursor-pointer",children:[l.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mr-4 ${I.paperType==="PAPER_1"?"bg-purple-100 text-purple-600":"bg-teal-100 text-teal-600"}`,children:l.jsx("span",{className:"font-bold text-xs",children:I.paperType==="PAPER_1"?"P1":"P2"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-bold text-gray-900",children:I.paperType==="PAPER_1"?"Fiction & Imaginative Writing":"Non-Fiction & Transactional"}),l.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[(D=I.date)!=null&&D.toDate?new Date(I.date.toDate()).toLocaleDateString():"Unknown Date",l.jsx("span",{className:"text-gray-300",children:""}),I.score," Marks"]})]}),l.jsxs("div",{className:"text-right flex items-center gap-4",children:[l.jsxs("button",{className:"inline-flex items-center text-edexcel-blue font-bold hover:text-edexcel-teal transition-colors",children:["View Result ",l.jsx(Sh,{size:16,className:"ml-1"})]}),I.pdfUrl&&l.jsxs("a",{href:I.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center text-green-600 font-bold hover:text-green-800 transition-colors text-sm",onClick:O=>O.stopPropagation(),children:[l.jsx(w3,{size:16,className:"mr-1"})," Download PDF"]}),l.jsx("button",{onClick:O=>T(I.id,O,I.paperType==="PAPER_1"?"Fiction & Imaginative Writing":"Non-Fiction & Transactional"),className:"ml-4 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",title:"Delete Exam",children:l.jsx(Ia,{size:18})})]})]},I.id||C)})})]}),v&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>w(null),children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",onClick:I=>I.stopPropagation(),children:[l.jsxs("div",{className:"bg-red-50 p-6 flex items-center gap-4 border-b border-red-100",children:[l.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(Bi,{className:"text-red-600",size:24})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Delete Exam Result"}),l.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]}),l.jsx("div",{className:"p-6",children:l.jsxs("p",{className:"text-gray-700",children:["Are you sure you want to permanently delete ",l.jsxs("span",{className:"font-semibold",children:['"',v.examTitle,'"']}),"? This will remove all associated scores, feedback, and reports."]})}),l.jsxs("div",{className:"flex gap-3 p-6 pt-0",children:[l.jsx("button",{onClick:()=>w(null),className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsxs("button",{onClick:R,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[l.jsx(Ia,{size:18}),"Delete Exam"]})]})]})}),t&&l.jsx(lye,{isOpen:c,onClose:()=>d(!1),user:t})]})},_u=({children:t})=>{const[e,n]=b.useState(null),[r,a]=b.useState(!0),[s,c]=b.useState(!1),[d,f]=b.useState(!1);return b.useEffect(()=>{const h=Zh(xe,async p=>{if(n(p),p)try{if(li.includes(p.email||"")){c(!0),f(!0),a(!1);return}const g=Me(ve,"users",p.uid),v=await Yn(g);if(v.exists()){const w=v.data();c(!!w.isApproved),f(!!w.hasConsented)}else c(!1),f(!1)}catch(g){console.error("Error fetching user status",g),c(!1),f(!1)}a(!1)});return()=>h()},[]),r?l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 gap-3",children:[l.jsx(ka,{className:"animate-spin text-edexcel-blue",size:32}),l.jsx("p",{className:"text-gray-500 animate-pulse text-sm font-medium",children:"Verifying access..."})]}):e?d?l.jsx(l.Fragment,{children:t}):l.jsx(Ko,{to:"/legal-consent",replace:!0}):l.jsx(Ko,{to:"/login",replace:!0})},Eu={techniques:{title:"Language Techniques",description:"Master the literary and rhetorical devices used by writers to create meaning and effect.",items:[{name:"Metaphor",definition:'A direct comparison stating one thing IS another, without using "like" or "as".',example:'"Life is a journey with many winding roads."',literarySource:"Common in Shakespeare and Romantic poetry",examTip:"Always explain the effectwhat does the comparison suggest about the subject?",level:"foundation"},{name:"Simile",definition:'A comparison using "like" or "as" to show similarity between two different things.',example:'"Her smile was like sunshine breaking through clouds."',literarySource:"Dickens uses extended similes in Great Expectations",examTip:"Identify what quality is being compared and why the writer chose that image.",level:"foundation"},{name:"Personification",definition:"Giving human qualities, emotions, or actions to non-human things or abstract concepts.",example:'"The wind whispered secrets through the trees."',literarySource:`Shelley's "Ozymandias" personifies the desert`,examTip:"Consider why the writer wants readers to see the object as alive or conscious.",level:"foundation"},{name:"Alliteration",definition:"Repetition of the same consonant sound at the beginning of nearby words.",example:'"Peter Piper picked a peck of pickled peppers."',literarySource:"Anglo-Saxon poetry like Beowulf relies heavily on alliteration",examTip:"Link the sound to the moodharsh sounds for tension, soft sounds for calm.",level:"foundation"},{name:"Pathetic Fallacy",definition:"Using weather or nature to reflect the emotional state of characters or the mood of a scene.",example:'"The storm raged as her anger reached its peak."',literarySource:"Bront uses storms in Wuthering Heights to mirror passion",examTip:"This is a specific type of personificationalways link weather to emotion.",level:"intermediate"},{name:"Onomatopoeia",definition:"Words that phonetically imitate the sound they describe.",example:'"The bees buzzed lazily around the hive."',literarySource:"War poetry uses onomatopoeia for battlefield sounds",examTip:"Explain how the sound word creates a sensory, immersive experience.",level:"foundation"},{name:"Oxymoron",definition:"Two contradictory terms placed together to create a paradoxical effect.",example:'"The silence was deafening."',literarySource:'Romeo and Juliet: "loving hate" and "heavy lightness"',examTip:"Show how the contradiction reveals complexity or tension in meaning.",level:"intermediate"},{name:"Hyperbole",definition:"Deliberate and obvious exaggeration for emphasis or dramatic effect.",example:`"I've told you a million times!"`,literarySource:"Common in satirical writing and comedy",examTip:"Consider whether it creates humour, emphasises emotion, or makes a point.",level:"foundation"},{name:"Sibilance",definition:'Repetition of "s", "sh", "z" sounds to create a hissing effect.',example:'"The snake slithered silently through the shadows."',literarySource:"Often used to create menacing or secretive atmospheres",examTip:"Link sibilance to the moodoften sinister, seductive, or soothing.",level:"intermediate"},{name:"Juxtaposition",definition:"Placing two contrasting elements side by side to highlight their differences.",example:'"It was the best of times, it was the worst of times."',literarySource:"Dickens' A Tale of Two Cities opening",examTip:"Explain what the contrast reveals about themes or characters.",level:"intermediate"},{name:"Anaphora",definition:"Repetition of a word or phrase at the beginning of successive clauses or sentences.",example:'"We shall fight on the beaches, we shall fight on the landing grounds, we shall fight..."',literarySource:`Churchill's WWII speeches; Martin Luther King's "I Have a Dream"`,examTip:"Shows emphasis and builds rhetorical powergreat for speeches.",level:"advanced"},{name:"Epistrophe",definition:"Repetition of a word or phrase at the END of successive clauses.",example:'"See no evil, hear no evil, speak no evil."',literarySource:`Lincoln's Gettysburg Address: "of the people, by the people, for the people"`,examTip:"Creates rhythm and reinforces a key concept at clause endings.",level:"advanced"},{name:"Tricolon",definition:'A series of three parallel elements (the "rule of three") for emphasis and rhythm.',example:'"Veni, vidi, vici" (I came, I saw, I conquered)',literarySource:"Used extensively in political rhetoric and advertising",examTip:"Three elements feel complete and memorableidentify why these three.",level:"intermediate"},{name:"Asyndeton",definition:"Omitting conjunctions between words or clauses to create pace and urgency.",example:'"I came, I saw, I conquered."',literarySource:"Caesar's famous quote demonstrates power through brevity",examTip:"Creates speed and directnessoften shows confidence or urgency.",level:"advanced"},{name:"Polysyndeton",definition:"Using many conjunctions (and, or, but) in quick succession for effect.",example:'"And the rain fell and the wind blew and the night grew darker."',literarySource:"Biblical prose and Hemingway's writing style",examTip:"Slows pace, suggests overwhelming accumulation or relentlessness.",level:"advanced"},{name:"Chiasmus",definition:"A reversal of grammatical structures in successive phrases (AB, BA pattern).",example:'"Ask not what your country can do for you, ask what you can do for your country."',literarySource:"JFK's inaugural address; common in Shakespeare",examTip:"The reversal creates balance and makes ideas memorable.",level:"advanced"},{name:"Antithesis",definition:"Contrasting ideas expressed in balanced, parallel grammatical structures.",example:'"To err is human; to forgive, divine."',literarySource:`Pope's "Essay on Criticism"; Milton's Paradise Lost`,examTip:"Different from juxtapositionantithesis requires parallel structure.",level:"advanced"},{name:"Euphemism",definition:"A milder or indirect word substituted for one considered harsh or blunt.",example:'"He passed away" instead of "He died"',literarySource:"Political and corporate language often uses euphemisms",examTip:"Consider what is being hidden or softened, and why.",level:"intermediate"},{name:"Litotes",definition:"Understatement using double negatives or negating the opposite.",example:`"She's not unattractive" (meaning she is attractive)`,literarySource:"Common in British humour and Old English poetry",examTip:"Often creates irony or understated emphasis.",level:"advanced"},{name:"Synecdoche",definition:"A part represents the whole, or the whole represents a part.",example:'"All hands on deck!" (hands = sailors)',literarySource:'Shakespeare: "lend me your ears" (ears = attention)',examTip:"Identify what part/whole relationship exists and its effect.",level:"advanced"},{name:"Metonymy",definition:"Substituting the name of something with something closely associated.",example:'"The Crown" for the monarchy; "Wall Street" for finance',literarySource:"Common in journalism and political writing",examTip:"Different from synecdochemetonymy is association, not part/whole.",level:"advanced"},{name:"Zeugma",definition:"A figure of speech where one word (usually a verb or adjective) applies to multiple words in different senses.",example:'"She lowered her standards and her neckline."',literarySource:`Pope's "The Rape of the Lock" and Dickens use zeugma for wit`,examTip:"Creates surprising connections or humouroften used for satirical effect.",level:"advanced"},{name:"Anadiplosis",definition:"Repetition of the last word of one clause at the beginning of the next clause.",example:'"Fear leads to anger. Anger leads to hate. Hate leads to suffering."',literarySource:"Yoda in Star Wars; also found in biblical and classical texts",examTip:"Creates a chain of logic or escalationshows cause and effect.",level:"advanced"},{name:"Enjambment",definition:"In poetry, continuing a sentence beyond the end of a line without pause.",example:'"I wandered lonely as a cloud / That floats on high..."',literarySource:`Wordsworth's "Daffodils" uses enjambment throughout`,examTip:"Creates flow, urgency, or highlights the word at line breaks.",level:"intermediate"},{name:"Caesura",definition:"A strong pause within a line of poetry, often marked by punctuation.",example:'"To be, or not to be. || That is the question."',literarySource:"Shakespeare uses caesura for dramatic emphasis",examTip:"The pause creates emphasiswhat comes before/after the break?",level:"intermediate"}]},grammar:{title:"Grammar Essentials",description:"Essential grammatical knowledge for accurate writing and language analysis.",items:[{name:"Simple Sentence",definition:"A sentence containing one independent clause with a subject and verb.",example:'"The dog barked."',examTip:"Simple sentences create impact through directness and clarity.",level:"foundation"},{name:"Compound Sentence",definition:"Two independent clauses joined by a coordinating conjunction (FANBOYS: for, and, nor, but, or, yet, so).",example:'"I wanted to go, but the weather was terrible."',examTip:"Shows equal importance between two connected ideas.",level:"foundation"},{name:"Complex Sentence",definition:"An independent clause joined with one or more dependent clauses using subordinating conjunctions.",example:'"Although it was raining, we went for a walk."',examTip:"The main clause holds the key idea; subordinate clauses add detail.",level:"foundation"},{name:"Minor Sentence",definition:"A sentence fragment used deliberately for effect, lacking subject or verb.",example:'"Silence. Complete, utter silence."',examTip:"Creates drama, emphasis, or mimics natural speech patterns.",level:"intermediate"},{name:"Active Voice",definition:"The subject performs the action of the verb directly.",example:'"The cat chased the mouse."',examTip:"Active voice is direct and engagingpreferred in most writing.",level:"foundation"},{name:"Passive Voice",definition:'The subject receives the action; the doer may be omitted or follow "by".',example:'"The mouse was chased by the cat."',examTip:"Creates formality, shifts focus to receiver, or obscures responsibility.",level:"intermediate"},{name:"First Person Narrative",definition:`Using "I" to tell the story from the narrator's perspective.`,example:'"I walked into the room and immediately sensed danger."',examTip:"Creates intimacy and subjectivitywe see only what the narrator knows.",level:"foundation"},{name:"Third Person Limited",definition:`Using "he/she/they" but limited to one character's thoughts and perceptions.`,example:'"She wondered what he was thinking as he stared out the window."',examTip:"Balances intimacy with objectivitycommon in modern fiction.",level:"intermediate"},{name:"Third Person Omniscient",definition:"An all-knowing narrator who can access any character's thoughts.",example:`"John didn't know that Mary had already left, but we know she was miles away."`,examTip:"Allows dramatic irony and broader perspective on events.",level:"intermediate"},{name:"Present Tense",definition:"Action happening now; creates immediacy and tension.",example:'"I walk through the door. The room is empty."',examTip:"Creates immediacycommon in modern literary fiction for tension.",level:"foundation"},{name:"Past Tense",definition:"Action that has already happened; traditional narrative tense.",example:'"I walked through the door. The room was empty."',examTip:"The default for most storytellingfeels natural and established.",level:"foundation"},{name:"Imperative Mood",definition:'Commands or instructions; verb at the start, often with implied "you".',example:'"Stop right there!" "Consider the evidence."',examTip:"Creates authority, urgency, or direct reader engagement.",level:"intermediate"},{name:"Interrogative",definition:"Questions used to engage the reader or create uncertainty.",example:'"What would you do in this situation?"',examTip:"Rhetorical questions don't need answersthey make readers think.",level:"foundation"},{name:"Modal Verbs",definition:"Verbs expressing possibility, necessity, or obligation (can, could, may, might, must, shall, should, will, would).",example:'"You should consider the consequences."',examTip:"Different modals show different levels of certainty or obligation.",level:"intermediate"},{name:"Noun Phrase",definition:"A group of words centred on a noun, providing more detail.",example:'"The old, weathered wooden door"',examTip:"Extended noun phrases add detail and create vivid imagery.",level:"intermediate"}]},writing:{title:"Writing Skills",description:"Techniques for crafting effective creative and transactional writing.",items:[{name:"Hook Opening",definition:"Starting with something attention-grabbing to immediately engage the reader.",example:'"The day I died was the most interesting day of my life."',examTip:"Start with action, dialogue, a question, or a striking statement.",level:"foundation"},{name:"In Medias Res",definition:"Beginning a narrative in the middle of the action, rather than from the start.",example:"Starting a story with a chase scene, then explaining how it began later.",examTip:"Creates immediate tension and curiosityavoid too much backstory.",level:"intermediate"},{name:"Cyclical Structure",definition:"Ending where you began, creating a sense of completeness or irony.",example:"Starting and ending with the same image or phrase, but with changed meaning.",examTip:"Shows development or changethe same words mean something different by the end.",level:"intermediate"},{name:"Foreshadowing",definition:"Hints or clues about what will happen later in the narrative.",example:'"Little did she know that this would be the last peaceful morning."',examTip:"Creates tension and makes readers feel clever when the prediction pays off.",level:"intermediate"},{name:"Flashback",definition:"Interrupting the narrative to show events from the past.",example:'"As she touched the old photograph, memories flooded back..."',examTip:"Use sparingly and signal clearlydon't confuse the reader.",level:"intermediate"},{name:"Show Don't Tell",definition:"Demonstrating emotions or situations through action and detail rather than stating them.",example:'"His hands trembled as he reached for the door" instead of "He was nervous."',examTip:"Let readers infer emotions from physical details and actions.",level:"foundation"},{name:"Sensory Description",definition:"Using all five senses (sight, sound, smell, taste, touch) to create vivid scenes.",example:'"The acrid smoke stung her eyes; somewhere, glass shattered."',examTip:"Go beyond sightsound, smell, and touch create immersive writing.",level:"foundation"},{name:"Pathetic Fallacy in Writing",definition:"Using setting and weather to reflect character emotions or story mood.",example:"A storm brewing as conflict increases; sunshine as hope returns.",examTip:"Avoid clichsfind fresh ways to mirror emotion in environment.",level:"intermediate"},{name:"Dialogue",definition:"Speech between characters that reveals personality and advances plot.",example:`"I never said I was sorry." She turned away. "Maybe that's the problem."`,examTip:"Each character should sound distinct. Use dialogue tags sparingly.",level:"foundation"},{name:"Paragraph for Effect",definition:"Using paragraph length deliberatelyshort for impact, long for description.",example:'A single-word paragraph: "Silence." after a long descriptive paragraph.',examTip:"Vary paragraph length. Short paragraphs create drama and pace.",level:"intermediate"},{name:"Rhetorical Questions",definition:"Questions that don't expect an answer, used to engage or persuade.",example:'"How many more lives must be lost before we act?"',examTip:"Powerful in speeches and articlesmake the reader think.",level:"foundation"},{name:"Direct Address",definition:'Speaking directly to the reader using "you" to create engagement.',example:`"You might think this doesn't affect you. Think again."`,examTip:"Creates connection and makes arguments feel personal and urgent.",level:"foundation"},{name:"Statistics & Evidence",definition:"Using facts, figures, and research to support arguments.",example:'"According to recent studies, 73% of teenagers..."',literarySource:"Essential for Article, Speech, and Letter writing",examTip:"Even in exams, you can create plausible statistics for effect.",level:"foundation"},{name:"Anecdote",definition:"A short personal story used to illustrate a point or engage readers.",example:'"Last summer, I witnessed something that changed my perspective forever..."',examTip:"Makes abstract arguments concrete and relatable.",level:"intermediate"},{name:"Counter-Argument",definition:"Acknowledging opposing views before refuting them.",example:'"Some argue that... However, this ignores the fact that..."',examTip:"Shows balanced thinking and strengthens your argument.",level:"intermediate"},{name:"Emotive Language",definition:"Words chosen to provoke an emotional response from the reader.",example:'"innocent children", "brutal attack", "heroic sacrifice"',examTip:"Powerful in persuasive writing but use judiciouslydon't overdo it.",level:"foundation"},{name:"Formal Register",definition:"Sophisticated vocabulary and complex sentences for professional contexts.",example:'"Furthermore, it is imperative that we consider..."',examTip:"Use for letters to authorities, formal articles, and official speeches.",level:"intermediate"},{name:"Informal Register",definition:"Conversational tone with contractions and colloquial language.",example:`"Let's be honestwe've all been there, haven't we?"`,examTip:"Use for friendly letters, blogs, or when connecting with peers.",level:"intermediate"}]}},uye=({onHome:t})=>{const[e,n]=b.useState("learn"),[r,a]=b.useState(""),[s,c]=b.useState(null),[d,f]=b.useState(!1),[h,p]=b.useState("techniques"),[g,v]=b.useState(""),[w,E]=b.useState(new Set),[j,S]=b.useState("all"),[k,z]=b.useState("Metaphor"),[M,T]=b.useState(""),[R,V]=b.useState(null),[N,I]=b.useState("techniques"),[C,D]=b.useState(!0);b.useEffect(()=>{(async()=>{const le=xe.currentUser;if(!le){D(!1);return}if(li.includes(le.email||"")){D(!0);return}try{const q=await Yn(Me(ve,"users",le.uid));q.exists()?D(q.data().isApproved??!1):D(!1)}catch(q){console.error("Failed to check approval status:",q),D(!1)}})()},[]);const $=N==="techniques"?["Metaphor","Simile","Personification","Alliteration","Pathetic Fallacy","Onomatopoeia","Oxymoron","Hyperbole","Sibilance","Juxtaposition","Anaphora","Epistrophe","Tricolon","Asyndeton","Polysyndeton","Chiasmus","Antithesis","Euphemism","Litotes","Synecdoche","Metonymy","Zeugma","Anadiplosis","Enjambment","Caesura"]:["Hook Opening","In Medias Res","Cyclical Structure","Foreshadowing","Flashback","Show Don't Tell","Sensory Description","Pathetic Fallacy in Writing","Dialogue","Paragraph for Effect","Rhetorical Questions","Direct Address","Statistics & Evidence","Anecdote","Counter-Argument","Emotive Language","Formal Register","Informal Register"],Z=b.useMemo(()=>Eu[h].items.filter(le=>{const q=g===""||le.name.toLowerCase().includes(g.toLowerCase())||le.definition.toLowerCase().includes(g.toLowerCase()),ae=j==="all"||le.level===j;return q&&ae}),[h,g,j]),he=K=>{E(le=>{const q=new Set(le);return q.has(K)?q.delete(K):q.add(K),q})},Y=K=>{switch(K){case"foundation":return"bg-green-100 text-green-700 border-green-200";case"intermediate":return"bg-amber-100 text-amber-700 border-amber-200";case"advanced":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-gray-100 text-gray-700"}},ie=async()=>{if(r.trim()){f(!0),c(null);try{const le=await new Zu().analyzeTextForMethods(r);c(le)}catch(K){console.error(K),alert("Analysis failed. Please try again.")}finally{f(!1)}}},H=async()=>{if(M.trim()){f(!0),V(null);try{const le=await new Zu().evaluateWritingPractice(M,k);V(le),xe.currentUser&&l3(xe.currentUser.uid,k,M,le).then(()=>console.log("Lab session saved")).catch(q=>console.error("Failed to save lab session",q))}catch(K){console.error(K),alert("Evaluation failed. Please try again.")}finally{f(!1)}}};return l.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans",children:[l.jsxs("nav",{className:"bg-white border-b border-gray-200 py-4 px-6 md:px-12 flex items-center gap-4 sticky top-0 z-10",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-600",children:l.jsx(oa,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center text-white font-serif font-bold",children:"L"}),l.jsx("span",{className:"font-bold text-lg text-gray-800",children:"Language Lab"})]})]}),l.jsxs("main",{className:"max-w-5xl mx-auto px-6 py-8",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4 mb-8 border-b border-gray-200",children:[l.jsxs("button",{onClick:()=>n("learn"),className:`pb-4 px-3 md:px-4 font-medium flex items-center gap-2 transition-colors border-b-2 text-sm md:text-base ${e==="learn"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[l.jsx(tv,{size:20}),l.jsx("span",{className:"hidden sm:inline",children:"Knowledge Base"}),l.jsx("span",{className:"sm:hidden",children:"Learn"})]}),l.jsxs("button",{onClick:()=>{if(!C){alert("This section requires account approval. Please wait for admin approval.");return}n("analyzer")},disabled:!C,className:`pb-4 px-3 md:px-4 font-medium flex items-center gap-2 transition-colors border-b-2 text-sm md:text-base ${C?e==="analyzer"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700":"border-transparent text-gray-400 cursor-not-allowed"}`,children:[l.jsx(aa,{size:20}),l.jsx("span",{className:"hidden sm:inline",children:"Method Analyzer"}),l.jsx("span",{className:"sm:hidden",children:"Analyze"}),!C&&l.jsx(uh,{size:14})]}),l.jsxs("button",{onClick:()=>{if(!C){alert("This section requires account approval. Please wait for admin approval.");return}n("gym")},disabled:!C,className:`pb-4 px-3 md:px-4 font-medium flex items-center gap-2 transition-colors border-b-2 text-sm md:text-base ${C?e==="gym"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700":"border-transparent text-gray-400 cursor-not-allowed"}`,children:[l.jsx(Wg,{size:20}),l.jsx("span",{className:"hidden sm:inline",children:"Writer's Gym"}),l.jsx("span",{className:"sm:hidden",children:"Practice"}),!C&&l.jsx(uh,{size:14})]})]}),e==="learn"?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex flex-wrap gap-3",children:Object.keys(Eu).map(K=>{const le=!C&&(K==="grammar"||K==="writing");return l.jsxs("button",{onClick:()=>{if(le){alert("This section requires account approval. Please wait for admin approval.");return}p(K),v("")},disabled:le,className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${le?"bg-gray-100 text-gray-400 cursor-not-allowed border border-gray-200":h===K?"bg-indigo-600 text-white shadow-md":"bg-white text-gray-600 border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50"}`,children:[le&&l.jsx(uh,{size:14}),Eu[K].title]},K)})}),l.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-6 text-white",children:[l.jsx("h2",{className:"text-2xl font-bold mb-2",children:Eu[h].title}),l.jsx("p",{className:"text-indigo-100",children:Eu[h].description})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),l.jsx("input",{type:"text",value:g,onChange:K=>v(K.target.value),placeholder:"Search techniques, definitions...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),l.jsx("div",{className:"flex gap-2",children:["all","foundation","intermediate","advanced"].map(K=>l.jsx("button",{onClick:()=>S(K),className:`px-3 py-2 rounded-lg text-sm font-medium capitalize transition-colors ${j===K?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:K},K))})]}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",Z.length," of ",Eu[h].items.length," items"]}),l.jsxs("div",{className:"space-y-4",children:[Z.map(K=>{const le=w.has(K.name);return l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[l.jsxs("button",{onClick:()=>he(K.name),className:"w-full p-5 flex items-start justify-between text-left",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900",children:K.name}),l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium border capitalize ${Y(K.level)}`,children:K.level})]}),l.jsx("p",{className:"text-gray-600 text-sm",children:K.definition})]}),l.jsx("div",{className:"ml-4 mt-1 text-gray-400",children:le?l.jsx(p3,{size:20}):l.jsx(m3,{size:20})})]}),le&&l.jsxs("div",{className:"px-5 pb-5 pt-0 space-y-4 border-t border-gray-100",children:[l.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-600 font-medium text-sm mb-2",children:[l.jsx(fX,{size:16}),"Example"]}),l.jsx("p",{className:"text-slate-800 font-serif italic",children:K.example})]}),K.literarySource&&l.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-purple-700 font-medium text-sm mb-1",children:[l.jsx(Xt,{size:16}),"Found in Literature"]}),l.jsx("p",{className:"text-purple-800 text-sm",children:K.literarySource})]}),l.jsxs("div",{className:"bg-amber-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-amber-700 font-medium text-sm mb-1",children:[l.jsx(KQ,{size:16}),"Exam Tip"]}),l.jsx("p",{className:"text-amber-800 text-sm",children:K.examTip})]}),l.jsxs("button",{onClick:()=>{n("gym"),z(K.name)},className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-700 font-medium text-sm transition-colors",children:[l.jsx(E3,{size:16}),"Practice using ",K.name," in Writer's Gym "]})]})]},K.name)}),Z.length===0&&l.jsxs("div",{className:"text-center py-12 text-gray-500",children:[l.jsx(aa,{size:48,className:"mx-auto mb-4 opacity-20"}),l.jsx("p",{children:"No items match your search. Try adjusting your filters."})]})]})]}):e==="analyzer"?l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Xt,{size:20,className:"text-indigo-600"}),"Input Text"]}),l.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Paste a paragraph from a book, article, or your own writing. AI will identify the language methods used."}),l.jsx("textarea",{value:r,onChange:K=>a(K.target.value),placeholder:"The wind howled like a banshee, tearing through the trees...",className:"w-full h-64 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none font-serif text-lg leading-relaxed"}),l.jsx("button",{onClick:ie,disabled:d||!r.trim(),className:`mt-4 w-full py-3 rounded-lg font-bold text-white transition-all ${d||!r.trim()?"bg-gray-300 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 shadow-md hover:shadow-lg"}`,children:d?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsx(ka,{className:"animate-spin",size:18})," Analyzing..."]}):"Analyze Text"})]})}),l.jsx("div",{className:"space-y-4",children:s?l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 h-full",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Analysis Results"}),l.jsxs("div",{className:"mb-6 bg-indigo-50 p-4 rounded-lg border border-indigo-100",children:[l.jsx("h3",{className:"font-bold text-indigo-900 mb-1",children:"Summary"}),l.jsx("p",{className:"text-indigo-800 text-sm",children:s.summary})]}),l.jsx("div",{className:"space-y-4",children:s.methods.map((K,le)=>l.jsxs("div",{className:"border-l-4 border-purple-500 pl-4 py-1",children:[l.jsx("div",{className:"flex justify-between items-start mb-1",children:l.jsx("span",{className:"font-bold text-purple-700 bg-purple-50 px-2 py-0.5 rounded text-sm",children:K.name})}),l.jsxs("p",{className:"text-gray-800 font-serif italic mb-2",children:['"',K.quote,'"']}),l.jsx("p",{className:"text-gray-600 text-sm",children:K.effect})]},le))})]}):l.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-200 rounded-xl h-full flex flex-col items-center justify-center text-gray-400 p-8 text-center",children:[l.jsx(aa,{size:48,className:"mb-4 opacity-20"}),l.jsx("p",{children:"Enter text and click Analyze to see the breakdown of language methods."})]})})]}):l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Wg,{size:20,className:"text-indigo-600"}),"Practice Area"]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("button",{onClick:()=>{I("techniques"),z("Metaphor")},className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all ${N==="techniques"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Language Techniques"}),l.jsx("button",{onClick:()=>{I("writing"),z("Hook Opening")},className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all ${N==="writing"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Writing Skills"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:N==="techniques"?"Target Technique":"Target Skill"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(K=>l.jsx("button",{onClick:()=>z(K),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${k===K?"bg-indigo-600 text-white font-medium":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:K},K))})]}),l.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-4",children:l.jsxs("p",{className:"text-yellow-800 text-sm",children:[l.jsx("strong",{children:"Challenge:"})," ",N==="techniques"?l.jsxs(l.Fragment,{children:["Write a sentence or short paragraph using ",l.jsx("u",{children:k}),"."]}):l.jsxs(l.Fragment,{children:["Practice ",l.jsx("u",{children:k})," by writing a short example."]})]})}),l.jsx("textarea",{value:M,onChange:K=>T(K.target.value),placeholder:N==="techniques"?`Write something using a ${k}...`:`Practice ${k} here...`,className:"w-full h-48 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none font-serif text-lg"}),l.jsx("button",{onClick:H,disabled:d||!M.trim(),className:`mt-4 w-full py-3 rounded-lg font-bold text-white transition-all ${d||!M.trim()?"bg-gray-300 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 shadow-md hover:shadow-lg"}`,children:d?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsx(ka,{className:"animate-spin",size:18})," Checking..."]}):"Check My Writing"})]})}),l.jsx("div",{className:"space-y-4",children:R?l.jsxs("div",{className:`p-6 rounded-xl shadow-sm border ${R.success?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[R.success?l.jsx(za,{className:"text-green-600",size:32}):l.jsx(pc,{className:"text-orange-600",size:32}),l.jsx("h2",{className:`text-xl font-bold ${R.success?"text-green-800":"text-orange-800"}`,children:R.success?"Great Job!":"Keep Trying"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Feedback"}),l.jsx("p",{className:"text-gray-700",children:R.feedback})]}),l.jsxs("div",{className:"bg-white/50 p-4 rounded-lg",children:[l.jsxs("h3",{className:"font-bold text-gray-900 mb-1 flex items-center gap-2",children:[l.jsx(ka,{size:16,className:"text-yellow-600"}),"Tip for Improvement"]}),l.jsx("p",{className:"text-gray-700 italic",children:R.improvementTip})]})]})]}):l.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-200 rounded-xl h-full flex flex-col items-center justify-center text-gray-400 p-8 text-center",children:[l.jsx(Wg,{size:48,className:"mb-4 opacity-20"}),l.jsx("p",{children:"Write your text and click Check to see if you used the method effectively."})]})})]})]})]})},dye=()=>{const t=Bt(),[e,n]=b.useState(!1),r=async()=>{n(!0);try{await yd(),t("/login")}catch(a){console.error("Logout error:",a),n(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 font-sans p-4",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md text-center border border-slate-100",children:[l.jsx("div",{className:"w-20 h-20 bg-amber-50 rounded-full flex items-center justify-center mx-auto mb-6 text-amber-500 animate-pulse",children:l.jsx(vX,{size:40})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Account Pending Approval"}),l.jsx("p",{className:"text-xs font-semibold text-amber-600 bg-amber-50 rounded-lg py-2 px-3 mb-6 inline-block",children:"Status: Awaiting Admin Review"}),l.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Thank you for signing up! Your account is currently awaiting administrative approval."}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(x3,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"text-left text-sm text-blue-800",children:[l.jsx("p",{className:"font-semibold mb-1",children:"What happens next?"}),l.jsx("p",{children:"An administrator will review your account and send you an email once approved. You'll then have full access to the dashboard and exam services."})]})]})}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:()=>t("/"),className:"w-full py-3 px-4 bg-edexcel-blue hover:bg-edexcel-blue/90 text-white rounded-xl transition-colors font-bold",children:"Go to Home Page"}),l.jsxs("button",{onClick:r,disabled:e,className:"w-full py-3 px-4 bg-red-50 border-2 border-red-200 hover:bg-red-100 text-red-700 rounded-xl transition-colors font-bold flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(xd,{size:18}),e?"Signing Out...":"Sign Out"]})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-6 border-t border-gray-100 pt-4",children:"GoGCSE Platform  Need help? Contact support"})]})})},fye=()=>l.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs(ta,{to:"/login",className:"inline-flex items-center gap-2 text-edexcel-blue hover:text-edexcel-teal mb-6",children:[l.jsx(oa,{size:18}),"Back to Login"]}),l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Terms of Service"}),l.jsx("p",{className:"text-gray-500 mb-8",children:"Last updated: December 2024 | Version 2.0"}),l.jsxs("div",{className:"prose prose-gray max-w-none",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-6 mb-3",children:"1. Assessment & Educational Disclaimer"}),l.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:[l.jsx("p",{className:"text-amber-800 font-medium mb-2",children:" Important Notice"}),l.jsx("p",{className:"text-amber-700 text-sm",children:"GoGCSE is an independent educational practice platform. We are NOT an exam board and NOT affiliated with Pearson Edexcel, AQA, OCR, or Ofqual."})]}),l.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-gray-700",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"NO QUALIFICATIONS:"})," Use of this site does NOT confer any official grade, qualification,/certification, or academic credit."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"INDICATIVE SCORING:"}),' "Marks", "Grades", and "Levels" displayed on this platform are estimates generated by AI for practice purposes only. They may not reflect the grade you would achieve in a real examination.']}),l.jsxs("li",{children:[l.jsx("strong",{children:"NO RELIANCE:"})," You should not rely on these results for university applications, employment, or any other formal purpose."]})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"2. AI-Generated Content"}),l.jsx("p",{className:"text-gray-700 mb-3",children:"GoGCSE uses artificial intelligence (AI) technology to generate:"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsx("li",{children:"Practice exam questions and source texts"}),l.jsx("li",{children:"Automated marking and feedback"}),l.jsx("li",{children:"Model answers and suggestions"})]}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mt-4 mb-2",children:"2a. Teacher Classroom Features"}),l.jsx("p",{className:"text-gray-700 mb-2",children:'If you join a "Classroom" using an invite code:'}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsx("li",{children:"You grant the verified teacher of that class access to view your name and assignment results for that specific class."}),l.jsx("li",{children:"Assignments generated by teachers are AI-created and subject to the same limitations as other platform content."}),l.jsx("li",{children:"You can leave a class at any time, which will remove the teacher's access to your future data."})]}),l.jsxs("p",{className:"text-gray-700 mt-3",children:[l.jsx("strong",{children:"AI Limitations:"})," AI-generated content may contain errors, inaccuracies, or hallucinations. It cannot replace the professional judgement of qualified teachers. Always verify key information with official sources."]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"3. User Eligibility & Conduct"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-gray-700",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Age Requirement:"})," You must be at least 13 years old to create an account. If you are under 13, you may not use this service."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Teacher Accounts:"})," Teachers warrant that they have appropriate authority to invite students to the platform."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Prohibited Conduct:"})," You agree not to upload personal data (names, addresses) in free-text fields or submission boxes. You agree not to use the platform for bullying, harassment, or generating harmful content."]})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"4. Limitation of Liability"}),l.jsx("p",{className:"text-gray-700",children:"To the maximum extent permitted by law (and without excluding liability for death or personal injury caused by negligence):"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-gray-700 mt-2",children:[l.jsx("li",{children:"We are not liable for any loss of academic performance, exam failure, or missed opportunities."}),l.jsx("li",{children:"We are not liable for any indirect or consequential losses."}),l.jsx("li",{children:"Our total liability to you in contract, tort, or otherwise is limited to the amount you paid us (if any) in the 12 months preceding the claim."})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"5. Intellectual Property"}),l.jsx("p",{className:"text-gray-700",children:'All content on GoGCSE, including generated questions and model answers, is protected by copyright. "GCSE" is a registered trademark of the examination boards. We use these terms purely for descriptive purposes to indicate compatibility with the curriculum.'}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"6. Governing Law"}),l.jsx("p",{className:"text-gray-700",children:"These terms are governed by the laws of England and Wales. Any disputes will be subject to the exclusive jurisdiction of the courts of England and Wales."}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"7. Contact"}),l.jsx("p",{className:"text-gray-700",children:"For support or legal inquiries, please contact us via the help link on the dashboard."})]})]})]})}),hye=()=>l.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs(ta,{to:"/login",className:"inline-flex items-center gap-2 text-edexcel-blue hover:text-edexcel-teal mb-6",children:[l.jsx(oa,{size:18}),"Back to Login"]}),l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Privacy Notice"}),l.jsx("p",{className:"text-gray-500 mb-8",children:"Last updated: December 2024 | Version 2.0"}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8",children:[l.jsx("p",{className:"text-blue-800 font-medium mb-2",children:" Privacy Summary (Easy Read)"}),l.jsxs("ul",{className:"text-blue-700 text-sm space-y-1",children:[l.jsx("li",{children:" We collect your email, name, and exam answers to help you learn."}),l.jsx("li",{children:" Your teachers can see your work ONLY if you join their class with a code."}),l.jsx("li",{children:" We use Google AI to write questions and mark your work."}),l.jsx("li",{children:" We keep your data safe and never sell it."}),l.jsx("li",{children:" You can ask us to delete your data at any time."})]})]}),l.jsxs("div",{className:"prose prose-gray max-w-none",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-6 mb-3",children:"1. Who We Are (Data Controller)"}),l.jsx("p",{className:"text-gray-700",children:"GoGCSE is the Data Controller for your personal information. For privacy inquiries, please use the contact form on our dashboard or email our privacy team."}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"2. What Data We Collect & Why"}),l.jsxs("table",{className:"w-full border-collapse border border-gray-200 text-sm mt-2",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Data Type"}),l.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Purpose"}),l.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Legal Basis"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-200 p-2",children:"Email, Display Name"}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Account setup & login."}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Contract"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-200 p-2",children:"Age Confirmation"}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Child safety (13+ Only)."}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Legal Obligation"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-200 p-2",children:"Exam Data & AI Logs"}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Providing the service & marking."}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Contract"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-200 p-2",children:"Consent Records"}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Proof of agreement to Terms."}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Legal Obligation"})]})]})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"3. Sharing Your Data"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Service Providers:"})," We use Google Firebase (hosting/db) and Google Gemini (AI generation). They process data on our behalf."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Teachers:"})," If you join a class via Invite Code, that teacher sees your name and results for that class."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Legal:"})," We may share data if required by UK law or to protect safety."]})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"4. Cookies (PECR Compliance)"}),l.jsx("p",{className:"text-gray-700",children:"We use:"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Strictly Necessary Cookies:"})," To keep you logged in. You cannot switch these off."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Functional/Analytics:"})," Only set if you give consent via our Cookie Banner."]})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"5. Children's Privacy"}),l.jsx("p",{className:"text-gray-700",children:"This service is for users aged 13 and over. We do not knowingly collect data from children under 13. If we discover an account belongs to a child under 13 without verifiable parental consent, we will delete it."}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"6. Your Rights (UK GDPR)"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Access & Portability:"})," Ask for a copy of your data."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Correction:"})," Fix mistakes in your data."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Deletion:"})," Ask us to delete your account."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Withdraw Consent:"})," You can leave a class or change cookie settings at any time."]})]}),l.jsx("p",{className:"text-gray-700 mt-2",children:"To exercise these rights, email specific-request@gogcse.com (Example). You also have the right to complain to the ICO (ico.org.uk)."})]})]})]})}),mye=()=>l.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs(ta,{to:"/login",className:"inline-flex items-center gap-2 text-edexcel-blue hover:text-edexcel-teal mb-6",children:[l.jsx(oa,{size:18}),"Back"]}),l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Cookie Policy"}),l.jsx("p",{className:"text-gray-500 mb-8",children:"Last updated: December 2024"}),l.jsxs("div",{className:"prose prose-gray max-w-none",children:[l.jsx("p",{className:"text-gray-700",children:'This Cookie Policy explains how GoGCSE ("we", "us", or "our") uses cookies and similar technologies to recognize you when you visit our website. It explains what these technologies are and why we use them, as well as your rights to control our use of them.'}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-6 mb-3",children:"1. What are cookies?"}),l.jsx("p",{className:"text-gray-700",children:"Cookies are small data files that are placed on your computer or mobile device when you visit a website. Cookies are widely used by website owners in order to make their websites work, or to work more efficiently, as well as to provide reporting information."}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"2. Why do we use cookies?"}),l.jsx("p",{className:"text-gray-700 mb-2",children:"We use cookies for several reasons:"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Essential Cookies:"})," strictly necessary for the website to function (e.g., to keep you logged in)."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Performance & Analytics Cookies:"})," to track how users use the site so we can improve it."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Functionality Cookies:"})," to remember your preferences (like your username or language)."]})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"3. Cookies we use"}),l.jsx("div",{className:"overflow-x-auto mt-4 mb-8",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-200 text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Category"}),l.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Purpose"}),l.jsx("th",{className:"border border-gray-200 p-2 text-left",children:"Opt-out?"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-200 p-2 font-medium",children:"Strictly Necessary"}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Login authentication, security, session management."}),l.jsx("td",{className:"border border-gray-200 p-2 text-red-600",children:"No (Required)"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-200 p-2 font-medium",children:"Performance / Analytics"}),l.jsx("td",{className:"border border-gray-200 p-2",children:"Google Analytics (anonymised) to see which pages are popular."}),l.jsx("td",{className:"border border-gray-200 p-2 text-green-600",children:"Yes"})]})]})]})}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"4. Children and Cookies"}),l.jsx("p",{className:"text-gray-700",children:"For users identified as under 18, we strictly limit data collection. We do not use advertising or tracking cookies for marketing purposes for child accounts. Analytics data is anonymised."}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"5. How can I control cookies?"}),l.jsx("p",{className:"text-gray-700",children:"You have the right to decide whether to accept or reject non-essential cookies. You can exercise your cookie rights by setting your preferences in the Cookie Consent Manager (coming soon) or by amending your web browser controls."}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"6. Updates to this policy"}),l.jsx("p",{className:"text-gray-700",children:"We may update this Cookie Policy from time to time in order to reflect, for example, changes to the cookies we use or for other operational, legal, or regulatory reasons."})]})]})]})}),pye=()=>l.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs(ta,{to:"/login",className:"inline-flex items-center gap-2 text-edexcel-blue hover:text-edexcel-teal mb-6",children:[l.jsx(oa,{size:18}),"Back"]}),l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Acceptable Use Policy"}),l.jsx("p",{className:"text-gray-500 mb-8",children:"Last updated: December 2024"}),l.jsxs("div",{className:"prose prose-gray max-w-none",children:[l.jsx("p",{className:"text-gray-700",children:'This Acceptable Use Policy ("AUP") outlines the rules for using GoGCSE. By accessing our platform, you agree to follow these rules.'}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-6 mb-3",children:"1. Academic Integrity"}),l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[l.jsx("p",{className:"text-red-800 font-bold mb-2",children:" STRICTLY PROHIBITED"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-red-700 text-sm",children:[l.jsx("li",{children:"Using the platform to cheat in real examinations"}),l.jsx("li",{children:"Sharing answers to real exam papers"}),l.jsx("li",{children:"Uploading copyrighted exam materials"})]})]}),l.jsxs("p",{className:"text-gray-700",children:["GoGCSE is for ",l.jsx("strong",{children:"practice only"}),". You must not use our tools to gain an unfair advantage in official assessments."]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"2. Prohibited Content"}),l.jsx("p",{className:"text-gray-700 mb-2",children:"You must NOT upload, generate, or share content that is:"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsx("li",{children:"Offensive, abusive, or hateful"}),l.jsx("li",{children:"Sexually explicit or violent"}),l.jsx("li",{children:"Harassing or bullying towards others"}),l.jsx("li",{children:"False, misleading, or fraudulent"})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"3. Account Security"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsx("li",{children:"Do not share your password with anyone"}),l.jsx("li",{children:"Do not access someone else's account"}),l.jsx("li",{children:"Notify us immediately if you suspect unauthorized access"})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"4. System Abuse"}),l.jsx("p",{className:"text-gray-700 mb-2",children:"You agree NOT to:"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsx("li",{children:"Attempt to damage, hack, or interfere with the website"}),l.jsx("li",{children:"Use automated scripts or bots to access the site"}),l.jsx("li",{children:"Data scrape or harvest user information"})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-8 mb-3",children:"5. Consequences of Breach"}),l.jsx("p",{className:"text-gray-700",children:"If you violate this policy, we may:"}),l.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[l.jsx("li",{children:"Issue a warning"}),l.jsx("li",{children:"Suspend your account"}),l.jsx("li",{children:"Permanently terminate your account without refund"}),l.jsx("li",{children:"Report illegal activity to law enforcement"})]})]})]})]})}),gye=()=>l.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs(ta,{to:"/login",className:"inline-flex items-center gap-2 text-edexcel-blue hover:text-edexcel-teal mb-6",children:[l.jsx(oa,{size:18}),"Back"]}),l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:l.jsx(es,{className:"text-indigo-600",size:24})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Privacy Information for Students"})]}),l.jsx("p",{className:"text-lg text-gray-600 mb-8 border-b border-gray-100 pb-6",children:"This page explains how we keep your information safe and what we do with it. We want you to understand how GoGCSE works."}),l.jsxs("div",{className:"grid gap-6",children:[l.jsx("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-100",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx(DX,{className:"text-blue-600 mt-1",size:24}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:"1. The Information We Collect"}),l.jsx("p",{className:"text-blue-800 mb-2",children:"When you sign up, we ask for your:"}),l.jsxs("ul",{className:"list-disc pl-5 text-blue-800 text-sm space-y-1",children:[l.jsx("li",{children:"Name (so we know what to call you)"}),l.jsx("li",{children:"Email (to log you in)"}),l.jsx("li",{children:"Age (to make sure you are old enough)"}),l.jsx("li",{children:"Exam answers (to help you practice)"})]})]})]})}),l.jsx("div",{className:"bg-emerald-50 rounded-xl p-6 border border-emerald-100",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx(vd,{className:"text-emerald-600 mt-1",size:24}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-emerald-900 mb-2",children:"2. Why We Need It"}),l.jsx("p",{className:"text-emerald-800 mb-2",children:"We use this information to:"}),l.jsxs("ul",{className:"list-disc pl-5 text-emerald-800 text-sm space-y-1",children:[l.jsx("li",{children:"Create your account"}),l.jsx("li",{children:"Save your scores so you can see your progress"}),l.jsx("li",{children:"Use AI to mark your practice exams"})]})]})]})}),l.jsx("div",{className:"bg-amber-50 rounded-xl p-6 border border-amber-100",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx(uh,{className:"text-amber-600 mt-1",size:24}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-amber-900 mb-2",children:"3. Keeping It Safe"}),l.jsxs("p",{className:"text-amber-800 mb-2",children:["We store your information securely. We ",l.jsx("strong",{children:"never"})," sell your information to advertisers or other companies to contact you."]}),l.jsx("p",{className:"text-amber-800",children:"Only you (and us, for technical help) can see your account details."})]})]})})]}),l.jsxs("div",{className:"mt-10 border-t border-gray-100 pt-8",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Your Rights"}),l.jsx("p",{className:"text-gray-700 mb-4",children:"You are in control of your data. You can always:"}),l.jsxs("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("li",{className:"flex items-center gap-2 text-gray-700 bg-gray-50 p-3 rounded-lg",children:[l.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),"Ask to see what info we have"]}),l.jsxs("li",{className:"flex items-center gap-2 text-gray-700 bg-gray-50 p-3 rounded-lg",children:[l.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),"Ask us to fix mistakes"]}),l.jsxs("li",{className:"flex items-center gap-2 text-gray-700 bg-gray-50 p-3 rounded-lg",children:[l.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),"Ask us to delete your account"]}),l.jsxs("li",{className:"flex items-center gap-2 text-gray-700 bg-gray-50 p-3 rounded-lg",children:[l.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),"Change your mind about emails"]})]})]}),l.jsxs("div",{className:"mt-8 bg-gray-50 p-6 rounded-xl",children:[l.jsx("p",{className:"text-gray-700 font-medium",children:"Need help?"}),l.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["If you have questions about privacy, you can ask a parent or guardian to email us at",l.jsx("span",{className:"font-mono text-indigo-600 ml-1",children:"support@gogcse.com"})]})]})]})]})}),yye=()=>{const[t,e]=b.useState(!1),[n,r]=b.useState(!1);b.useEffect(()=>{const d=localStorage.getItem("gogcse_cookie_consent");if(!d)e(!0);else{const f=JSON.parse(d);r(f.analytics)}},[]);const a=()=>{c({necessary:!0,analytics:!0})},s=()=>{c({necessary:!0,analytics:n})},c=d=>{localStorage.setItem("gogcse_cookie_consent",JSON.stringify({...d,timestamp:new Date().toISOString()})),e(!1),d.analytics&&console.log("Analytics cookies enabled")};return t?l.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] z-50 p-6 md:p-8",children:l.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col md:flex-row gap-8 items-start md:items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-2",children:[l.jsx(xQ,{className:"text-edexcel-teal",size:20}),"Cookie Settings"]}),l.jsx("p",{className:"text-gray-600 text-sm leading-relaxed max-w-2xl",children:"We use cookies to ensure our website works (Strictly Necessary). With your permission, wed also like to use analytics cookies to see how you use the site so we can improve it. We do NOT use marketing/advertising cookies."}),l.jsxs("div",{className:"mt-4 flex flex-wrap gap-6 text-sm",children:[l.jsxs("label",{className:"flex items-center gap-2 text-gray-400 cursor-not-allowed",title:"Required for the site to function",children:[l.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"rounded text-gray-400 focus:ring-0"}),l.jsx("span",{className:"font-medium",children:"Strictly Necessary (Always On)"})]}),l.jsxs("label",{className:"flex items-center gap-2 text-gray-900 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:n,onChange:d=>r(d.target.checked),className:"rounded text-edexcel-teal focus:ring-edexcel-teal"}),l.jsx("span",{className:"font-medium",children:"Analytics (Optional)"})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto min-w-[300px]",children:[l.jsx("button",{onClick:s,className:"px-6 py-2.5 rounded-lg border-2 border-gray-200 font-bold text-gray-700 hover:border-gray-300 hover:bg-gray-50 transition-colors",children:"Save Preferences"}),l.jsx("button",{onClick:a,className:"px-6 py-2.5 rounded-lg bg-edexcel-teal text-white font-bold hover:bg-teal-700 shadow-md transition-colors",children:"Accept All"})]})]})}):null},vye=()=>{const[t,e]=b.useState(null),[n,r]=b.useState(!0),a=Bt(),[s,c]=b.useState(!1),[d,f]=b.useState(!1),[h,p]=b.useState(!1),[g,v]=b.useState(!1),[w,E]=b.useState(!1),[j,S]=b.useState(!1),[k,z]=b.useState(null);b.useEffect(()=>{const T=Zh(xe,async R=>{if(e(R),!R){a("/login"),r(!1);return}try{const V=Me(ve,"users",R.uid),N=await Yn(V);if(N.exists()){const I=N.data();if(I.isApproved){a("/dashboard");return}if(I.hasConsented){a("/pending-approval");return}}}catch(V){console.error("Error checking consent status:",V)}r(!1)});return()=>T()},[a]);const M=async()=>{if(t){if(!s||!d||!h||!g){z("You must agree to all mandatory legal terms to proceed.");return}S(!0),z(null);try{const T="2.0-dec-2024",R=mr(),V=Me(ve,"users",t.uid);(await Yn(V)).exists()?await ri(V,{email:t.email,displayName:t.displayName||"",photoURL:t.photoURL||"",hasConsented:!0,consentVersion:T,consentedAt:R,updatedAt:R},{merge:!0}):await ri(V,{email:t.email,displayName:t.displayName||"",photoURL:t.photoURL||"",createdAt:R,hasConsented:!0,consentVersion:T,consentedAt:R,status:"pending",isApproved:!1,updatedAt:R});try{await ri(Me(ve,"userConsents",t.uid),{userId:t.uid,createdAt:R},{merge:!0}),await Sr(qe(ve,"userConsents",t.uid,"events"),{action:"accepted_legal_terms",consentVersion:T,acceptedTerms:s,acceptedPrivacy:d,acceptedDisclaimer:h,confirmedAge13Plus:g,marketingOptIn:w,timestamp:R,userAgent:navigator.userAgent})}catch(C){console.warn("Failed to create audit trail, continuing anyway:",C)}a("/pending-approval")}catch(T){console.error("Consent failed:",T),z("Failed to save your consent. Please check your connection and try again.")}finally{S(!1)}}};return n?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:"Loading..."}):l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white max-w-2xl w-full rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:[l.jsxs("div",{className:"bg-[#003764] px-8 py-6 text-white text-center relative overflow-hidden",children:[l.jsxs("div",{className:"relative z-10",children:[l.jsx(es,{className:"mx-auto mb-3",size:48}),l.jsx("h1",{className:"text-2xl font-bold",children:"Welcome to GoGCSE"}),l.jsx("p",{className:"text-blue-100 mt-2",children:"Before you start practising, please review and agree to our rules."})]}),l.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-white/10 to-transparent pointer-events-none"})]}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"bg-blue-50 rounded-xl p-5 mb-8 border border-blue-100",children:[l.jsxs("h3",{className:"text-blue-900 font-bold flex items-center gap-2 mb-3",children:[l.jsx(Bi,{size:18}),"Important Reminders"]}),l.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[l.jsxs("li",{className:"flex gap-2 items-start",children:[l.jsx("span",{className:"mt-0.5",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"Practice Only:"})," This platform is NOT an official exam and does not give real qualifications. Scores are estimates only."]})]}),l.jsxs("li",{className:"flex gap-2 items-start",children:[l.jsx("span",{className:"mt-0.5",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"AI Content:"})," Questions and marking are generated by AI. They may contain mistakes. Always double-check with your teacher."]})]}),l.jsxs("li",{className:"flex gap-2 items-start",children:[l.jsx("span",{className:"mt-0.5",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"Age 13+:"})," You must be 13 or older to use this service."]})]})]})]}),l.jsxs("div",{className:"space-y-5 mb-8",children:[l.jsxs("label",{className:"flex gap-4 p-4 rounded-xl border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"pt-0.5",children:l.jsx("input",{type:"checkbox",checked:s,onChange:T=>c(T.target.checked),className:"w-5 h-5 text-[#003764] rounded focus:ring-[#007fa3] cursor-pointer"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-900",children:"Terms of Service (Required)"}),l.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["I agree to the GoGCSE ",l.jsx("a",{href:"/terms",target:"_blank",className:"text-[#003764] underline hover:text-[#007fa3]",onClick:T=>T.stopPropagation(),children:"Terms of Service"}),", including the limitation of liability and acceptable use policy."]})]})]}),l.jsxs("label",{className:"flex gap-4 p-4 rounded-xl border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"pt-0.5",children:l.jsx("input",{type:"checkbox",checked:d,onChange:T=>f(T.target.checked),className:"w-5 h-5 text-[#003764] rounded focus:ring-[#007fa3] cursor-pointer"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-900",children:"Privacy Policy (Required)"}),l.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["I have read the ",l.jsx("a",{href:"/privacy",target:"_blank",className:"text-[#003764] underline hover:text-[#007fa3]",onClick:T=>T.stopPropagation(),children:"Privacy Policy"})," and understand how my data (email, exam answers) is processed."]})]})]}),l.jsxs("label",{className:"flex gap-4 p-4 rounded-xl border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"pt-0.5",children:l.jsx("input",{type:"checkbox",checked:h,onChange:T=>p(T.target.checked),className:"w-5 h-5 text-[#003764] rounded focus:ring-[#007fa3] cursor-pointer"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-900",children:"Educational Disclaimer (Required)"}),l.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"I understand this is a practice tool used at my own risk. Results are not official."})]})]}),l.jsxs("label",{className:"flex gap-4 p-4 rounded-xl border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"pt-0.5",children:l.jsx("input",{type:"checkbox",checked:g,onChange:T=>v(T.target.checked),className:"w-5 h-5 text-[#003764] rounded focus:ring-[#007fa3] cursor-pointer"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-900",children:"Age Confirmation (Required)"}),l.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"I confirm I am 13 years of age or older."})]})]}),l.jsxs("label",{className:"flex gap-4 p-4 rounded-xl border border-dashed border-gray-300 bg-gray-50/50 cursor-pointer hover:bg-gray-100 transition-colors",children:[l.jsx("div",{className:"pt-0.5",children:l.jsx("input",{type:"checkbox",checked:w,onChange:T=>E(T.target.checked),className:"w-5 h-5 text-[#003764] rounded focus:ring-[#007fa3] cursor-pointer"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-700",children:"Stay Updated (Optional)"}),l.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Email me about new features and exam tips. Unsubscribe anytime."})]})]})]}),k&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-lg text-sm font-medium border border-red-200",children:k}),l.jsx("button",{onClick:M,disabled:j||!s||!d||!h||!g,className:`w-full py-4 rounded-xl font-bold text-lg transition-all flex items-center justify-center gap-2 ${j||!s||!d||!h||!g?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#003764] text-white hover:bg-[#007fa3] shadow-lg hover:shadow-xl"}`,style:{backgroundColor:j||!s||!d||!h||!g?void 0:"#003764"},children:j?"Setting up account...":"Accept & Continue to Dashboard"}),l.jsx("div",{className:"text-center mt-6 text-xs text-gray-400",children:"GoGCSE Platform v2.0  London, UK"})]})]})})},xye=()=>l.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 py-8 px-4 mt-auto",children:l.jsxs("div",{className:"max-w-5xl mx-auto space-y-4",children:[l.jsx("p",{className:"text-xs text-gray-600 text-center leading-relaxed font-medium",children:"GoGCSE is an independent revision tool powered by Artificial Intelligence. We are not affiliated with, endorsed by, or connected to Ofqual, the Department for Education, or any exam boards (AQA, Edexcel, OCR, WJEC). Content is for practice only."}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs text-gray-500 leading-relaxed",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:"AI Disclaimer:"}),l.jsx("p",{children:"AI-generated content may contain errors. Always verify important information with official sources before relying on it for academic decisions."})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:"Not Official Grades:"}),l.jsx("p",{children:"Results are estimates for practice purposes only. They are not official grades and should not be submitted as qualifications."})]})]}),l.jsx("p",{className:"text-xs text-gray-400 text-center pt-4 border-t border-gray-200",children:" 2025 GoGCSE. All rights reserved. This is an independent educational tool."})]})}),bye=()=>{var v,w,E;const t=Bt(),e=ua(),n=ai.includes(((v=xe.currentUser)==null?void 0:v.email)||""),[r,a]=b.useState(!1),[s,c]=b.useState(()=>localStorage.getItem("adminDarkMode")==="true");b.useEffect(()=>{localStorage.setItem("adminDarkMode",s.toString()),s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[s]);const d=async()=>{await yd(),t("/login")},f=()=>{const j=e.pathname.split("/").filter(Boolean),S=[{label:"Admin",path:"/admin"}];if(j[1]){const k={users:"User Directory",exams:"Exam Records","lab-sessions":"Lab Sessions",settings:"Settings",analytics:"Analytics",announcements:"Announcements","activity-log":"Activity Log",assets:"Assets",security:"Security"};S.push({label:k[j[1]]||j[1],path:e.pathname})}return S},h=({isActive:j})=>`flex items-center gap-3 px-4 py-3 rounded-md transition-colors ${j?"bg-edexcel-teal/20 text-edexcel-teal":"text-slate-300 hover:bg-slate-800"} ${r?"justify-center":""}`,p=[{to:"/admin",icon:v3,label:"Overview",end:!0},{to:"/teacher",icon:tv,label:"Teacher Classroom"},{to:"/admin/users",icon:Fr,label:"User Directory"},{to:"/admin/exams",icon:$r,label:"Exam Records"},{to:"/admin/lab-sessions",icon:Xt,label:"Lab Sessions"},{to:"/admin/analytics",icon:J0,label:"Analytics"},{to:"/admin/announcements",icon:h3,label:"Announcements"},{to:"/admin/assets",icon:UQ,label:"Assets"}],g=[{to:"/admin/activity-log",icon:Ey,label:"Activity Log"},{to:"/admin/security",icon:es,label:"Security"},{to:"/admin/settings",icon:oS,label:"Settings"},{to:"/admin/directory",icon:Fr,label:"Admin Directory"}];return l.jsxs("div",{className:`flex h-screen ${s?"bg-slate-900":"bg-gray-100"}`,children:[l.jsxs("aside",{className:`${r?"w-20":"w-64"} bg-slate-900 text-white flex flex-col shrink-0 transition-all duration-300`,children:[l.jsxs("div",{className:`p-4 border-b border-slate-700 flex items-center ${r?"justify-center":"justify-between"}`,children:[!r&&l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold tracking-tight text-edexcel-teal",children:"Admin Control"}),l.jsx("p",{className:"text-xs text-slate-400",children:"GCSE Simulator"})]}),l.jsx("button",{onClick:()=>a(!r),className:"p-2 hover:bg-slate-800 rounded-lg transition-colors",title:r?"Expand":"Collapse",children:r?l.jsx(Sh,{size:18}):l.jsx(nS,{size:18})})]}),l.jsxs("nav",{className:"flex-1 p-2 space-y-1 overflow-y-auto",children:[p.map(j=>l.jsxs(ty,{to:j.to,end:j.end,className:h,title:r?j.label:void 0,children:[l.jsx(j.icon,{size:20}),!r&&l.jsx("span",{className:"font-medium",children:j.label})]},j.to)),n&&l.jsxs("div",{className:"pt-3 mt-3 border-t border-slate-700",children:[!r&&l.jsx("p",{className:"px-4 py-2 text-xs text-slate-500 uppercase tracking-wider",children:"Super Admin"}),g.map(j=>l.jsxs(ty,{to:j.to,className:h,title:r?j.label:void 0,children:[l.jsx(j.icon,{size:20}),!r&&l.jsx("span",{className:"font-medium",children:j.label})]},j.to))]})]}),l.jsxs("div",{className:"p-3 border-t border-slate-700 space-y-2",children:[l.jsxs("button",{onClick:()=>c(!s),className:`flex items-center gap-3 px-4 py-2 w-full text-slate-300 hover:text-white hover:bg-slate-800 rounded-md transition-colors ${r?"justify-center":""}`,title:s?"Light Mode":"Dark Mode",children:[s?l.jsx(_3,{size:18}):l.jsx(b3,{size:18}),!r&&l.jsx("span",{children:s?"Light Mode":"Dark Mode"})]}),l.jsxs("button",{onClick:d,className:`flex items-center gap-3 px-4 py-2 w-full text-slate-300 hover:text-white hover:bg-slate-800 rounded-md transition-colors ${r?"justify-center":""}`,title:"Sign Out",children:[l.jsx(xd,{size:18}),!r&&l.jsx("span",{children:"Sign Out"})]}),!r&&l.jsx("div",{className:"px-4 pt-2 text-xs text-slate-500",children:"v2.0.0"})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[l.jsxs("header",{className:`${s?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} border-b h-16 flex items-center justify-between px-6 shadow-sm`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>t("/"),className:`p-2 rounded-lg hover:bg-slate-100 ${s?"hover:bg-slate-700":""}`,title:"Back to App",children:l.jsx(jy,{size:18,className:s?"text-slate-400":"text-slate-500"})}),l.jsx("nav",{className:"flex items-center gap-1 text-sm",children:f().map((j,S,k)=>l.jsxs(Bh.Fragment,{children:[l.jsx("button",{onClick:()=>t(j.path),className:`${S===k.length-1?s?"text-white font-semibold":"text-slate-900 font-semibold":s?"text-slate-400 hover:text-white":"text-slate-500 hover:text-slate-900"}`,children:j.label}),S<k.length-1&&l.jsx("span",{className:s?"text-slate-600":"text-slate-300",children:"/"})]},j.path))})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:`text-sm font-bold ${s?"text-white":"text-gray-800"}`,children:((w=xe.currentUser)==null?void 0:w.displayName)||"Admin User"}),l.jsx("div",{className:`text-xs ${s?"text-slate-400":"text-gray-500"}`,children:n?"Super Administrator":"Administrator"})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden",children:(E=xe.currentUser)!=null&&E.photoURL?l.jsx("img",{src:xe.currentUser.photoURL,alt:"Admin",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:l.jsx(Fr,{size:20})})})]})]}),l.jsx("main",{className:`flex-1 overflow-auto p-6 ${s?"bg-slate-900":""}`,children:l.jsx(c4,{context:{darkMode:s}})})]})]})},HD=()=>{const t=Bt(),e=qh(),n=(e==null?void 0:e.darkMode)||!1,[r,a]=b.useState([]),[s,c]=b.useState([]),[d,f]=b.useState(!0),[h,p]=b.useState("30");b.useEffect(()=>{(async()=>{const[D,O]=await Promise.all([Tc(),eS()]);a(D),c(O),f(!1)})()},[]);const g=b.useMemo(()=>{if(h==="all")return s;const C=parseInt(h),D=Date.now()-C*24*60*60*1e3;return s.filter(O=>{var U;return((U=O.date)==null?void 0:U.seconds)&&O.date.seconds*1e3>=D})},[s,h]),v=b.useMemo(()=>{const C=g.reduce((O,U)=>O+(U.totalScore||0),0),D=g.length>0?Math.round(C/g.length):0;return{totalUsers:r.length,totalExams:g.length,avgScore:D,recentActivity:g.slice(0,5)}},[r,g]),w=b.useMemo(()=>{const C={};return r.forEach(D=>{C[D.uid||D.id]=D.displayName||D.email||"Unknown"}),C},[r]),E=b.useMemo(()=>{const C={9:0,8:0,7:0,6:0,5:0,4:0,3:0,2:0,1:0};return g.forEach(D=>{var U;const O=((U=D.gradeEstimate)==null?void 0:U.toString())||"1";C[O]!==void 0&&C[O]++}),Object.entries(C).map(([D,O])=>({grade:`Grade ${D}`,count:O})).reverse()},[g]),j=b.useMemo(()=>{const C=g.filter($=>{var Z;return $.paperType==="PAPER_1"||((Z=$.paperType)==null?void 0:Z.includes("1"))}),D=g.filter($=>{var Z;return $.paperType==="PAPER_2"||((Z=$.paperType)==null?void 0:Z.includes("2"))}),O=C.length>0?Math.round(C.reduce(($,Z)=>$+(Z.totalScore||0),0)/C.length):0,U=D.length>0?Math.round(D.reduce(($,Z)=>$+(Z.totalScore||0),0)/D.length):0;return[{name:"Paper 1",average:O,count:C.length},{name:"Paper 2",average:U,count:D.length}]},[g]),S=b.useMemo(()=>{const C={},D=new Date;for(let O=29;O>=0;O--){const U=new Date(D);U.setDate(U.getDate()-O),C[U.toLocaleDateString("en-US",{month:"short",day:"numeric"})]=new Set}return s.forEach(O=>{var U;if((U=O.date)!=null&&U.seconds&&O.userId){const $=new Date(O.date.seconds*1e3),Z=Math.floor((D.getTime()-$.getTime())/(1e3*60*60*24));if(Z>=0&&Z<30){const he=$.toLocaleDateString("en-US",{month:"short",day:"numeric"});C[he]&&C[he].add(O.userId)}}}),Object.entries(C).map(([O,U])=>({day:O,activeUsers:U.size}))},[s]),k=b.useMemo(()=>{const C={};return g.forEach(D=>{var O;if((O=D.date)!=null&&O.seconds){const U=new Date(D.date.seconds*1e3),$=new Date(U);$.setDate(U.getDate()-U.getDay());const Z=$.toLocaleDateString("en-US",{month:"short",day:"numeric"});C[Z]||(C[Z]={total:0,count:0}),C[Z].total+=D.totalScore||0,C[Z].count++}}),Object.entries(C).map(([D,O])=>({week:D,avgScore:Math.round(O.total/O.count)})).slice(-8)},[g]),z=b.useMemo(()=>{const C={};return g.forEach(D=>{var O;(O=D.questionResults)==null||O.forEach(U=>{U.aos&&Object.entries(U.aos).forEach(([$,Z])=>{C[$]||(C[$]={score:0,max:0}),C[$].score+=Number(Z)||0,C[$].max+=U.maxScore||10})})}),Object.entries(C).map(([D,O])=>({ao:D,percentage:O.max>0?Math.round(O.score/O.max*100):0})).sort((D,O)=>D.percentage-O.percentage)},[g]),M=b.useMemo(()=>{const C={},D=new Date;for(let O=6;O>=0;O--){const U=new Date(D);U.setDate(U.getDate()-O),C[U.toLocaleDateString("en-US",{weekday:"short"})]=0}return g.forEach(O=>{var U;if((U=O.date)!=null&&U.seconds){const $=new Date(O.date.seconds*1e3),Z=Math.floor((D.getTime()-$.getTime())/(1e3*60*60*24));if(Z>=0&&Z<7){const he=$.toLocaleDateString("en-US",{weekday:"short"});C[he]!==void 0&&C[he]++}}}),Object.entries(C).map(([O,U])=>({day:O,exams:U}))},[g]),T=n?"bg-slate-800 border-slate-700":"bg-white border-slate-200",R=n?"text-white":"text-slate-900",V=n?"text-slate-400":"text-slate-500";if(d)return l.jsx("div",{className:`p-8 text-center ${V}`,children:"Loading analytics..."});const N=({title:C,value:D,icon:O,color:U,subtitle:$})=>l.jsx("div",{className:`p-5 rounded-xl shadow-sm border ${T}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-medium ${V}`,children:C}),l.jsx("h3",{className:`text-2xl font-bold ${R} mt-1`,children:D}),$&&l.jsx("p",{className:`text-xs ${V} mt-1`,children:$})]}),l.jsx("div",{className:`p-3 rounded-lg ${U}`,children:l.jsx(O,{size:22,className:"text-white"})})]})}),I=({label:C,onClick:D,icon:O})=>l.jsxs("button",{onClick:D,className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-slate-700 hover:bg-slate-600 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-700"}`,children:[l.jsx(O,{size:16}),C,l.jsx(Z0,{size:14})]});return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-2xl font-bold ${R}`,children:"Platform Overview"}),l.jsx("p",{className:V,children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[l.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border ${T}`,children:[l.jsx(tl,{size:16,className:V}),l.jsxs("select",{value:h,onChange:C=>p(C.target.value),className:`bg-transparent text-sm font-medium ${R} focus:outline-none`,children:[l.jsx("option",{value:"7",children:"Last 7 days"}),l.jsx("option",{value:"30",children:"Last 30 days"}),l.jsx("option",{value:"90",children:"Last 90 days"}),l.jsx("option",{value:"all",children:"All time"})]})]}),l.jsx(I,{label:"Users",onClick:()=>t("/admin/users"),icon:Fr}),l.jsx(I,{label:"Exams",onClick:()=>t("/admin/exams"),icon:$r})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(N,{title:"Total Students",value:v.totalUsers,icon:Fr,color:"bg-blue-500"}),l.jsx(N,{title:"Exams Completed",value:v.totalExams,icon:$r,color:"bg-indigo-500",subtitle:h==="all"?"all time":`last ${h} days`}),l.jsx(N,{title:"Average Score",value:v.avgScore,icon:dh,color:"bg-emerald-500"}),l.jsx(N,{title:"System Status",value:"Active",icon:za,color:"bg-slate-500"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-5 rounded-xl shadow-sm border ${T}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(J0,{size:18,className:"text-indigo-500"}),l.jsx("h3",{className:`font-bold ${R}`,children:"Grade Distribution"})]}),l.jsx(Cu,{width:"100%",height:220,children:l.jsxs(PE,{data:E,children:[l.jsx(th,{strokeDasharray:"3 3",stroke:n?"#334155":"#e2e8f0"}),l.jsx(Ru,{dataKey:"grade",tick:{fontSize:11,fill:n?"#94a3b8":"#64748b"}}),l.jsx(Du,{allowDecimals:!1,tick:{fill:n?"#94a3b8":"#64748b"}}),l.jsx(ku,{}),l.jsx(g0,{dataKey:"count",fill:"#6366f1",radius:[4,4,0,0]})]})})]}),l.jsxs("div",{className:`p-5 rounded-xl shadow-sm border ${T}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(oQ,{size:18,className:"text-purple-500"}),l.jsx("h3",{className:`font-bold ${R}`,children:"Paper Comparison"})]}),l.jsxs("div",{className:"flex items-center justify-around",children:[l.jsx(Cu,{width:"50%",height:180,children:l.jsxs(nye,{children:[l.jsx(qU,{data:j,dataKey:"count",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,label:!0,children:j.map((C,D)=>l.jsx(Im,{fill:D===0?"#6366f1":"#a855f7"},D))}),l.jsx(ku,{})]})}),l.jsx("div",{className:"space-y-3",children:j.map((C,D)=>l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:`text-sm ${V}`,children:C.name}),l.jsxs("p",{className:`text-lg font-bold ${R}`,children:["Avg: ",C.average]}),l.jsxs("p",{className:`text-xs ${V}`,children:[C.count," exams"]})]},D))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-5 rounded-xl shadow-sm border ${T}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Fr,{size:18,className:"text-blue-500"}),l.jsx("h3",{className:`font-bold ${R}`,children:"Active Users (30 Days)"})]}),l.jsx(Cu,{width:"100%",height:180,children:l.jsxs(aye,{data:S.slice(-14),children:[l.jsx(th,{strokeDasharray:"3 3",stroke:n?"#334155":"#e2e8f0"}),l.jsx(Ru,{dataKey:"day",tick:{fontSize:10,fill:n?"#94a3b8":"#64748b"}}),l.jsx(Du,{allowDecimals:!1,tick:{fill:n?"#94a3b8":"#64748b"}}),l.jsx(ku,{}),l.jsx(y8,{type:"monotone",dataKey:"activeUsers",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.2})]})})]}),l.jsxs("div",{className:`p-5 rounded-xl shadow-sm border ${T}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(dh,{size:18,className:"text-emerald-500"}),l.jsx("h3",{className:`font-bold ${R}`,children:"Score Trends (Weekly)"})]}),l.jsx(Cu,{width:"100%",height:180,children:l.jsxs(Hge,{data:k,children:[l.jsx(th,{strokeDasharray:"3 3",stroke:n?"#334155":"#e2e8f0"}),l.jsx(Ru,{dataKey:"week",tick:{fontSize:10,fill:n?"#94a3b8":"#64748b"}}),l.jsx(Du,{tick:{fill:n?"#94a3b8":"#64748b"}}),l.jsx(ku,{}),l.jsx(c8,{type:"monotone",dataKey:"avgScore",stroke:"#10b981",strokeWidth:2,dot:{r:4}})]})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-5 rounded-xl shadow-sm border ${T}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(dh,{size:18,className:"text-amber-500"}),l.jsx("h3",{className:`font-bold ${R}`,children:"AO Performance"})]}),l.jsx("p",{className:`text-xs ${V} mb-3`,children:"Weakest first"}),l.jsx("div",{className:"space-y-2",children:z.length>0?z.slice(0,5).map((C,D)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:`font-medium ${R}`,children:C.ao}),l.jsxs("span",{className:V,children:[C.percentage,"%"]})]}),l.jsx("div",{className:`w-full rounded-full h-2 ${n?"bg-slate-700":"bg-slate-100"}`,children:l.jsx("div",{className:`h-2 rounded-full ${C.percentage<50?"bg-red-500":C.percentage<70?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${C.percentage}%`}})})]},D)):l.jsx("p",{className:V,children:"No AO data available."})})]}),l.jsxs("div",{className:`p-5 rounded-xl shadow-sm border ${T}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Ey,{size:18,className:"text-emerald-500"}),l.jsx("h3",{className:`font-bold ${R}`,children:"Weekly Activity"})]}),l.jsx(Cu,{width:"100%",height:180,children:l.jsxs(PE,{data:M,children:[l.jsx(th,{strokeDasharray:"3 3",stroke:n?"#334155":"#e2e8f0"}),l.jsx(Ru,{dataKey:"day",tick:{fontSize:11,fill:n?"#94a3b8":"#64748b"}}),l.jsx(Du,{allowDecimals:!1,tick:{fill:n?"#94a3b8":"#64748b"}}),l.jsx(ku,{}),l.jsx(g0,{dataKey:"exams",fill:"#10b981",radius:[4,4,0,0]})]})})]})]}),l.jsxs("div",{className:`rounded-xl shadow-sm border overflow-hidden ${T}`,children:[l.jsx("div",{className:`p-5 border-b ${n?"border-slate-700":"border-slate-100"}`,children:l.jsx("h3",{className:`font-bold ${R}`,children:"Recent Submissions"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:n?"bg-slate-700/50":"bg-slate-50",children:l.jsxs("tr",{className:`text-xs uppercase font-semibold ${V}`,children:[l.jsx("th",{className:"px-5 py-3",children:"User"}),l.jsx("th",{className:"px-5 py-3",children:"Paper"}),l.jsx("th",{className:"px-5 py-3",children:"Score"}),l.jsx("th",{className:"px-5 py-3",children:"Grade"}),l.jsx("th",{className:"px-5 py-3",children:"Date"})]})}),l.jsxs("tbody",{className:`divide-y ${n?"divide-slate-700":"divide-slate-100"}`,children:[v.recentActivity.map(C=>{var D,O,U;return l.jsxs("tr",{className:n?"hover:bg-slate-700/50":"hover:bg-slate-50",children:[l.jsxs("td",{className:"px-5 py-3",children:[l.jsx("div",{className:`text-sm font-medium ${R}`,children:w[C.userId]||"Unknown"}),l.jsxs("div",{className:`text-xs font-mono ${V}`,children:[(D=C.userId)==null?void 0:D.substring(0,8),"..."]})]}),l.jsx("td",{className:`px-5 py-3 text-sm ${R}`,children:(O=C.paperType)!=null&&O.includes("1")?"Paper 1":"Paper 2"}),l.jsx("td",{className:"px-5 py-3",children:l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[C.totalScore,"/",C.maxScore]})}),l.jsx("td",{className:"px-5 py-3",children:l.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 text-xs font-medium rounded-full",children:["Grade ",C.gradeEstimate||"N/A"]})}),l.jsx("td",{className:`px-5 py-3 text-sm ${V}`,children:(U=C.date)!=null&&U.seconds?new Date(C.date.seconds*1e3).toLocaleDateString():"Just now"})]},C.id)}),v.recentActivity.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:`px-5 py-8 text-center ${V}`,children:"No recent activity."})})]})]})})]})]})},wye=()=>{var I,C;const[t,e]=b.useState([]),[n,r]=b.useState([]),[a,s]=b.useState(""),[c,d]=b.useState(!0),[f,h]=b.useState(null),[p,g]=b.useState([]),[v,w]=b.useState(!1),[E,j]=b.useState(!1);ai.includes(((I=xe.currentUser)==null?void 0:I.email)||"");const S=Bt();b.useEffect(()=>{k()},[]),b.useEffect(()=>{if(!Array.isArray(t))return;const D=a.toLowerCase();r(t.filter(O=>O&&((O.email||"").toLowerCase().includes(D)||(O.displayName||"").toLowerCase().includes(D)||(O.id||"").includes(D))))},[a,t]);const k=async()=>{d(!0);const D=await Tc();e(D),d(!1)},z=async D=>{if(!window.confirm("Are you sure? This will delete the user and ALL their exam data permanently."))return;await d3(D)?(e(U=>U.filter($=>$.id!==D)),h(null),alert("User deleted successfully.")):alert("Failed to delete user.")},M=async D=>{h(D),w(!0);try{const O=await Jj(D.id);g(O)}catch(O){console.error("Failed to load user exams",O),g([])}w(!1)},T=async D=>{var O,U;if(confirm("Approve this user to active status?")){j(!0);try{await Tn(Me(ve,"users",D),{status:"approved",isApproved:!0,updatedAt:mr()}),await Sr(qe(ve,"activityLogs"),{action:"User Status Approved",actionType:"update",targetType:"user",targetId:D,details:"User status changed from pending to approved",userId:((O=xe.currentUser)==null?void 0:O.uid)||"unknown",userEmail:((U=xe.currentUser)==null?void 0:U.email)||"unknown",timestamp:mr()}),e($=>$.map(Z=>Z.id===D?{...Z,status:"approved",isApproved:!0}:Z)),h($=>$&&$.id===D?{...$,status:"approved",isApproved:!0}:$),alert("User approved successfully!")}catch($){console.error("Failed to approve user:",$),alert("Failed to approve user")}finally{j(!1)}}},R=async D=>{var O,U;if(confirm("Set this user to pending status?")){j(!0);try{await Tn(Me(ve,"users",D),{status:"pending",isApproved:!1,updatedAt:mr()}),await Sr(qe(ve,"activityLogs"),{action:"User Status Set to Pending",actionType:"update",targetType:"user",targetId:D,details:"User status changed from approved to pending",userId:((O=xe.currentUser)==null?void 0:O.uid)||"unknown",userEmail:((U=xe.currentUser)==null?void 0:U.email)||"unknown",timestamp:mr()}),e($=>$.map(Z=>Z.id===D?{...Z,status:"pending",isApproved:!1}:Z)),h($=>$&&$.id===D?{...$,status:"pending",isApproved:!1}:$),alert("User set to pending!")}catch($){console.error("Failed to set user to pending:",$),alert("Failed to update user status")}finally{j(!1)}}},V=li.includes(((C=xe.currentUser)==null?void 0:C.email)||""),N=()=>{const D=["Display Name","Email","User ID","Last Active","Status"],O=t.map(Y=>{var ie;return[Y.displayName||"Unnamed",Y.email||"",Y.id,(ie=Y.lastActive)!=null&&ie.seconds?new Date(Y.lastActive.seconds*1e3).toISOString():"Unknown",Y.disabled?"Disabled":"Active"]}),U=[D,...O].map(Y=>Y.join(",")).join(`
`),$=new Blob([U],{type:"text/csv"}),Z=URL.createObjectURL($),he=document.createElement("a");he.href=Z,he.download=`users_export_${new Date().toISOString().split("T")[0]}.csv`,he.click(),URL.revokeObjectURL(Z)};return c?l.jsx("div",{className:"p-8",children:"Loading directory..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"User Directory"}),l.jsx("p",{className:"text-slate-500",children:"Manage student accounts and access."})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-medium transition-colors",children:[l.jsx(aS,{size:18}),"Export CSV"]}),l.jsxs("div",{className:"relative",children:[l.jsx(aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),l.jsx("input",{type:"text",placeholder:"Search users...",value:a,onChange:D=>s(D.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-edexcel-teal w-64"})]})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase font-semibold",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4",children:"User"}),l.jsx("th",{className:"px-6 py-4",children:"Email"}),l.jsx("th",{className:"px-6 py-4",children:"Last Active"}),l.jsx("th",{className:"px-6 py-4",children:"Role"}),l.jsx("th",{className:"px-6 py-4",children:"Status"}),l.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n.map(D=>{var O;return l.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 overflow-hidden",children:D.photoURL?l.jsx("img",{src:D.photoURL,className:"w-full h-full object-cover",alt:""}):l.jsx(nl,{size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-900",children:D.displayName||"Unnamed User"}),l.jsxs("div",{className:"text-xs text-slate-400 font-mono",title:D.id,children:[D.id.slice(0,12),"..."]})]})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:D.email||l.jsx("span",{className:"text-slate-400 italic",children:"No Email"})}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:(O=D.lastActive)!=null&&O.seconds?new Date(D.lastActive.seconds*1e3).toLocaleDateString():"Unknown"}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[ai.includes(D.email||"")&&l.jsxs("span",{className:"px-2 py-1 inline-flex items-center text-xs font-bold rounded-full bg-gradient-to-r from-amber-100 to-orange-100 text-amber-900 border border-amber-400 shadow-sm",children:[l.jsx(rS,{size:12,className:"mr-1"}),"Super Admin"]}),D.isAdmin&&l.jsx("span",{className:"px-2 py-1 inline-flex items-center text-xs font-bold rounded-full bg-red-100 text-red-900 border border-red-300",children:"Admin"}),D.isTeacher&&l.jsxs("span",{className:"px-2 py-1 inline-flex items-center text-xs font-bold rounded-full bg-blue-100 text-blue-900 border border-blue-300",children:[l.jsx(tv,{size:12,className:"mr-1"}),"Teacher"]}),!ai.includes(D.email||"")&&!D.isAdmin&&!D.isTeacher&&l.jsx("span",{className:"px-2 py-1 inline-flex items-center text-xs font-semibold rounded-full bg-slate-100 text-slate-700 border border-slate-200",children:"Student"})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"flex items-center gap-2",children:D.status==="approved"?l.jsxs("button",{onClick:()=>R(D.id),disabled:E||!V,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border bg-emerald-100 text-emerald-800 border-emerald-300 transition-all ${V?"hover:bg-amber-100 hover:text-amber-800 hover:border-amber-300 cursor-pointer":"cursor-default"} disabled:opacity-50`,title:V?"Click to set Pending":"Active",children:[l.jsx(za,{size:12,className:"mr-1"}),"Active"]}):l.jsx("button",{onClick:()=>T(D.id),disabled:E||!V,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border bg-amber-100 text-amber-800 border-amber-300 transition-all ${V?"hover:bg-emerald-100 hover:text-emerald-800 hover:border-emerald-300 cursor-pointer":"cursor-default"} disabled:opacity-50`,title:V?"Click to make Active":"Only admins can approve",children:"Pending"})})}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[(f==null?void 0:f.id)===D.id&&D.isAdmin&&l.jsx("button",{onClick:()=>{S(`/teacher/view/${D.id}`)},className:"text-emerald-500 hover:text-emerald-700 p-2 hover:bg-emerald-50 rounded-md transition-colors",title:"View Classes",children:l.jsx(Xt,{size:18})}),l.jsx("button",{onClick:()=>M(D),className:"text-blue-500 hover:text-blue-700 p-2 hover:bg-blue-50 rounded-md transition-colors",title:"View Profile",children:l.jsx(vd,{size:18})}),l.jsx("button",{onClick:()=>z(D.id),className:"text-slate-400 hover:text-red-500 p-2 hover:bg-red-50 rounded-md transition-colors",title:"Delete User",children:l.jsx(Ia,{size:18})})]})})]},D.id)}),n.length===0&&l.jsx("tr",{children:l.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:['No users found matching "',a,'"']})})]})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[l.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"User Profile"}),l.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(Ar,{size:20})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden",children:f.photoURL?l.jsx("img",{src:f.photoURL,className:"w-full h-full object-cover",alt:""}):l.jsx(nl,{size:32,className:"text-slate-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:f.displayName||"Unnamed"}),l.jsx("p",{className:"text-slate-500",children:f.email}),l.jsx("p",{className:"text-xs text-slate-400 font-mono mt-1",children:f.id})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[l.jsx($r,{size:18}),"Mock Exam History (",p.length,")"]}),v?l.jsx("p",{className:"text-slate-400",children:"Loading exam history..."}):p.length>0?l.jsx("div",{className:"space-y-2",children:p.map((D,O)=>{var U,$;return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(tl,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"text-sm text-slate-600",children:(U=D.date)!=null&&U.seconds?new Date(D.date.seconds*1e3).toLocaleDateString():"Unknown"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:($=D.paperType)!=null&&$.includes("1")?"Paper 1":"Paper 2"}),l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[D.totalScore,"/",D.maxScore]}),l.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 text-xs font-medium rounded-full",children:["Grade ",D.gradeEstimate||"N/A"]})]})]},O)})}):l.jsx("p",{className:"text-slate-400 text-sm",children:"No exam history for this user."})]})]}),l.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-end gap-2 flex-wrap",children:[V&&(f.status==="approved"?l.jsx("button",{onClick:()=>R(f.id),disabled:E,className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:"Set Pending"}):l.jsx("button",{onClick:()=>T(f.id),disabled:E,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:"Make Active"})),l.jsx("button",{onClick:()=>M(f),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f.isAdmin?"bg-emerald-500 hover:bg-emerald-600 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-700"}`,children:f.isAdmin?"View Admin":"View Profile"}),f.isAdmin&&l.jsxs("button",{onClick:()=>S(`/teacher/view/${f.id}`),className:"px-4 py-2 ml-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors flex items-center gap-2",title:"View Classes",children:[l.jsx(Xt,{size:16}),"View Classes"]}),l.jsx("button",{onClick:()=>z(f.id),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:"Delete User"})]})]})})]})},_ye=()=>{var ie;const[t,e]=b.useState([]),[n,r]=b.useState([]),[a,s]=b.useState(!0),[c,d]=b.useState(null),[f,h]=b.useState(0),[p,g]=b.useState(null),[v,w]=b.useState(new Set),[E,j]=b.useState({}),[S,k]=b.useState("all"),[z,M]=b.useState("all"),[T,R]=b.useState("");b.useEffect(()=>{V()},[]),b.useEffect(()=>{let H=[...t];if(S!=="all"&&(H=H.filter(K=>{var le,q,ae;return((le=K.paperType)==null?void 0:le.includes(S))||((ae=(q=K.paperData)==null?void 0:q.type)==null?void 0:ae.includes(S))})),z!=="all"&&(H=H.filter(K=>{var le;return((le=K.gradeEstimate)==null?void 0:le.toString())===z})),T){const K=T.toLowerCase();H=H.filter(le=>{var q,ae,ge;return((q=le.userId)==null?void 0:q.toLowerCase().includes(K))||((ae=le.id)==null?void 0:ae.toLowerCase().includes(K))||((ge=E[le.userId])==null?void 0:ge.toLowerCase().includes(K))})}r(H)},[t,S,z,T,E]);const V=async()=>{s(!0);const[H,K]=await Promise.all([eS(),Tc()]),le={};K.forEach(q=>{le[q.uid||q.id]=q.displayName||q.email||"Unknown"}),j(le),e(H),s(!1)},[N,I]=b.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),C=(H,K,le)=>{I({isOpen:!0,title:H,message:K,onConfirm:le})},D=async H=>{C("Delete Exam Record","Are you sure you want to permanently delete this exam record? This action cannot be undone.",async()=>{await _y(H)&&(e(le=>le.filter(q=>q.id!==H)),w(le=>(le.delete(H),new Set(le)))),I(le=>({...le,isOpen:!1}))})},O=async()=>{v.size!==0&&C("Delete Multiple Records",`Are you sure you want to delete ${v.size} selected exam record${v.size>1?"s":""}? This action cannot be undone.`,async()=>{const H=Array.from(v).map(K=>_y(K));await Promise.all(H),e(K=>K.filter(le=>!v.has(le.id))),w(new Set),I(K=>({...K,isOpen:!1}))})},U=()=>{v.size===n.length?w(new Set):w(new Set(n.map(H=>H.id)))},$=H=>{w(K=>{const le=new Set(K);return le.has(H)?le.delete(H):le.add(H),le})},Z=H=>{d(H.id),h(H.totalScore||0)},he=async H=>{await u3(H,{totalScore:f})?(e(le=>le.map(q=>q.id===H?{...q,totalScore:f}:q)),d(null)):alert("Failed to update exam.")},Y=()=>{const H=["Exam ID","User ID","Paper Type","Score","Max Score","Grade","Date"],K=n.map(ye=>{var Te,Oe;return[ye.id,ye.userId,ye.paperType||((Te=ye.paperData)==null?void 0:Te.type)||"Unknown",ye.totalScore,ye.maxScore,ye.gradeEstimate||"N/A",(Oe=ye.date)!=null&&Oe.seconds?new Date(ye.date.seconds*1e3).toISOString():"Unknown"]}),le=[H,...K].map(ye=>ye.join(",")).join(`
`),q=new Blob([le],{type:"text/csv"}),ae=URL.createObjectURL(q),ge=document.createElement("a");ge.href=ae,ge.download=`exams_export_${new Date().toISOString().split("T")[0]}.csv`,ge.click(),URL.revokeObjectURL(ae)};return a?l.jsx("div",{className:"p-8",children:"Loading records..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Exam Records"}),l.jsx("p",{className:"text-slate-500",children:"Global view of all assessment submissions."})]}),l.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[v.size>0&&l.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:[l.jsx(Ia,{size:18}),"Delete (",v.size,")"]}),l.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-medium transition-colors",children:[l.jsx(aS,{size:18}),"Export CSV"]})]})]}),l.jsxs("div",{className:"flex items-center gap-4 flex-wrap bg-white p-4 rounded-xl border border-slate-200",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(y3,{size:18,className:"text-slate-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Filters:"})]}),l.jsxs("select",{value:S,onChange:H=>k(H.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"all",children:"All Papers"}),l.jsx("option",{value:"1",children:"Paper 1"}),l.jsx("option",{value:"2",children:"Paper 2"})]}),l.jsxs("select",{value:z,onChange:H=>M(H.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"all",children:"All Grades"}),[9,8,7,6,5,4,3,2,1].map(H=>l.jsxs("option",{value:H.toString(),children:["Grade ",H]},H))]}),l.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[l.jsx(aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"text",placeholder:"Search by name or user ID...",value:T,onChange:H=>R(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("span",{className:"text-sm text-slate-400",children:["Showing ",n.length," of ",t.length]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase font-semibold",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4",children:l.jsx("input",{type:"checkbox",checked:v.size===n.length&&n.length>0,onChange:U,className:"w-4 h-4 rounded border-slate-300"})}),l.jsx("th",{className:"px-4 py-4",children:"User"}),l.jsx("th",{className:"px-4 py-4",children:"Paper"}),l.jsx("th",{className:"px-4 py-4",children:"Score"}),l.jsx("th",{className:"px-4 py-4",children:"Grade"}),l.jsx("th",{className:"px-4 py-4",children:"Date"}),l.jsx("th",{className:"px-4 py-4 text-right",children:"Actions"})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n.map(H=>{var K,le,q,ae;return l.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${v.has(H.id)?"bg-blue-50":""}`,children:[l.jsx("td",{className:"px-4 py-4",children:l.jsx("input",{type:"checkbox",checked:v.has(H.id),onChange:()=>$(H.id),className:"w-4 h-4 rounded border-slate-300"})}),l.jsxs("td",{className:"px-4 py-4",children:[l.jsx("div",{className:"text-sm font-medium text-slate-900",children:E[H.userId]||"Unknown"}),l.jsxs("div",{className:"text-xs text-slate-400 font-mono",children:[(K=H.userId)==null?void 0:K.substring(0,10),"..."]})]}),l.jsx("td",{className:"px-4 py-4",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium ${(H.paperType||((le=H.paperData)==null?void 0:le.type)||"").includes("1")?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:[l.jsx($r,{size:14}),(H.paperType||((q=H.paperData)==null?void 0:q.type)||"Unknown").includes("1")?"Paper 1":"Paper 2"]})}),l.jsx("td",{className:"px-4 py-4",children:c===H.id?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:f,onChange:ge=>h(Number(ge.target.value)),className:"w-16 border rounded px-2 py-1 text-sm"}),l.jsxs("span",{className:"text-slate-400 text-sm",children:["/ ",H.maxScore]})]}):l.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H.totalScore/H.maxScore>.7?"bg-emerald-100 text-emerald-800":H.totalScore/H.maxScore>.4?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[H.totalScore," / ",H.maxScore]})}),l.jsx("td",{className:"px-4 py-4",children:l.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:["Grade ",H.gradeEstimate||"N/A"]})}),l.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:(ae=H.date)!=null&&ae.seconds?new Date(H.date.seconds*1e3).toLocaleDateString():"Unknown"}),l.jsx("td",{className:"px-4 py-4 text-right",children:l.jsx("div",{className:"flex items-center justify-end gap-1",children:c===H.id?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>he(H.id),className:"p-2 text-emerald-600 hover:bg-emerald-50 rounded",children:l.jsx(ev,{size:18})}),l.jsx("button",{onClick:()=>d(null),className:"p-2 text-slate-400 hover:bg-slate-100 rounded",children:l.jsx(Ar,{size:18})})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>g(H),className:"p-2 text-slate-500 hover:bg-slate-100 rounded",title:"View Details",children:l.jsx(vd,{size:18})}),l.jsx("button",{onClick:()=>Z(H),className:"p-2 text-blue-500 hover:bg-blue-50 rounded",title:"Edit Score",children:l.jsx(gc,{size:18})}),l.jsx("button",{onClick:()=>D(H.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",title:"Delete",children:l.jsx(Ia,{size:18})})]})})})]},H.id)}),n.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-slate-400",children:"No exam records found."})})]})]})}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden",children:[l.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Exam Details"}),l.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(Ar,{size:20})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("p",{className:"text-sm text-slate-500",children:"User ID"}),l.jsx("p",{className:"font-mono text-sm",children:p.userId})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Paper Type"}),l.jsx("p",{className:"font-medium",children:p.paperType||((ie=p.paperData)==null?void 0:ie.type)||"Unknown"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Score"}),l.jsxs("p",{className:"font-bold text-lg",children:[p.totalScore," / ",p.maxScore]})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Grade Estimate"}),l.jsxs("p",{className:"font-bold text-lg",children:["Grade ",p.gradeEstimate||"N/A"]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Overall Feedback"}),l.jsx("p",{className:"text-slate-600 text-sm bg-slate-50 p-4 rounded-lg",children:p.overallFeedback||"No feedback available."})]}),p.questionResults&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Question Results"}),l.jsx("div",{className:"space-y-2",children:p.questionResults.map((H,K)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[l.jsxs("span",{className:"font-medium text-slate-700",children:["Q",H.questionId]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[H.score,"/",H.maxScore]}),l.jsxs("span",{className:"text-sm text-slate-500",children:["Level ",H.level||"N/A"]})]})]},K))})]})]})]})}),N.isOpen&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in duration-200",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:l.jsx(Ia,{className:"text-red-600",size:24})}),l.jsx("h3",{className:"text-xl font-bold text-slate-900",children:N.title})]}),l.jsx("p",{className:"text-slate-600 mb-6",children:N.message}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>I(H=>({...H,isOpen:!1})),className:"flex-1 px-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-colors",children:"Cancel"}),l.jsx("button",{onClick:N.onConfirm,className:"flex-1 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-xl transition-all shadow-lg shadow-red-500/25",children:"Delete"})]})]})})})]})},Eye=()=>{var j;const[t,e]=b.useState([]),[n,r]=b.useState([]),[a,s]=b.useState(!0),[c,d]=b.useState(""),[f,h]=b.useState("all"),[p,g]=b.useState(null);b.useEffect(()=>{v()},[]),b.useEffect(()=>{let S=[...t];if(f!=="all"&&(S=S.filter(k=>k.method===f)),c){const k=c.toLowerCase();S=S.filter(z=>{var M,T;return((M=z.userId)==null?void 0:M.toLowerCase().includes(k))||((T=z.text)==null?void 0:T.toLowerCase().includes(k))})}r(S)},[t,f,c]);const v=async()=>{s(!0);try{const S=gn(qe(ve,"labSessions"),sm("date","desc"),W0(100)),z=(await It(S)).docs.map(M=>({id:M.id,...M.data()}));e(z)}catch(S){console.error("Failed to load lab sessions",S),e([])}s(!1)},w=async S=>{if(window.confirm("Delete this lab session?"))try{await Pi(Me(ve,"labSessions",S)),e(k=>k.filter(z=>z.id!==S))}catch(k){console.error("Failed to delete session",k),alert("Failed to delete session.")}},E=S=>{switch(S){case"analyzer":return l.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:"Analyzer"});case"gym":return l.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Writing Gym"});default:return l.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 text-xs font-medium rounded-full",children:S})}};return a?l.jsx("div",{className:"p-8",children:"Loading lab sessions..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center flex-wrap gap-4",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Language Lab Sessions"}),l.jsx("p",{className:"text-slate-500",children:"View and manage student practice sessions."})]})}),l.jsxs("div",{className:"flex items-center gap-4 flex-wrap bg-white p-4 rounded-xl border border-slate-200",children:[l.jsxs("select",{value:f,onChange:S=>h(S.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"all",children:"All Methods"}),l.jsx("option",{value:"analyzer",children:"Analyzer"}),l.jsx("option",{value:"gym",children:"Writing Gym"})]}),l.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[l.jsx(aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"text",placeholder:"Search by User ID or text...",value:c,onChange:S=>d(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("span",{className:"text-sm text-slate-400",children:["Showing ",n.length," of ",t.length]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase font-semibold",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4",children:"User ID"}),l.jsx("th",{className:"px-6 py-4",children:"Method"}),l.jsx("th",{className:"px-6 py-4",children:"Text Preview"}),l.jsx("th",{className:"px-6 py-4",children:"Date"}),l.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n.map(S=>{var k,z,M;return l.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[l.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-slate-600",children:[(k=S.userId)==null?void 0:k.substring(0,12),"..."]}),l.jsx("td",{className:"px-6 py-4",children:E(S.method)}),l.jsxs("td",{className:"px-6 py-4 text-sm text-slate-600 max-w-[300px] truncate",children:[(z=S.text)==null?void 0:z.substring(0,100),"..."]}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:(M=S.date)!=null&&M.seconds?new Date(S.date.seconds*1e3).toLocaleDateString():"Unknown"}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>g(S),className:"p-2 text-slate-500 hover:bg-slate-100 rounded",title:"View Details",children:l.jsx(rX,{size:18})}),l.jsx("button",{onClick:()=>w(S.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",title:"Delete",children:l.jsx(Ia,{size:18})})]})})]},S.id)}),n.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:"No lab sessions found."})})]})]})}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden",children:[l.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Xt,{size:24,className:"text-indigo-500"}),l.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Lab Session Details"})]}),l.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-slate-100 rounded-lg",children:l.jsx(Ar,{size:20})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(nl,{size:16,className:"text-slate-400"}),l.jsx("p",{className:"text-sm text-slate-500",children:"User ID"})]}),l.jsx("p",{className:"font-mono text-sm",children:p.userId})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(tl,{size:16,className:"text-slate-400"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Date"})]}),l.jsx("p",{className:"font-medium",children:(j=p.date)!=null&&j.seconds?new Date(p.date.seconds*1e3).toLocaleString():"Unknown"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Method"}),E(p.method)]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Submitted Text"}),l.jsx("div",{className:"bg-slate-50 p-4 rounded-lg text-sm text-slate-700 whitespace-pre-wrap max-h-[200px] overflow-y-auto",children:p.text||"No text submitted."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"AI Feedback"}),l.jsx("div",{className:"bg-blue-50 p-4 rounded-lg text-sm text-slate-700 whitespace-pre-wrap max-h-[200px] overflow-y-auto",children:typeof p.feedback=="object"?JSON.stringify(p.feedback,null,2):p.feedback||"No feedback available."})]})]})]})})]})},jye=()=>{var I;const t=Bt(),e=ai.includes(((I=xe.currentUser)==null?void 0:I.email)||""),[n,r]=b.useState({adminEmails:[...li],featureFlags:{paper1Enabled:!0,paper2Enabled:!0,languageLabEnabled:!0},apiKeyConfigured:!0}),[a,s]=b.useState(!0),[c,d]=b.useState(!1),[f,h]=b.useState(!1),[p,g]=b.useState(""),[v,w]=b.useState([]),[E,j]=b.useState(null),[S,k]=b.useState("checking");b.useEffect(()=>{M(),z()},[]);const z=async()=>{k("checking");try{const C=await fetch("/api/debug-config");C.ok?(await C.json()).hasApiKey?k("active"):k("none"):k("invalid")}catch(C){console.error("Failed to check API key status:",C),k("invalid")}},M=async()=>{s(!0);try{const C=Me(ve,"systemSettings","config"),D=await Yn(C);if(D.exists()){const U=D.data();r($=>{var Z,he,Y;return{adminEmails:U.adminEmails||[...li],featureFlags:{paper1Enabled:((Z=U.featureFlags)==null?void 0:Z.paper1Enabled)??!0,paper2Enabled:((he=U.featureFlags)==null?void 0:he.paper2Enabled)??!0,languageLabEnabled:((Y=U.featureFlags)==null?void 0:Y.languageLabEnabled)??!0},apiKeyConfigured:U.apiKeyConfigured??!0}})}const O=await Tc();w(O)}catch(C){console.error("Failed to load settings",C)}s(!1)},T=async()=>{h(!0);try{const C=Me(ve,"systemSettings","config");await ri(C,n,{merge:!0}),j({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>j(null),3e3)}catch(C){console.error("Failed to save settings",C),j({type:"error",text:"Failed to save settings. Check permissions."})}h(!1)},R=async()=>{var C,D,O;if(!p){j({type:"error",text:"Please select a user."});return}h(!0);try{const U=v.find($=>$.id===p);await Tn(Me(ve,"users",p),{isAdmin:!0,adminPromotedAt:mr(),adminPromotedBy:(C=xe.currentUser)==null?void 0:C.uid}),await Sr(qe(ve,"activityLogs"),{action:"Admin Role Assigned",actionType:"update",targetType:"user",targetId:p,details:`Promoted user ${(U==null?void 0:U.displayName)||(U==null?void 0:U.email)} to admin`,userId:((D=xe.currentUser)==null?void 0:D.uid)||"unknown",userEmail:((O=xe.currentUser)==null?void 0:O.email)||"unknown",timestamp:mr()}),w($=>$.map(Z=>Z.id===p?{...Z,isAdmin:!0}:Z)),g(""),j({type:"success",text:` ${(U==null?void 0:U.displayName)||"User"} promoted to Admin successfully!`})}catch(U){console.error("Error adding admin:",U),j({type:"error",text:"Failed to add admin."})}h(!1)},V=async C=>{var O,U,$,Z;if(C===((O=xe.currentUser)==null?void 0:O.uid)){j({type:"error",text:"You cannot remove yourself."});return}const D=v.find(he=>he.id===C);if(D&&ai.includes(D.email)){j({type:"error",text:"Cannot remove a Super Admin."});return}if(window.confirm(`Are you sure you want to remove admin access for ${(D==null?void 0:D.displayName)||"this user"}?`)){h(!0);try{await Tn(Me(ve,"users",C),{isAdmin:!1,adminRemovedAt:mr(),adminRemovedBy:(U=xe.currentUser)==null?void 0:U.uid}),await Sr(qe(ve,"activityLogs"),{action:"Admin Role Removed",actionType:"update",targetType:"user",targetId:C,details:`Removed admin access from ${(D==null?void 0:D.displayName)||(D==null?void 0:D.email)}`,userId:(($=xe.currentUser)==null?void 0:$.uid)||"unknown",userEmail:((Z=xe.currentUser)==null?void 0:Z.email)||"unknown",timestamp:mr()}),w(he=>he.map(Y=>Y.id===C?{...Y,isAdmin:!1}:Y)),j({type:"success",text:` Admin role removed from ${(D==null?void 0:D.displayName)||"user"}.`})}catch(he){console.error("Error removing admin:",he),j({type:"error",text:"Failed to remove admin."})}h(!1)}},N=C=>{r(D=>({...D,featureFlags:{...D.featureFlags,[C]:!D.featureFlags[C]}}))};return a?l.jsx("div",{className:"p-8",children:"Loading settings..."}):e?l.jsxs("div",{className:"space-y-8 max-w-4xl",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"System Settings"}),l.jsx("p",{className:"text-slate-500",children:"Manage platform configuration and access control."})]}),E&&l.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl ${E.type==="success"?"bg-emerald-50 text-emerald-800":"bg-red-50 text-red-800"}`,children:[E.type==="success"?l.jsx(za,{size:20}):l.jsx(pc,{size:20}),l.jsx("span",{children:E.text})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:l.jsx(Fr,{size:20,className:"text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-slate-900",children:"Admin Management"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Manage users with Admin access."})]})]}),l.jsx("div",{className:"space-y-3 mb-6",children:v.filter(C=>C.isAdmin).length===0?l.jsx("p",{className:"text-sm text-slate-500 italic p-2",children:"No admins found in database."}):l.jsx("div",{className:"space-y-2",children:v.filter(C=>C.isAdmin).map(C=>{const D=ai.includes(C.email||"");return l.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${D?"bg-amber-50 border-amber-200":"bg-slate-50 border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm ${D?"bg-gradient-to-br from-amber-500 to-orange-600":"bg-gradient-to-br from-indigo-500 to-purple-600"}`,children:D?l.jsx(rS,{size:16}):l.jsx(es,{size:16})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-sm font-bold text-slate-900",children:C.displayName||"No Name"}),D&&l.jsx("span",{className:"px-2 py-1 bg-amber-200 text-amber-900 text-xs font-bold rounded-full",children:"Super Admin"})]}),l.jsx("p",{className:"text-xs text-slate-500",children:C.email})]})]}),!D&&l.jsx("button",{onClick:()=>V(C.id),disabled:f,className:"p-2 text-red-500 hover:bg-red-100 rounded-lg disabled:opacity-50 transition-colors",title:"Remove Admin Access",children:l.jsx(Ar,{size:18})})]},C.id)})})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{value:p,onChange:C=>g(C.target.value),className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white",disabled:f,children:[l.jsx("option",{value:"",children:"Select a user to make admin..."}),v.filter(C=>!C.isAdmin&&C.isApproved).sort((C,D)=>(C.email||"").localeCompare(D.email||"")).map(C=>{const D=C.displayName?`${C.displayName} (${C.email||"No Email"})`:C.email||`Unnamed User (ID: ${C.id.slice(0,8)}...)`;return l.jsx("option",{value:C.id,children:D},C.id)})]}),l.jsxs("button",{onClick:R,disabled:!p||f,className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg font-medium flex items-center gap-2 disabled:bg-indigo-300",children:[l.jsx(iS,{size:18}),"Add Role"]})]}),l.jsxs("p",{className:"mt-4 text-xs text-blue-600 bg-blue-50 p-3 rounded-lg",children:[l.jsx("strong",{children:"Note:"})," Admins are now managed via the ",l.jsx("code",{children:"isAdmin"})," flag on their user profile. Detailed permissions are enforced by database rules."]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:l.jsx(oS,{size:20,className:"text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-slate-900",children:"Feature Flags"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Enable or disable platform features."})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:"Paper 1 (Fiction)"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Allow students to take Paper 1 exams"})]}),l.jsx("button",{onClick:()=>N("paper1Enabled"),className:`p-2 rounded-lg transition-colors ${n.featureFlags.paper1Enabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-400"}`,children:n.featureFlags.paper1Enabled?l.jsx(bw,{size:28}):l.jsx(xw,{size:28})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:"Paper 2 (Non-Fiction)"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Allow students to take Paper 2 exams"})]}),l.jsx("button",{onClick:()=>N("paper2Enabled"),className:`p-2 rounded-lg transition-colors ${n.featureFlags.paper2Enabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-400"}`,children:n.featureFlags.paper2Enabled?l.jsx(bw,{size:28}):l.jsx(xw,{size:28})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:"Language Lab"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Enable the Language Lab practice area"})]}),l.jsx("button",{onClick:()=>N("languageLabEnabled"),className:`p-2 rounded-lg transition-colors ${n.featureFlags.languageLabEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-400"}`,children:n.featureFlags.languageLabEnabled?l.jsx(bw,{size:28}):l.jsx(xw,{size:28})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:l.jsx(BQ,{size:20,className:"text-amber-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-slate-900",children:"API Configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Manage API keys and external services."})]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:"Gemini API Key"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Used for AI-powered exam generation and marking"})]}),l.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${S==="checking"?"bg-slate-100 text-slate-600":S==="active"?"bg-emerald-100 text-emerald-800":S==="none"?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:[S==="checking"&&" Checking...",S==="active"&&" Active",S==="none"&&" Not Configured",S==="invalid"&&" Server Error"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("input",{type:c?"text":"password",id:"apiKeyInput",defaultValue:localStorage.getItem("gemini_api_key")||"",placeholder:"Enter your Gemini API key...",className:"w-full px-4 py-2 pr-10 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 font-mono"}),l.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:c?l.jsx(g3,{size:18}):l.jsx(vd,{size:18})})]}),l.jsxs("button",{onClick:async()=>{var O,U,$;const C=document.getElementById("apiKeyInput"),D=(O=C==null?void 0:C.value)==null?void 0:O.trim();if(!D){j({type:"error",text:"Please enter a valid API key."});return}j({type:"success",text:" Saving API key..."});try{const Z=Me(ve,"systemSettings","config");await ri(Z,{geminiApiKey:D},{merge:!0}),localStorage.setItem("gemini_api_key",D),await Sr(qe(ve,"activityLogs"),{action:"API Key Updated",actionType:"update",targetType:"system",targetId:"gemini-api-key",details:"Gemini API key updated by super admin",userId:((U=xe.currentUser)==null?void 0:U.uid)||"unknown",userEmail:(($=xe.currentUser)==null?void 0:$.email)||"unknown",timestamp:mr()}),j({type:"success",text:" API key saved successfully! Restart the server to apply changes."}),setTimeout(()=>{j(null),z()},3e3)}catch(Z){console.error("Failed to save API key:",Z),j({type:"error",text:"Failed to save API key. Check Firestore permissions."})}},className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium flex items-center gap-2",children:[l.jsx(Ay,{size:18}),"Save Key"]})]}),l.jsxs("p",{className:"text-xs text-slate-400",children:["Your API key is stored in Firestore (for server access) and browser local storage.",l.jsx("button",{onClick:async()=>{try{const C=Me(ve,"systemSettings","config");await ri(C,{geminiApiKey:""},{merge:!0}),localStorage.removeItem("gemini_api_key"),document.getElementById("apiKeyInput").value="",j({type:"success",text:"API key removed from server and local storage."}),setTimeout(()=>j(null),3e3)}catch(C){console.error("Failed to clear API key:",C),j({type:"error",text:"Failed to clear API key from server."})}},className:"ml-2 text-red-500 hover:underline",children:"Clear saved key"})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:T,disabled:f,className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold flex items-center gap-2 disabled:opacity-50",children:[l.jsx(Ay,{size:20}),f?"Saving...":"Save Settings"]})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center",children:[l.jsx("div",{className:"p-4 bg-red-100 rounded-full mb-4",children:l.jsx(bX,{size:48,className:"text-red-500"})}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Access Denied"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"You don't have permission to access System Settings."}),l.jsx("p",{className:"text-sm text-slate-400",children:"Only Super Administrators can modify these settings."}),l.jsx("button",{onClick:()=>t("/admin"),className:"mt-6 px-6 py-2 bg-slate-800 hover:bg-slate-900 text-white rounded-lg font-medium",children:"Return to Dashboard"})]})},Sye=()=>{const t=Bt(),[e,n]=b.useState(""),[r,a]=b.useState(""),[s,c]=b.useState(!1),[d,f]=b.useState(""),h=async p=>{p.preventDefault(),f(""),c(!0);try{const g=await Zj(e,r);g&&li.includes(g.email||"")?t("/admin"):(f("Unauthorized access. This area is reserved for administrators."),await yd())}catch(g){f("Authentication failed. Please check your credentials."),console.error(g)}finally{c(!1)}};return l.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#0f172a] relative overflow-hidden font-sans",children:[l.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-indigo-600/10 rounded-full blur-[120px]"}),l.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-600/10 rounded-full blur-[120px]"}),l.jsxs("div",{className:"w-full max-w-md p-8 relative z-10",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-blue-600 text-white shadow-lg shadow-indigo-500/20 mb-6",children:l.jsx(es,{size:32})}),l.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight mb-2",children:"Admin Control"}),l.jsx("p",{className:"text-slate-400",children:"Secure access to the Go GCSE platform"})]}),l.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-white/10 p-8 rounded-3xl shadow-2xl",children:[d&&l.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-3 text-red-400 text-sm",children:[l.jsx(pc,{size:18}),l.jsx("span",{children:d})]}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-slate-300 ml-1",children:"Administrator Email"}),l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-blue-400 transition-colors",children:l.jsx(sX,{size:18})}),l.jsx("input",{type:"email",value:e,onChange:p=>n(p.target.value),placeholder:"admin@example.com",required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-slate-900/50 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all font-medium"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-slate-300 ml-1",children:"Secure Password"}),l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-blue-400 transition-colors",children:l.jsx(uh,{size:18})}),l.jsx("input",{type:"password",value:r,onChange:p=>a(p.target.value),placeholder:"",required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-slate-900/50 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all font-medium"})]})]}),l.jsx("button",{type:"submit",disabled:s,className:`w-full py-4 px-6 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white rounded-2xl font-bold shadow-lg shadow-blue-600/20 transition-all transform active:scale-[0.98] flex items-center justify-center gap-2 ${s?"opacity-70 cursor-not-allowed":""}`,children:s?l.jsx(ka,{size:20,className:"animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"Authorize Access"}),l.jsx(Z0,{size:20})]})})]}),l.jsx("div",{className:"mt-8 pt-8 border-t border-white/5 text-center",children:l.jsx("button",{onClick:()=>t("/login"),className:"text-sm text-slate-500 hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:"Return to Student Login"})})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsx("p",{className:"text-xs text-slate-600 uppercase tracking-widest font-bold",children:"Go GCSE Admin v1.0.2"})})]})]})},Aye=()=>{var w;const[t,e]=b.useState([]),[n,r]=b.useState([]),[a,s]=b.useState(""),[c,d]=b.useState(!0),[f,h]=b.useState(!1),p=ai.includes(((w=xe.currentUser)==null?void 0:w.email)||"");b.useEffect(()=>{g()},[]),b.useEffect(()=>{if(!Array.isArray(t))return;const E=a.toLowerCase();r(t.filter(j=>j&&((j.email||"").toLowerCase().includes(E)||(j.displayName||"").toLowerCase().includes(E))))},[a,t]);const g=async()=>{d(!0);const E=await Tc();E.sort((j,S)=>{const k=(j.isAdmin?2:0)+(j.isTeacher?1:0);return(S.isAdmin?2:0)+(S.isTeacher?1:0)-k}),e(E),d(!1)},v=async(E,j,S)=>{var T,R;if(!p){alert("Only super admins can change user roles.");return}const k=t.find(V=>V.id===E);if(j==="admin"&&ai.includes((k==null?void 0:k.email)||"")){alert("Cannot modify Super Admin roles.");return}const z=j==="admin"?"Admin":"Teacher";if(confirm(`Are you sure you want to ${S?"remove":"assign"} the ${z} role for ${(k==null?void 0:k.displayName)||"this user"}?`)){h(!0);try{const V=!S,N={};j==="admin"?N.isAdmin=V:N.isTeacher=V,N.updatedAt=mr(),await Tn(Me(ve,"users",E),N),await Sr(qe(ve,"activityLogs"),{action:`${z} Role ${V?"Assigned":"Removed"}`,actionType:"update",targetType:"user",targetId:E,details:`User ${z.toLowerCase()} role ${V?"enabled":"disabled"} for ${k==null?void 0:k.email}`,userId:((T=xe.currentUser)==null?void 0:T.uid)||"unknown",userEmail:((R=xe.currentUser)==null?void 0:R.email)||"unknown",timestamp:mr()});const I=t.map(C=>C.id===E?j==="admin"?{...C,isAdmin:V}:{...C,isTeacher:V}:C);e(I)}catch(V){console.error("Failed to toggle role:",V),alert("Failed to update user role")}finally{h(!1)}}};return c?l.jsx("div",{className:"p-8",children:"Loading staff directory..."}):p?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Admin & Staff Directory"}),l.jsx("p",{className:"text-slate-500",children:"Manage elevated privileges for admins and teachers."})]}),l.jsxs("div",{className:"relative",children:[l.jsx(aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),l.jsx("input",{type:"text",placeholder:"Search users...",value:a,onChange:E=>s(E.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-edexcel-teal w-64"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase font-semibold",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4",children:"User"}),l.jsx("th",{className:"px-6 py-4",children:"Email"}),l.jsx("th",{className:"px-6 py-4 text-center",children:"Admin Role"}),l.jsx("th",{className:"px-6 py-4 text-center",children:"Teacher Role"})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n.map(E=>{const j=ai.includes(E.email||"");return l.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 overflow-hidden font-bold",children:E.photoURL?l.jsx("img",{src:E.photoURL,className:"w-full h-full object-cover",alt:""}):(E.displayName||E.email||"?")[0].toUpperCase()}),l.jsx("div",{children:l.jsxs("div",{className:"font-medium text-slate-900 flex items-center gap-2",children:[E.displayName||"Unnamed User",j&&l.jsx(rS,{size:14,className:"text-amber-500"})]})})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:E.email}),l.jsx("td",{className:"px-6 py-4 text-center",children:l.jsx("button",{onClick:()=>v(E.id,"admin",E.isAdmin),disabled:f||j,className:`inline-flex items-center justify-center p-2 rounded-lg transition-all ${E.isAdmin?"bg-red-100 text-red-600 hover:bg-red-200":"bg-slate-100 text-slate-300 hover:bg-slate-200"} ${j?"opacity-50 cursor-not-allowed":""}`,title:j?"Super Admins are always Admins":"Toggle Admin Role",children:l.jsx(es,{size:20,className:E.isAdmin?"fill-current":""})})}),l.jsx("td",{className:"px-6 py-4 text-center",children:l.jsx("button",{onClick:()=>v(E.id,"teacher",E.isTeacher),disabled:f,className:`inline-flex items-center justify-center p-2 rounded-lg transition-all ${E.isTeacher?"bg-blue-100 text-blue-600 hover:bg-blue-200":"bg-slate-100 text-slate-300 hover:bg-slate-200"}`,title:"Toggle Teacher Role",children:l.jsx(tv,{size:20,className:E.isTeacher?"fill-current":""})})})]},E.id)}),n.length===0&&l.jsx("tr",{children:l.jsxs("td",{colSpan:4,className:"px-6 py-12 text-center text-slate-400",children:['No users found matching "',a,'"']})})]})]})})]}):l.jsx("div",{className:"p-8 text-center text-red-500",children:"Access Denied: Super Admin privileges required."})},Nye=()=>{const t=qh(),e=(t==null?void 0:t.darkMode)||!1,[n,r]=b.useState([]),[a,s]=b.useState(!0),[c,d]=b.useState(!1),[f,h]=b.useState(null),[p,g]=b.useState({title:"",message:"",type:"info",active:!0,startDate:"",endDate:""}),v=e?"bg-slate-800 border-slate-700":"bg-white border-slate-200",w=e?"text-white":"text-slate-900",E=e?"text-slate-400":"text-slate-500",j=e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-200 text-slate-900";b.useEffect(()=>{S()},[]);const S=async()=>{s(!0);try{const N=gn(qe(ve,"announcements"),sm("createdAt","desc")),C=(await It(N)).docs.map(D=>({id:D.id,...D.data()}));r(C)}catch(N){console.error("Failed to load announcements",N)}s(!1)},k=async()=>{var N;if(!p.title||!p.message){alert("Please fill in title and message");return}try{const I={title:p.title,message:p.message,type:p.type,active:p.active,startDate:p.startDate?lt.fromDate(new Date(p.startDate)):null,endDate:p.endDate?lt.fromDate(new Date(p.endDate)):null,createdAt:lt.now(),createdBy:((N=xe.currentUser)==null?void 0:N.email)||"unknown"};f?await Tn(Me(ve,"announcements",f),I):await Sr(qe(ve,"announcements"),I),d(!1),h(null),R(),S()}catch(I){console.error("Failed to save announcement",I),alert("Failed to save announcement")}},z=N=>{g({title:N.title,message:N.message,type:N.type,active:N.active,startDate:N.startDate?new Date(N.startDate.seconds*1e3).toISOString().split("T")[0]:"",endDate:N.endDate?new Date(N.endDate.seconds*1e3).toISOString().split("T")[0]:""}),h(N.id),d(!0)},M=async N=>{if(window.confirm("Delete this announcement?"))try{await Pi(Me(ve,"announcements",N)),r(I=>I.filter(C=>C.id!==N))}catch(I){console.error("Failed to delete",I)}},T=async(N,I)=>{try{await Tn(Me(ve,"announcements",N),{active:!I}),r(C=>C.map(D=>D.id===N?{...D,active:!I}:D))}catch(C){console.error("Failed to toggle",C)}},R=()=>{g({title:"",message:"",type:"info",active:!0,startDate:"",endDate:""})},V=N=>{const I={info:"bg-blue-100 text-blue-800",warning:"bg-amber-100 text-amber-800",success:"bg-emerald-100 text-emerald-800",error:"bg-red-100 text-red-800"};return I[N]||I.info};return a?l.jsx("div",{className:`p-8 text-center ${E}`,children:"Loading announcements..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-2xl font-bold ${w}`,children:"Announcements"}),l.jsx("p",{className:E,children:"Manage platform-wide announcements for students."})]}),l.jsxs("button",{onClick:()=>{R(),h(null),d(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:[l.jsx(iS,{size:18}),"New Announcement"]})]}),l.jsx("div",{className:"space-y-4",children:n.length===0?l.jsxs("div",{className:`text-center py-12 ${v} rounded-xl border`,children:[l.jsx(h3,{size:48,className:`mx-auto mb-4 ${E}`}),l.jsx("p",{className:E,children:"No announcements yet."})]}):n.map(N=>l.jsx("div",{className:`p-5 rounded-xl border ${v} ${N.active?"":"opacity-60"}`,children:l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h3",{className:`font-bold ${w}`,children:N.title}),l.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${V(N.type)}`,children:N.type}),N.active?l.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-emerald-100 text-emerald-800",children:"Active"}):l.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-slate-100 text-slate-600",children:"Inactive"})]}),l.jsx("p",{className:`text-sm ${E} mb-3`,children:N.message}),l.jsxs("div",{className:`flex items-center gap-4 text-xs ${E}`,children:[l.jsxs("span",{children:["Created by ",N.createdBy]}),N.startDate&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(tl,{size:12}),"Starts: ",new Date(N.startDate.seconds*1e3).toLocaleDateString()]}),N.endDate&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(tl,{size:12}),"Ends: ",new Date(N.endDate.seconds*1e3).toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>T(N.id,N.active),className:`p-2 rounded-lg transition-colors ${e?"hover:bg-slate-700":"hover:bg-slate-100"}`,title:N.active?"Deactivate":"Activate",children:N.active?l.jsx(g3,{size:18,className:E}):l.jsx(vd,{size:18,className:E})}),l.jsx("button",{onClick:()=>z(N),className:`p-2 rounded-lg transition-colors ${e?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:l.jsx(gc,{size:18,className:"text-blue-500"})}),l.jsx("button",{onClick:()=>M(N.id),className:`p-2 rounded-lg transition-colors ${e?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:l.jsx(Ia,{size:18,className:"text-red-500"})})]})]})},N.id))}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:`rounded-2xl shadow-2xl max-w-lg w-full ${e?"bg-slate-800":"bg-white"}`,children:[l.jsxs("div",{className:`p-5 border-b flex justify-between items-center ${e?"border-slate-700":"border-slate-100"}`,children:[l.jsx("h2",{className:`text-lg font-bold ${w}`,children:f?"Edit Announcement":"New Announcement"}),l.jsx("button",{onClick:()=>d(!1),className:`p-2 rounded-lg ${e?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:l.jsx(Ar,{size:20,className:E})})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${E}`,children:"Title"}),l.jsx("input",{type:"text",value:p.title,onChange:N=>g(I=>({...I,title:N.target.value})),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${j}`,placeholder:"Announcement title..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${E}`,children:"Message"}),l.jsx("textarea",{value:p.message,onChange:N=>g(I=>({...I,message:N.target.value})),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${j}`,placeholder:"Announcement message...",rows:3})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${E}`,children:"Type"}),l.jsxs("select",{value:p.type,onChange:N=>g(I=>({...I,type:N.target.value})),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${j}`,children:[l.jsx("option",{value:"info",children:"Info"}),l.jsx("option",{value:"success",children:"Success"}),l.jsx("option",{value:"warning",children:"Warning"}),l.jsx("option",{value:"error",children:"Error"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",checked:p.active,onChange:N=>g(I=>({...I,active:N.target.checked})),className:"w-4 h-4"}),l.jsx("label",{className:`text-sm ${w}`,children:"Active immediately"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${E}`,children:"Start Date (optional)"}),l.jsx("input",{type:"date",value:p.startDate,onChange:N=>g(I=>({...I,startDate:N.target.value})),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${j}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${E}`,children:"End Date (optional)"}),l.jsx("input",{type:"date",value:p.endDate,onChange:N=>g(I=>({...I,endDate:N.target.value})),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${j}`})]})]})]}),l.jsxs("div",{className:`p-5 border-t flex justify-end gap-3 ${e?"border-slate-700":"border-slate-100"}`,children:[l.jsx("button",{onClick:()=>d(!1),className:`px-4 py-2 rounded-lg font-medium ${e?"bg-slate-700 hover:bg-slate-600 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-700"}`,children:"Cancel"}),l.jsxs("button",{onClick:k,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium flex items-center gap-2",children:[l.jsx(ev,{size:18}),f?"Update":"Create"]})]})]})})]})},Tye=()=>{const t=qh(),e=(t==null?void 0:t.darkMode)||!1,[n,r]=b.useState([]),[a,s]=b.useState(!0),[c,d]=b.useState("all"),[f,h]=b.useState(""),[p,g]=b.useState("7"),v=e?"bg-slate-800 border-slate-700":"bg-white border-slate-200",w=e?"text-white":"text-slate-900",E=e?"text-slate-400":"text-slate-500";b.useEffect(()=>{j()},[p]);const j=async()=>{s(!0);try{const M=parseInt(p),T=new Date;T.setDate(T.getDate()-M);const R=gn(qe(ve,"activityLogs"),Dn("timestamp",">=",lt.fromDate(T)),sm("timestamp","desc"),W0(200)),N=(await It(R)).docs.map(I=>({id:I.id,...I.data()}));r(N)}catch(M){console.error("Failed to load activity logs",M),r([])}s(!1)},S=n.filter(M=>{var T,R,V;if(c!=="all"&&M.actionType!==c)return!1;if(f){const N=f.toLowerCase();return((T=M.userEmail)==null?void 0:T.toLowerCase().includes(N))||((R=M.action)==null?void 0:R.toLowerCase().includes(N))||((V=M.details)==null?void 0:V.toLowerCase().includes(N))}return!0}),k=M=>{switch(M){case"login":return l.jsx(Sy,{size:16,className:"text-green-500"});case"logout":return l.jsx(xd,{size:16,className:"text-slate-400"});case"create":return l.jsx(gc,{size:16,className:"text-blue-500"});case"update":return l.jsx(oS,{size:16,className:"text-amber-500"});case"delete":return l.jsx(Ia,{size:16,className:"text-red-500"});case"setting":return l.jsx(es,{size:16,className:"text-purple-500"});default:return l.jsx(Ey,{size:16,className:E})}},z=M=>{const T={login:"bg-green-100 text-green-800",logout:"bg-slate-100 text-slate-600",create:"bg-blue-100 text-blue-800",update:"bg-amber-100 text-amber-800",delete:"bg-red-100 text-red-800",setting:"bg-purple-100 text-purple-800",other:"bg-slate-100 text-slate-600"};return T[M]||T.other};return a?l.jsx("div",{className:`p-8 text-center ${E}`,children:"Loading activity logs..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-2xl font-bold ${w}`,children:"Activity Log"}),l.jsx("p",{className:E,children:"Track all admin actions and system events."})]}),l.jsxs("div",{className:`flex items-center gap-4 flex-wrap p-4 rounded-xl border ${v}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(y3,{size:18,className:E}),l.jsx("span",{className:`text-sm font-medium ${E}`,children:"Filters:"})]}),l.jsxs("select",{value:c,onChange:M=>d(M.target.value),className:`px-3 py-2 rounded-lg text-sm border focus:outline-none focus:ring-2 focus:ring-indigo-500 ${e?"bg-slate-700 border-slate-600 text-white":"bg-white border-slate-200"}`,children:[l.jsx("option",{value:"all",children:"All Actions"}),l.jsx("option",{value:"login",children:"Logins"}),l.jsx("option",{value:"logout",children:"Logouts"}),l.jsx("option",{value:"create",children:"Creates"}),l.jsx("option",{value:"update",children:"Updates"}),l.jsx("option",{value:"delete",children:"Deletes"}),l.jsx("option",{value:"setting",children:"Settings"})]}),l.jsxs("select",{value:p,onChange:M=>g(M.target.value),className:`px-3 py-2 rounded-lg text-sm border focus:outline-none focus:ring-2 focus:ring-indigo-500 ${e?"bg-slate-700 border-slate-600 text-white":"bg-white border-slate-200"}`,children:[l.jsx("option",{value:"1",children:"Last 24 hours"}),l.jsx("option",{value:"7",children:"Last 7 days"}),l.jsx("option",{value:"30",children:"Last 30 days"}),l.jsx("option",{value:"90",children:"Last 90 days"})]}),l.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[l.jsx(aa,{className:"absolute left-3 top-1/2 -translate-y-1/2",size:18}),l.jsx("input",{type:"text",placeholder:"Search by email or action...",value:f,onChange:M=>h(M.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg text-sm border focus:outline-none focus:ring-2 focus:ring-indigo-500 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-200"}`})]}),l.jsxs("span",{className:`text-sm ${E}`,children:[S.length," events"]})]}),l.jsx("div",{className:`rounded-xl border overflow-hidden ${v}`,children:S.length===0?l.jsxs("div",{className:"p-12 text-center",children:[l.jsx(Ey,{size:48,className:`mx-auto mb-4 ${E}`}),l.jsx("p",{className:E,children:"No activity logs found."}),l.jsx("p",{className:`text-sm ${E} mt-2`,children:"Activity will be recorded as admins perform actions."})]}):l.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:S.map(M=>{var T,R;return l.jsx("div",{className:`p-4 ${e?"hover:bg-slate-700/50":"hover:bg-slate-50"} transition-colors`,children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-slate-700":"bg-slate-100"}`,children:k(M.actionType)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:`font-medium ${w}`,children:M.action}),l.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${z(M.actionType)}`,children:M.actionType})]}),l.jsxs("div",{className:`flex items-center gap-3 text-sm ${E}`,children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(nl,{size:14}),M.userEmail]}),M.targetType&&l.jsxs("span",{children:["Target: ",M.targetType," ",M.targetId?`(${M.targetId.substring(0,8)}...)`:""]})]}),M.details&&l.jsx("p",{className:`text-sm mt-1 ${E}`,children:M.details})]}),l.jsxs("div",{className:`text-right text-sm ${E}`,children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(tl,{size:14}),(T=M.timestamp)!=null&&T.seconds?new Date(M.timestamp.seconds*1e3).toLocaleDateString():"Unknown"]}),l.jsx("div",{className:"text-xs mt-1",children:(R=M.timestamp)!=null&&R.seconds?new Date(M.timestamp.seconds*1e3).toLocaleTimeString():""}),M.ipAddress&&l.jsx("div",{className:"text-xs mt-1 font-mono",children:M.ipAddress})]})]})},M.id)})})})]})},Cye=()=>{const t=qh(),e=(t==null?void 0:t.darkMode)||!1,[n,r]=b.useState([]),[a,s]=b.useState(!0),[c,d]=b.useState(""),[f,h]=b.useState(null),[p,g]=b.useState(null),v=e?"bg-slate-800 border-slate-700":"bg-white border-slate-200",w=e?"text-white":"text-slate-900",E=e?"text-slate-400":"text-slate-500";b.useEffect(()=>{j()},[]);const j=async()=>{s(!0);try{const R=["exam-images","pdfs","uploads"],V=[];for(const N of R)try{const I=wy(jh,N),C=await kY(I);for(const D of C.items)try{const O=await Yj(D),U=await CY(D);V.push({name:D.name,fullPath:D.fullPath,url:O,size:U.size,contentType:U.contentType,timeCreated:U.timeCreated})}catch{}}catch{}r(V.sort((N,I)=>new Date(I.timeCreated||0).getTime()-new Date(N.timeCreated||0).getTime()))}catch(R){console.error("Failed to load assets",R)}s(!1)},S=async R=>{if(window.confirm(`Delete "${R.name}"? This cannot be undone.`)){g(R.fullPath);try{const V=wy(jh,R.fullPath);await IY(V),r(N=>N.filter(I=>I.fullPath!==R.fullPath)),(f==null?void 0:f.fullPath)===R.fullPath&&h(null)}catch(V){console.error("Failed to delete asset",V),alert("Failed to delete asset")}g(null)}},k=R=>R?R<1024?`${R} B`:R<1024*1024?`${(R/1024).toFixed(1)} KB`:`${(R/(1024*1024)).toFixed(1)} MB`:"Unknown",z=n.filter(R=>R.name.toLowerCase().includes(c.toLowerCase())),M=R=>R==null?void 0:R.startsWith("image/"),T=R=>R==="application/pdf";return a?l.jsx("div",{className:`p-8 text-center ${E}`,children:"Loading assets..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-2xl font-bold ${w}`,children:"Asset Management"}),l.jsx("p",{className:E,children:"View and manage uploaded files and generated images."})]}),l.jsxs("button",{onClick:j,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${e?"bg-slate-700 hover:bg-slate-600 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-700"}`,children:[l.jsx(sS,{size:18}),"Refresh"]})]}),l.jsxs("div",{className:`flex items-center gap-4 flex-wrap p-4 rounded-xl border ${v}`,children:[l.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[l.jsx(aa,{className:"absolute left-3 top-1/2 -translate-y-1/2",size:18}),l.jsx("input",{type:"text",placeholder:"Search by filename...",value:c,onChange:R=>d(R.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg text-sm border focus:outline-none focus:ring-2 focus:ring-indigo-500 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-200"}`})]}),l.jsxs("span",{className:`text-sm ${E}`,children:[z.length," files  ",k(z.reduce((R,V)=>R+(V.size||0),0))," total"]})]}),z.length===0?l.jsxs("div",{className:`text-center py-12 ${v} rounded-xl border`,children:[l.jsx(vg,{size:48,className:`mx-auto mb-4 ${E}`}),l.jsx("p",{className:E,children:"No assets found."})]}):l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:z.map(R=>l.jsxs("div",{className:`rounded-xl border overflow-hidden cursor-pointer transition-transform hover:scale-[1.02] ${v} ${(f==null?void 0:f.fullPath)===R.fullPath?"ring-2 ring-indigo-500":""}`,onClick:()=>h(R),children:[l.jsx("div",{className:"aspect-square bg-slate-100 dark:bg-slate-700 flex items-center justify-center overflow-hidden",children:M(R.contentType)?l.jsx("img",{src:R.url,alt:R.name,className:"w-full h-full object-cover"}):T(R.contentType)?l.jsxs("div",{className:"text-red-500",children:[l.jsx(vg,{size:48}),l.jsx("p",{className:"text-xs mt-2",children:"PDF"})]}):l.jsx(vg,{size:48,className:E})}),l.jsxs("div",{className:"p-3",children:[l.jsx("p",{className:`text-sm font-medium truncate ${w}`,children:R.name}),l.jsx("p",{className:`text-xs ${E}`,children:k(R.size)})]})]},R.fullPath))}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>h(null),children:l.jsxs("div",{className:`rounded-2xl shadow-2xl max-w-2xl w-full ${e?"bg-slate-800":"bg-white"}`,onClick:R=>R.stopPropagation(),children:[l.jsx("div",{className:"aspect-video bg-slate-100 dark:bg-slate-700 flex items-center justify-center overflow-hidden rounded-t-2xl",children:M(f.contentType)?l.jsx("img",{src:f.url,alt:f.name,className:"max-w-full max-h-full object-contain"}):l.jsx(vg,{size:64,className:E})}),l.jsxs("div",{className:"p-5",children:[l.jsx("h3",{className:`text-lg font-bold ${w} mb-3`,children:f.name}),l.jsxs("div",{className:`grid grid-cols-2 gap-4 text-sm ${E} mb-4`,children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Size:"})," ",k(f.size)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Type:"})," ",f.contentType||"Unknown"]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Path:"})," ",f.fullPath]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Created:"})," ",f.timeCreated?new Date(f.timeCreated).toLocaleDateString():"Unknown"]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("a",{href:f.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium",children:[l.jsx(EQ,{size:18}),"Open"]}),l.jsxs("a",{href:f.url,download:f.name,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium ${e?"bg-slate-700 hover:bg-slate-600 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-700"}`,children:[l.jsx(aS,{size:18}),"Download"]}),l.jsxs("button",{onClick:()=>S(f),disabled:p===f.fullPath,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium disabled:opacity-50",children:[l.jsx(Ia,{size:18}),p===f.fullPath?"Deleting...":"Delete"]})]})]})]})})]})},kye=()=>{const t=qh(),e=(t==null?void 0:t.darkMode)||!1,[n,r]=b.useState([]),[a,s]=b.useState([]),[c,d]=b.useState(!0),[f,h]=b.useState("logins"),[p,g]=b.useState(""),v=e?"bg-slate-800 border-slate-700":"bg-white border-slate-200",w=e?"text-white":"text-slate-900",E=e?"text-slate-400":"text-slate-500";b.useEffect(()=>{j()},[]);const j=async()=>{d(!0);try{try{const R=gn(qe(ve,"loginEvents"),sm("timestamp","desc"),W0(100)),V=await It(R);r(V.docs.map(N=>({id:N.id,...N.data()})))}catch{r([])}const T=await Tc();s(T.map(R=>{var V;return{id:R.id,email:R.email,displayName:R.displayName,lastLogin:(V=R.metadata)!=null&&V.lastSignInTime?lt.fromDate(new Date(R.metadata.lastSignInTime)):null,failedAttempts:R.failedAttempts||0,disabled:R.disabled||!1}}))}catch(T){console.error("Failed to load security data",T)}d(!1)},S=async(T,R)=>{if(window.confirm(`${R?"Enable":"Disable"} this user?`))try{const V=Me(ve,"users",T);await Tn(V,{disabled:!R}),s(N=>N.map(I=>I.id===T?{...I,disabled:!R}:I))}catch(V){console.error("Failed to toggle user status",V),alert("Failed to update user status")}},k=n.filter(T=>{var R;return f==="failed"&&T.success?!1:p?(R=T.email)==null?void 0:R.toLowerCase().includes(p.toLowerCase()):!0}),z=a.filter(T=>{var R,V;return p?((R=T.email)==null?void 0:R.toLowerCase().includes(p.toLowerCase()))||((V=T.displayName)==null?void 0:V.toLowerCase().includes(p.toLowerCase())):!0}),M={totalLogins:n.filter(T=>T.success).length,failedAttempts:n.filter(T=>!T.success).length,activeUsers:a.filter(T=>!T.disabled).length,disabledUsers:a.filter(T=>T.disabled).length};return c?l.jsx("div",{className:`p-8 text-center ${E}`,children:"Loading security data..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-2xl font-bold ${w}`,children:"Security Center"}),l.jsx("p",{className:E,children:"Monitor login activity and manage user access."})]}),l.jsxs("button",{onClick:j,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${e?"bg-slate-700 hover:bg-slate-600 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-700"}`,children:[l.jsx(sS,{size:18}),"Refresh"]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsx("div",{className:`p-4 rounded-xl border ${v}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:l.jsx(Sy,{size:20,className:"text-green-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-2xl font-bold ${w}`,children:M.totalLogins}),l.jsx("p",{className:`text-sm ${E}`,children:"Successful Logins"})]})]})}),l.jsx("div",{className:`p-4 rounded-xl border ${v}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:l.jsx(Bi,{size:20,className:"text-red-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-2xl font-bold ${w}`,children:M.failedAttempts}),l.jsx("p",{className:`text-sm ${E}`,children:"Failed Attempts"})]})]})}),l.jsx("div",{className:`p-4 rounded-xl border ${v}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(nl,{size:20,className:"text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-2xl font-bold ${w}`,children:M.activeUsers}),l.jsx("p",{className:`text-sm ${E}`,children:"Active Users"})]})]})}),l.jsx("div",{className:`p-4 rounded-xl border ${v}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:l.jsx(tQ,{size:20,className:"text-slate-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-2xl font-bold ${w}`,children:M.disabledUsers}),l.jsx("p",{className:`text-sm ${E}`,children:"Disabled Users"})]})]})})]}),l.jsx("div",{className:`flex gap-1 p-1 rounded-xl ${e?"bg-slate-700":"bg-slate-100"}`,children:[{id:"logins",label:"Login History",icon:Sy},{id:"failed",label:"Failed Attempts",icon:Bi},{id:"sessions",label:"User Sessions",icon:nl}].map(T=>l.jsxs("button",{onClick:()=>h(T.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${f===T.id?e?"bg-slate-800 text-white":"bg-white text-slate-900 shadow-sm":E}`,children:[l.jsx(T.icon,{size:18}),T.label]},T.id))}),l.jsxs("div",{className:"relative",children:[l.jsx(aa,{className:"absolute left-3 top-1/2 -translate-y-1/2",size:18}),l.jsx("input",{type:"text",placeholder:"Search by email...",value:p,onChange:T=>g(T.target.value),className:`w-full pl-10 pr-4 py-3 rounded-xl text-sm border focus:outline-none focus:ring-2 focus:ring-indigo-500 ${e?"bg-slate-800 border-slate-700 text-white placeholder-slate-400":"bg-white border-slate-200"}`})]}),f==="sessions"?l.jsx("div",{className:`rounded-xl border overflow-hidden ${v}`,children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:e?"bg-slate-700/50":"bg-slate-50",children:l.jsxs("tr",{className:`text-xs uppercase font-semibold ${E}`,children:[l.jsx("th",{className:"px-5 py-3",children:"User"}),l.jsx("th",{className:"px-5 py-3",children:"Last Login"}),l.jsx("th",{className:"px-5 py-3",children:"Status"}),l.jsx("th",{className:"px-5 py-3 text-right",children:"Actions"})]})}),l.jsxs("tbody",{className:`divide-y ${e?"divide-slate-700":"divide-slate-100"}`,children:[z.map(T=>l.jsxs("tr",{className:e?"hover:bg-slate-700/50":"hover:bg-slate-50",children:[l.jsxs("td",{className:"px-5 py-4",children:[l.jsx("div",{className:`font-medium ${w}`,children:T.displayName||"Anonymous"}),l.jsx("div",{className:`text-sm ${E}`,children:T.email})]}),l.jsx("td",{className:`px-5 py-4 text-sm ${E}`,children:T.lastLogin?new Date(T.lastLogin.seconds*1e3).toLocaleString():"Never"}),l.jsx("td",{className:"px-5 py-4",children:T.disabled?l.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Disabled"}):l.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Active"})}),l.jsx("td",{className:"px-5 py-4 text-right",children:l.jsx("button",{onClick:()=>S(T.id,T.disabled),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${T.disabled?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:T.disabled?"Enable":"Disable"})})]},T.id)),z.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:`px-5 py-12 text-center ${E}`,children:"No users found."})})]})]})}):l.jsx("div",{className:`rounded-xl border overflow-hidden ${v}`,children:k.length===0?l.jsxs("div",{className:"p-12 text-center",children:[l.jsx(es,{size:48,className:`mx-auto mb-4 ${E}`}),l.jsx("p",{className:E,children:"No login events recorded yet."}),l.jsx("p",{className:`text-sm ${E} mt-2`,children:"Events will appear as users log in."})]}):l.jsx("div",{className:`divide-y ${e?"divide-slate-700":"divide-slate-100"}`,children:k.map(T=>{var R;return l.jsx("div",{className:`p-4 ${e?"hover:bg-slate-700/50":"hover:bg-slate-50"}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`p-2 rounded-lg ${T.success?"bg-green-100":"bg-red-100"}`,children:T.success?l.jsx(za,{size:20,className:"text-green-600"}):l.jsx(Bi,{size:20,className:"text-red-600"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:`font-medium ${w}`,children:T.email}),l.jsx("div",{className:`text-sm ${E}`,children:T.success?"Successful login":T.reason||"Failed attempt"})]}),l.jsxs("div",{className:`text-right text-sm ${E}`,children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Os,{size:14}),(R=T.timestamp)!=null&&R.seconds?new Date(T.timestamp.seconds*1e3).toLocaleString():"Unknown"]}),T.ipAddress&&l.jsxs("div",{className:"flex items-center gap-1 justify-end mt-1 text-xs font-mono",children:[l.jsx(JQ,{size:12}),T.ipAddress]})]})]})},T.id)})})})]})},Iye=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(!0),[a,s]=b.useState(!1),[c,d]=b.useState(""),[f,h]=b.useState(!1),[p,g]=b.useState({}),[v,w]=b.useState("English Language"),[E,j]=b.useState(""),[S,k]=b.useState("Edexcel"),[z,M]=b.useState(""),[T,R]=b.useState(!1),V=rj(),N=Bt();b.useEffect(()=>{I()},[V.currentUser]);const I=async()=>{if(V.currentUser){r(!0);try{const O=await Yn(Me(ve,"users",V.currentUser.uid));if(console.log("TeacherDashboard: Current User UID:",V.currentUser.uid),O.exists()){const Y=O.data();console.log("TeacherDashboard: User Doc Data:",Y),Y.isAdmin&&h(!0)}else console.warn("TeacherDashboard: No user doc found in Firestore for UID:",V.currentUser.uid);const U=gn(qe(ve,"classes"),Dn("teacherId","==",V.currentUser.uid)),Z=(await It(U)).docs.map(Y=>({id:Y.id,...Y.data()}));e(Z.sort((Y,ie)=>ie.createdAt-Y.createdAt));const he={};for(const Y of Z){const ie=await It(qe(ve,"classes",Y.id,"members"));he[Y.id]=ie.size}g(he)}catch(O){console.error("Error loading classes:",O)}r(!1)}},C=async()=>{if(!(!c.trim()||!V.currentUser)){R(!0);try{const O=Math.random().toString(36).substring(2,8).toUpperCase(),U={name:c.trim(),teacherId:V.currentUser.uid,inviteCode:O,studentCount:0,createdAt:Date.now(),config:{subject:v,yearGroup:E,examBoard:S,level:"Mixed",teacherPrompt:z}};console.log("TeacherDashboard: Attempting to create class with data:",{...U,createdAt:"serverTimestamp"}),await Sr(qe(ve,"classes"),{...U,createdAt:mr()}),console.log("TeacherDashboard: Class created successfully"),s(!1),d(""),j(""),M(""),I()}catch(O){console.error("TeacherDashboard: Error creating class:",O),alert(`Failed to create class: ${O.code||"unknown"} - ${O.message}`)}R(!1)}},D=async(O,U)=>{if(window.confirm(`Are you sure you want to delete "${U}"? This action cannot be undone. All associated data (assignments, student records) will be deleted.`))try{await Pi(Me(ve,"classes",O)),e($=>$.filter(Z=>Z.id!==O))}catch($){console.error("TeacherDashboard: Error deleting class:",$),alert(`Failed to delete class: ${$.message}`)}};return l.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"My Classes"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"Create and manage your classrooms."})]}),l.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-semibold transition-colors shadow-lg shadow-indigo-200",children:[l.jsx(iS,{size:20}),"Create Class"]})]}),n?l.jsx("div",{className:"flex justify-center p-12",children:l.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):t.length===0?l.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-slate-300",children:[l.jsx("div",{className:"w-16 h-16 bg-indigo-50 text-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Fr,{size:32})}),l.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No classes yet"}),l.jsx("p",{className:"text-slate-500 max-w-md mx-auto mb-6",children:"Create your first class to start assigning AI-generated practice exams to your students."}),l.jsx("button",{onClick:()=>s(!0),className:"text-indigo-600 font-semibold hover:text-indigo-700 hover:underline",children:"Create a Class now"})]}):l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(O=>l.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow overflow-hidden group",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx("h3",{className:"text-xl font-bold text-slate-900 group-hover:text-indigo-600 transition-colors cursor-pointer",onClick:()=>N(`/teacher/class/${O.id}`),children:O.name})}),l.jsx("button",{onClick:U=>{U.stopPropagation(),D(O.id,O.name)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors ml-2 flex-shrink-0",title:"Delete Class",children:l.jsx(Ia,{size:18})}),l.jsxs("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-700 text-xs font-bold rounded-full uppercase tracking-wide",children:[p[O.id]||0," Students"]})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-6 p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Connect Code:"}),l.jsx("code",{className:"text-lg font-mono font-bold text-slate-900 tracking-widest",children:O.inviteCode})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>N(`/teacher/class/${O.id}`),className:"flex-1 py-2.5 bg-slate-900 text-white rounded-lg font-medium text-sm hover:bg-slate-800 transition-colors flex items-center justify-center gap-2",children:[l.jsx(Xt,{size:16}),"Manage"]}),l.jsx("button",{onClick:()=>N(`/teacher/class/${O.id}/assignments`),className:"flex-1 py-2.5 bg-white border border-slate-200 text-slate-700 rounded-lg font-medium text-sm hover:bg-slate-50 transition-colors",children:"Assignments"})]})]})},O.id))}),a&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-8 shadow-2xl my-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Create New Class"}),l.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-6",children:l.jsx("p",{className:"text-amber-800 text-xs font-medium",children:" Legal Reminder: By creating a class, you confirm you are an authorised educator. This platform handles specific student data under your instruction."})}),l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Class Name *"}),l.jsx("input",{type:"text",value:c,onChange:O=>d(O.target.value),placeholder:"e.g. Year 10 English - Set 2",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Subject"}),l.jsxs("select",{value:v,onChange:O=>w(O.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[l.jsx("option",{value:"English Language",children:"English Language"}),l.jsx("option",{value:"English Literature",children:"English Literature"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Year Group"}),l.jsx("input",{type:"text",value:E,onChange:O=>j(O.target.value),placeholder:"e.g. Year 11",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Exam Board Focus"}),l.jsxs("select",{value:S,onChange:O=>k(O.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[l.jsx("option",{value:"Edexcel",children:"Edexcel (Default)"}),l.jsx("option",{value:"AQA",children:"AQA"}),l.jsx("option",{value:"Eduqas",children:"Eduqas"}),l.jsx("option",{value:"OCR",children:"OCR"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["AI Teacher Prompt ",l.jsx("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),l.jsx("p",{className:"text-xs text-slate-500 mb-2",children:'Provide context for the AI when generating content for this class (e.g. "Focus on weaker students", "Include more creative writing prompts").'}),l.jsx("textarea",{value:z,onChange:O=>M(O.target.value),placeholder:"e.g. This is a high-ability Year 10 group. Focus on complex inference questions.",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 h-24 resize-none"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>s(!1),className:"flex-1 py-3 text-slate-600 font-medium hover:bg-slate-50 rounded-xl transition-colors",children:"Cancel"}),l.jsx("button",{onClick:C,disabled:T||!c.trim(),className:`flex-1 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors ${T?"opacity-70 cursor-wait":""}`,children:T?"Creating...":"Create Class"})]})]})})]})},Oye=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(!0),[a,s]=b.useState(0),[c,d]=b.useState(0),[f,h]=b.useState(0),p=rj(),g=Bt();b.useEffect(()=>{v()},[p.currentUser]);const v=async()=>{if(p.currentUser){r(!0);try{console.log("Loading analytics for teacher:",p.currentUser.uid);const w=gn(qe(ve,"classes"),Dn("teacherId","==",p.currentUser.uid)),j=(await It(w)).docs.map(T=>({id:T.id,...T.data()}));console.log("Found classes:",j.length),h(j.length);const S=j.map(async T=>{console.log("Loading analytics for class:",T.name);const V=(await It(qe(ve,"classes",T.id,"members"))).size;console.log(`  - Students: ${V}`);const N=gn(qe(ve,"assignments"),Dn("classId","==",T.id)),I=await It(N),C=I.size;console.log(`  - Assignments: ${C}`);const D=I.docs.map(ie=>({id:ie.id,...ie.data()}));let O=0,U=0,$=0;for(const ie of D){const H=gn(qe(ve,"assignment_results"),Dn("assignmentId","==",ie.id)),K=await It(H);O+=K.size,K.docs.forEach(le=>{const q=le.data();U+=q.score||0,$+=q.maxScore||0})}const Z=V*C,he=Z>0?O/Z*100:0,Y=$>0?U/$*100:0;return console.log(`  - Completion Rate: ${he}%, Avg Score: ${Y}%`),{classroom:T,studentCount:V,assignmentCount:C,completionRate:he,averageScore:Y}}),k=await Promise.all(S);console.log("Analytics loaded:",k.length,"classes"),e(k);const z=k.reduce((T,R)=>T+R.studentCount,0),M=k.reduce((T,R)=>T+R.assignmentCount,0);s(z),d(M)}catch(w){console.error("Error loading analytics:",w),alert("Failed to load analytics. Check console for details.")}r(!1)}};return n?l.jsx("div",{className:"flex justify-center items-center p-12",children:l.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):l.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Overview"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"Analytics and insights across all your classes."})]}),l.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl",children:l.jsx(Xt,{className:"text-indigo-600",size:24})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Total Classes"}),l.jsx("p",{className:"text-3xl font-bold text-slate-900",children:f})]})]})}),l.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:l.jsx(Fr,{className:"text-blue-600",size:24})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Total Students"}),l.jsx("p",{className:"text-3xl font-bold text-slate-900",children:a})]})]})}),l.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:l.jsx($r,{className:"text-purple-600",size:24})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Assignments"}),l.jsx("p",{className:"text-3xl font-bold text-slate-900",children:c})]})]})}),l.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-emerald-100 rounded-xl",children:l.jsx(dh,{className:"text-emerald-600",size:24})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Avg Completion"}),l.jsxs("p",{className:"text-3xl font-bold text-slate-900",children:[t.length>0?Math.round(t.reduce((w,E)=>w+E.completionRate,0)/t.length):0,"%"]})]})]})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Class Performance"}),t.length===0?l.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-dashed border-slate-300",children:[l.jsx(J0,{size:48,className:"mx-auto text-slate-300 mb-4"}),l.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"No Classes Yet"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Create your first class to see analytics and insights."}),l.jsx("button",{onClick:()=>g("/teacher/classes"),className:"text-indigo-600 font-semibold hover:text-indigo-700 hover:underline",children:"Go to My Classes"})]}):l.jsx("div",{className:"grid gap-6",children:t.map(w=>{var E,j;return l.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-slate-900 hover:text-indigo-600 transition-colors cursor-pointer",onClick:()=>g(`/teacher/class/${w.classroom.id}`),children:w.classroom.name}),l.jsxs("div",{className:"flex items-center gap-3 mt-2 text-sm text-slate-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(tl,{size:14}),((E=w.classroom.config)==null?void 0:E.yearGroup)||"N/A"]}),l.jsx("span",{children:""}),l.jsx("span",{children:((j=w.classroom.config)==null?void 0:j.subject)||"English Language"}),l.jsx("span",{children:""}),l.jsx("span",{className:"font-mono bg-slate-100 px-2 py-0.5 rounded",children:w.classroom.inviteCode})]})]}),l.jsx("button",{onClick:()=>g(`/teacher/class/${w.classroom.id}`),className:"px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg font-medium hover:bg-indigo-100 transition-colors",children:"Manage Class"})]}),l.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Fr,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Students"})]}),l.jsx("p",{className:"text-2xl font-bold text-slate-900",children:w.studentCount})]}),l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx($r,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Assignments"})]}),l.jsx("p",{className:"text-2xl font-bold text-slate-900",children:w.assignmentCount})]}),l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Os,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Completion"})]}),l.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[Math.round(w.completionRate),"%"]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Xu,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Avg Score"})]}),l.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[w.averageScore>0?Math.round(w.averageScore):"N/A",w.averageScore>0&&"%"]})]})]})]})},w.classroom.id)})})]})]})},GD=()=>{var Te,Oe,Pe,vt,ue,Ve,He;const{classId:t}=Hh(),e=Bt(),[n,r]=b.useState(null),[a,s]=b.useState([]),[c,d]=b.useState([]),[f,h]=b.useState(!0),[p,g]=b.useState("assignments"),[v,w]=b.useState(null),[E,j]=b.useState(!1),[S,k]=b.useState(""),[z,M]=b.useState(!1),[T,R]=b.useState(void 0),[V,N]=b.useState(null),[I,C]=b.useState([]),[D,O]=b.useState(!1),[U,$]=b.useState(!1),[Z,he]=b.useState(null);b.useEffect(()=>{t&&Y()},[t]);const Y=async()=>{if(t){h(!0);try{const W=Me(ve,"classes",t),Ce=await Yn(W);if(Ce.exists())r({id:Ce.id,...Ce.data()});else{e("/teacher");return}const Ie=qe(ve,"classes",t,"members"),et=(await It(Ie)).docs.map(Qt=>({uid:Qt.id,...Qt.data()}));s(et);const en=qe(ve,"assignments"),St=gn(en,Dn("classId","==",t)),xt=(await It(St)).docs.map(Qt=>({id:Qt.id,...Qt.data()}));d(xt.sort((Qt,Id)=>Id.createdAt-Qt.createdAt))}catch(W){console.error("Error loading class data:",W)}h(!1)}},ie=async W=>{if(window.confirm("Are you sure? This will delete the assignment and all student results associated with it."))try{await Pi(Me(ve,"assignments",W)),d(Ce=>Ce.filter(Ie=>Ie.id!==W)),w(null)}catch(Ce){console.error("Error deleting assignment:",Ce),alert("Failed to delete assignment.")}},H=async(W,Ce)=>{if(t&&window.confirm(`Are you sure you want to remove ${Ce} from this class?

This will also delete all their assignment submissions for this class.`))try{const Ie=gn(qe(ve,"assignment_results"),Dn("studentId","==",W),Dn("classId","==",t)),Ye=await It(Ie),et=Ye.docs.map(en=>Pi(en.ref));await Promise.all(et),console.log(`Deleted ${Ye.size} assignment submissions for ${Ce}`),await Pi(Me(ve,"classes",t,"members",W)),await Pi(Me(ve,"users",W,"enrolled_classes",t)),s(en=>en.filter(St=>St.uid!==W)),alert(`${Ce} has been removed from the class.
${Ye.size} assignment submission(s) were deleted.`)}catch(Ie){console.error("Error removing student:",Ie),alert(`Failed to remove student: ${Ie.message}`)}},K=W=>{var Ce;w(W),k(W.title||""),j(!1),R((Ce=W.settings)==null?void 0:Ce.timeLimitMinutes),M(!1)},le=async()=>{if(!(!v||!S.trim()))try{await Tn(Me(ve,"assignments",v.id),{title:S.trim()}),d(W=>W.map(Ce=>Ce.id===v.id?{...Ce,title:S.trim()}:Ce)),w({...v,title:S.trim()}),j(!1)}catch(W){console.error("Error updating title:",W),alert("Failed to update title.")}},q=async()=>{if(v)try{const W={"settings.timeLimitMinutes":T||null};await Tn(Me(ve,"assignments",v.id),W);const Ce={...v.settings,timeLimitMinutes:T};d(Ie=>Ie.map(Ye=>Ye.id===v.id?{...Ye,settings:Ce}:Ye)),w({...v,settings:Ce}),M(!1)}catch(W){console.error("Error updating time limit:",W),alert("Failed to update time limit.")}},ae=async(W,Ce)=>{const Ie=Ce==="active"?"archived":"active";try{await Tn(Me(ve,"assignments",W),{status:Ie}),d(Ye=>Ye.map(et=>et.id===W?{...et,status:Ie}:et)),(v==null?void 0:v.id)===W&&w({...v,status:Ie})}catch(Ye){console.error("Error toggling status:",Ye),alert("Failed to update status.")}},ge=async W=>{N(W),O(!0);try{const Ce=gn(qe(ve,"assignment_results"),Dn("assignmentId","==",W.id)),Ye=(await It(Ce)).docs.map(et=>({id:et.id,...et.data()}));C(Ye)}catch(Ce){console.error("Error loading submissions:",Ce),alert("Failed to load submissions.")}O(!1)},ye=async()=>{if(!V)return;const W=I.filter(St=>St.markingStatus==="pending");if(W.length===0){alert("All submissions have already been marked!");return}if(!window.confirm(`This will use AI to mark ${W.length} pending submission(s). Continue?`))return;$(!0);const Ce=new Zu;let Ie=0,Ye=0;const et=[];for(const St of W)try{console.log("Marking submission:",St.id),console.log("Student:",St.studentName),console.log("Assignment ID:",V.id),console.log("Full submission data:",St);let ht=[];if(Array.isArray(St.answers)?ht=St.answers.map(Qt=>Qt.text||""):St.answers&&typeof St.answers=="object"&&(ht=Object.values(St.answers).map(Qt=>Qt.text||Qt||"")),console.log("Extracted student answers:",ht),ht.length===0||ht.every(Qt=>!Qt))throw await Tn(Me(ve,"assignment_results",St.id),{score:0,percentage:0,feedback:"No answers provided. Student submitted without answering questions.",markingStatus:"complete",markedAt:Date.now()}),new Error("No answers provided by student");console.log("Calling AI marking service...");const xt=await Ce.markAssignment(V.id,ht);console.log("Marking result:",xt),await Tn(Me(ve,"assignment_results",St.id),{score:xt.totalMarks,percentage:xt.percentage,feedback:xt.overallFeedback,detailedResults:xt.results,markingStatus:"complete",markedAt:Date.now()}),console.log("Successfully marked:",St.studentName),Ie++}catch(ht){console.error(`Failed to mark submission ${St.id}:`,ht);const xt=ht.message||"Unknown error";et.push(`${St.studentName}: ${xt}`),Ye++}$(!1);let en=`Marking complete!

 Successfully marked: ${Ie}
 Failed: ${Ye}`;et.length>0&&(en+=`

Errors:
`+et.join(`
`)),alert(en),await ge(V)};return f?l.jsx("div",{className:"p-12 text-center text-slate-500",children:"Loading class details..."}):n?l.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[l.jsxs("button",{onClick:()=>e("/teacher"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors mb-6 font-medium",children:[l.jsx(oa,{size:18}),"Back to Dashboard"]}),l.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-8 mb-8",children:l.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 mb-2",children:n.name}),l.jsxs("div",{className:"flex items-center gap-4 text-slate-500",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 px-3 py-1 rounded-lg",children:[l.jsx("span",{className:"text-xs uppercase font-bold tracking-wider",children:"Join Code:"}),l.jsx("span",{className:"font-mono font-bold text-slate-900",children:n.inviteCode})]}),l.jsx("span",{children:""}),l.jsxs("span",{children:[a.length," Students"]})]})]}),l.jsx("div",{children:l.jsx("button",{onClick:()=>e(`/teacher/class/${t}/create-assignment`),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 transition-all transform hover:scale-105",children:"+ New Assignment"})})]})}),l.jsxs("div",{className:"flex gap-8 border-b border-slate-200 mb-8",children:[l.jsxs("button",{onClick:()=>g("assignments"),className:`pb-4 px-2 font-bold text-lg transition-colors relative ${p==="assignments"?"text-indigo-600":"text-slate-400 hover:text-slate-600"}`,children:["Assignments",p==="assignments"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-indigo-600 rounded-t-full"})]}),l.jsxs("button",{onClick:()=>g("students"),className:`pb-4 px-2 font-bold text-lg transition-colors relative ${p==="students"?"text-indigo-600":"text-slate-400 hover:text-slate-600"}`,children:["Students (",a.length,")",p==="students"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-indigo-600 rounded-t-full"})]})]}),p==="assignments"&&l.jsx("div",{className:"grid gap-4",children:c.length===0?l.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-2xl border border-dashed border-slate-300",children:[l.jsx($r,{size:48,className:"mx-auto text-slate-300 mb-4"}),l.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"No assignments created yet"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Generate your first AI practice set for this class."}),l.jsx("button",{onClick:()=>e(`/teacher/class/${t}/create-assignment`),className:"text-indigo-600 font-bold hover:underline",children:"Create Assignment"})]}):c.map(W=>l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:W.title||"Untitled Assignment"}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Os,{size:16})," Created ",new Date(W.createdAt).toLocaleDateString()]}),l.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${W.settings.difficulty==="Easy"?"bg-green-100 text-green-700":W.settings.difficulty==="Medium"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:W.settings.difficulty}),l.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded text-xs text-slate-600 uppercase font-medium",children:W.settings.topic})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>K(W),className:"px-4 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg font-medium transition-colors flex items-center gap-2",children:[l.jsx(vd,{size:16}),"View Details"]}),l.jsxs("button",{onClick:()=>ge(W),className:"px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg font-medium transition-colors flex items-center gap-2",children:[l.jsx(dh,{size:16}),"Submissions"]}),l.jsx("button",{onClick:()=>ae(W.id,W.status||"active"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${W.status==="active"?"bg-green-50 hover:bg-green-100 text-green-600":"bg-amber-50 hover:bg-amber-100 text-amber-600"}`,children:W.status==="active"?"Published":"Archived"}),l.jsx("button",{onClick:()=>ie(W.id),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(Ia,{size:20})})]})]},W.id))}),p==="students"&&l.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase font-bold",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4",children:"Student Name"}),l.jsx("th",{className:"px-6 py-4",children:"Joined At"}),l.jsx("th",{className:"px-6 py-4",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:a.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:3,className:"px-6 py-12 text-center text-slate-500",children:["No students have joined yet. Share the code ",l.jsx("b",{children:n.inviteCode})," with them."]})}):a.map(W=>{var Ce;return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900 flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold",children:((Ce=W.displayName)==null?void 0:Ce.charAt(0))||"S"}),W.displayName||"Unnamed Student"]}),l.jsx("td",{className:"px-6 py-4 text-slate-500 text-sm",children:W.joinedAt?new Date(W.joinedAt).toLocaleDateString():"Unknown"}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("button",{onClick:()=>H(W.uid,W.displayName||"Unknown Student"),className:"text-red-500 hover:text-red-700 hover:bg-red-50 px-3 py-1 rounded-lg text-sm font-medium transition-colors",children:"Remove"})})]},W.uid)})})]})}),v&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl my-8",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[E?l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:S,onChange:W=>k(W.target.value),className:"flex-1 text-2xl font-bold text-slate-900 border-b-2 border-indigo-500 focus:outline-none",autoFocus:!0}),l.jsx("button",{onClick:le,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700",children:"Save"}),l.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-medium hover:bg-slate-300",children:"Cancel"})]}):l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:v.title||"Untitled Assignment"}),l.jsx("button",{onClick:()=>j(!0),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit title",children:l.jsx(gc,{size:18})})]}),l.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Os,{size:14}),"Created ",new Date(v.createdAt||Date.now()).toLocaleDateString()]}),l.jsx("span",{className:`px-2 py-1 rounded font-bold text-xs uppercase ${v.status==="active"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:v.status||"active"})]})]}),l.jsx("button",{onClick:()=>w(null),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(Ar,{size:24})})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[l.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Difficulty"}),l.jsx("p",{className:`text-lg font-bold ${((Te=v.settings)==null?void 0:Te.difficulty)==="Easy"?"text-green-600":((Oe=v.settings)==null?void 0:Oe.difficulty)==="Medium"?"text-amber-600":"text-red-600"}`,children:((Pe=v.settings)==null?void 0:Pe.difficulty)||"N/A"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[l.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Topic"}),l.jsx("p",{className:"text-lg font-bold text-slate-900",children:((vt=v.settings)==null?void 0:vt.topic)||"N/A"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[l.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Questions"}),l.jsx("p",{className:"text-lg font-bold text-slate-900",children:((ue=v.questions)==null?void 0:ue.length)||0})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[l.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Time Limit"}),z?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:T||"",onChange:W=>R(W.target.value?parseInt(W.target.value):void 0),className:"text-sm border border-slate-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[l.jsx("option",{value:"",children:"No limit"}),l.jsx("option",{value:"15",children:"15 min"}),l.jsx("option",{value:"30",children:"30 min"}),l.jsx("option",{value:"45",children:"45 min"}),l.jsx("option",{value:"60",children:"1 hour"}),l.jsx("option",{value:"90",children:"1.5 hours"}),l.jsx("option",{value:"120",children:"2 hours"})]}),l.jsx("button",{onClick:q,className:"p-1 bg-green-500 text-white rounded hover:bg-green-600",title:"Save",children:l.jsx(za,{size:16})}),l.jsx("button",{onClick:()=>{var W;M(!1),R((W=v.settings)==null?void 0:W.timeLimitMinutes)},className:"p-1 bg-slate-300 text-slate-700 rounded hover:bg-slate-400",title:"Cancel",children:l.jsx(Ar,{size:16})})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-lg font-bold text-slate-900",children:(Ve=v.settings)!=null&&Ve.timeLimitMinutes?`${v.settings.timeLimitMinutes} min`:"No limit"}),l.jsx("button",{onClick:()=>M(!0),className:"p-1 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:"Edit time limit",children:l.jsx(gc,{size:14})})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Questions"}),l.jsx("div",{className:"space-y-4",children:((He=v.questions)==null?void 0:He.map((W,Ce)=>l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("span",{className:"font-bold text-indigo-600",children:["Question ",W.number]}),l.jsxs("span",{className:"text-sm bg-slate-200 px-2 py-1 rounded text-slate-600 font-medium",children:[W.marks," marks"]})]}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:W.text}),W.guidance&&l.jsxs("p",{className:"text-sm text-slate-500 mt-2 italic",children:["Guidance: ",W.guidance]}),W.aos&&W.aos.length>0&&l.jsx("div",{className:"flex gap-2 mt-2",children:W.aos.map((Ie,Ye)=>l.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded font-medium",children:Ie},Ye))}),W.answerKey&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-green-200 bg-green-50 -mx-4 -mb-4 px-4 py-3 rounded-b-xl",children:[l.jsxs("p",{className:"text-xs font-bold text-green-800 mb-1 flex items-center gap-1",children:[l.jsx("span",{className:"text-sm",children:""})," Answer Key / Marking Guidance"]}),l.jsx("p",{className:"text-sm text-green-900 whitespace-pre-wrap",children:W.answerKey})]})]},Ce)))||l.jsx("p",{className:"text-slate-500 italic",children:"No questions available"})})]}),l.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-slate-200",children:[l.jsx("button",{onClick:()=>ae(v.id,v.status||"active"),className:`flex-1 py-3 rounded-xl font-bold transition-colors ${v.status==="active"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-amber-100 text-amber-700 hover:bg-amber-200"}`,children:v.status==="active"?"Published - Click to Archive":"Archived - Click to Publish"}),l.jsx("button",{onClick:()=>ie(v.id),className:"flex-1 py-3 bg-red-100 text-red-700 rounded-xl font-bold hover:bg-red-200 transition-colors",children:"Delete Assignment"})]})]})]})}),V&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto shadow-2xl my-8",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:[V.title," - Submissions"]}),l.jsxs("p",{className:"text-slate-500",children:["Total Submissions: ",I.length," | Pending: ",I.filter(W=>W.markingStatus==="pending").length]})]}),l.jsx("button",{onClick:()=>{N(null),C([]),he(null)},className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(Ar,{size:24})})]}),I.some(W=>W.markingStatus==="pending")&&l.jsx("button",{onClick:ye,disabled:U,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:U?l.jsx(l.Fragment,{children:" Marking in progress..."}):l.jsxs(l.Fragment,{children:[" Mark All Pending with AI (",I.filter(W=>W.markingStatus==="pending").length,")"]})})]}),l.jsx("div",{className:"p-6",children:D?l.jsx("div",{className:"py-12 text-center text-slate-500",children:"Loading submissions..."}):I.length===0?l.jsxs("div",{className:"py-12 text-center",children:[l.jsx($r,{size:48,className:"mx-auto text-slate-300 mb-4"}),l.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"No Submissions Yet"}),l.jsx("p",{className:"text-slate-500",children:"Students haven't submitted this assignment yet."})]}):l.jsx("div",{className:"space-y-3",children:I.map(W=>{var Ce;return l.jsx("div",{className:"bg-white border border-slate-200 rounded-xl p-5 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[l.jsx("div",{className:"w-12 h-12 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold text-lg",children:((Ce=W.studentName)==null?void 0:Ce.charAt(0))||"S"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-bold text-slate-900",children:W.studentName||"Unknown Student"}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mt-1",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Os,{size:14}),"Submitted ",new Date(W.completedAt).toLocaleDateString()]}),W.markingStatus==="complete"?l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Xu,{size:14}),W.score,"/",W.maxScore," (",Math.round(W.percentage||0),"%)"]}),l.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${(W.percentage||0)>=80?"bg-green-100 text-green-700":(W.percentage||0)>=60?"bg-blue-100 text-blue-700":(W.percentage||0)>=40?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:(W.percentage||0)>=80?"Excellent":(W.percentage||0)>=60?"Good":(W.percentage||0)>=40?"Pass":"Needs Improvement"})]}):l.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold bg-amber-100 text-amber-700",children:" Pending Review"})]})]})]}),l.jsx("button",{onClick:()=>he(W),className:"px-4 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg font-medium transition-colors",children:"View Details"})]})},W.id)})})})]})}),Z&&V&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 overflow-y-auto",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl my-8",children:[l.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-500 to-purple-600 p-6 rounded-t-2xl",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(Xu,{className:"text-white",size:32}),l.jsxs("h2",{className:"text-2xl font-bold text-white",children:[Z.studentName,"'s Result"]})]}),l.jsxs("div",{className:"flex items-center gap-4 text-indigo-50",children:[l.jsxs("span",{children:["Completed ",new Date(Z.completedAt).toLocaleDateString()]}),l.jsx("span",{children:""}),l.jsxs("span",{className:"font-bold text-white",children:["Score: ",Z.score,"/",Z.maxScore," (",Math.round(Z.percentage||0),"%)"]})]})]}),l.jsx("button",{onClick:()=>he(null),className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:""})]})}),Z.feedback&&l.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Overall Feedback"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:Z.feedback})]}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Question-by-Question Breakdown"}),l.jsx("div",{className:"space-y-4",children:Z.detailedResults&&Z.detailedResults.length>0?Z.detailedResults.map((W,Ce)=>l.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("h4",{className:"font-bold text-slate-900",children:["Question ",W.questionNumber]}),l.jsxs("span",{className:`px-3 py-1 rounded-lg font-bold text-sm ${W.marksAwarded===W.maxMarks?"bg-green-100 text-green-700":W.marksAwarded>=W.maxMarks*.6?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[W.marksAwarded,"/",W.maxMarks," marks"]})]}),W.feedback&&l.jsxs("div",{className:"mb-3",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-1",children:"Feedback:"}),l.jsx("p",{className:"text-slate-700 text-sm",children:W.feedback})]}),W.strengths&&l.jsxs("div",{className:"mb-2 p-3 bg-green-50 rounded-lg",children:[l.jsx("p",{className:"text-xs font-bold text-green-800 mb-1",children:" Strengths"}),l.jsx("p",{className:"text-sm text-green-900",children:W.strengths})]}),W.improvements&&l.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[l.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1",children:" Areas for Improvement"}),l.jsx("p",{className:"text-sm text-blue-900",children:W.improvements})]})]},Ce)):l.jsx("div",{className:"text-center py-8 text-slate-500",children:l.jsx("p",{children:"Detailed feedback not available"})})}),l.jsx("button",{onClick:()=>he(null),className:"w-full mt-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold rounded-xl transition-colors",children:"Close"})]})]})})]}):l.jsx("div",{className:"p-12 text-center text-red-500",children:"Class not found."})},Pye=()=>{const{classId:t}=Hh(),e=Bt(),[n,r]=b.useState(""),[a,s]=b.useState("Medium"),[c,d]=b.useState(5),[f,h]=b.useState(void 0),[p,g]=b.useState(""),[v,w]=b.useState(!1),[E,j]=b.useState(null),[S,k]=b.useState(!1),[z,M]=b.useState(null),[T,R]=b.useState(""),V=async()=>{if(n){w(!0);try{const U=await new Zu().generatePracticeSet(n,a,c);if(U&&U.questions)j(U);else throw new Error("Invalid response from AI")}catch(O){console.error("Generation failed:",O),alert("Failed to generate questions. Please try again.")}w(!1)}},N=(O,U)=>{M(O),R(U||"")},I=O=>{if(!E)return;const U=[...E.questions];U[O]={...U[O],answerKey:T},j({...E,questions:U}),M(null),R("")},C=()=>{M(null),R("")},D=async()=>{if(!E||!xe.currentUser||!t){console.error("Missing required data:",{generatedExam:!!E,user:!!xe.currentUser,classId:t}),alert("Missing required information. Please try again.");return}k(!0);try{const O={topic:n,difficulty:a};f!=null&&(O.timeLimitMinutes=f);const U={classId:t,teacherId:xe.currentUser.uid,title:E.title,questions:E.questions,settings:O,status:"archived",createdAt:Date.now()};console.log("Attempting to save assignment:",U);const $=await Sr(qe(ve,"assignments"),U);console.log("Assignment saved successfully with ID:",$.id),e(`/teacher/class/${t}`)}catch(O){console.error("Save failed:",O),console.error("Error code:",O.code),console.error("Error message:",O.message),alert(`Failed to save assignment: ${O.message||"Unknown error"}`)}k(!1)};return l.jsxs("div",{className:"p-8 max-w-4xl mx-auto",children:[l.jsxs("button",{onClick:()=>e(`/teacher/class/${t}`),className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors mb-6 font-medium",children:[l.jsx(oa,{size:18}),"Cancel & Back"]}),l.jsx("h1",{className:"text-3xl font-extrabold text-slate-900 mb-8",children:"Create New Assignment"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[l.jsx(ka,{className:"text-purple-500",size:20}),"AI Configuration"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Topic / Theme"}),l.jsx("input",{type:"text",value:n,onChange:O=>r(O.target.value),placeholder:"e.g. Macbeth Act 1, Persuasive Writing, Grammar...",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:outline-none"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Difficulty"}),l.jsxs("select",{value:a,onChange:O=>s(O.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:outline-none",children:[l.jsx("option",{value:"Easy",children:"Foundation (Easy)"}),l.jsx("option",{value:"Medium",children:"Standard (Medium)"}),l.jsx("option",{value:"Hard",children:"Advanced (Hard)"}),l.jsx("option",{value:"Mixed",children:"Mixed Ability"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Questions"}),l.jsxs("select",{value:c,onChange:O=>d(Number(O.target.value)),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:outline-none",children:[l.jsx("option",{value:3,children:"3 Questions"}),l.jsx("option",{value:5,children:"5 Questions"}),l.jsx("option",{value:10,children:"10 Questions"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Time Limit (Optional)"}),l.jsxs("select",{value:f||"",onChange:O=>h(O.target.value?Number(O.target.value):void 0),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:outline-none",children:[l.jsx("option",{value:"",children:"No time limit"}),l.jsx("option",{value:15,children:"15 minutes"}),l.jsx("option",{value:30,children:"30 minutes"}),l.jsx("option",{value:45,children:"45 minutes"}),l.jsx("option",{value:60,children:"1 hour"}),l.jsx("option",{value:90,children:"1.5 hours"}),l.jsx("option",{value:120,children:"2 hours"})]}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Set a time limit for students to complete this assignment. Leave blank for no limit."})]}),l.jsx("div",{className:"pt-4",children:l.jsx("button",{onClick:V,disabled:!n||v,className:`w-full py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold rounded-xl shadow-lg transition-all ${v?"opacity-70 cursor-wait":"hover:scale-[1.02]"}`,children:v?"Generating Questions...":"Generate with AI"})})]})]})}),l.jsx("div",{className:"space-y-6",children:E?l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm h-full flex flex-col",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900",children:E.title}),l.jsxs("p",{className:"text-xs text-amber-600 font-medium mt-1 flex items-center gap-1",children:[l.jsx("span",{children:""})," Please review and approve all answer keys before saving"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-[500px] pr-2 space-y-4 mb-4",children:E.questions.map((O,U)=>l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsxs("span",{className:"font-bold text-slate-700",children:["Q",O.number]}),l.jsxs("span",{className:"text-xs bg-slate-200 px-2 py-1 rounded text-slate-600",children:[O.marks," Marks"]})]}),l.jsx("p",{className:"text-slate-600 text-sm mb-3",children:O.text}),O.answerKey&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-green-200 bg-green-50 -mx-4 -mb-4 px-4 py-3 rounded-b-xl",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("p",{className:"text-xs font-semibold text-green-700",children:" Answer Key (AI Generated):"}),z!==U&&l.jsxs("button",{onClick:()=>N(U,O.answerKey),className:"text-xs flex items-center gap-1 text-blue-600 hover:text-blue-800 font-medium",children:[l.jsx(gc,{size:12})," Edit"]})]}),z===U?l.jsxs("div",{children:[l.jsx("textarea",{value:T,onChange:$=>R($.target.value),className:"w-full p-2 text-sm border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none mb-2",rows:4,placeholder:"Enter marking guidance and model answer..."}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>I(U),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700",children:[l.jsx(ev,{size:14})," Save"]}),l.jsxs("button",{onClick:C,className:"flex items-center gap-1 px-3 py-1 bg-slate-300 text-slate-700 text-xs font-medium rounded-lg hover:bg-slate-400",children:[l.jsx(Ar,{size:14})," Cancel"]})]})]}):l.jsx("p",{className:"text-xs text-green-900 whitespace-pre-wrap",children:O.answerKey})]})]},U))}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[l.jsxs("button",{onClick:V,className:"flex-1 py-3 border-2 border-slate-300 text-slate-700 font-bold rounded-xl hover:bg-slate-50 transition-colors flex items-center justify-center gap-2",children:[l.jsx(sS,{size:20}),l.jsx("span",{children:"Regenerate"})]}),l.jsxs("button",{onClick:D,disabled:S,className:"flex-1 py-3 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[l.jsx(Ay,{size:20}),l.jsx("span",{children:S?"Saving...":"Approve & Save"})]})]})]}):l.jsxs("div",{className:"h-full bg-slate-50 rounded-2xl border border-dashed border-slate-300 flex flex-col items-center justify-center text-slate-400 p-8",children:[l.jsx(ka,{size:48,className:"mb-4 opacity-50"}),l.jsxs("p",{className:"text-center",children:["Configure your topic and settings,",l.jsx("br",{}),"then click Generate to preview."]})]})})]})]})},Rye=()=>{var w;const{teacherId:t}=Hh(),e=Bt(),[n,r]=b.useState([]),[a,s]=b.useState(!0),[c,d]=b.useState(""),[f,h]=b.useState({}),p=!t||xe.currentUser&&t===xe.currentUser.uid,g=t||((w=xe.currentUser)==null?void 0:w.uid);b.useEffect(()=>{g&&v()},[t,xe.currentUser]);const v=async()=>{if(g){s(!0);try{const E=await Yn(Me(ve,"users",g));E.exists()&&d(E.data().displayName||E.data().email||"Teacher");const j=gn(qe(ve,"classes"),Dn("teacherId","==",g)),k=(await It(j)).docs.map(M=>({id:M.id,...M.data()}));r(k.sort((M,T)=>T.createdAt-M.createdAt));const z={};for(const M of k){const T=await It(qe(ve,"classes",M.id,"members"));z[M.id]=T.size}h(z)}catch(E){console.error("Error loading teacher classes:",E)}s(!1)}};return a?l.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[l.jsxs("button",{onClick:()=>e("/admin/users"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors mb-6 font-medium",children:[l.jsx(oa,{size:18}),"Back to Users"]}),l.jsx("div",{className:"flex justify-center p-12",children:l.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})})]}):l.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[!p&&l.jsxs("button",{onClick:()=>e("/admin/users"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors mb-6 font-medium",children:[l.jsx(oa,{size:18}),"Back to Users"]}),l.jsx("div",{className:"flex justify-between items-center mb-8",children:l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:[c,"'s Classes"]}),l.jsx("p",{className:"text-slate-500 mt-1",children:"Viewing all classes created by this teacher."})]})}),n.length===0?l.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-slate-300",children:[l.jsx("div",{className:"w-16 h-16 bg-indigo-50 text-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Fr,{size:32})}),l.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No classes found"}),l.jsx("p",{className:"text-slate-500 max-w-md mx-auto",children:"This teacher hasn't created any classes yet."})]}):l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(E=>l.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow overflow-hidden group",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-900 group-hover:text-indigo-600 transition-colors cursor-pointer",onClick:()=>e(`/teacher/class/${E.id}`),children:E.name}),l.jsxs("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-700 text-xs font-bold rounded-full uppercase tracking-wide",children:[f[E.id]||0," Students"]})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-6 p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Connect Code:"}),l.jsx("code",{className:"text-lg font-mono font-bold text-slate-900 tracking-widest",children:E.inviteCode})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>e(`/teacher/class/${E.id}`),className:"flex-1 py-2.5 bg-slate-900 text-white rounded-lg font-medium text-sm hover:bg-slate-800 transition-colors flex items-center justify-center gap-2",children:[l.jsx(Xt,{size:16}),"Manage"]}),l.jsx("button",{onClick:()=>e(`/teacher/class/${E.id}/assignments`),className:"flex-1 py-2.5 bg-white border border-slate-200 text-slate-700 rounded-lg font-medium text-sm hover:bg-slate-50 transition-colors",children:"Assignments"})]})]})},E.id))})]})},Dye=()=>{const[t,e]=b.useState([]),[n,r]=b.useState([]),[a,s]=b.useState(""),[c,d]=b.useState(!0),[f,h]=b.useState("all"),[p,g]=b.useState([]);b.useEffect(()=>{xe.currentUser&&v()},[]),b.useEffect(()=>{const w=a.toLowerCase();let E=t.filter(j=>(j.displayName||"").toLowerCase().includes(w)||(j.uid||"").includes(w));f!=="all"&&(E=E.filter(j=>j.classId===f)),r(E)},[a,t,f]);const v=async()=>{if(xe.currentUser){d(!0);try{const w=gn(qe(ve,"classes"),Dn("teacherId","==",xe.currentUser.uid)),j=(await It(w)).docs.map(z=>({id:z.id,...z.data()}));g(j);const S=[];for(const z of j)try{const M=qe(ve,"classes",z.id,"members");(await It(M)).docs.forEach(R=>{const V=R.data();S.push({uid:V.uid||R.id,displayName:V.displayName||"Unnamed Student",joinedAt:V.joinedAt||Date.now(),classId:z.id,className:z.name})})}catch(M){console.error(`Error loading members for class ${z.id}:`,M)}const k=Array.from(new Map(S.map(z=>[`${z.uid}-${z.classId}`,z])).values());e(k),r(k)}catch(w){console.error("Error loading teacher data:",w)}d(!1)}};return c?l.jsx("div",{className:"p-8",children:"Loading student directory..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Student Directory"}),l.jsx("p",{className:"text-slate-500",children:"View all students enrolled in your classes."})]}),l.jsxs("div",{className:"relative",children:[l.jsx(aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),l.jsx("input",{type:"text",placeholder:"Search students...",value:a,onChange:w=>s(w.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-edexcel-teal w-64"})]})]}),p.length>0&&l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[l.jsxs("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f==="all"?"bg-edexcel-teal text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["All Classes (",t.length,")"]}),p.map(w=>{const E=t.filter(j=>j.classId===w.id).length;return l.jsxs("button",{onClick:()=>h(w.id),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f===w.id?"bg-blue-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[w.name," (",E,")"]},w.id)})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase font-semibold",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4",children:"Student Name"}),l.jsx("th",{className:"px-6 py-4",children:"Class"}),l.jsx("th",{className:"px-6 py-4",children:"Joined"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:n.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-12 text-center text-slate-400",children:p.length===0?l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(Fr,{size:32,className:"text-slate-300"}),l.jsx("p",{children:"No classes created yet. Create a class to enroll students."})]}):l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(Fr,{size:32,className:"text-slate-300"}),l.jsx("p",{children:"No students found matching your search."})]})})}):n.map(w=>{var E;return l.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-sm",children:((E=w.displayName)==null?void 0:E.charAt(0))||"S"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-slate-900",children:w.displayName}),l.jsxs("div",{className:"text-xs text-slate-400 font-mono",title:w.uid,children:[w.uid.slice(0,12),"..."]})]})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Xt,{size:16,className:"text-slate-400"}),w.className]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:w.joinedAt?new Date(w.joinedAt).toLocaleDateString():"Unknown"})]},`${w.uid}-${w.classId}`)})})]})})]})},Mye=()=>{var v,w;const t=Bt(),e=ua(),[n,r]=b.useState(!1),[a,s]=b.useState(!1),[c,d]=b.useState(()=>localStorage.getItem("teacherDarkMode")==="true");b.useEffect(()=>{xe.currentUser&&Q0(xe.currentUser.uid).then(s)},[]),b.useEffect(()=>{localStorage.setItem("teacherDarkMode",c.toString()),c?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[c]);const f=async()=>{await yd(),t("/login")},h=()=>{const E=e.pathname.split("/").filter(Boolean),j=[{label:"Teacher",path:"/teacher"}];return E.length>1&&(E[1]==="students"?j.push({label:"Student Dictionary",path:e.pathname}):E[1]==="class"&&E[2]?j.push({label:"Class Manager",path:e.pathname}):E[1]==="view"&&E[2]&&j.push({label:"View Classes",path:e.pathname})),j},p=({isActive:E})=>`flex items-center gap-3 px-4 py-3 rounded-md transition-colors ${E?"bg-blue-500/20 text-blue-500":"text-slate-300 hover:bg-slate-800"} ${n?"justify-center":""}`,g=[{to:"/dashboard",icon:jy,label:"Home",end:!0},{to:"/teacher",icon:J0,label:"Overview",end:!0},{to:"/teacher/classes",icon:Xt,label:"My Classes"},{to:"/teacher/students",icon:Fr,label:"Student Directory"}];return a&&g.push({to:"/admin",icon:jy,label:"Admin Panel",end:!1}),l.jsxs("div",{className:`flex h-screen ${c?"bg-slate-900":"bg-gray-100"}`,children:[l.jsxs("aside",{className:`${n?"w-20":"w-64"} bg-slate-900 text-white flex flex-col shrink-0 transition-all duration-300`,children:[l.jsxs("div",{className:`p-4 border-b border-slate-700 flex items-center ${n?"justify-center":"justify-between"}`,children:[!n&&l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold tracking-tight text-blue-400",children:"Teacher Control Panel"}),l.jsx("p",{className:"text-xs text-slate-400",children:"GCSE Simulator"})]}),l.jsx("button",{onClick:()=>r(!n),className:"p-2 hover:bg-slate-800 rounded-lg transition-colors",title:n?"Expand":"Collapse",children:n?l.jsx(Sh,{size:18}):l.jsx(nS,{size:18})})]}),l.jsx("nav",{className:"flex-1 p-2 space-y-1 overflow-y-auto",children:g.map(E=>l.jsxs(ty,{to:E.to,end:E.end,className:p,title:n?E.label:void 0,children:[l.jsx(E.icon,{size:20}),!n&&l.jsx("span",{className:"font-medium",children:E.label})]},E.to))}),l.jsxs("div",{className:"p-3 border-t border-slate-700 space-y-2",children:[l.jsxs("button",{onClick:()=>d(!c),className:`flex items-center gap-3 px-4 py-2 w-full text-slate-300 hover:text-white hover:bg-slate-800 rounded-md transition-colors ${n?"justify-center":""}`,title:c?"Light Mode":"Dark Mode",children:[c?l.jsx(_3,{size:18}):l.jsx(b3,{size:18}),!n&&l.jsx("span",{children:c?"Light Mode":"Dark Mode"})]}),l.jsxs("button",{onClick:f,className:`flex items-center gap-3 px-4 py-2 w-full text-slate-300 hover:text-white hover:bg-slate-800 rounded-md transition-colors ${n?"justify-center":""}`,title:"Sign Out",children:[l.jsx(xd,{size:18}),!n&&l.jsx("span",{children:"Sign Out"})]}),!n&&l.jsx("div",{className:"px-4 pt-2 text-xs text-slate-500",children:"v2.0.0"})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[l.jsxs("header",{className:`${c?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} border-b h-16 flex items-center justify-between px-6 shadow-sm`,children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("nav",{className:"flex items-center gap-1 text-sm",children:h().map((E,j,S)=>l.jsxs(Bh.Fragment,{children:[l.jsx("button",{onClick:()=>t(E.path),className:`${j===S.length-1?c?"text-white font-semibold":"text-slate-900 font-semibold":c?"text-slate-400 hover:text-white":"text-slate-500 hover:text-slate-900"}`,children:E.label}),j<S.length-1&&l.jsx("span",{className:c?"text-slate-600":"text-slate-300",children:"/"})]},E.path))})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:`text-sm font-bold ${c?"text-white":"text-gray-800"}`,children:((v=xe.currentUser)==null?void 0:v.displayName)||"Teacher"}),l.jsx("div",{className:`text-xs ${c?"text-slate-400":"text-gray-500"}`,children:"Educator"})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden",children:(w=xe.currentUser)!=null&&w.photoURL?l.jsx("img",{src:xe.currentUser.photoURL,alt:"Teacher",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:l.jsx(Xt,{size:20})})})]})]}),l.jsx("main",{className:`flex-1 overflow-auto p-6 ${c?"bg-slate-900":""}`,children:l.jsx(c4,{context:{darkMode:c}})})]})]})},Lye=()=>{var g,v;const[t,e]=b.useState([]),[n,r]=b.useState(""),[a,s]=b.useState(!0),[c,d]=b.useState(!1),f=Bt();b.useEffect(()=>{xe.currentUser&&h()},[xe.currentUser]);const h=async()=>{if(xe.currentUser){s(!0);try{const w=qe(ve,"users",xe.currentUser.uid,"enrolled_classes"),j=(await It(w)).docs.map(z=>z.id);if(j.length===0){e([]),s(!1);return}const S=[];for(let z=0;z<j.length;z+=10)S.push(j.slice(z,z+10));const k=[];for(const z of S){const M=gn(qe(ve,"classes"),Dn("__name__","in",z));(await It(M)).forEach(R=>k.push({id:R.id,...R.data()}))}e(k)}catch(w){console.error("Error loading classes:",w)}s(!1)}},p=async()=>{if(!(!n||!xe.currentUser)){d(!0);try{console.log("[StudentClassroom] Attempting to join class with code:",n.trim().toUpperCase()),console.log("[StudentClassroom] Current user UID:",xe.currentUser.uid),console.log("[StudentClassroom] Current user display name:",xe.currentUser.displayName);const w=gn(qe(ve,"classes"),Dn("inviteCode","==",n.trim().toUpperCase())),E=await It(w);if(E.empty){console.error("[StudentClassroom] No class found with code:",n.trim().toUpperCase()),alert("Invalid class code."),d(!1);return}const j=E.docs[0],S=j.id,k=j.data();if(console.log("[StudentClassroom] Found class:",S,k.name),(await Yn(Me(ve,"classes",S,"members",xe.currentUser.uid))).exists()){console.warn("[StudentClassroom] User is already a member of this class"),alert(`You are already enrolled in ${k.name}!`),d(!1);return}console.log("[StudentClassroom] Adding member to class/members subcollection..."),await ri(Me(ve,"classes",S,"members",xe.currentUser.uid),{uid:xe.currentUser.uid,displayName:xe.currentUser.displayName||"Unknown Student",joinedAt:Date.now()}),console.log("[StudentClassroom] Successfully added to class/members"),console.log("[StudentClassroom] Adding class to user/enrolled_classes subcollection..."),await ri(Me(ve,"users",xe.currentUser.uid,"enrolled_classes",S),{joinedAt:Date.now(),name:k.name}),console.log("[StudentClassroom] Successfully added to user/enrolled_classes"),alert(`Successfully joined ${k.name}!`),r(""),h()}catch(w){console.error("[StudentClassroom] Join failed with error:",w),console.error("[StudentClassroom] Error code:",w.code),console.error("[StudentClassroom] Error message:",w.message),console.error("[StudentClassroom] Full error object:",w);let E="Failed to join class. ";w.code==="permission-denied"?E+="Permission denied. Make sure your account is approved.":w.code?E+=`Error: ${w.code}`:E+="Please try again.",alert(E)}d(!1)}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs("header",{className:"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6 shadow-sm",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("button",{onClick:()=>f("/dashboard"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors font-medium",children:[l.jsx(oa,{size:18}),"Back to Dashboard"]})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm font-bold text-gray-800",children:((g=xe.currentUser)==null?void 0:g.displayName)||"Student"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Student"})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden",children:(v=xe.currentUser)!=null&&v.photoURL?l.jsx("img",{src:xe.currentUser.photoURL,alt:"Student",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:l.jsx(nl,{size:20})})})]})]}),l.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-8",children:"My Classroom"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"md:col-span-1",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-indigo-100 shadow-lg shadow-indigo-50",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[l.jsx(aa,{className:"text-indigo-600",size:20}),"Join a Class"]}),l.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Enter the 6-character code shared by your teacher."}),l.jsx("input",{type:"text",value:n,onChange:w=>r(w.target.value.toUpperCase()),placeholder:"e.g. AB12CD",maxLength:6,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-mono text-center text-lg tracking-widest mb-4 focus:ring-2 focus:ring-indigo-500 focus:outline-none uppercase"}),l.jsx("button",{onClick:p,disabled:c||n.length<3,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl transition-colors disabled:opacity-50",children:c?"Joining...":"Join Class"})]})}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Enrolled Classes"}),a?l.jsx("div",{className:"p-8 text-center text-slate-400",children:"Loading your classes..."}):t.length===0?l.jsxs("div",{className:"bg-white rounded-2xl p-8 border border-dashed border-slate-300 text-center",children:[l.jsx(Xt,{size:48,className:"mx-auto text-slate-300 mb-4"}),l.jsx("h3",{className:"text-lg font-bold text-slate-600",children:"No classes yet"}),l.jsx("p",{className:"text-slate-400",children:"Join a class to see your assignments here."})]}):l.jsx("div",{className:"grid gap-4",children:t.map(w=>l.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-200 hover:shadow-md transition-all group cursor-pointer",onClick:()=>f(`/student/class/${w.id}`),children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-900 group-hover:text-indigo-700 transition-colors",children:w.name}),l.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Joined ",new Date().toLocaleDateString()]})]}),l.jsx(Z0,{className:"text-slate-300 group-hover:text-indigo-500 transition-colors"})]})},w.id))})]})]})]})]})},zye=()=>{var M,T,R,V;const{classId:t}=Hh(),e=Bt(),[n,r]=b.useState(null),[a,s]=b.useState([]),[c,d]=b.useState({}),[f,h]=b.useState(!0),[p,g]=b.useState(null),[v,w]=b.useState(null),[E,j]=b.useState(null);b.useEffect(()=>{t&&xe.currentUser&&S()},[t,xe.currentUser]);const S=async()=>{if(!(!t||!xe.currentUser)){h(!0),g(null);try{const N=await Yn(Me(ve,"classes",t));if(!N.exists()){g("Class not found"),h(!1);return}const I={id:N.id,...N.data()};if(r(I),!(await Yn(Me(ve,"classes",t,"members",xe.currentUser.uid))).exists()){g("You are not enrolled in this class"),h(!1);return}const D=gn(qe(ve,"assignments"),Dn("classId","==",t),Dn("status","==","active")),U=(await It(D)).docs.map(Y=>({id:Y.id,...Y.data()}));U.sort((Y,ie)=>(ie.createdAt||0)-(Y.createdAt||0)),s(U);const $=gn(qe(ve,"assignment_results"),Dn("classId","==",t),Dn("studentId","==",xe.currentUser.uid)),Z=await It($),he={};Z.docs.forEach(Y=>{const ie=Y.data();he[ie.assignmentId]={id:Y.id,...ie}}),d(he)}catch(N){console.error("Error loading class data:",N),g("Failed to load class information")}h(!1)}},k=N=>{e(`/student/assignment/${N}`)},z=N=>{const I=c[N],C=a.find(D=>D.id===N);I&&C&&(w(I),j(C))};return f?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600",children:"Loading class..."})]})}):p?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx(pc,{size:64,className:"mx-auto text-red-400 mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Error"}),l.jsx("p",{className:"text-slate-600 mb-6",children:p}),l.jsx("button",{onClick:()=>e("/student/classroom"),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-colors",children:"Back to My Classes"})]})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs("header",{className:"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6 shadow-sm",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("button",{onClick:()=>e("/student/classroom"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors font-medium",children:[l.jsx(oa,{size:18}),"Back to My Classes"]})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm font-bold text-gray-800",children:((M=xe.currentUser)==null?void 0:M.displayName)||"Student"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Student"})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden",children:(T=xe.currentUser)!=null&&T.photoURL?l.jsx("img",{src:xe.currentUser.photoURL,alt:"Student",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:l.jsx(nl,{size:20})})})]})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"max-w-5xl mx-auto",children:[l.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 shadow-lg mb-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:l.jsx(Xt,{className:"text-white",size:32})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:n==null?void 0:n.name}),l.jsxs("div",{className:"flex items-center gap-3 text-indigo-100",children:[l.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[l.jsx(Xt,{size:14}),((R=n==null?void 0:n.config)==null?void 0:R.subject)||"English Language"]}),((V=n==null?void 0:n.config)==null?void 0:V.yearGroup)&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{className:"text-sm",children:n.config.yearGroup})]})]})]})]}),l.jsxs("div",{className:"text-right bg-white/10 backdrop-blur-sm px-4 py-3 rounded-xl border border-white/20",children:[l.jsx("p",{className:"text-xs text-indigo-200 uppercase tracking-wide mb-1 font-semibold",children:"Class Code"}),l.jsx("code",{className:"text-xl font-mono font-bold text-white tracking-widest",children:n==null?void 0:n.inviteCode})]})]})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[l.jsx($r,{size:24,className:"text-indigo-600"}),"Assignments"]}),a.length===0?l.jsxs("div",{className:"bg-white rounded-2xl p-12 border-2 border-dashed border-slate-300 text-center",children:[l.jsx($r,{size:56,className:"mx-auto text-slate-300 mb-4"}),l.jsx("h3",{className:"text-xl font-bold text-slate-600 mb-2",children:"No assignments yet"}),l.jsx("p",{className:"text-slate-400",children:"Your teacher hasn't posted any assignments for this class."})]}):l.jsx("div",{className:"space-y-4",children:a.map(N=>{var I,C,D,O;return l.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 hover:border-indigo-300 hover:shadow-lg transition-all duration-200",children:[l.jsx("div",{className:"flex justify-between items-start mb-3",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:N.title}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[l.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-slate-100 text-slate-700 rounded-md font-medium",children:[l.jsx($r,{size:12}),((I=N.questions)==null?void 0:I.length)||0," Questions"]}),l.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-slate-100 text-slate-700 rounded-md font-medium",children:[l.jsx(Os,{size:12}),new Date(N.createdAt||Date.now()).toLocaleDateString()]}),((C=N.settings)==null?void 0:C.timeLimitMinutes)&&l.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-md font-semibold",children:[" ",N.settings.timeLimitMinutes," min"]}),((D=N.settings)==null?void 0:D.difficulty)&&l.jsx("span",{className:`px-2 py-1 rounded-md font-semibold ${N.settings.difficulty==="easy"?"bg-green-100 text-green-700":N.settings.difficulty==="medium"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:N.settings.difficulty.charAt(0).toUpperCase()+N.settings.difficulty.slice(1)})]}),((O=N.settings)==null?void 0:O.topic)&&l.jsxs("p",{className:"text-sm text-slate-600 mt-2 flex items-center gap-1",children:[l.jsx("span",{className:"font-semibold",children:" Topic:"})," ",N.settings.topic]})]})}),c[N.id]?l.jsx("div",{className:"space-y-2",children:c[N.id].markingStatus==="complete"?l.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border-2 border-green-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(za,{className:"text-green-600",size:20}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-green-900 text-sm",children:"Completed & Marked"}),l.jsxs("p",{className:"text-xs text-green-700",children:["Score: ",c[N.id].score,"/",c[N.id].maxScore,"(",Math.round(c[N.id].percentage||0),"%)"]})]})]}),l.jsx("button",{onClick:()=>z(N.id),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-semibold rounded-lg transition-colors",children:"View Results"})]}):l.jsx("div",{className:"p-3 bg-amber-50 border-2 border-amber-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Os,{className:"text-amber-600",size:20}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-amber-900 text-sm",children:"Submitted"}),l.jsx("p",{className:"text-xs text-amber-700",children:"Awaiting teacher feedback"})]})]})})}):l.jsxs("button",{onClick:()=>k(N.id),className:"w-full py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2 text-sm",children:[l.jsx($r,{size:16}),"Start Assignment"]})]},N.id)})})]})]}),v&&E&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl my-8",children:[l.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-green-500 to-emerald-600 p-6 rounded-t-2xl",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(Xu,{className:"text-white",size:32}),l.jsx("h2",{className:"text-2xl font-bold text-white",children:E.title})]}),l.jsxs("div",{className:"flex items-center gap-4 text-green-50",children:[l.jsxs("span",{children:["Completed ",new Date(v.completedAt).toLocaleDateString()]}),l.jsx("span",{children:""}),l.jsxs("span",{className:"font-bold text-white",children:["Score: ",v.score,"/",v.maxScore," (",Math.round(v.percentage||0),"%)"]})]})]}),l.jsx("button",{onClick:()=>{w(null),j(null)},className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:""})]})}),v.feedback&&l.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Overall Feedback"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:v.feedback})]}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Question-by-Question Breakdown"}),l.jsx("div",{className:"space-y-4",children:v.detailedResults&&v.detailedResults.length>0?v.detailedResults.map((N,I)=>l.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("h4",{className:"font-bold text-slate-900",children:["Question ",N.questionNumber]}),l.jsxs("span",{className:`px-3 py-1 rounded-lg font-bold text-sm ${N.marksAwarded===N.maxMarks?"bg-green-100 text-green-700":N.marksAwarded>=N.maxMarks*.6?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[N.marksAwarded,"/",N.maxMarks," marks"]})]}),N.feedback&&l.jsxs("div",{className:"mb-3",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-1",children:"Feedback:"}),l.jsx("p",{className:"text-slate-700 text-sm",children:N.feedback})]}),N.strengths&&l.jsxs("div",{className:"mb-2 p-3 bg-green-50 rounded-lg",children:[l.jsx("p",{className:"text-xs font-bold text-green-800 mb-1",children:" Strengths"}),l.jsx("p",{className:"text-sm text-green-900",children:N.strengths})]}),N.improvements&&l.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[l.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1",children:" Areas for Improvement"}),l.jsx("p",{className:"text-sm text-blue-900",children:N.improvements})]})]},I)):l.jsx("div",{className:"text-center py-8 text-slate-500",children:l.jsx("p",{children:"Detailed feedback not available"})})}),l.jsx("button",{onClick:()=>{w(null),j(null)},className:"w-full mt-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold rounded-xl transition-colors",children:"Close"})]})]})})]})]})},Uye=()=>{const{assignmentId:t}=Hh(),e=Bt(),[n,r]=b.useState(null),[a,s]=b.useState({}),[c,d]=b.useState(!1),[f,h]=b.useState(!0),[p,g]=b.useState(null),[v,w]=b.useState(Date.now()),E=b.useRef(null);b.useEffect(()=>(j(),()=>{E.current&&clearInterval(E.current)}),[t]),b.useEffect(()=>{var T;if((T=n==null?void 0:n.settings)!=null&&T.timeLimitMinutes){const R=n.settings.timeLimitMinutes*60;return g(R),w(Date.now()),E.current=setInterval(()=>{g(V=>V===null||V<=0?(E.current&&clearInterval(E.current),M(!0),0):V-1)},1e3),()=>{E.current&&clearInterval(E.current)}}},[n]);const j=async()=>{if(t){try{const T=Me(ve,"assignments",t),R=await Yn(T);R.exists()?r({id:R.id,...R.data()}):(alert("Assignment not found."),e("/student/classroom"))}catch(T){console.error("Error loading assignment:",T)}h(!1)}},S=(T,R)=>{console.log("[AssignmentRunner] Answer change - Question ID:",T,"Text:",R),s(V=>{const N={...V,[T]:{questionId:T,text:R,timestamp:Date.now(),isFlagged:!1}};return console.log("[AssignmentRunner] Updated answers:",N),N})},k=T=>{const R=Math.floor(T/3600),V=Math.floor(T%3600/60),N=T%60;return R>0?`${R}:${V.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`:`${V}:${N.toString().padStart(2,"0")}`},z=()=>{var V;if(p===null)return"text-slate-600";const T=(((V=n==null?void 0:n.settings)==null?void 0:V.timeLimitMinutes)||0)*60,R=p/T*100;return R>50?"text-green-600":R>25?"text-amber-600":"text-red-600"},M=async(T=!1)=>{if(!(!T&&!window.confirm("Submit assignment? You cannot change your answers after submitting."))&&!(!xe.currentUser||!n)){if(!n.id){alert("Error: Assignment ID is missing.");return}if(!n.classId){alert("Error: Assignment is not linked to a class.");return}E.current&&clearInterval(E.current),d(!0);try{console.log("[AssignmentRunner] Starting submission..."),console.log("[AssignmentRunner] Assignment data:",n),console.log("[AssignmentRunner] Assignment ID:",n.id),console.log("[AssignmentRunner] Class ID:",n.classId),console.log("[AssignmentRunner] Student ID:",xe.currentUser.uid),console.log("[AssignmentRunner] Student Name:",xe.currentUser.displayName);const R=Object.values(a);console.log("[AssignmentRunner] Answers array:",R);const V=n.questions.map(C=>{var D;return((D=a[C.id||C.number])==null?void 0:D.text)||""}),N={assignmentId:n.id,classId:n.classId||null,studentId:xe.currentUser.uid,studentName:xe.currentUser.displayName||"Student",score:0,maxScore:n.questions.reduce((C,D)=>C+D.marks,0),answers:R,completedAt:Date.now(),feedback:"Awaiting teacher feedback",timeSpent:Math.floor((Date.now()-v)/1e3),markingStatus:"pending"};Object.keys(N).forEach(C=>{N[C]===void 0&&(console.warn(`[AssignmentRunner] Removing undefined field: ${C}`),delete N[C])}),N.answers=N.answers.map(C=>{const D={};return Object.keys(C||{}).forEach(O=>{C[O]!==void 0&&C[O]!==null?D[O]=C[O]:console.warn(`[AssignmentRunner] Removing undefined/null in answer.${O}:`,C[O])}),D}).filter(C=>Object.keys(C).length>0),console.log("[AssignmentRunner] Cleaned answers:",N.answers),console.log("[AssignmentRunner] Submission data:",JSON.stringify(N,null,2));const I=await Sr(qe(ve,"assignment_results"),N);console.log("[AssignmentRunner] Submission successful! Result ID:",I.id),alert(T?`Time's up! Your assignment has been submitted.

Your teacher will review and provide feedback.`:`Assignment submitted successfully!

Your teacher will review your work and provide feedback soon.`),e("/student/classroom")}catch(R){console.error("[AssignmentRunner] Submission failed:",R),console.error("[AssignmentRunner] Error code:",R.code),console.error("[AssignmentRunner] Error message:",R.message),console.error("[AssignmentRunner] Full error:",R);let V="Failed to submit assignment.";R.code==="permission-denied"?V+=`

Permission denied. Please make sure you're logged in and have access to this assignment.`:R.message&&(V+=`

Error: ${R.message}`),alert(V)}d(!1)}};return f?l.jsx("div",{className:"p-12 text-center text-slate-500",children:"Loading assignment..."}):n?l.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[l.jsxs("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-30 px-6 py-4 flex justify-between items-center shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>e("/student/classroom"),className:"text-slate-400 hover:text-slate-600",children:l.jsx(oa,{})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-slate-900",children:n.title}),l.jsxs("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-wide",children:[n.settings.topic,"  ",n.questions.length," Questions"]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[p!==null&&l.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border-2 ${p<=300?"border-red-500 bg-red-50":p<=600?"border-amber-500 bg-amber-50":"border-green-500 bg-green-50"}`,children:[l.jsx(AX,{size:20,className:z()}),l.jsx("span",{className:`font-mono font-bold text-lg ${z()}`,children:k(p)})]}),l.jsx("button",{onClick:()=>M(!1),disabled:c,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Submitting...":l.jsxs(l.Fragment,{children:["Submit ",l.jsx(za,{size:18})]})})]})]}),l.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-8 mt-6",children:n.questions.map((T,R)=>{var N;const V=T.number||T.id||R.toString();return console.log(`[AssignmentRunner] Rendering Question ${R+1}:`,{id:T.id,number:T.number,key:V}),l.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-slate-200 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["Question ",R+1]}),l.jsxs("span",{className:"bg-slate-100 text-slate-600 px-3 py-1 rounded text-sm font-medium",children:[T.marks," Marks"]})]}),l.jsxs("div",{className:"prose prose-slate max-w-none mb-6",children:[l.jsx("p",{className:"whitespace-pre-wrap text-slate-800 text-lg leading-relaxed",children:T.text}),T.guidance&&l.jsx("div",{className:"mt-3 p-3 bg-blue-50 border-l-4 border-blue-400 rounded",children:l.jsxs("p",{className:"text-sm text-blue-900 font-medium",children:[" Tip: ",T.guidance]})})]}),l.jsx("textarea",{value:((N=a[V])==null?void 0:N.text)||"",onChange:I=>S(V,I.target.value),placeholder:"Type your answer here...",rows:6,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none focus:bg-white transition-all text-slate-900 leading-relaxed resize-y"})]},V)})})]}):null},Vye=({children:t})=>{const[e,n]=b.useState(null),[r,a]=b.useState(!1),[s,c]=b.useState(!0);return b.useEffect(()=>{const d=Zh(xe,async f=>{if(n(f),f){const[h,p]=await Promise.all([Q0(f.uid),X0(f.uid)]);a(h||p)}c(!1)});return()=>d()},[]),s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(ka,{className:"animate-spin text-blue-500",size:32})}):!e||!r?e?l.jsx(Ko,{to:"/dashboard",replace:!0}):l.jsx(Ko,{to:"/login",replace:!0}):l.jsx(l.Fragment,{children:t})},$ye=({children:t})=>{const[e,n]=b.useState(null),[r,a]=b.useState(!1),[s,c]=b.useState(!0);return b.useEffect(()=>{const d=Zh(xe,async f=>{if(n(f),f){const h=await Q0(f.uid);a(h)}c(!1)});return()=>d()},[]),s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(ka,{className:"animate-spin text-edexcel-blue",size:32})}):!e||!r?l.jsx(Ko,{to:"/admin/login",replace:!0}):l.jsx(l.Fragment,{children:t})},Bye=()=>{const t=Bt(),e=ua(),n=e.pathname.startsWith("/admin")||e.pathname.startsWith("/teacher");return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex flex-col min-h-screen",children:l.jsxs(_$,{children:[l.jsx(Qe,{path:"/",element:l.jsx(YX,{})}),l.jsx(Qe,{path:"/login",element:l.jsx(oye,{})}),l.jsx(Qe,{path:"/legal-consent",element:l.jsx(vye,{})}),l.jsx(Qe,{path:"/pending-approval",element:l.jsx(dye,{})}),l.jsx(Qe,{path:"/terms",element:l.jsx(fye,{})}),l.jsx(Qe,{path:"/privacy",element:l.jsx(hye,{})}),l.jsx(Qe,{path:"/cookies",element:l.jsx(mye,{})}),l.jsx(Qe,{path:"/acceptable-use",element:l.jsx(pye,{})}),l.jsx(Qe,{path:"/child-privacy",element:l.jsx(gye,{})}),l.jsx(Qe,{path:"/admin/login",element:l.jsx(Sye,{})}),l.jsx(Qe,{path:"/dashboard",element:l.jsx(_u,{children:l.jsx("div",{className:"flex flex-col min-h-screen",children:l.jsx(cye,{})})})}),l.jsxs(Qe,{path:"/admin",element:l.jsx($ye,{children:l.jsx(bye,{})}),children:[l.jsx(Qe,{index:!0,element:l.jsx(HD,{})}),l.jsx(Qe,{path:"users",element:l.jsx(wye,{})}),l.jsx(Qe,{path:"exams",element:l.jsx(_ye,{})}),l.jsx(Qe,{path:"lab-sessions",element:l.jsx(Eye,{})}),l.jsx(Qe,{path:"analytics",element:l.jsx(HD,{})}),l.jsx(Qe,{path:"announcements",element:l.jsx(Nye,{})}),l.jsx(Qe,{path:"assets",element:l.jsx(Cye,{})}),l.jsx(Qe,{path:"activity-log",element:l.jsx(Tye,{})}),l.jsx(Qe,{path:"security",element:l.jsx(kye,{})}),l.jsx(Qe,{path:"directory",element:l.jsx(Aye,{})}),l.jsx(Qe,{path:"settings",element:l.jsx(jye,{})})]}),l.jsx(Qe,{path:"/exam/:type",element:l.jsx(_u,{children:l.jsx(ZX,{})})}),l.jsx(Qe,{path:"/results",element:l.jsx(_u,{children:l.jsx("div",{className:"flex flex-col min-h-screen",children:l.jsx(sye,{})})})}),l.jsxs(Qe,{path:"/teacher",element:l.jsx(Vye,{children:l.jsx(Mye,{})}),children:[l.jsx(Qe,{index:!0,element:l.jsx(Oye,{})}),l.jsx(Qe,{path:"classes",element:l.jsx(Iye,{})}),l.jsx(Qe,{path:"students",element:l.jsx(Dye,{})}),l.jsx(Qe,{path:"view/:teacherId",element:l.jsx(Rye,{})}),l.jsx(Qe,{path:"class/:classId",element:l.jsx(GD,{})}),l.jsx(Qe,{path:"class/:classId/assignments",element:l.jsx(GD,{})}),l.jsx(Qe,{path:"class/:classId/create-assignment",element:l.jsx(Pye,{})})]}),l.jsx(Qe,{path:"/student/classroom",element:l.jsx(_u,{children:l.jsx(Lye,{})})}),l.jsx(Qe,{path:"/student/class/:classId",element:l.jsx(_u,{children:l.jsx(zye,{})})}),l.jsx(Qe,{path:"/student/assignment/:assignmentId",element:l.jsx(_u,{children:l.jsx(Uye,{})})}),l.jsx(Qe,{path:"/language-lab",element:l.jsx("div",{className:"flex flex-col min-h-screen",children:l.jsx(uye,{onHome:()=>t("/")})})}),l.jsx(Qe,{path:"*",element:l.jsx(Ko,{to:"/"})})]})}),!n&&l.jsx(xye,{})]})},Fye=()=>l.jsxs(G$,{children:[l.jsx(Bye,{}),l.jsx(yye,{})]}),R8=document.getElementById("root");if(!R8)throw new Error("Could not find root element to mount to");const qye=jV.createRoot(R8);qye.render(l.jsx(Bh.StrictMode,{children:l.jsx(Fye,{})}));export{Ny as _,Gye as c,Xi as g};
